{"version":3,"sources":["theme.ts","components/AppLayout.tsx","types/websocket.types.ts","api/client.tsx","api/player-provider.tsx","images/spinner.svg","components/Loading.tsx","utils/json.ts","hooks/useSafeMounted.ts","hooks/useWebsocket.tsx","hooks/WebsocketProvider.tsx","hooks/PlayerProvider.tsx","hooks/useRoomStates.tsx","hooks/RoomProvider.tsx","components/SpinnerIcon.tsx","components/BigButton.tsx","components/room/PlayerCount.tsx","images/holydraw-logo.svg","components/HolyDrawLogo.tsx","components/BigInput.tsx","styles/colors.ts","components/room/lobby/PlayerCard.tsx","images/profiles/pp-1.png","images/profiles/profiles-pictures.ts","images/profiles/pp-2.png","images/profiles/pp-3.png","images/profiles/pp-4.png","images/profiles/pp-5.png","images/profiles/pp-6.png","images/profiles/pp-7.png","images/profiles/pp-8.png","components/room/lobby/PlayerCardList.tsx","hooks/useTimerInterval.ts","components/room/StepTimer.tsx","components/room/DirectiveLabel.tsx","components/home/PlayerAvatar.tsx","components/room/draw/DrawColorPicker.tsx","components/room/draw/SizePicker.tsx","components/room/lobby/ShareRoomButton.tsx","utils/clipboard.ts","components/room/book/BookPlayerAvatar.tsx","components/room/book/BookPlayerList.tsx","components/home/ButtonModalJoin.tsx","components/canvas/DrawingCanvasContext.tsx","components/canvas/DrawingCanvas.tsx","components/room/lobby/StartButton.tsx","components/room/StepProgress.tsx","components/room/book/BookSentenceElement.tsx","images/gym-guy.svg","components/room/CurrentDrawImage.tsx","components/room/book/BookDrawingElement.tsx","types/canvas.types.ts","utils/canvas.utils.ts","components/canvas/useCanvasPaint.tsx","components/canvas/DrawingCanvasProvider.tsx","components/canvas/useCanvasEventListener.tsx","utils/utils.ts","components/canvas/DrawingCanvasActions.tsx","pages/ComponentTest.tsx","pages/DevNav.tsx","hooks/useRandomUsername.tsx","types/HolyElement.type.ts","types/Session.type.ts","components/home/PlayerForm.tsx","pages/Home.tsx","pages/room/Book.tsx","hooks/useSessionStates.tsx","hooks/SessionProvider.tsx","components/GameBar.tsx","components/room/GameLayout.tsx","components/room/draw/CanvasActionButtons.tsx","components/room/draw/GameCanvas.tsx","pages/room/Draw.tsx","components/room/lobby/LobbyStartAction.tsx","components/room/lobby/Players.tsx","components/room/lobby/SettingsMenu.tsx","pages/room/Lobby.tsx","hooks/useRandomSentence.tsx","components/room/start/SentenceForm.tsx","pages/room/Start.tsx","pages/room/Write.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["palette","theme","createPalette","type","primary","main","secondary","background","default","paper","createMuiTheme","typography","h1","fontSize","fontFamily","h4","fontWeight","h5","subtitle1","subtitle2","body1","body2","join","spacing","overrides","MuiButton","label","textOverflow","whiteSpace","overflow","root","textTransform","padding","borderRadius","contained","height","color","common","white","backgroundColor","divider","boxShadow","fade","position","action","hover","top","iconSizeLarge","marginLeft","containedSizeLarge","responsiveFontSizes","useStyles","makeStyles","gameBox","borderLeft","borderRight","container","minHeight","maxWidth","breakpoints","values","lg","AppLayout","children","classes","Container","className","Box","bgcolor","display","margin","width","minWidth","WsStates","WebsocketEvent","SendMessageType","apiURL","process","client","endpoint","a","data","method","token","customHeaders","headers","customConfig","config","body","JSON","stringify","Authorization","Accept","window","fetch","then","response","status","Promise","reject","message","json","ok","playerTokenKey","getToken","localStorage","getItem","setToken","setItem","Loading","justifyContent","alignItems","src","Spinner","alt","parseJson","text","init","parse","e","useSafeMounted","dispatch","mounted","React","useRef","useLayoutEffect","current","useCallback","url","exec","WebsocketContext","createContext","wsState","IDLE","WebsocketProvider","useState","websocket","setWebsocket","setWsState","enqueueSnackbar","useSnackbar","onCloseCallback","isSocketOpened","CLOSED","variant","undefined","safeOnClose","connect","socket","WebSocket","CONNECTING","onopen","send","Authentication","playerToken","CONNECTED","onclose","useEffect","close","useWebsocket","Provider","value","useWebsocketContext","context","useContext","Error","PlayerContext","PlayerContextProvider","player","setPlayer","history","useHistory","onMessage","event","websocketMessage","websocketEvent","NewOwnerPlayer","id","prev","isOwner","addEventListener","removeEventListener","deleted","push","usePlayerContext","useRoomStates","room","setRoom","players","setPlayers","updateRoom","roomId","updatePlayer","removePlayer","playerId","removeItem","prevPlayers","playerIndex","findIndex","p","playersCopy","splice","addPlayer","find","RoomContext","RoomContextProvider","Invalid","error","PlayerJoin","PlayerLeft","SessionStart","PlayerKicked","useRoomContext","spin","animation","transform","SpinnerIcon","props","style","aria-label","clsx","BigButton","loading","onClick","Button","PlayerCount","count","max","py","Typography","logo","textAlign","down","HolyDrawLogo","HolyDrawImage","input","border","up","disabled","cursor","transition","focus","shadows","icon","marginRight","BigInput","startIcon","setFocus","cloneElement","onFocus","onBlur","avatar","badge","bottom","left","zIndex","badgeIcon","username","kickButton","PlayerCard","name","isKickable","isCurrentPlayer","onKick","borderColor","data-testid","Avatar","component","profilesPictures","PlayerCardList","Grid","map","isPlayerSelected","item","xs","Number","avatarUrl","updateProgress","finishAt","timeDuration","progress","Math","round","getTime","Date","StepTimer","onFinish","setProgress","timerInterval","setTimerInterval","interval","setInterval","clearInterval","useTimerInterval","useTheme","matches","useMediaQuery","CircularProgress","size","thickness","sentence","DirectiveLabel","directive","flexDirection","button","outline","imgBox","img","PlayerAvatar","image","onShuffle","DrawColorPicker","colors","currentColor","onColorChange","coupleColors","useMemo","reduce","accumulator","colorCouples","result","index","length","getCoupleColors","gridGap","couple","squareColor","isSelected","buttonSizes","SizePicker","currentSize","onSizeChange","i","isCurrentSize","SizePickerPoint","ShareRoomButton","identifier","tempInput","document","createElement","appendChild","select","execCommand","removeChild","copyToClipboard","location","origin","useAvatarStyles","BookPlayerAvatar","overflowX","BookPlayerList","isDeviceSM","Tooltip","title","placement","sm","ModalJoin","urlIdentifier","open","setOpen","setIdentifier","Dialog","fullWidth","onClose","DialogTitle","DialogContent","TextField","autoFocus","onChange","target","DialogActions","DrawingCanvasContext","useCanvasContext","canvas","canvasBox","DrawingCanvas","canvasRef","ref","StartButton","onStart","m","mt","CustomLinearProgress","withStyles","createStyles","colorPrimary","bar","LinearProgress","StepProgress","stepActual","stepMax","percentage","stepPercentage","borderTop","dark","BookSentenceElement","ml","mr","CurrentDrawImage","LineType","BookDrawingElement","clearDraw","getContext","clearRect","drawCanvasLine","ctx","beginPosition","controlPosition","endPosition","line","strokeStyle","lineJoin","lineCap","lineWidth","beginPath","LINE","moveTo","x","y","quadraticCurveTo","stroke","closePath","getQuadraticCurveCoordinates","positions","slice","lastPoint","prevPoint","controlPoint","endPoint","getCoordinates","canvasScale","pageX","offsetLeft","pageY","offsetTop","useCanvasPaint","scale","mouseCoordinate","lines","deletedLines","getLastLine","addLastLine","coordinate","points","paint","newMousePosition","lastLine","create","isNewLine","refresh","forEach","currentPosition","positionCopy","rerenderDraw","undo","deletedLine","pop","redo","redoLine","clear","confirm","onKeyDown","keyCode","ctrlKey","metaKey","canvasWidth","lineScale","DrawingCanvasProvider","lineSize","canvasSize","isPainting","setIsPainting","onMouseDown","coordinates","onMouseUp","onMouseEnter","onMouseMove","touchMove","mouseEvent","MouseEvent","clientX","touches","clientY","touchStart","useCanvasEventListener","callAll","fns","args","fn","getRandomValueFromArray","possibilities","floor","random","OnClearAction","OnUndoAction","OnRedoAction","OnSaveAction","onSave","toDataURL","md","ComponentTest","ppIndex","setPpIndex","setColor","mobileCanvas","setMobileCanvas","setDisabled","setSize","nextPp","FormControlLabel","control","Switch","checked","IconButton","canvasImage","win","write","GymGuy","testPlayerList","Slider","defaultValue","newValue","aria-labelledby","valueLabelDisplay","step","min","DevNav","NavLink","to","usernames","ElementType","SessionStepType","marginBottom","buttonContainer","PlayerForm","setUsername","setLoading","defaultUsername","onConnect","placeholder","String","tokenKey","finally","Home","match","params","Book","album","setAlbum","catch","alert","element","Sentence","creator","drawImage","useSessionStates","session","setSession","pathname","newPathname","stepType","Start","Write","Draw","SessionContext","SessionContextProvider","currentElement","setCurrentElement","SessionUpdate","actualStep","content","elementId","elementContent","Drawing","drawimage","useSessionContext","GameBar","flexWrap","px","playerFinished","totalPlayers","stepFinishAt","GameLayout","StepProgressWithContext","CanvasActionButtons","GameCanvas","isEditing","Boolean","CurrentDirectiveLabel","order","parent","LobbyStartAction","Players","kickPlayer","PlayerCountBox","pr","SettingsMenu","pl","playersContainer","gap","Lobby","mb","sentences","StartForm","setSentence","defaultSentence","direction","wrap","justify","CurrentDrawImageWithContext","Router","HashRouter","Routes","path","RoomRoutes","SessionRoutes","App","anchorOrigin","vertical","horizontal","preventDuplicate","maxSnack","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.56bc8070.chunk.js","sourcesContent":["import { responsiveFontSizes, createMuiTheme, fade } from '@material-ui/core';\nimport createPalette, { Palette } from '@material-ui/core/styles/createPalette';\n\nexport const PRIMARY = '#9c27b0';\nexport const SECONDARY = '#880061';\n\nfunction createBaseTheme(palette: Palette) {\n  return createMuiTheme({\n    palette: palette,\n    typography: {\n      h1: {\n        fontSize: 64,\n        fontFamily: 'Modak',\n      },\n      h4: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 32,\n      },\n      h5: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        fontFamily: 'Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI',\n      },\n      subtitle1: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 16,\n      },\n      subtitle2: {\n        fontSize: 12,\n      },\n      body1: {\n        fontSize: 16,\n      },\n      body2: {\n        fontSize: 14,\n      },\n      fontFamily: [\n        '-apple-system',\n        'BlinkMacSystemFont',\n        'Segoe UI',\n        'Roboto',\n        'Oxygen',\n        'Ubuntu',\n        'Cantarell',\n        'Open Sans',\n        'Helvetica Neue',\n        'sans-serif',\n      ].join(','),\n    },\n    spacing: 8,\n    overrides: {\n      MuiButton: {\n        label: {\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n          overflow: 'hidden',\n        },\n        root: {\n          textTransform: 'none',\n          padding: '4px 8px',\n          borderRadius: 6,\n        },\n        contained: {\n          height: 42,\n          fontSize: 16,\n          color: palette.common.white,\n          fontFamily: 'Work Sans',\n          backgroundColor: palette.divider,\n          boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          position: 'relative',\n          '&:hover': {\n            backgroundColor: palette.action.hover,\n\n            boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          },\n          '&:focus': {\n            boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          },\n          '&:active': {\n            top: 8,\n            boxShadow: 'none',\n          },\n        },\n        iconSizeLarge: {\n          marginLeft: 0,\n        },\n        containedSizeLarge: {\n          height: 58,\n          padding: '8px 16px',\n          fontSize: 32,\n        },\n      },\n    },\n  });\n}\n\nlet theme = createBaseTheme(\n  createPalette({\n    type: 'dark',\n    primary: {\n      main: PRIMARY,\n    },\n    secondary: {\n      main: SECONDARY,\n    },\n    background: {\n      default: '#0f131a',\n      paper: '#1a1d24',\n    },\n  }),\n);\n\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import { Box, Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\n\ntype AppLayoutProps = {\n  children?: React.ReactElement | React.ReactElement[];\n};\n\nconst useStyles = makeStyles(theme => ({\n  gameBox: {\n    borderLeft: `1px solid ${theme.palette.secondary.main}`,\n    borderRight: `1px solid ${theme.palette.secondary.main}`,\n  },\n  container: {\n    padding: 0,\n    minHeight: '100vh',\n    maxWidth: `calc(${theme.breakpoints.values.lg}px - 128px)`,\n  },\n}));\n\nexport default function AppLayout({ children }: AppLayoutProps) {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container} maxWidth=\"lg\">\n      <Box\n        bgcolor=\"background.paper\"\n        display=\"block\"\n        margin=\"auto\"\n        height=\"100%\"\n        minHeight=\"100vh\"\n        width=\"100%\"\n        minWidth={320}\n        className={classes.gameBox}>\n        {children}\n      </Box>\n    </Container>\n  );\n}\n","import { SessionState } from 'node:http2';\nimport Player from 'types/Player.type';\n\nexport enum WsStates {\n  IDLE = 'Loading...',\n  CONNECTING = 'You will be connected',\n  CONNECTED = 'You are connected',\n  CLOSED = \"You're disconnected\",\n}\n\nexport enum WebsocketEvent {\n  Invalid = -1,\n  PlayerJoin = 1,\n  PlayerLeft = 2,\n  PlayerFinished = 3,\n  NewOwnerPlayer = 4,\n  PlayerKicked = 5,\n  SessionStart = 11,\n  SessionUpdate = 12,\n  NextStep = 13, // on a step is finish\n}\n\nexport enum SendMessageType {\n  Authentication = 1,\n}\n\nexport type WebsocketMessage = {\n  websocketEvent: WebsocketEvent;\n  player?: Player;\n  playerId?: number;\n  session?: Partial<SessionState>;\n  error?: string;\n};\n","import { testApiUrl } from '../test/data';\n\nexport const apiURL: string =\n  (process.env.NODE_ENV === 'production'\n    ? process.env.REACT_APP_PROD_API_URL\n    : process.env.NODE_ENV === 'development'\n    ? process.env.REACT_APP_API_URL\n    : testApiUrl) || '';\n\ntype config = {\n  data?: any;\n  token?: string | null;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'OPTIONS' | 'PATCH';\n  headers?: HeadersInit;\n  // if you want all possibility of `fetch`\n  customConfig?: RequestInit;\n};\n\n/*\n  To call the api.\n\n  To `get` an item\n  client(\"item\") OR client(\"item\", {method: \"GET\"}).then(resultJson => ...)\n  But it's \"GET\" by default if no data.\n\n  If you want `POST` an item, you need to provide data.\n  If Data was provided, default method is `POST`\n  client(\"item\", {data: myObject}).then(resultJson => ...).catch(error => ...)\n\n  To `patch` an item\n  client(\"item/1\", {method: \"PATCH\"}).then(resultJson => ...).catch(error => ...)\n  \n  To provide a Token :\n  client(\"item/1\", {method: \"PATCH\", token: \"MYTOKEN\"}).then(resultJson => ..., error => ...)\n\n  Same for post etc...\n\n  You can see exemple in `client.test.tsx`\n*/\nasync function client<T>(\n  endpoint: string,\n  { data, method, token, headers: customHeaders, customConfig }: config = {},\n): Promise<T> {\n  const config: RequestInit = {\n    method: method || (data ? 'POST' : 'GET'),\n    body: data ? JSON.stringify(data) : null,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : '',\n      'Content-Type': data ? 'application/json' : '',\n      Accept: 'application/json',\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n\n  return window.fetch(`${apiURL}/${endpoint}`, config).then(async response => {\n    // statusCode \"401\" is for unauthenticated request\n    if (response.status === 401) {\n      return Promise.reject({ message: 'Please re-authenticate.' });\n    }\n\n    const data = await response.json();\n    if (response.ok) {\n      return data;\n    } else {\n      return Promise.reject(data);\n    }\n  });\n}\n\nexport { client };\n","const playerTokenKey = '__player_provider_token__';\n\nfunction getToken() {\n  // TODO: check the token exist in the API\n  return window.localStorage.getItem(playerTokenKey);\n}\n\nfunction destroy() {\n  window.localStorage.removeItem(playerTokenKey);\n  // TODO: invalidate the token in API\n}\n\nfunction setToken(token: string) {\n  window.localStorage.setItem(playerTokenKey, token);\n  // TODO: invalidate the token in API\n}\n\nexport { getToken, destroy, setToken };\n","export default __webpack_public_path__ + \"static/media/spinner.efdf2d72.svg\";","import { Box } from '@material-ui/core';\nimport Spinner from '../images/spinner.svg';\n\nexport default function Loading() {\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n      <img src={Spinner} alt=\"loading\" />\n    </Box>\n  );\n}\n","export function parseJson<T>(text: string, init?: T): T | undefined {\n  let json: T;\n\n  try {\n    json = JSON.parse(text);\n  } catch (e) {\n    return init;\n  }\n\n  return json ? json : init;\n}\n","import React from 'react';\n\n/*\n * return function will be only called if component is currently mounted\n */\nfunction useSafeMounted(dispatch: (...args: any[]) => any) {\n  const mounted = React.useRef(false);\n\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  return React.useCallback(\n    (...args: unknown[]) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch],\n  );\n}\n\nexport default useSafeMounted;\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { getToken } from '../api/player-provider';\nimport useSafeMounted from 'hooks/useSafeMounted';\nimport { SendMessageType, WsStates } from 'types/websocket.types';\nimport { apiURL } from 'api/client';\n\nconst domainRegExp = /\\b(?:(?:https?|ftp):\\/\\/)?([^/\\n]+)\\/?/;\nconst url = `wss://${domainRegExp.exec(apiURL)?.[1]}/api/stream`;\n\nexport function useWebsocket() {\n  const [websocket, setWebsocket] = React.useState<WebSocket>();\n  const [wsState, setWsState] = React.useState<WsStates>(WsStates.IDLE);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const onCloseCallback = React.useCallback(\n    (isSocketOpened: boolean) => {\n      setWsState(WsStates.CLOSED);\n      if (isSocketOpened) {\n        enqueueSnackbar('Connexion lost ⚡️ [ws]', { variant: 'error' });\n        setWebsocket(undefined);\n      }\n    },\n    [enqueueSnackbar],\n  );\n  const safeOnClose = useSafeMounted(onCloseCallback);\n\n  const connect = React.useCallback(() => {\n    const socket = new WebSocket(url);\n    let isSocketOpened = false;\n    setWsState(WsStates.CONNECTING);\n    setWebsocket(socket);\n\n    socket.onopen = function () {\n      isSocketOpened = true;\n      // identifie the request\n      socket.send(\n        JSON.stringify({\n          type: SendMessageType.Authentication,\n          playerToken: getToken(),\n        }),\n      );\n      setWsState(WsStates.CONNECTED);\n    };\n\n    socket.onclose = function () {\n      safeOnClose(isSocketOpened);\n    };\n  }, [safeOnClose]);\n\n  React.useEffect(() => {\n    if (websocket) {\n      return () => websocket.close();\n    }\n    connect();\n  }, [connect, websocket]);\n\n  return { wsState, websocket };\n}\n","import React from 'react';\nimport { WsStates } from 'types/websocket.types';\nimport { useWebsocket } from './useWebsocket';\n\ntype WebsocketContextProps = {\n  wsState: WsStates;\n  websocket?: WebSocket;\n};\n\nconst WebsocketContext = React.createContext<WebsocketContextProps>({\n  wsState: WsStates.IDLE,\n});\n\ntype WebsocketContextProviderProps = { children: React.ReactElement };\n\nexport function WebsocketProvider({ children }: WebsocketContextProviderProps) {\n  const { wsState, websocket } = useWebsocket();\n\n  const values = { wsState, websocket };\n\n  return (\n    <WebsocketContext.Provider value={values}>\n      {children}\n    </WebsocketContext.Provider>\n  );\n}\n\nexport function useWebsocketContext() {\n  const context = React.useContext(WebsocketContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Loading from '../components/Loading';\nimport Player from '../types/Player.type';\nimport { parseJson } from '../utils/json';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype PlayerContextProps = {\n  player?: Player;\n};\n\nconst PlayerContext = React.createContext<PlayerContextProps>({});\n\ntype PlayerContextProviderProps = { children: React.ReactElement };\n\nexport function PlayerContextProvider({\n  children,\n}: PlayerContextProviderProps) {\n  const [player, setPlayer] = React.useState<Player>();\n  const { enqueueSnackbar } = useSnackbar();\n  const { websocket } = useWebsocketContext();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewOwnerPlayer:\n          if (websocketMessage?.player?.id === player?.id) {\n            setPlayer(prev => (prev ? { ...prev, isOwner: true } : prev));\n          }\n          break;\n      }\n    }\n    if (websocket && player) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [player, websocket]);\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Player>('player/me', { token: getToken() }).then(\n      player => !deleted && setPlayer(player),\n      () => {\n        enqueueSnackbar(\"You haven't joined a game yet.\", { variant: 'error' });\n        history.push('/home');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  const values = { player };\n\n  return (\n    <PlayerContext.Provider value={values}>\n      {player ? children : <Loading />}\n    </PlayerContext.Provider>\n  );\n}\n\nexport function usePlayerContext() {\n  const context = React.useContext(PlayerContext);\n  if (!context)\n    throw new Error(\n      'usePlayerContext should be used within a PlayerContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from '../api/client';\nimport { destroy, getToken } from '../api/player-provider';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { usePlayerContext } from './PlayerProvider';\n\nexport function useRoomStates() {\n  const [room, setRoom] = React.useState<Room>();\n  const [players, setPlayers] = React.useState<Player[]>([]);\n  const { player } = usePlayerContext();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateRoom = React.useCallback(() => {\n    client<Room>(`room/${player?.roomId}`, { token: getToken() }).then(setRoom);\n  }, [player?.roomId]);\n\n  const updatePlayer = React.useCallback(() => {\n    client<Player[]>(`room/${player?.roomId}/players`, {\n      token: getToken(),\n    }).then(setPlayers);\n  }, [player?.roomId]);\n\n  const removePlayer = React.useCallback(\n    (playerId?: number) => {\n      if (!playerId) return;\n      if (playerId === player?.id) {\n        history.push('/home');\n        destroy();\n        enqueueSnackbar(\"Seems like you've been kicked from the room 😅\", {\n          variant: 'info',\n        });\n      }\n      setPlayers(prevPlayers => {\n        const playerIndex = prevPlayers?.findIndex(p => p.id === playerId);\n        if (playerIndex !== -1) {\n          const playersCopy = [...prevPlayers];\n          playersCopy.splice(playerIndex, 1);\n          return playersCopy;\n        }\n        return prevPlayers;\n      });\n    },\n    [enqueueSnackbar, history, player?.id],\n  );\n\n  const addPlayer = React.useCallback((player?: Player) => {\n    if (!player) return;\n\n    setPlayers(prevPlayers => {\n      if (prevPlayers.find(p => p.id === player.id)) return prevPlayers;\n      return [...prevPlayers, player];\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (!player?.roomId) {\n      history.push('/home');\n      return;\n    }\n    updateRoom();\n    updatePlayer();\n  }, [history, player?.roomId, updatePlayer, updateRoom]);\n\n  return { updatePlayer, updateRoom, removePlayer, addPlayer, room, players };\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { parseJson } from '../utils/json';\nimport { useRoomStates } from './useRoomStates';\nimport {\n  WebsocketMessage,\n  WebsocketEvent,\n  WsStates,\n} from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype RoomSocketContextProps = {\n  room?: Room;\n  wsState: WsStates;\n  players: Player[];\n};\n\nconst RoomContext = React.createContext<RoomSocketContextProps>({\n  wsState: WsStates.IDLE,\n  players: [],\n});\n\ntype RoomSocketContextProviderProps = { children: React.ReactElement };\n\nexport function RoomContextProvider({\n  children,\n}: RoomSocketContextProviderProps) {\n  const {\n    room,\n    players,\n    updatePlayer,\n    removePlayer,\n    addPlayer,\n  } = useRoomStates();\n  const history = useHistory();\n  const { wsState, websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const message = event.data;\n      const websocketMessage = parseJson<WebsocketMessage>(message);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.Invalid:\n          enqueueSnackbar(websocketMessage.error, { variant: 'error' });\n          history.push('/home');\n          break;\n        case WebsocketEvent.PlayerJoin:\n          addPlayer(websocketMessage.player);\n          break;\n        case WebsocketEvent.PlayerLeft:\n          removePlayer(websocketMessage.playerId);\n          break;\n        case WebsocketEvent.NewOwnerPlayer:\n          updatePlayer();\n          break;\n        case WebsocketEvent.SessionStart:\n          history?.push('/r/start');\n          break;\n        case WebsocketEvent.PlayerKicked:\n          removePlayer(websocketMessage.playerId);\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [\n    addPlayer,\n    enqueueSnackbar,\n    history,\n    removePlayer,\n    updatePlayer,\n    websocket,\n  ]);\n\n  const values = { room, wsState, players };\n\n  return <RoomContext.Provider value={values}>{children}</RoomContext.Provider>;\n}\n\nexport function useRoomContext() {\n  const context = React.useContext(RoomContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport LoopIcon from '@material-ui/icons/Loop';\n\nconst useStyles = makeStyles(() => ({\n  spin: {\n    animation: `spinnerIconEffect 1s linear infinite`,\n  },\n  '@global': {\n    '@keyframes spinnerIconEffect': {\n      '0%': { transform: 'rotate(0deg)' },\n      '100%': { transform: 'rotate(-360deg)' },\n    },\n  },\n}));\n\nexport default function SpinnerIcon(props: {\n  className?: string;\n  style?: any;\n}) {\n  const classes = useStyles();\n  return (\n    <LoopIcon\n      style={props.style}\n      aria-label=\"spinner icon\"\n      className={clsx(props.className, classes.spin)}\n    />\n  );\n}\n","import React from 'react';\nimport { Button, ButtonProps } from '@material-ui/core';\nimport SpinnerIcon from './SpinnerIcon';\n\ntype BigButtonProps = ButtonProps & {\n  children?: React.ReactNode;\n  loading?: boolean;\n  onClick?: () => void;\n};\n\nexport default function BigButton({\n  children,\n  loading,\n  onClick,\n  ...props\n}: BigButtonProps) {\n  return (\n    <Button onClick={onClick} variant=\"contained\" color=\"secondary\" {...props}>\n      {loading ? <SpinnerIcon /> : children}\n    </Button>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\n\ntype PlayerCountProps = {\n  count: number;\n  max: number;\n};\n\nexport default function PlayerCount({ count, max }: PlayerCountProps) {\n  return (\n    <Box py={1}>\n      <Typography variant=\"subtitle1\">\n        {count}/{max}\n      </Typography>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/holydraw-logo.78893378.svg\";","import { makeStyles, Theme } from '@material-ui/core';\nimport HolyDrawImage from 'images/holydraw-logo.svg';\n\nconst useStyles = makeStyles<Theme, { width: number }>(theme => ({\n  logo: {\n    textAlign: 'center',\n    width: props => props.width * 8,\n    height: 'auto',\n    [theme.breakpoints.down('xs')]: {\n      width: props => ((props.width * 8) / 3) * 2,\n    },\n  },\n}));\n\nexport default function HolyDrawLogo({ width = 24 }: { width?: number }) {\n  const classes = useStyles({ width });\n  return (\n    <img src={HolyDrawImage} className={classes.logo} alt=\"holy draw logo\" />\n  );\n}\n","import React, { InputHTMLAttributes } from 'react';\nimport { fade, makeStyles, Theme } from '@material-ui/core';\n\ntype StylesProps = {\n  focus: boolean;\n  disabled?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, StylesProps>(theme => ({\n  input: {\n    backgroundColor: 'inherit',\n    border: 'none',\n    width: '100%',\n    fontSize: 24,\n    height: 34,\n    fontFamily: 'Work Sans',\n    color: theme.palette.text.primary,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 32,\n      height: 36,\n    },\n    '&:disabled': {\n      color: theme.palette.text.disabled,\n    },\n  },\n  container: {\n    display: 'flex',\n    backgroundColor: props =>\n      props.disabled\n        ? fade(theme.palette.background.default, 0.4)\n        : theme.palette.background.default,\n    cursor: props => (props.disabled ? 'not-allowed' : 'pointer'),\n    border: props =>\n      props.disabled\n        ? `1px solid ${fade(theme.palette.secondary.main, 0.6)}`\n        : `1px solid ${theme.palette.secondary.main}`,\n    borderRadius: 4,\n    alignItems: 'center',\n    transition: 'box-shadow ease-in .2s',\n    padding: '4px 0 4px 8px',\n    [theme.breakpoints.up('sm')]: {\n      padding: '8px 4px 8px 16px',\n    },\n    boxShadow: props =>\n      props.focus\n        ? `0 0 2px 0.2rem ${fade(theme.palette.secondary.main, 0.4)}`\n        : theme.shadows[2],\n  },\n  icon: {\n    width: 32,\n    height: 32,\n    marginRight: theme.spacing(1.5),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n    },\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n}));\n\ntype BigInputProps = InputHTMLAttributes<HTMLInputElement> & {\n  startIcon?: React.ReactElement;\n};\n\nexport default function BigInput({\n  disabled,\n  startIcon,\n  ...props\n}: BigInputProps) {\n  const [focus, setFocus] = React.useState(false);\n  const classes = useStyles({ disabled, focus });\n\n  return (\n    <div className={classes.container}>\n      {startIcon &&\n        React.cloneElement(startIcon, {\n          className: classes.icon,\n          'data-testid': 'biginput-icon',\n        })}\n      <input\n        className={classes.input}\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n        disabled={disabled}\n        {...props}\n      />\n    </div>\n  );\n}\n","export const baseColor = '#880061';\nexport const bgColor = '#0F131A';\nexport const paperColor = '#1A1D24';\nexport const disabledText = '#BDBDBD';\nexport const secondaryText = '#E0E0E0';\nexport const primaryText = '#F2F2F2';\n\nexport const primaryFade = (fade: number) => `rgba(136, 0, 97, ${fade})`;\nexport const bgFade = (fade: number) => `rgba(15, 19, 26, ${fade})`;\n","import { baseColor, bgColor } from 'styles/colors';\nimport { Avatar, Box, makeStyles, Typography } from '@material-ui/core';\nimport PersonIcon from '@material-ui/icons/Person';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport clsx from 'clsx';\n\ntype PlayerCardProps = {\n  id: number;\n  name: string;\n  avatar: string;\n  isOwner?: boolean;\n  isKickable?: boolean;\n  isCurrentPlayer?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 48,\n    height: 48,\n    backgroundColor: 'transparent',\n    border: `1px solid ${theme.palette.secondary.main}`,\n    overflow: 'visible',\n    '&> img': {\n      height: 48,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: baseColor,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  icon: {\n    color: '#ffffff',\n  },\n  badgeIcon: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontFamily: 'Work Sans',\n    fontSize: 20,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    maxWidth: 128,\n    whiteSpace: 'nowrap',\n  },\n  kickButton: {\n    cursor: 'pointer',\n  },\n}));\n\nexport default function PlayerCard({\n  id,\n  name,\n  avatar,\n  isOwner,\n  isKickable,\n  isCurrentPlayer,\n  onKick,\n}: PlayerCardProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      border={1}\n      width={256}\n      height={64}\n      borderRadius={4}\n      padding={1}\n      display=\"flex\"\n      alignItems=\"center\"\n      borderColor=\"secondary.main\"\n      justifyContent=\"space-between\"\n      bgcolor={bgColor}>\n      <Box position=\"relative\">\n        {isCurrentPlayer && (\n          <div className={classes.badge}>\n            <PersonIcon\n              className={clsx(classes.icon, classes.badgeIcon)}\n              data-testid=\"user-icon\"\n            />\n          </div>\n        )}\n        <Avatar src={avatar} className={classes.avatar} />\n      </Box>\n\n      <Typography color=\"textPrimary\" className={classes.username}>\n        {name}\n      </Typography>\n      <Box display=\"flex\" alignItems=\"center\">\n        {isOwner ? (\n          <StarIcon className={classes.icon} data-testid=\"star-icon\" />\n        ) : (\n          isKickable && (\n            <Box\n              component=\"button\"\n              padding={0}\n              border={0}\n              className={classes.kickButton}\n              height={24}\n              onClick={() => onKick?.(id, name)}\n              bgcolor=\"transparent\">\n              <CloseIcon className={classes.icon} />\n            </Box>\n          )\n        )}\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/pp-1.acb77223.png\";","import Pp1 from './pp-1.png';\nimport Pp2 from './pp-2.png';\nimport Pp3 from './pp-3.png';\nimport Pp4 from './pp-4.png';\nimport Pp5 from './pp-5.png';\nimport Pp6 from './pp-6.png';\nimport Pp7 from './pp-7.png';\nimport Pp8 from './pp-8.png';\n\nconst profilesPictures = [Pp1, Pp2, Pp3, Pp4, Pp5, Pp6, Pp7, Pp8];\n\nexport default profilesPictures;\n","export default __webpack_public_path__ + \"static/media/pp-2.c82c2211.png\";","export default __webpack_public_path__ + \"static/media/pp-3.9c11a583.png\";","export default __webpack_public_path__ + \"static/media/pp-4.5ae6cc4a.png\";","export default __webpack_public_path__ + \"static/media/pp-5.d5627fd6.png\";","export default __webpack_public_path__ + \"static/media/pp-6.228ed3be.png\";","export default __webpack_public_path__ + \"static/media/pp-7.762b4b0e.png\";","export default __webpack_public_path__ + \"static/media/pp-8.7bfd9d10.png\";","import PlayerCard from './PlayerCard';\nimport Player from 'types/Player.type';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport { Box, Grid } from '@material-ui/core';\n\ntype PlayerCardListProps = {\n  players?: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nexport default function PlayerCardList({\n  players,\n  playerId,\n  isKickable,\n  onKick,\n}: PlayerCardListProps) {\n  return (\n    <Box height={384} width={256 + 8 + 8} overflow=\"hidden scroll\">\n      <Grid container spacing={2} alignItems=\"flex-end\">\n        {players &&\n          players.map(player => {\n            const isPlayerSelected = playerId === player.id;\n            return (\n              <Grid item xs={12} key={player.id}>\n                <PlayerCard\n                  id={player.id}\n                  name={player.username}\n                  avatar={profilesPictures[Number(player.avatarUrl)]}\n                  isOwner={player.isOwner}\n                  isKickable={isKickable}\n                  isCurrentPlayer={isPlayerSelected}\n                  onKick={onKick}\n                />\n              </Grid>\n            );\n          })}\n      </Grid>\n    </Box>\n  );\n}\n","import React from 'react';\n\nexport type UseTimerIntervalProps = {\n  finishAt: Date;\n  timeDuration: number;\n  onFinish?: () => void;\n};\n\nexport default function useTimerInterval({\n  finishAt,\n  timeDuration,\n  onFinish,\n}: UseTimerIntervalProps) {\n  const [progress, setProgress] = React.useState(0);\n  const [timerInterval, setTimerInterval] = React.useState<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    setProgress(updateProgress(finishAt, timeDuration));\n    const interval = setInterval(\n      () => setProgress(updateProgress(finishAt, timeDuration)),\n      1000,\n    );\n    setTimerInterval(interval);\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration]);\n\n  React.useEffect(() => {\n    if (progress >= 100) {\n      onFinish?.();\n      timerInterval && clearInterval(timerInterval);\n    }\n  }, [progress, onFinish, timerInterval]);\n\n  return { progress };\n}\n\nfunction updateProgress(finishAt: Date, timeDuration: number) {\n  const diff = Math.round((finishAt.getTime() - new Date().getTime()) / 1000);\n  const progress = 100 - (diff * 100) / timeDuration;\n  return progress > 100 ? 100 : progress;\n}\n","import React from 'react';\nimport { CircularProgress, useMediaQuery, useTheme } from '@material-ui/core';\nimport useTimerInterval, {\n  UseTimerIntervalProps,\n} from 'hooks/useTimerInterval';\n\nexport default function StepTimer(props: UseTimerIntervalProps) {\n  const { progress } = useTimerInterval(props);\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n\n  return (\n    <CircularProgress\n      size={matches ? 64 : 32}\n      thickness={4}\n      variant=\"determinate\"\n      value={progress}\n    />\n  );\n}\n","import { Box, fade, makeStyles, Typography } from '@material-ui/core';\n\ntype DirectiveLabelProps = {\n  directive: string;\n  sentence?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  sentence: {\n    textAlign: 'center',\n  },\n  container: {\n    backgroundColor: fade(theme.palette.secondary.main, 0.8),\n    boxShadow: theme.shadows[2],\n  },\n}));\n\nexport default function DirectiveLabel({\n  directive,\n  sentence,\n}: DirectiveLabelProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      width=\"100%\"\n      display=\"flex\"\n      padding={1}\n      borderRadius={4}\n      alignItems=\"center\"\n      flexDirection=\"column\"\n      className={classes.container}>\n      <Typography variant=\"subtitle1\" color=\"textSecondary\">\n        {directive}\n      </Typography>\n      {sentence && (\n        <Typography\n          variant=\"h4\"\n          color=\"textPrimary\"\n          className={classes.sentence}>\n          {sentence}\n        </Typography>\n      )}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles } from '@material-ui/core';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\n\ntype PlayerAvatarProps = {\n  image: string;\n  onShuffle?: () => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    backgroundColor: theme.palette.secondary.main,\n    outline: 'none',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    cursor: 'pointer',\n    border: 'none',\n    width: 48,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 48,\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n    '&:active': {\n      bottom: -4,\n      boxShadow: 'none',\n    },\n  },\n  imgBox: {\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n  },\n  img: {\n    height: 256,\n    width: 'auto',\n    margin: 'auto',\n  },\n}));\n\nexport default function PlayerAvatar({ image, onShuffle }: PlayerAvatarProps) {\n  const classes = useStyles();\n  return (\n    <Box alignItems=\"center\" width={256} position=\"relative\" height={256}>\n      <button className={classes.button} onClick={onShuffle}>\n        <ShuffleIcon style={{ color: '#FFFFFF' }} />\n      </button>\n      <Box\n        border={2}\n        display=\"flex\"\n        borderColor=\"secondary.main\"\n        borderRadius=\"50%\"\n        width={256}\n        height={256}\n        bgcolor=\"background.default\"\n        className={classes.imgBox}>\n        <img src={image} className={classes.img} alt=\"Avatar\" />\n      </Box>\n    </Box>\n  );\n}\n","import { primaryFade } from 'styles/colors';\nimport React from 'react';\nimport { Box } from '@material-ui/core';\n\ntype DrawColorPickerProps = {\n  colors: string[];\n  onColorChange?: (color: string) => void;\n  currentColor: string;\n  flexDirection?: 'row' | 'column';\n};\n\nfunction getCoupleColors(colors: string[]) {\n  return colors.reduce(\n    (accumulator: { index: number; result: string[][] }, value) => {\n      const colorCouples = accumulator.result[accumulator.index];\n      switch (colorCouples?.length) {\n        case undefined:\n          accumulator.result[accumulator.index] = [value];\n          break;\n        case 1:\n          accumulator.result[accumulator.index].push(value);\n          break;\n        default:\n          accumulator.index++;\n          accumulator.result[accumulator.index] = [value];\n      }\n      return accumulator;\n    },\n    { index: 0, result: [] },\n  ).result;\n}\n\nexport default function DrawColorPicker({\n  colors,\n  currentColor,\n  onColorChange,\n  flexDirection = 'column',\n}: DrawColorPickerProps) {\n  const coupleColors: string[][] = React.useMemo(\n    () => getCoupleColors(colors),\n    [colors],\n  );\n\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection={flexDirection}\n      padding=\"8px\"\n      borderRadius={4}\n      gridGap={8}\n      border={1}\n      borderColor=\"#000000\"\n      justifyContent=\"center\"\n      bgcolor={primaryFade(0.2)}>\n      {coupleColors.map((couple, index) => (\n        <Box\n          key={index}\n          display=\"flex\"\n          flexDirection={flexDirection === 'column' ? 'row' : 'column'}\n          justifyContent=\"space-between\"\n          top={248}>\n          {couple.map((squareColor, index) => {\n            const isSelected = squareColor === currentColor;\n\n            return (\n              <Box\n                component=\"button\"\n                key={index}\n                onClick={() => onColorChange?.(squareColor)}\n                border={isSelected ? 2 : 1}\n                bgcolor={squareColor}\n                borderColor={isSelected ? '#FFFFFF' : '#000000'}\n                width={32}\n                height={32}\n                borderRadius={4}\n                className=\"cursor-pointer\"\n              />\n            );\n          })}\n        </Box>\n      ))}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles, Theme, useTheme } from '@material-ui/core';\n\ntype SizePickerProps = {\n  currentSize: number;\n  onSizeChange: (size: number) => void;\n  flexDirection?: 'row' | 'column';\n};\n\nconst buttonSizes = [4, 8, 16, 20, 24, 30];\n\nexport default function SizePicker({\n  currentSize,\n  onSizeChange,\n  flexDirection = 'row',\n}: SizePickerProps) {\n  const theme = useTheme();\n  return (\n    <Box\n      padding={1}\n      gridGap={8}\n      bgcolor={fade(theme.palette.secondary.main, 0.2)}\n      display=\"flex\"\n      borderRadius={4}\n      border={1}\n      flexDirection={flexDirection}\n      borderColor=\"common.black\"\n      alignItems=\"center\"\n      boxShadow={2}>\n      {buttonSizes.map((size, i) => {\n        const isCurrentSize = currentSize === size;\n        return (\n          <SizePickerPoint\n            key={size}\n            onSizeChange={onSizeChange}\n            size={size}\n            isCurrentSize={isCurrentSize}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nconst useStyles = makeStyles<Theme, { isCurrentSize: boolean }>(theme => ({\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    border: '2px solid #000000',\n    borderRadius: '50%',\n    width: 40,\n    height: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    cursor: 'pointer',\n    boxShadow: props =>\n      props.isCurrentSize\n        ? `0 0 .2px 2px ${fade(theme.palette.secondary.main, 0.8)}`\n        : 'none',\n  },\n}));\n\nfunction SizePickerPoint({\n  onSizeChange,\n  size,\n  isCurrentSize,\n}: {\n  onSizeChange: (size: number) => void;\n  size: number;\n  isCurrentSize: boolean;\n}) {\n  const classes = useStyles({ isCurrentSize });\n  return (\n    <button onClick={() => onSizeChange(size)} className={classes.button}>\n      <Box\n        borderRadius=\"50%\"\n        border=\"1px solid #000000\"\n        bgcolor=\"#000000\"\n        width={size}\n        height={size}\n      />\n    </button>\n  );\n}\n","import { copyToClipboard } from 'utils/clipboard';\nimport { Button } from '@material-ui/core';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useSnackbar } from 'notistack';\n\ntype ShareRoomButtonProps = {\n  identifier?: string;\n};\n\nexport default function ShareRoomButton({ identifier }: ShareRoomButtonProps) {\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onShared() {\n    if (identifier) {\n      copyToClipboard(`${window.location.origin}/join/${identifier}`);\n      enqueueSnackbar('URL successfully copied 😎', { variant: 'success' });\n    }\n  }\n  return (\n    <Button\n      startIcon={<VpnKeyIcon style={{ fontSize: 32 }} />}\n      onClick={onShared}\n      size=\"large\"\n      variant=\"contained\">\n      {identifier || 'loading...'}\n    </Button>\n  );\n}\n","export function copyToClipboard(value: string) {\n  const tempInput = document.createElement('input');\n  tempInput.value = value;\n  document.body.appendChild(tempInput);\n  tempInput.select();\n  document.execCommand('copy');\n  document.body.removeChild(tempInput);\n}\n","import { Avatar, fade, makeStyles, Theme } from '@material-ui/core';\nimport profilesPictures from 'images/profiles/profiles-pictures';\n\nconst useAvatarStyles = makeStyles<Theme, { isSelected: boolean }>(theme => ({\n  avatar: {\n    height: 64,\n    width: 64,\n    overflow: 'visible',\n    backgroundColor: props =>\n      props.isSelected\n        ? fade(theme.palette.secondary.main, 0.6)\n        : fade(theme.palette.secondary.main, 0.2),\n    [theme.breakpoints.up('sm')]: {\n      height: 40,\n      width: 40,\n    },\n    '&> img': {\n      height: 64,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n      [theme.breakpoints.up('sm')]: {\n        height: 40,\n      },\n    },\n  },\n}));\n\nexport default function BookPlayerAvatar({\n  avatarUrl,\n  isSelected,\n}: {\n  avatarUrl: string;\n  isSelected: boolean;\n}) {\n  const classes = useAvatarStyles({ isSelected });\n  return (\n    <Avatar\n      className={classes.avatar}\n      src={profilesPictures[Number(avatarUrl)]}\n    />\n  );\n}\n","import Player from 'types/Player.type';\nimport {\n  Box,\n  makeStyles,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BookPlayerAvatar from './BookPlayerAvatar';\n\ntype BookPlayerListProps = {\n  players: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onClick?: (id: number, username: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: theme.palette.secondary.main,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    border: 0,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 2,\n  },\n  container: {\n    overflowX: 'scroll',\n  },\n  username: {\n    overflow: 'hidden',\n    textAlign: 'center',\n    maxWidth: 64,\n    whiteSpace: 'nowrap',\n  },\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    padding: 0,\n  },\n  icon: {\n    fontSize: 16,\n    color: theme.palette.common.white,\n  },\n}));\n\nexport default function BookPlayerList({\n  players,\n  playerId,\n  onClick,\n  isKickable,\n}: BookPlayerListProps) {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const classes = useStyles();\n\n  return (\n    <Box\n      display=\"flex\"\n      gridGap={8}\n      maxWidth={isDeviceSM ? 200 : 285}\n      className={classes.container}\n      alignItems=\"center\"\n      flexDirection=\"row\">\n      {players.map((player, i) => {\n        const isPlayerSelected = playerId === player.id;\n        return (\n          <Tooltip key={player.id} title={player.username} placement=\"top\">\n            <Box flexDirection=\"column\" alignItems=\"center\" zIndex={4}>\n              <Box position={{ xs: 'relative', sm: 'initial' }}>\n                {!isDeviceSM &&\n                  (player.isOwner ? (\n                    <div className={classes.badge}>\n                      <StarIcon\n                        data-testid=\"star-icon\"\n                        className={classes.icon}\n                      />\n                    </div>\n                  ) : (\n                    isKickable && (\n                      <button\n                        onClick={() =>\n                          !player.isOwner &&\n                          isKickable &&\n                          onClick?.(player.id, player.username)\n                        }\n                        className={classes.badge}>\n                        <CloseIcon\n                          data-testid=\"kick-icon\"\n                          className={classes.icon}\n                        />\n                      </button>\n                    )\n                  ))}\n                <BookPlayerAvatar\n                  isSelected={isPlayerSelected}\n                  avatarUrl={player.avatarUrl}\n                />\n              </Box>\n              {!isDeviceSM && (\n                <Typography\n                  className={classes.username}\n                  component=\"p\"\n                  variant=\"subtitle1\">\n                  {player.username}\n                </Typography>\n              )}\n            </Box>\n          </Tooltip>\n        );\n      })}\n    </Box>\n  );\n}\n","import React from 'react';\nimport BigButton from '../BigButton';\nimport PlayForWorkIcon from '@material-ui/icons/PlayForWork';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  TextField,\n} from '@material-ui/core';\n\ntype ModalJoinProps = {\n  identifier?: string;\n  onClick: (identifier: string) => void;\n  loading?: boolean;\n  className?: string;\n};\n\nexport default function ModalJoin({\n  identifier: urlIdentifier,\n  loading,\n  onClick,\n  className,\n}: ModalJoinProps) {\n  const [open, setOpen] = React.useState(false);\n  const [identifier, setIdentifier] = React.useState('');\n  return (\n    <>\n      <BigButton\n        startIcon={<PlayForWorkIcon style={{ fontSize: 32 }} />}\n        loading={loading}\n        className={className}\n        size=\"large\"\n        onClick={() =>\n          urlIdentifier ? onClick(urlIdentifier) : setOpen(true)\n        }>\n        Join\n      </BigButton>\n\n      <Dialog\n        fullWidth\n        maxWidth=\"xs\"\n        open={open}\n        onClose={() => setOpen(false)}>\n        <DialogTitle>Join a game 👨‍🎨</DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Identifier\"\n            type=\"email\"\n            value={identifier}\n            onChange={event => setIdentifier(event.target.value)}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"primary\">\n            Cancel 👋\n          </Button>\n          <Button\n            onClick={() => {\n              onClick(identifier);\n              setOpen(false);\n            }}\n            color=\"primary\">\n            Join 🥳\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { MutableRefObject } from 'react';\nimport { CanvasWidth } from './canvas.type';\n\ntype DrawingCanvasContextProps = {\n  clear: () => void;\n  undo: () => void;\n  redo: () => void;\n  canvasRef: MutableRefObject<HTMLCanvasElement | null>;\n  size: CanvasWidth;\n};\n\nexport const DrawingCanvasContext = React.createContext<DrawingCanvasContextProps>(\n  {} as any,\n);\n\nexport function useCanvasContext() {\n  const context = React.useContext(DrawingCanvasContext);\n  if (!context)\n    throw new Error(\n      'useCanvasContext should be used within a DrawingCanvasContext',\n    );\n  return context;\n}\n","import { makeStyles, Theme } from '@material-ui/core';\nimport { CanvasWidth } from './canvas.type';\nimport { useCanvasContext } from './DrawingCanvasContext';\n\nconst useStyles = makeStyles<Theme, { size: CanvasWidth; disabled?: boolean }>(\n  theme => ({\n    canvas: {\n      backgroundColor: props => (props.disabled ? '#BBBBBB' : '#DDDDDD'),\n      width: props => props.size.width,\n      height: props => props.size.height,\n      cursor: props => (props.disabled ? 'not-allowed' : 'crosshair'),\n    },\n    canvasBox: {\n      width: props => props.size.width + props.size.border * 2,\n      height: props => props.size.height + props.size.border * 2,\n      border: props =>\n        `${props.size.border}px solid ${theme.palette.secondary.main}`,\n      boxShadow: theme.shadows[1],\n    },\n  }),\n);\n\nexport default function DrawingCanvas({ disabled }: { disabled?: boolean }) {\n  const { canvasRef, size } = useCanvasContext();\n  const classes = useStyles({ size, disabled });\n\n  return (\n    <div className={classes.canvasBox}>\n      <canvas ref={canvasRef} className={classes.canvas} />\n    </div>\n  );\n}\n","import { Box, Typography, useTheme } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport Player from 'types/Player.type';\nimport PlayArrowRoundedIcon from '@material-ui/icons/PlayArrowRounded';\n\ntype StartButtonProps = {\n  player?: Player;\n  onStart: () => void;\n};\n\nexport default function StartButton({ player, onStart }: StartButtonProps) {\n  const theme = useTheme();\n  return (\n    <Box m={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <Box display=\"flex\" alignItems=\"center\">\n        {!player?.isOwner && (\n          <SpinnerIcon\n            style={{ color: theme.palette.text.secondary, marginRight: 4 }}\n          />\n        )}\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {player?.isOwner\n            ? \"you're the owner, click here to start the game\"\n            : 'Waiting for the host to start the game.'}\n        </Typography>\n      </Box>\n      {player?.isOwner && (\n        <Box mt={2}>\n          <BigButton\n            onClick={onStart}\n            size=\"large\"\n            startIcon={<PlayArrowRoundedIcon style={{ fontSize: 48 }} />}>\n            Start\n          </BigButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import {\n  createStyles,\n  withStyles,\n  Theme,\n  Box,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\n\ntype StepProgressProps = {\n  stepActual?: number;\n  stepMax?: number;\n};\n\nconst CustomLinearProgress = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.background.default,\n    },\n    bar: {\n      backgroundColor: theme.palette.secondary.main,\n    },\n  }),\n)(LinearProgress);\n\nexport default function StepProgress({\n  stepActual = 0,\n  stepMax = 0,\n}: StepProgressProps) {\n  const progress = stepPercentage(stepActual, stepMax);\n\n  return (\n    <Box\n      overflow=\"hidden\"\n      width=\"100%\"\n      position=\"relative\"\n      borderTop={1}\n      borderColor=\"secondary.main\">\n      <Box\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        display=\"flex\"\n        position=\"absolute\"\n        zIndex={1}\n        top={0}\n        bottom={0}\n        left={5}>\n        <Typography variant=\"subtitle1\">\n          {stepActual}/{stepMax}\n        </Typography>\n      </Box>\n      <CustomLinearProgress variant=\"determinate\" value={progress} />\n    </Box>\n  );\n}\n\nfunction stepPercentage(current: number, max: number) {\n  const percentage = (current * 100) / max;\n  return percentage > 100 ? 100 : percentage;\n}\n","import { Box, makeStyles, Avatar, Typography } from '@material-ui/core';\n\ntype BookSentenceElementProps = {\n  username?: string;\n  sentence?: string;\n  avatarUrl?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 32,\n    height: 32,\n    backgroundColor: theme.palette.secondary.dark,\n    border: `1px solid ${theme.palette.secondary.dark}`,\n    overflow: 'visible',\n    '&> img': {\n      height: 32,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n}));\n\nexport default function BookSentenceElement({\n  username,\n  sentence,\n  avatarUrl,\n}: BookSentenceElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\">{username}</Typography>\n      <Box\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        p={1}\n        border={1}\n        borderColor=\"secondary.main\"\n        borderRadius={4}\n        maxWidth={336}>\n        <Avatar src={avatarUrl} className={classes.avatar} />\n        <Box ml={1} mr={1}>\n          <Typography variant=\"body1\">{sentence}</Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/gym-guy.71a7fbf1.svg\";","import { Box } from '@material-ui/core';\n\ntype CurrentDrawImageProps = {\n  className?: string;\n  src?: string;\n};\n\nexport default function CurrentDrawImage({\n  className,\n  src,\n}: CurrentDrawImageProps) {\n  return (\n    <Box\n      bgcolor=\"common.white\"\n      border={4}\n      borderColor=\"secondary.main\"\n      boxShadow={1}\n      display=\"flex\">\n      <img src={src} alt=\"\" className={className} />\n    </Box>\n  );\n}\n","import { Box, makeStyles, Typography } from '@material-ui/core';\nimport CurrentDrawImage from '../CurrentDrawImage';\n\ntype BookDrawingElementProps = {\n  username?: string;\n  src?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 256,\n    height: 'auto',\n    minHeight: 160,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n    },\n  },\n\n  username: {\n    textAlign: 'right',\n    maxWidth: 256,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n}));\n\nexport default function BookDrawingElement({\n  username,\n  src,\n}: BookDrawingElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\" className={classes.username}>\n        {username}\n      </Typography>\n      <CurrentDrawImage src={src} className={classes.width} />\n    </Box>\n  );\n}\n","export type Coordinate = {\n  x: number;\n  y: number;\n};\n\nexport type Line = {\n  id?: number;\n  type: LineType;\n  color: string;\n  size: number;\n  points: Coordinate[];\n};\n\nexport enum LineType {\n  LINE = 0,\n}\n","import { Coordinate, Line, LineType } from 'types/canvas.types';\n\nexport const rerenderDraw = (canvas: HTMLCanvasElement, lines: Line[]) => {\n  const context = canvas.getContext('2d');\n  if (!context) return;\n\n  clearDraw(canvas);\n\n  lines &&\n    lines.forEach(line => {\n      let currentPosition: Coordinate = line.points[0];\n      const positionCopy: Coordinate[] = [];\n      line.points.forEach(coordinate => {\n        positionCopy.push(coordinate);\n        if (positionCopy.length > 3) {\n          const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n            positionCopy,\n          );\n\n          drawCanvasLine(\n            context,\n            currentPosition,\n            controlPoint,\n            endPoint,\n            line,\n          );\n          currentPosition = endPoint;\n        }\n      });\n    });\n};\n\nexport const clearDraw = (canvas: HTMLCanvasElement) => {\n  canvas.getContext('2d')?.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nexport const drawCanvasLine = (\n  ctx: CanvasRenderingContext2D,\n  beginPosition: Coordinate,\n  controlPosition: Coordinate,\n  endPosition: Coordinate,\n  line: Line,\n) => {\n  ctx.strokeStyle = line.color;\n  ctx.lineJoin = 'round';\n  ctx.lineCap = 'round';\n  ctx.lineWidth = line.size;\n\n  ctx.beginPath();\n\n  switch (line.type) {\n    case LineType.LINE:\n      ctx.moveTo(beginPosition.x, beginPosition.y);\n      ctx.quadraticCurveTo(\n        controlPosition.x,\n        controlPosition.y,\n        endPosition.x,\n        endPosition.y,\n      );\n      ctx.stroke();\n      break;\n  }\n  ctx.closePath();\n};\n\nexport function getQuadraticCurveCoordinates(positions: Coordinate[]) {\n  const [lastPoint, prevPoint] = positions.slice(-2);\n  const controlPoint = lastPoint;\n  const endPoint = {\n    x: (lastPoint.x + prevPoint.x) / 2,\n    y: (lastPoint.y + prevPoint.y) / 2,\n  };\n\n  return { controlPoint, endPoint };\n}\n\nexport const getCoordinates = (\n  event: MouseEvent,\n  canvasScale: number,\n  canvas?: HTMLCanvasElement | null,\n): Coordinate | undefined => {\n  if (!canvas) return;\n  return {\n    x: (event.pageX - canvas.offsetLeft) * canvasScale,\n    y: (event.pageY - canvas.offsetTop) * canvasScale,\n  };\n};\n","import React from 'react';\nimport { Coordinate, Line, LineType } from 'types/canvas.types';\nimport {\n  clearDraw,\n  drawCanvasLine,\n  getQuadraticCurveCoordinates,\n  rerenderDraw,\n} from 'utils/canvas.utils';\n\ntype useCanvasMouseProps = {\n  color: string;\n  size: number;\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>;\n  scale: number;\n};\n\nfunction useCanvasPaint({\n  color,\n  size,\n  canvasRef,\n  scale,\n}: useCanvasMouseProps) {\n  const mouseCoordinate = React.useRef<Coordinate>({\n    x: 0,\n    y: 0,\n  });\n  const lines = React.useRef<Line[]>([]);\n  const deletedLines = React.useRef<Line[]>([]);\n\n  const getLastLine = () => lines.current[lines.current.length - 1];\n\n  const addLastLine = React.useCallback((coordinate?: Coordinate) => {\n    if (!coordinate) return;\n    getLastLine().points.push(coordinate);\n    mouseCoordinate.current = coordinate;\n  }, []);\n\n  const paint = React.useCallback(\n    (newMousePosition?: Coordinate) => {\n      if (!newMousePosition || !mouseCoordinate || !canvasRef.current) return;\n\n      const lastLine = getLastLine();\n      lastLine.points.push(newMousePosition);\n\n      const context = canvasRef.current.getContext('2d');\n      if (!context || lastLine.points.length <= 2) return;\n\n      const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n        lastLine.points,\n      );\n\n      drawCanvasLine(\n        context,\n        mouseCoordinate.current,\n        controlPoint,\n        endPoint,\n        lastLine,\n      );\n      mouseCoordinate.current = endPoint;\n    },\n    [canvasRef],\n  );\n\n  const create = React.useCallback(\n    (coordinate: Coordinate, isNewLine?: boolean) => {\n      mouseCoordinate.current = coordinate;\n      deletedLines.current = [];\n      if (isNewLine)\n        lines.current.push({\n          type: LineType.LINE,\n          color,\n          size: size * scale,\n          points: [coordinate],\n        });\n      else paint(coordinate);\n    },\n    [color, paint, scale, size],\n  );\n\n  const refresh = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    rerenderDraw(canvasRef.current, lines.current);\n  }, [canvasRef]);\n\n  const undo = React.useCallback(() => {\n    const deletedLine = lines.current.pop();\n    deletedLine && deletedLines.current.push(deletedLine);\n    refresh();\n  }, [refresh]);\n\n  const redo = React.useCallback(() => {\n    const redoLine = deletedLines.current.pop();\n    redoLine && lines.current.push(redoLine);\n    refresh();\n  }, [refresh]);\n\n  const clear = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    if (\n      !window.confirm(\n        'This action is definitive. Are you sure you want to clear all ?',\n      )\n    )\n      return;\n    lines.current = [];\n    deletedLines.current = [];\n    clearDraw(canvasRef.current);\n  }, [canvasRef]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const onKeyDown = (event: any) => {\n      if (event.keyCode === 90 && (event.ctrlKey || event.metaKey)) undo();\n    };\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [canvasRef, undo]);\n\n  return {\n    paint,\n    create,\n    addLastLine,\n    undo,\n    lines,\n    mouseCoordinate,\n    clear,\n    redo,\n    refresh,\n  };\n}\n\nexport default useCanvasPaint;\n","import React from 'react';\nimport { getCoordinates } from 'utils/canvas.utils';\nimport { DrawingCanvasProviderProps } from './canvas.type';\nimport { DrawingCanvasContext } from './DrawingCanvasContext';\nimport useCanvasEventListener from './useCanvasEventListener';\nimport useCanvasPaint from './useCanvasPaint';\n\nconst canvasWidth = {\n  width: 512,\n  height: 320,\n  border: 4,\n  scale: 2,\n  lineScale: 2,\n};\n\nexport function DrawingCanvasProvider({\n  color = '#900050',\n  lineSize = 4,\n  disabled = false,\n  canvasSize: size = canvasWidth,\n  children,\n}: DrawingCanvasProviderProps) {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const [isPainting, setIsPainting] = React.useState(false);\n\n  const {\n    paint,\n    create,\n    addLastLine,\n    clear,\n    undo,\n    refresh,\n    redo,\n  } = useCanvasPaint({\n    color,\n    size: lineSize,\n    canvasRef,\n    scale: size.lineScale,\n  });\n\n  const onMouseDown = React.useCallback(\n    (event: MouseEvent, isNewLine: boolean = true) => {\n      const coordinates = getCoordinates(event, size.scale, canvasRef.current);\n      if (!coordinates) return;\n      setIsPainting(true);\n\n      create(coordinates, isNewLine);\n    },\n    [canvasRef, create, size.scale],\n  );\n\n  const onMouseUp = React.useCallback(\n    (event: MouseEvent) => {\n      setIsPainting(false);\n      const coordinate = getCoordinates(event, size.scale);\n      addLastLine(coordinate);\n    },\n    [addLastLine, size.scale],\n  );\n\n  const onMouseEnter = React.useCallback(\n    (event: MouseEvent) => {\n      if (isPainting) onMouseDown(event, false);\n    },\n    [isPainting, onMouseDown],\n  );\n\n  const onMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      if (!isPainting || !canvasRef.current) return;\n      const newMousePosition = getCoordinates(\n        event,\n        size.scale,\n        canvasRef.current,\n      );\n      paint(newMousePosition);\n    },\n    [canvasRef, isPainting, paint, size.scale],\n  );\n\n  useCanvasEventListener({\n    canvasRef,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    onMouseMove,\n    isPainting,\n    disabled,\n  });\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.width = size.width * size.scale;\n    canvas.height = size.height * size.scale;\n    refresh();\n  }, [canvasRef, refresh, size]);\n\n  const values = React.useMemo(() => ({ clear, undo, canvasRef, redo, size }), [\n    clear,\n    size,\n    redo,\n    undo,\n  ]);\n\n  return (\n    <DrawingCanvasContext.Provider value={values}>\n      {children}\n    </DrawingCanvasContext.Provider>\n  );\n}\n","import React from 'react';\n\ntype UseCanvasEventListenerProps = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  isPainting?: boolean;\n  onMouseUp: (event: MouseEvent) => void;\n  onMouseEnter: (event: MouseEvent) => void;\n  onMouseMove: (event: MouseEvent) => void;\n  onMouseDown: (event: MouseEvent) => void;\n  disabled?: boolean;\n};\n\nexport default function useCanvasEventListener({\n  canvasRef,\n  isPainting,\n  onMouseMove,\n  onMouseEnter,\n  onMouseDown,\n  onMouseUp,\n  disabled,\n}: UseCanvasEventListenerProps) {\n  React.useEffect(() => {\n    if (!isPainting || disabled) return;\n\n    function touchMove(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseMove(mouseEvent);\n    }\n\n    window.document.addEventListener('mousemove', onMouseMove);\n    window.document.addEventListener('touchmove', touchMove);\n    return () => {\n      window.document.removeEventListener('mousemove', onMouseMove);\n      window.document.removeEventListener('touchmove', touchMove);\n    };\n  }, [disabled, isPainting, onMouseMove]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.addEventListener('mouseenter', onMouseEnter);\n    return () => {\n      canvas.removeEventListener('mouseenter', onMouseEnter);\n    };\n  }, [canvasRef, disabled, onMouseEnter]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    function touchStart(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseDown(mouseEvent);\n    }\n\n    canvas.addEventListener('mousedown', onMouseDown);\n    canvas.addEventListener('touchstart', touchStart);\n    window.document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      canvas.removeEventListener('mousedown', onMouseDown);\n      canvas.removeEventListener('touchstart', touchStart);\n      window.document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [canvasRef, disabled, onMouseDown, onMouseUp]);\n}\n","export const callAll = (...fns: (any | undefined)[]) => (...args: any) =>\n  fns.forEach((fn: any) => fn && fn(...args));\n\nexport function getRandomValueFromArray<T>(possibilities: T[]): T {\n  return possibilities[Math.floor(Math.random() * possibilities.length)];\n}\n","import React from 'react';\nimport { callAll } from 'utils/utils';\nimport { useCanvasContext } from './DrawingCanvasContext';\n\n/*\n * All this component will injected on click event on the children.\n * Those event will match with the name of component.\n * They be only used inside a <DrawingCanvasContext>\n */\n\n// clear all line on the canvas\nexport function OnClearAction({ children }: { children: React.ReactElement }) {\n  const { clear } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(clear, children.props.onClick),\n  });\n}\n\n// undo last line on the canvas\nexport function OnUndoAction({ children }: { children: React.ReactElement }) {\n  const { undo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(undo, children.props.onClick),\n  });\n}\n\n// redo last line \"undo\" if exist on the canvas\nexport function OnRedoAction({ children }: { children: React.ReactElement }) {\n  const { redo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(redo, children.props.onClick),\n  });\n}\n\n// this component will not injected onClick but call the onSave on click on children\n// the onSave will contain the big data url of canvas\nexport function OnSaveAction({\n  children,\n  onSave,\n}: {\n  children: React.ReactElement;\n  onSave: (drawImage?: string) => void;\n}) {\n  const { canvasRef } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: () => {\n      onSave(canvasRef.current?.toDataURL());\n      children.props.onClick?.();\n    },\n  });\n}\n","import React, { useState } from 'react';\nimport BigButton from '../components/BigButton';\nimport PlayerCount from '../components/room/PlayerCount';\nimport HolyDrawLogo from '../components/HolyDrawLogo';\nimport BigInput from '../components/BigInput';\nimport PlayerCard from '../components/room/lobby/PlayerCard';\nimport PlayerCardList from '../components/room/lobby/PlayerCardList';\nimport StepTimer from '../components/room/StepTimer';\nimport profilesPictures from '../images/profiles/profiles-pictures';\nimport DirectiveLabel from '../components/room/DirectiveLabel';\nimport PlayerAvatar from '../components/home/PlayerAvatar';\nimport DrawColorPicker from '../components/room/draw/DrawColorPicker';\nimport SizePicker from '../components/room/draw/SizePicker';\nimport ShareRoomButton from '../components/room/lobby/ShareRoomButton';\nimport BookPlayerList from '../components/room/book/BookPlayerList';\nimport ButtonModalJoin from '../components/home/ButtonModalJoin';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport testPlayerList from '__tests__/json/players.json';\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew';\nimport { Box, FormControlLabel, IconButton, Switch } from '@material-ui/core';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport StartButton from 'components/room/lobby/StartButton';\nimport StepProgress from 'components/room/StepProgress';\nimport { Slider } from '@material-ui/core';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport GymGuy from 'images/gym-guy.svg';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport {\n  OnClearAction,\n  OnUndoAction,\n  OnSaveAction,\n  OnRedoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nconst colors = [\n  '#000000',\n  '#7f8c8d',\n  '#bdc3c7',\n  '#ecf0f1',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#e74c3c',\n  '#c0392b',\n  '#FA00FF',\n  '#FDA7DF',\n  '#FEAFA8',\n  '#CB5A57',\n  '#FFC312',\n  '#F79F1F',\n];\n\nconst canvasWidth = {\n  md: {\n    width: 512,\n    height: 320,\n    border: 4,\n    scale: 2,\n    lineScale: 2,\n  },\n  xs: {\n    width: 256,\n    height: 160,\n    border: 2,\n    scale: 4,\n    lineScale: 2,\n  },\n};\n\nexport default function ComponentTest() {\n  const [ppIndex, setPpIndex] = useState(0);\n  const [color, setColor] = useState(colors[5]);\n  const [mobileCanvas, setMobileCanvas] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [size, setSize] = useState(8);\n  const [progress, setProgress] = React.useState<number>(1);\n\n  const handleChange = (event: any, newValue: any) => {\n    setProgress(newValue);\n  };\n\n  const nextPp = () => {\n    setPpIndex(p => (p > profilesPictures.length - 2 ? 0 : p + 1));\n  };\n\n  return (\n    <Box>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        width=\"100%\"\n        gridGap={32}>\n        <HolyDrawLogo />\n\n        <Box>\n          <BookSentenceElement\n            username=\"Luca thb\"\n            avatarUrl={profilesPictures[ppIndex]}\n            sentence={'Hey banane poil vert'}></BookSentenceElement>\n        </Box>\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={mobileCanvas}\n              onChange={e => setMobileCanvas(e.target.checked)}\n            />\n          }\n          label=\"Is mobile canvas\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={disabled}\n              onChange={e => setDisabled(e.target.checked)}\n            />\n          }\n          label=\"Is canvas disabled\"\n        />\n        <Box display=\"flex\" flexDirection=\"column\">\n          <DrawingCanvasProvider\n            color={color}\n            disabled={disabled}\n            lineSize={size}\n            canvasSize={mobileCanvas ? canvasWidth.xs : canvasWidth.md}>\n            <Box display=\"flex\">\n              <DrawColorPicker\n                colors={colors}\n                currentColor={color}\n                onColorChange={color => setColor(color)}\n              />\n              <SizePicker\n                currentSize={size}\n                onSizeChange={size => setSize(size)}\n                flexDirection=\"column\"\n              />\n              <DrawingCanvas disabled={disabled} />\n              <Box display=\"flex\" flexDirection=\"column\">\n                <OnClearAction>\n                  <IconButton>\n                    <DeleteIcon />\n                  </IconButton>\n                </OnClearAction>\n                <OnUndoAction>\n                  <IconButton>\n                    <UndoIcon />\n                  </IconButton>\n                </OnUndoAction>\n                <OnRedoAction>\n                  <IconButton>\n                    <RedoIcon />\n                  </IconButton>\n                </OnRedoAction>\n              </Box>\n            </Box>\n\n            <OnSaveAction\n              onSave={canvasImage => {\n                if (!canvasImage) return;\n                const win = window.open();\n                win?.document.write(\n                  '<iframe width=\"1200px\" height=\"700px\" src=' +\n                    canvasImage +\n                    '></iframe>',\n                );\n              }}>\n              <BigButton size=\"large\">Submit</BigButton>\n            </OnSaveAction>\n          </DrawingCanvasProvider>\n        </Box>\n\n        <StepTimer\n          finishAt={new Date('2021-03-30T08:31:00')}\n          timeDuration={120}\n        />\n        <BookDrawingElement username=\"Jean-Philippes-Pascal\" src={GymGuy} />\n        <ButtonModalJoin\n          loading={false}\n          identifier={undefined}\n          onClick={() => void 0}></ButtonModalJoin>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n        <BigInput\n          onChange={() => void 0}\n          value={'didier'}\n          startIcon={<AccessibilityNewIcon />}\n        />\n        <ShareRoomButton identifier=\"LH4AH3\" />\n        <PlayerCard\n          id={1}\n          name=\"John Doe\"\n          avatar={profilesPictures[ppIndex]}\n          isOwner={true}\n          isKickable={false}\n          onKick={id => void 0}\n        />\n\n        <BigButton size=\"large\" onClick={nextPp}>\n          Test\n        </BigButton>\n\n        <StartButton player={testPlayerList[1]} onStart={() => void 0} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          playerId={3}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n        <DirectiveLabel sentence=\"Salzt\" directive=\"bonsoir\" />\n\n        <SpinnerIcon />\n\n        <PlayerCount count={8} max={12} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n\n        <BookPlayerList players={testPlayerList} playerId={2} />\n\n        <Slider\n          defaultValue={progress}\n          onChange={handleChange}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={1}\n          min={1}\n          max={7}\n        />\n\n        <StepProgress stepActual={progress} stepMax={7} />\n      </Box>\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\nexport default function DevNav() {\n  return (\n    <Box p={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <h1>You're in DevNav</h1>\n      {/* With react-router-dom it's not a good practive do don't use\n          <Link /> but Rsuits alredy render a link */}\n      <NavLink to=\"/\">Dev nav</NavLink>\n      <NavLink to=\"/r/start\">Go Room Start</NavLink>\n      <NavLink to=\"/r/write\">Go Room Write</NavLink>\n      <NavLink to=\"/r/draw\">Go Room Draw</NavLink>\n      <NavLink to=\"/r/lobby\">Go Room Lobby</NavLink>\n      <NavLink to=\"/r\">Go Room</NavLink>\n      <NavLink to=\"/home\">Go home</NavLink>\n      <NavLink to=\"/t\">Go to TESTS pages</NavLink>\n    </Box>\n  );\n}\n\nfunction NavLink({ to, children }: any) {\n  return (\n    <Box\n      p={1}\n      bgcolor=\"background.default\"\n      m={1}\n      borderRadius={2}\n      border={1}\n      borderColor=\"secondary.main\">\n      <Link to={to} style={{ color: 'white' }}>\n        {children}\n      </Link>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst usernames = [\n  'God',\n  'Mushu the Dragon',\n  'Bob Razowski',\n  'Macco',\n  'Woody Woodpecker',\n  'Mr Potato',\n  'Nemo',\n  'Shrek',\n  'Staline',\n  'Krokette',\n  'Little Otter',\n  'Bob the bob',\n  'SavageWolf',\n  'Padawan',\n  'BigBear',\n  'BigFather',\n  'Terminator',\n  'Stitch',\n];\n\nexport function useRandomUsername() {\n  const usernameRef = React.useRef(getRandomValueFromArray(usernames));\n\n  return usernameRef.current;\n}\n","import Player from './Player.type';\n\nexport type HolyElement = {\n  id: number;\n  step: number;\n  type: 0 | 1;\n  text: string;\n  finishAt: string;\n  createdAt: string;\n  drawImage: string;\n  creator?: Player;\n};\n\nexport enum ElementType {\n  Sentence = 0,\n  Drawing = 1,\n}\n\ntype StepElement = HolyElement & {\n  parent: HolyElement;\n};\n\nexport default StepElement;\n","import Room from './Room.type';\n\ntype Session = {\n  id: number;\n  finishAt?: string;\n  stepFinishAt?: string;\n  createdAt: string;\n  actualStep: number;\n  timeDuration: number;\n  roomId: number;\n  room?: Room;\n  stepType: SessionStepType;\n  totalPlayers: number;\n  playerFinished: number;\n};\n\nexport enum SessionStepType {\n  Start = 0,\n  Draw = 1,\n  Write = 2,\n  Book = 3,\n}\n\nexport default Session;\n","import { useRandomUsername } from 'hooks/useRandomUsername';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from 'api/client';\nimport { setToken } from 'api/player-provider';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport Player from 'types/Player.type';\nimport BigButton from '../BigButton';\nimport BigInput from '../BigInput';\nimport ButtonModalJoin from './ButtonModalJoin';\nimport PlayerAvatar from './PlayerAvatar';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport CreateIcon from '@material-ui/icons/Create';\nimport { Box, makeStyles } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    '&>*': {\n      marginBottom: theme.spacing(4),\n    },\n  },\n  buttonContainer: {\n    '&>*': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n}));\n\nexport default function PlayerForm({ identifier }: { identifier?: string }) {\n  const [username, setUsername] = React.useState('');\n  const [ppIndex, setPpIndex] = React.useState(0);\n  const [loading, setLoading] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n  const defaultUsername = useRandomUsername();\n  const classes = useStyles();\n\n  const nextPp = () => {\n    setPpIndex((p: number) => (p >= profilesPictures.length - 1 ? 0 : p + 1));\n  };\n\n  function onConnect(token: string, text: string, isSuccess: boolean = true) {\n    enqueueSnackbar(text, { variant: 'success' });\n    setToken(token);\n    history?.push('/r/lobby');\n  }\n\n  function onStart() {\n    setLoading(true);\n    client<Player>('room', {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, 'Room successfully created 🙌');\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  function onJoin(identifier: string) {\n    setLoading(true);\n    client<Player>(`room/join/${identifier}`, {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n      method: 'PATCH',\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, \"You've joined the room!\");\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-PATCH]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems=\"center\"\n      width=\"100%\"\n      className={classes.container}>\n      <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n\n      <BigInput\n        startIcon={<CreateIcon />}\n        value={username}\n        onChange={e => setUsername(e.target.value)}\n        placeholder={defaultUsername}\n      />\n\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        className={classes.buttonContainer}>\n        <ButtonModalJoin\n          identifier={identifier}\n          onClick={onJoin}\n          loading={loading}\n        />\n\n        {!identifier && (\n          <BigButton\n            size=\"large\"\n            startIcon={<PlayArrowIcon style={{ fontSize: 32 }} />}\n            onClick={onStart}\n            loading={loading}>\n            Start\n          </BigButton>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { RouteComponentProps } from 'react-router-dom';\nimport HolyDrawLogo from 'components/HolyDrawLogo';\nimport PlayerForm from 'components/home/PlayerForm';\nimport { Box } from '@material-ui/core';\n\nexport default function Home(\n  props: RouteComponentProps<{ identifier?: string }>,\n) {\n  const identifier = props.match.params.identifier;\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" width=\"100%\">\n      <HolyDrawLogo width={32} />\n      <Box mt={{ xs: 1, sm: 2 }}>\n        <PlayerForm identifier={identifier} />\n      </Box>\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport Loading from 'components/Loading';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport React from 'react';\n\nimport { ElementType, HolyElement } from 'types/HolyElement.type';\n\nexport default function Book() {\n  const [album, setAlbum] = React.useState<HolyElement[]>([]);\n\n  React.useEffect(() => {\n    client<HolyElement[]>('get_own_album', { token: getToken() })\n      .then(setAlbum)\n      .catch(alert);\n  }, []);\n\n  return album.length >= 1 ? (\n    <Box display=\"flex\" flexDirection=\"column\" maxWidth={300}>\n      {album.map(element => {\n        const isSentence = element.type === ElementType.Sentence;\n\n        return isSentence ? (\n          <BookSentenceElement\n            key={element.id}\n            username={element.creator?.username}\n            avatarUrl={profilesPictures[Number(element.creator?.avatarUrl)]}\n            sentence={element.text}\n          />\n        ) : (\n          <BookDrawingElement\n            key={element.id}\n            username={element.creator?.username}\n            src={element.drawImage}\n          />\n        );\n      })}\n    </Box>\n  ) : (\n    <Box>\n      <Loading />\n    </Box>\n  );\n}\n","import { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport Session, { SessionStepType } from 'types/Session.type';\n\nfunction useSessionStates() {\n  const [session, setSession] = React.useState<Session>();\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Session>('session/current', { token: getToken() }).then(\n      session => !deleted && setSession(session),\n      () => {\n        enqueueSnackbar('Sorry, an error occured 😕 [Session-GET]', {\n          variant: 'error',\n        });\n        history.push('/r/lobby');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  // handling page with the Session\n  React.useEffect(() => {\n    const pathname = history.location.pathname;\n    let newPathname = '';\n    switch (session?.stepType) {\n      case SessionStepType.Start:\n        newPathname = '/r/start';\n        break;\n      case SessionStepType.Write:\n        newPathname = '/r/write';\n        break;\n      case SessionStepType.Draw:\n        newPathname = '/r/draw';\n        break;\n      case SessionStepType.Book:\n        newPathname = '/r/book';\n        break;\n    }\n    // change only if pathname is different than before\n    if (newPathname && pathname !== newPathname) history.push(newPathname);\n  }, [session?.stepType, history]);\n\n  return { session, setSession };\n}\n\nexport default useSessionStates;\n","import Loading from 'components/Loading';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport StepElement, { ElementType } from 'types/HolyElement.type';\nimport HolyElement from 'types/HolyElement.type';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Session from '../types/Session.type';\nimport { parseJson } from '../utils/json';\nimport useSessionStates from './useSessionStates';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype SessionContextProps = {\n  session?: Session;\n  currentElement?: HolyElement;\n  onSave: (content: string) => void;\n};\n\nconst SessionContext = React.createContext<SessionContextProps>({\n  onSave: () => void 0,\n});\n\ntype SessionContextProviderProps = { children: React.ReactElement };\n\nexport function SessionContextProvider({\n  children,\n}: SessionContextProviderProps) {\n  const { session, setSession } = useSessionStates();\n  const [currentElement, setCurrentElement] = React.useState<StepElement>();\n  const { websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onSave(content: string) {\n    const elementId = currentElement?.id;\n\n    const elementContent =\n      currentElement?.type === ElementType.Drawing\n        ? { drawimage: content }\n        : { text: content };\n\n    client<HolyElement>(`element/${elementId}`, {\n      token: getToken(),\n      method: 'PATCH',\n      data: elementContent,\n    })\n      .then(element => {\n        enqueueSnackbar('Element Saved 😎', { variant: 'success' });\n        setCurrentElement(e => ({ ...e, ...element }));\n      })\n      .catch(() =>\n        enqueueSnackbar('Sorry, an error occured while saving 😕', {\n          variant: 'error',\n        }),\n      );\n  }\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.SessionUpdate:\n          const session = websocketMessage.session;\n          setSession(prev => prev && { ...prev, ...session });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [session, setSession, websocket]);\n\n  React.useEffect(() => {\n    if (!session?.actualStep) return;\n\n    let deleted = false;\n    client<HolyElement>('element/current', { token: getToken() }).then(\n      session => !deleted && setCurrentElement(session),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [Element-GET]', {\n          variant: 'error',\n        }),\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, session?.actualStep]);\n\n  const values = { session, currentElement, onSave };\n\n  return (\n    <SessionContext.Provider value={values}>\n      {session ? children : <Loading />}\n    </SessionContext.Provider>\n  );\n}\n\nexport function useSessionContext() {\n  const context = React.useContext(SessionContext);\n  if (!context)\n    throw new Error(\n      'useSessionContext should be used within a SessionContextProvider',\n    );\n  return context;\n}\n","import PlayerCount from './room/PlayerCount';\nimport HolyDrawLogo from './HolyDrawLogo';\nimport StepTimer from './room/StepTimer';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { Box } from '@material-ui/core';\n\ntype GameBarProps = {\n  onFinish?: () => void;\n};\n\nexport default function GameBar({ onFinish }: GameBarProps) {\n  const { session } = useSessionContext();\n  return (\n    <Box\n      display=\"flex\"\n      flexWrap=\"wrap\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      px={{ xs: 2, sm: 4 }}\n      justifyContent=\"space-between\"\n      width=\"100%\">\n      <Box width={{ xs: 32, sm: 64 }}>\n        <PlayerCount\n          count={session?.playerFinished || 0}\n          max={session?.totalPlayers || 0}\n        />\n      </Box>\n      <HolyDrawLogo />\n      <Box width={{ xs: 32, sm: 64 }}>\n        <StepTimer\n          finishAt={new Date(session?.stepFinishAt || '')}\n          timeDuration={session?.timeDuration || 60}\n          onFinish={onFinish}\n        />\n      </Box>\n    </Box>\n  );\n}\n","import { Box, Container } from '@material-ui/core';\nimport { Breakpoint } from '@material-ui/core/styles/createBreakpoints';\nimport GameBar from 'components/GameBar';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport React from 'react';\nimport StepProgress from './StepProgress';\n\ntype GameLayoutProps = {\n  maxWidth?: Breakpoint;\n  children: React.ReactElement | React.ReactElement[];\n};\n\nexport default function GameLayout({\n  maxWidth = 'sm',\n  children,\n}: GameLayoutProps) {\n  return (\n    <Box height=\"100vh\" display=\"flex\" flexDirection=\"column\">\n      <GameBar />\n      <Container maxWidth={maxWidth} className=\"full-height\">\n        {children}\n      </Container>\n      <StepProgressWithContext />\n    </Box>\n  );\n}\n\nconst StepProgressWithContext = () => {\n  const { session } = useSessionContext();\n  return (\n    <StepProgress\n      stepActual={session?.actualStep}\n      stepMax={session?.totalPlayers}\n    />\n  );\n};\n","import { Box, IconButton } from '@material-ui/core';\nimport {\n  OnClearAction,\n  OnRedoAction,\n  OnUndoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nexport default function CanvasActionButtons() {\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <OnClearAction>\n        <IconButton>\n          <DeleteIcon />\n        </IconButton>\n      </OnClearAction>\n      <OnUndoAction>\n        <IconButton>\n          <UndoIcon />\n        </IconButton>\n      </OnUndoAction>\n      <OnRedoAction>\n        <IconButton>\n          <RedoIcon />\n        </IconButton>\n      </OnRedoAction>\n    </Box>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport { OnSaveAction } from 'components/canvas/DrawingCanvasActions';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport CanvasActionButtons from 'components/room/draw/CanvasActionButtons';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport theme from 'theme';\n\ntype GameCanvasProps = {\n  size: number;\n  color: string;\n};\n\nconst canvasWidth = {\n  md: {\n    width: 512,\n    height: 320,\n    border: 4,\n    scale: 2,\n    lineScale: 2,\n  },\n  xs: {\n    width: 332.8,\n    height: 208,\n    border: 2,\n    scale: 4,\n    lineScale: 2,\n  },\n};\n\nexport default function GameCanvas({ size, color }: GameCanvasProps) {\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { currentElement, onSave } = useSessionContext();\n  const isEditing = Boolean(!currentElement?.finishAt);\n\n  return (\n    <DrawingCanvasProvider\n      color={color}\n      disabled={!isEditing}\n      lineSize={size}\n      canvasSize={isDeviceSM ? canvasWidth.md : canvasWidth.xs}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        gridGap={8}\n        alignItems=\"center\">\n        <DrawingCanvas disabled={!isEditing} />\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          gridGap={8}\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n          width=\"100%\">\n          <CanvasActionButtons />\n          <OnSaveAction\n            onSave={canvasImage => canvasImage && onSave(canvasImage)}>\n            <BigButton\n              startIcon={\n                isEditing ? (\n                  <SaveIcon style={{ fontSize: 32 }} />\n                ) : (\n                  <EditIcon style={{ fontSize: 32 }} />\n                )\n              }\n              size=\"large\">\n              {isEditing ? 'Save' : 'Edit'}\n            </BigButton>\n          </OnSaveAction>\n        </Box>\n      </Box>\n    </DrawingCanvasProvider>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport DrawColorPicker from 'components/room/draw/DrawColorPicker';\nimport SizePicker from 'components/room/draw/SizePicker';\nimport GameLayout from 'components/room/GameLayout';\nimport GameCanvas from 'components/room/draw/GameCanvas';\nimport { useState } from 'react';\nimport theme from 'theme';\nimport { useSessionContext } from 'hooks/SessionProvider';\n\nconst colors = [\n  '#000000',\n  '#7f8c8d',\n  '#bdc3c7',\n  '#ecf0f1',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#e74c3c',\n  '#c0392b',\n  '#FA00FF',\n  '#FDA7DF',\n  '#FEAFA8',\n  '#CB5A57',\n  '#FFC312',\n  '#F79F1F',\n];\n\nexport default function Draw() {\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const [color, setColor] = useState(colors[5]);\n  const [size, setSize] = useState(8);\n  return (\n    <GameLayout maxWidth=\"md\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        gridGap={16}>\n        <Box width=\"100%\" maxWidth={682}>\n          <CurrentDirectiveLabel />\n        </Box>\n\n        <Box\n          display=\"flex\"\n          flexDirection={{ xs: 'column', sm: 'row' }}\n          gridGap={16}>\n          <Box order={{ xs: 1, sm: 0 }}>\n            <DrawColorPicker\n              colors={colors}\n              currentColor={color}\n              onColorChange={color => setColor(color)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n\n          <GameCanvas size={size} color={color} />\n          <Box order={{ xs: 2, sm: 0 }}>\n            <SizePicker\n              currentSize={size}\n              onSizeChange={size => setSize(size)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n        </Box>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDirectiveLabel() {\n  const { currentElement } = useSessionContext();\n  return (\n    <DirectiveLabel\n      directive=\"Time to Draw\"\n      sentence={currentElement?.parent?.text}\n    />\n  );\n}\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport { client } from 'api/client';\nimport Session from 'types/Session.type';\nimport StartButton from './StartButton';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\n\nexport default function LobbyStartAction() {\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onStart() {\n    client<Session>('session', { method: 'POST', token: getToken() }).then(\n      () =>\n        enqueueSnackbar('Game successfully started 💪', { variant: 'success' }),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [Session-POST]', {\n          variant: 'error',\n        }),\n    );\n  }\n\n  return <StartButton onStart={onStart} player={player} />;\n}\n","import { client } from 'api/client';\nimport { usePlayerContext } from 'hooks/PlayerProvider';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport Loading from '../../Loading';\nimport PlayerCount from '../../room/PlayerCount';\nimport BookPlayerList from '../book/BookPlayerList';\nimport PlayerCardList from './PlayerCardList';\nimport { Box, useMediaQuery, useTheme } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nexport function Players() {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { players } = useRoomContext();\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onKick(id: number, name: string) {\n    window.confirm(`Do you really want to kick ${name} ?`) && kickPlayer(id);\n  }\n\n  function kickPlayer(id: number) {\n    const url = `player/players/${id}/kick`;\n    client(url, {\n      token: player?.token?.tokenKey,\n      method: 'PATCH',\n    }).then(\n      () => enqueueSnackbar('Player kicked 😎', { variant: 'success' }),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [kick-PATCH]', {\n          variant: 'error',\n        }),\n    );\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\">\n      {players?.length > 0 ? (\n        isDeviceSM ? (\n          <PlayerCardList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onKick={(id, name) => onKick(id, name)}\n          />\n        ) : (\n          <BookPlayerList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onClick={(id, name) => onKick(id, name)}\n          />\n        )\n      ) : (\n        <Loading />\n      )}\n    </Box>\n  );\n}\n\nexport function PlayerCountBox() {\n  const { players } = useRoomContext();\n\n  return (\n    <Box pr={{ xs: 1, md: 2 }}>\n      <PlayerCount count={players?.length || 0} max={12} />\n    </Box>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport ShareRoomButton from './ShareRoomButton';\n\nexport default function SettingsMenu() {\n  const { room, wsState } = useRoomContext();\n  return (\n    <Box\n      borderRadius=\"0 4px 4px 0\"\n      minWidth={328}\n      pl={2}\n      height=\"auto\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems={{ xs: 'center', sm: 'flex-start' }}\n      gridGap={24}>\n      <Typography variant=\"h5\">{wsState}</Typography>\n      <ShareRoomButton identifier={room?.identifier} />\n    </Box>\n  );\n}\n","import HolyDrawLogo from 'components/HolyDrawLogo';\nimport LobbyStartButton from 'components/room/lobby/LobbyStartAction';\nimport { Players, PlayerCountBox } from 'components/room/lobby/Players';\nimport SettingsMenu from 'components/room/lobby/SettingsMenu';\nimport { Box, fade, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  playersContainer: {\n    alignItems: 'center',\n    flexDirection: 'column',\n    gap: 64,\n    [theme.breakpoints.up('sm')]: {\n      alignItems: 'flex-start',\n      flexDirection: 'row',\n    },\n  },\n  container: {\n    backgroundColor: fade(theme.palette.background.default, 0.8),\n  },\n}));\n\nexport default function Lobby() {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      height=\"100vh\"\n      alignItems=\"center\"\n      width=\"100%\">\n      <Box mb={3} width=\"100%\" display=\"flex\" justifyContent=\"center\">\n        <HolyDrawLogo width={32} />\n      </Box>\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        width=\"100%\"\n        m={3}\n        height=\"100vh\"\n        alignItems=\"center\"\n        flexDirection=\"column\">\n        <Box\n          display=\"flex\"\n          className={classes.container}\n          flexDirection=\"column\"\n          alignItems=\"flex-end\"\n          width=\"100%\">\n          <PlayerCountBox />\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            width=\"100%\"\n            className={classes.playersContainer}>\n            <SettingsMenu />\n            <Players />\n          </Box>\n        </Box>\n        <LobbyStartButton />\n      </Box>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst sentences = [\n  'A samurai eating a kebab with samouraï sauce',\n  'A man walking on the ceiling',\n  'A gas station on fire',\n  'A T-Rex playing chess with monkeys',\n  'Someone watching himself on TV',\n  \"Pinocchio but he's made of iron\",\n  'A nice shark without teeth',\n  'A knight far too tall',\n  'A man chained by circus animals',\n  'A shipwreck on a chocolate island',\n  'An invasion of multicolored aliens',\n  'Spongebob becoming HandBob',\n  'New colony on Mars leaded by Musk',\n  'Sad jedi because the force is not with him',\n  'Godzilla VS King Kong',\n  'Woman pissed of by noisy neighbors',\n  'A world where sofas and humans are interchanged',\n  \"Stitch meeting The Rock at Shrek's birthday\",\n];\n\nexport function useRandomSentence() {\n  const sentenceRef = React.useRef(getRandomValueFromArray(sentences));\n\n  return sentenceRef.current;\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport BigInput from 'components/BigInput';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useRandomSentence } from 'hooks/useRandomSentence';\n\nexport default function StartForm() {\n  const { currentElement, onSave } = useSessionContext();\n  const [sentence, setSentence] = React.useState('');\n  const isEditing = Boolean(!currentElement?.finishAt);\n  const defaultSentence = useRandomSentence();\n\n  return (\n    <>\n      <Grid item className=\"full-width\">\n        <BigInput\n          disabled={!isEditing}\n          placeholder={defaultSentence}\n          startIcon={<EditIcon />}\n          value={sentence}\n          onChange={e => setSentence(e.target.value)}\n        />\n      </Grid>\n      <Grid item>\n        <BigButton\n          disabled={sentence.length === 0}\n          onClick={() => onSave(sentence)}\n          startIcon={\n            isEditing ? (\n              <SaveIcon style={{ fontSize: 32 }} />\n            ) : (\n              <EditIcon style={{ fontSize: 32 }} />\n            )\n          }\n          size=\"large\">\n          {isEditing ? 'Save' : 'Edit'}\n        </BigButton>\n      </Grid>\n    </>\n  );\n}\n","import GymGuy from 'images/gym-guy.svg';\nimport { Grid, Typography } from '@material-ui/core';\nimport SentenceForm from 'components/room/start/SentenceForm';\nimport GameLayout from 'components/room/GameLayout';\n\nexport default function Start() {\n  return (\n    <GameLayout maxWidth=\"sm\">\n      <Grid\n        container\n        spacing={2}\n        direction=\"column\"\n        alignItems=\"center\"\n        className=\"full-height\"\n        wrap=\"nowrap\"\n        justify=\"center\">\n        <Grid item>\n          <img src={GymGuy} alt=\"\" width={384} />\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h4\">Start a story</Typography>\n        </Grid>\n        <SentenceForm />\n      </Grid>\n    </GameLayout>\n  );\n}\n","import { Box, Grid, makeStyles } from '@material-ui/core';\nimport StartForm from 'components/room/start/SentenceForm';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport GameLayout from 'components/room/GameLayout';\nimport CurrentDrawImage from 'components/room/CurrentDrawImage';\nimport { useSessionContext } from 'hooks/SessionProvider';\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 512,\n    height: 'auto',\n    minHeight: 320,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      minHeight: 0,\n    },\n  },\n}));\n\nexport default function Write() {\n  const classes = useStyles();\n  return (\n    <GameLayout>\n      <Box maxWidth={520}>\n        <Grid\n          container\n          spacing={2}\n          direction=\"column\"\n          alignItems=\"center\"\n          className=\"full-height\"\n          wrap=\"nowrap\"\n          justify=\"center\">\n          <Grid item className=\"full-width\">\n            <DirectiveLabel directive=\"Describe this scene\" />\n          </Grid>\n          <Grid item>\n            <CurrentDrawImageWithContext className={classes.width} />\n          </Grid>\n          <StartForm />\n        </Grid>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDrawImageWithContext({ className }: { className: string }) {\n  const { currentElement } = useSessionContext();\n  return (\n    <CurrentDrawImage\n      src={currentElement?.parent.drawImage}\n      className={className}\n    />\n  );\n}\n","import AppLayout from 'components/AppLayout';\nimport { BrowserRouter, HashRouter, Switch, Route } from 'react-router-dom';\nimport { PlayerContextProvider } from 'hooks/PlayerProvider';\nimport { RoomContextProvider } from 'hooks/RoomProvider';\nimport ComponentTest from 'pages/ComponentTest';\nimport DevNav from 'pages/DevNav';\nimport Home from 'pages/Home';\nimport Book from 'pages/room/Book';\nimport Draw from 'pages/room/Draw';\nimport Lobby from 'pages/room/Lobby';\nimport Start from 'pages/room/Start';\nimport Write from 'pages/room/Write';\nimport { WebsocketProvider } from 'hooks/WebsocketProvider';\nimport { SessionContextProvider } from 'hooks/SessionProvider';\n\nconst Router: any =\n  process.env.NODE_ENV === 'production' ? HashRouter : BrowserRouter;\n\nexport default function Routes() {\n  return (\n    <AppLayout>\n      <Router>\n        <Switch>\n          <Route path=\"/join/:identifier\" component={Home} />\n          <Route path=\"/r\" component={RoomRoutes} />\n          <Route path=\"/t\" component={ComponentTest} />\n          <Route path=\"/home\" component={Home} />\n          {/* For test, I add a special Nav\n          TODO: replace it by `Home` */}\n          <Route path=\"/\" component={DevNav} />\n        </Switch>\n      </Router>\n    </AppLayout>\n  );\n}\n\nfunction RoomRoutes() {\n  return (\n    <WebsocketProvider>\n      <PlayerContextProvider>\n        <RoomContextProvider>\n          <Switch>\n            <Route path=\"/r/lobby\" component={Lobby} />\n            <Route path=\"/r\" component={SessionRoutes} />\n          </Switch>\n        </RoomContextProvider>\n      </PlayerContextProvider>\n    </WebsocketProvider>\n  );\n}\n\nfunction SessionRoutes() {\n  return (\n    <SessionContextProvider>\n      <Switch>\n        <Route path=\"/r/start\" component={Start} />\n        <Route path=\"/r/draw\" component={Draw} />\n        <Route path=\"/r/write\" component={Write} />\n        <Route path=\"/r/book\" component={Book} />\n        <Route path=\"/r/lobby\" component={Lobby} />\n      </Switch>\n    </SessionContextProvider>\n  );\n}\n","import { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport theme from 'theme';\nimport Routes from 'Routes';\nimport { SnackbarProvider } from 'notistack';\n\n/*\n * Entry point for our App\n * Do not add Logic here\n */\nfunction App() {\n  return (\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      preventDuplicate\n      maxSnack={3}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Routes />\n      </ThemeProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}