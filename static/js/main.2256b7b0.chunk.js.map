{"version":3,"sources":["theme.ts","components/AppLayout.tsx","api/client.tsx","api/player-provider.tsx","images/spinner.svg","components/Loading.tsx","utils/json.ts","hooks/useSafeMounted.ts","hooks/useWebsocket.tsx","hooks/WebsocketProvider.tsx","hooks/PlayerProvider.tsx","hooks/useRoomStates.tsx","hooks/RoomProvider.tsx","components/SpinnerIcon.tsx","components/BigButton.tsx","components/room/PlayerCount.tsx","components/AppTitle.tsx","components/BigInput.tsx","styles/colors.ts","components/room/lobby/PlayerCard.tsx","images/profiles/pp-1.png","images/profiles/profiles-pictures.ts","images/profiles/pp-2.png","images/profiles/pp-3.png","images/profiles/pp-4.png","images/profiles/pp-5.png","images/profiles/pp-6.png","images/profiles/pp-7.png","images/profiles/pp-8.png","components/room/lobby/PlayerCardList.tsx","hooks/useTimerInterval.ts","components/room/StepTimer.tsx","components/room/DirectiveLabel.tsx","components/home/PlayerAvatar.tsx","components/room/draw/DrawColorPicker.tsx","components/room/draw/SizePicker.tsx","components/room/lobby/ShareRoomButton.tsx","utils/clipboard.ts","components/room/book/BookPlayerAvatar.tsx","components/room/book/BookPlayerList.tsx","types/canvas.types.ts","components/home/ButtonModalJoin.tsx","utils/canvas.utils.ts","components/room/draw/useCanvasPaint.tsx","components/room/draw/CanvasDrawActions.tsx","components/room/draw/CanvasDraw.tsx","components/room/draw/useCanvasEventListener.tsx","components/room/lobby/StartButton.tsx","components/room/StepProgress.tsx","pages/ComponentTest.tsx","pages/DevNav.tsx","hooks/useRandomUsername.tsx","components/home/PlayerForm.tsx","pages/Home.tsx","pages/room/Book.tsx","pages/room/Draw.tsx","components/room/lobby/LobbyStartAction.tsx","components/room/lobby/Players.tsx","components/room/lobby/SettingsMenu.tsx","pages/room/Lobby.tsx","images/gym-guy.svg","types/Session.type.ts","hooks/useSessionStates.tsx","hooks/SessionProvider.tsx","components/GameBar.tsx","pages/room/Start.tsx","pages/room/Write.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["palette","theme","createPalette","type","primary","main","secondary","background","default","paper","createMuiTheme","typography","h4","fontFamily","fontWeight","fontSize","h5","subtitle1","subtitle2","body1","body2","join","spacing","overrides","MuiButton","label","textOverflow","whiteSpace","overflow","root","textTransform","padding","borderRadius","contained","height","color","common","white","backgroundColor","divider","boxShadow","fade","position","action","hover","top","iconSizeLarge","marginLeft","containedSizeLarge","MuiSwitch","width","margin","switchBase","transform","light","opacity","border","colorPrimary","thumb","track","checked","responsiveFontSizes","useStyles","makeStyles","gameBox","borderLeft","borderRight","container","minHeight","maxWidth","breakpoints","values","lg","AppLayout","children","classes","Container","className","Box","bgcolor","display","minWidth","apiURL","process","client","endpoint","a","data","method","token","customHeaders","headers","customConfig","config","body","JSON","stringify","Authorization","Accept","window","fetch","then","response","status","Promise","reject","message","json","ok","playerTokenKey","getToken","localStorage","getItem","setToken","setItem","Loading","justifyContent","alignItems","src","Spinner","alt","parseJson","text","init","parse","e","useSafeMounted","WsStates","WebsocketEvent","dispatch","mounted","React","useRef","useLayoutEffect","current","useCallback","url","exec","WebsocketContext","createContext","wsState","IDLE","WebsocketProvider","useState","websocket","setWebsocket","setWsState","enqueueSnackbar","useSnackbar","onCloseCallback","isSocketOpened","CLOSED","variant","undefined","safeOnClose","connect","socket","WebSocket","CONNECTING","onopen","send","PlayerToken","CONNECTED","onclose","useEffect","close","useWebsocket","Provider","value","useWebsocketContext","context","useContext","Error","PlayerContext","PlayerContextProvider","player","setPlayer","history","useHistory","onMessage","event","websocketMessage","websocketEvent","NewOwnerPlayer","id","prev","isOwner","addEventListener","removeEventListener","deleted","push","usePlayerContext","useRoomStates","room","setRoom","players","setPlayers","updateRoom","roomId","updatePlayer","removePlayer","playerId","removeItem","prevPlayers","playerIndex","findIndex","p","playersCopy","splice","addPlayer","find","RoomContext","RoomContextProvider","Invalid","PlayerJoin","PlayerLeft","SessionStart","PlayerKicked","useRoomContext","spin","animation","SpinnerIcon","props","style","aria-label","clsx","BigButton","loading","onClick","Button","PlayerCount","count","max","py","Typography","textAlign","drawText","AppTitle","input","up","disabled","cursor","transition","gap","focus","icon","BigInput","startIcon","setFocus","cloneElement","onFocus","onBlur","primaryFade","avatar","badge","bottom","left","zIndex","badgeIcon","username","kickButton","PlayerCard","name","isKickable","isCurrentPlayer","onKick","borderColor","data-testid","Avatar","component","profilesPictures","PlayerCardList","Grid","map","isPlayerSelected","item","xs","Number","avatarUrl","updateProgress","finishAt","timeDuration","progress","Math","round","getTime","Date","StepTimer","onFinish","setProgress","timerInterval","setTimerInterval","interval","setInterval","clearInterval","useTimerInterval","CircularProgress","size","thickness","sentence","DirectiveLabel","directive","flexDirection","button","outline","imgBox","img","PlayerAvatar","image","onShuffle","DrawColorPicker","colors","currentColor","onColorChange","coupleColors","useMemo","reduce","accumulator","colorCouples","result","index","length","getCoupleColors","gridGap","couple","squareColor","isSelected","buttonSizes","SizePicker","currentSize","onSizeChange","i","isCurrentSize","SizePickerPoint","ShareRoomButton","identifier","tempInput","document","createElement","appendChild","select","execCommand","removeChild","copyToClipboard","location","origin","useAvatarStyles","BookPlayerAvatar","overflowX","BookPlayerList","useTheme","isDeviceSM","useMediaQuery","Tooltip","title","placement","sm","LineType","ModalJoin","urlIdentifier","open","setOpen","setIdentifier","Dialog","fullWidth","onClose","DialogTitle","DialogContent","TextField","autoFocus","onChange","target","DialogActions","clearDraw","canvas","clearRect","drawCanvasLine","ctx","beginPosition","controlPosition","endPosition","line","strokeStyle","lineJoin","lineCap","lineWidth","beginPath","LINE","moveTo","x","y","quadraticCurveTo","stroke","closePath","getQuadraticCurveCoordinates","positions","slice","lastPoint","prevPoint","controlPoint","endPoint","getCoordinates","pageX","offsetLeft","pageY","offsetTop","useCanvasPaint","canvasRef","mouseCoordinate","lines","getLastLine","addLastLine","coordinate","points","paint","newMousePosition","lastLine","getContext","create","isNewLine","undo","pop","forEach","currentPosition","positionCopy","rerenderDraw","clear","onKeyDown","keyCode","ctrlKey","metaKey","CanvasDrawActions","onClear","onUndo","ml","IconButton","canvasWidth","CanvasDraw","isPainting","setIsPainting","onMouseDown","coordinates","onMouseUp","onMouseEnter","onMouseMove","useCanvasEventListener","ref","StartButton","onStart","m","marginRight","mt","CustomLinearProgress","withStyles","createStyles","bar","LinearProgress","StepProgress","stepActual","stepMax","percentage","stepPercentage","borderTop","ComponentTest","ppIndex","setPpIndex","setColor","setSize","nextPp","console","log","testPlayerList","Slider","defaultValue","newValue","aria-labelledby","valueLabelDisplay","step","min","DevNav","NavLink","to","usernames","useRandomUsername","floor","random","marginBottom","buttonContainer","PlayerForm","setUsername","setLoading","defaultUsername","onConnect","isSuccess","placeholder","String","tokenKey","finally","Home","match","params","Book","Draw","LobbyStartAction","Players","confirm","kickPlayer","PlayerCountBox","pr","md","SettingsMenu","pl","playersContainer","Lobby","mb","SessionStepType","useSessionStates","session","setSession","pathname","newPathname","stepType","Start","Write","SessionContext","SessionContextProvider","currentElement","setCurrentElement","SessionUpdate","actualStep","infoContainer","GameBar","useSessionContext","stepFinishAt","GymGuy","Router","HashRouter","Routes","basename","path","RoomRoutes","SessionRoutes","App","anchorOrigin","vertical","horizontal","preventDuplicate","maxSnack","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2256b7b0.chunk.js","sourcesContent":["import { responsiveFontSizes, createMuiTheme, fade } from '@material-ui/core';\nimport createPalette, { Palette } from '@material-ui/core/styles/createPalette';\n\nexport const PRIMARY = '#9c27b0';\nexport const SECONDARY = '#880061';\n\nfunction createBaseTheme(palette: Palette) {\n  return createMuiTheme({\n    palette: palette,\n    typography: {\n      h4: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 32,\n      },\n      h5: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        fontFamily: 'Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI',\n      },\n      subtitle1: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 16,\n      },\n      subtitle2: {\n        fontSize: 12,\n      },\n      body1: {\n        fontSize: 16,\n      },\n      body2: {\n        fontSize: 14,\n      },\n      fontFamily: [\n        '-apple-system',\n        'BlinkMacSystemFont',\n        'Segoe UI',\n        'Roboto',\n        'Oxygen',\n        'Ubuntu',\n        'Cantarell',\n        'Open Sans',\n        'Helvetica Neue',\n        'sans-serif',\n      ].join(','),\n    },\n    spacing: 8,\n    overrides: {\n      MuiButton: {\n        label: {\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n          overflow: 'hidden',\n        },\n        root: {\n          textTransform: 'none',\n          padding: '4px 8px',\n          borderRadius: 6,\n        },\n        contained: {\n          height: 42,\n          fontSize: 16,\n          color: palette.common.white,\n          fontFamily: 'Work Sans',\n          backgroundColor: palette.divider,\n          boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          position: 'relative',\n          '&:hover': {\n            backgroundColor: palette.action.hover,\n\n            boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          },\n          '&:focus': {\n            boxShadow: `0px 8px 1px ${fade('#000000', 0.8)}`,\n          },\n          '&:active': {\n            top: 8,\n            boxShadow: 'none',\n          },\n        },\n        iconSizeLarge: {\n          marginLeft: 0,\n        },\n        containedSizeLarge: {\n          height: 58,\n          padding: '8px 16px',\n          fontSize: 32,\n        },\n      },\n      MuiSwitch: {\n        root: {\n          width: 54,\n          height: 26,\n          padding: 0,\n          margin: 8,\n        },\n        switchBase: {\n          padding: 1,\n          '&$checked': {\n            transform: 'translateX(28px)',\n            '& + $track': {\n              backgroundColor: fade(palette.primary.light, 0.4),\n              opacity: 1,\n              border: 'none',\n            },\n          },\n        },\n        colorPrimary: {\n          '&$checked': {\n            '& + $track': {\n              backgroundColor: fade(palette.primary.light, 0.4),\n              border: `none`,\n              opacity: 1,\n            },\n          },\n        },\n        thumb: {\n          width: 24,\n          height: 24,\n        },\n        track: {\n          borderRadius: 26 / 2,\n          border: `none`,\n          backgroundColor: fade(palette.divider, 0.4),\n          opacity: 1,\n        },\n        checked: {},\n      },\n    },\n  });\n}\n\nlet theme = createBaseTheme(\n  createPalette({\n    type: 'dark',\n    primary: {\n      main: PRIMARY,\n    },\n    secondary: {\n      main: SECONDARY,\n    },\n    background: {\n      default: '#0f131a',\n      paper: '#1a1d24',\n    },\n  }),\n);\n\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import { Box, Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\n\ntype AppLayoutProps = {\n  children?: React.ReactElement | React.ReactElement[];\n};\n\nconst useStyles = makeStyles(theme => ({\n  gameBox: {\n    borderLeft: `1px solid ${theme.palette.secondary.main}`,\n    borderRight: `1px solid ${theme.palette.secondary.main}`,\n  },\n  container: {\n    padding: 0,\n    minHeight: '100vh',\n    maxWidth: `calc(${theme.breakpoints.values.lg}px - 128px)`,\n  },\n}));\n\nexport default function AppLayout({ children }: AppLayoutProps) {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container} maxWidth=\"lg\">\n      <Box\n        bgcolor=\"background.paper\"\n        display=\"block\"\n        margin=\"auto\"\n        height=\"100%\"\n        minHeight=\"100vh\"\n        width=\"100%\"\n        minWidth={320}\n        className={classes.gameBox}>\n        {children}\n      </Box>\n    </Container>\n  );\n}\n","import { testApiUrl } from '../test/data';\n\nconst apiURL = process.env.REACT_APP_API_URL || testApiUrl;\n\ntype config = {\n  data?: any;\n  token?: string | null;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'OPTIONS' | 'PATCH';\n  headers?: HeadersInit;\n  // if you want all possibility of `fetch`\n  customConfig?: RequestInit;\n};\n\n/*\n  To call the api.\n\n  To `get` an item\n  client(\"item\") OR client(\"item\", {method: \"GET\"}).then(resultJson => ...)\n  But it's \"GET\" by default if no data.\n\n  If you want `POST` an item, you need to provide data.\n  If Data was provided, default method is `POST`\n  client(\"item\", {data: myObject}).then(resultJson => ...).catch(error => ...)\n\n  To `patch` an item\n  client(\"item/1\", {method: \"PATCH\"}).then(resultJson => ...).catch(error => ...)\n  \n  To provide a Token :\n  client(\"item/1\", {method: \"PATCH\", token: \"MYTOKEN\"}).then(resultJson => ..., error => ...)\n\n  Same for post etc...\n\n  You can see exemple in `client.test.tsx`\n*/\nasync function client<T>(\n  endpoint: string,\n  { data, method, token, headers: customHeaders, customConfig }: config = {},\n): Promise<T> {\n  const config: RequestInit = {\n    method: method || (data ? 'POST' : 'GET'),\n    body: data ? JSON.stringify(data) : null,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : '',\n      'Content-Type': data ? 'application/json' : '',\n      Accept: 'application/json',\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n\n  return window.fetch(`${apiURL}/${endpoint}`, config).then(async response => {\n    // statusCode \"401\" is for unauthenticated request\n    if (response.status === 401) {\n      return Promise.reject({ message: 'Please re-authenticate.' });\n    }\n\n    const data = await response.json();\n    if (response.ok) {\n      return data;\n    } else {\n      return Promise.reject(data);\n    }\n  });\n}\n\nexport { client };\n","const playerTokenKey = '__player_provider_token__';\n\nfunction getToken() {\n  // TODO: check the token exist in the API\n  return window.localStorage.getItem(playerTokenKey);\n}\n\nfunction destroy() {\n  window.localStorage.removeItem(playerTokenKey);\n  // TODO: invalidate the token in API\n}\n\nfunction setToken(token: string) {\n  window.localStorage.setItem(playerTokenKey, token);\n  // TODO: invalidate the token in API\n}\n\nexport { getToken, destroy, setToken };\n","export default __webpack_public_path__ + \"static/media/spinner.efdf2d72.svg\";","import { Box } from '@material-ui/core';\nimport Spinner from '../images/spinner.svg';\n\nexport default function Loading() {\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n      <img src={Spinner} alt=\"loading\" />\n    </Box>\n  );\n}\n","export function parseJson<T>(text: string, init?: T): T | undefined {\n  let json: T;\n\n  try {\n    json = JSON.parse(text);\n  } catch (e) {\n    return init;\n  }\n\n  return json ? json : init;\n}\n","import React from 'react';\n\n/*\n * return function will be only called if component is currently mounted\n */\nfunction useSafeMounted(dispatch: (...args: any[]) => any) {\n  const mounted = React.useRef(false);\n\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  return React.useCallback(\n    (...args: unknown[]) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch],\n  );\n}\n\nexport default useSafeMounted;\n","import { Session } from 'inspector';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { getToken } from '../api/player-provider';\nimport { testApiUrl } from '../test/data';\nimport Player from '../types/Player.type';\nimport useSafeMounted from 'hooks/useSafeMounted';\n\nconst apiURL = process.env.REACT_APP_API_URL || testApiUrl;\nconst domainRegExp = /\\b(?:(?:https?|ftp):\\/\\/)?([^/\\n]+)\\/?/;\nconst url = `wss://${domainRegExp.exec(apiURL)?.[1]}/api/stream`;\n\nexport enum WsStates {\n  IDLE = 'Loading...',\n  CONNECTING = 'You will be connected',\n  CONNECTED = 'You are connected',\n  CLOSED = \"You're disconnected\",\n}\n\nexport enum WebsocketEvent {\n  Invalid = -1,\n  PlayerJoin = 1,\n  PlayerLeft = 2,\n  PlayerFinished = 3,\n  NewOwnerPlayer = 4,\n  PlayerKicked = 5,\n  SessionStart = 11,\n  SessionUpdate = 12,\n  NextStep = 13, // on a step is finish\n}\n\nexport type WebsocketMessage = {\n  websocketEvent: WebsocketEvent;\n  player?: Player;\n  playerId?: number;\n  session?: Partial<Session>;\n};\n\nexport function useWebsocket() {\n  const [websocket, setWebsocket] = React.useState<WebSocket>();\n  const [wsState, setWsState] = React.useState<WsStates>(WsStates.IDLE);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const onCloseCallback = React.useCallback(\n    (isSocketOpened: boolean) => {\n      setWsState(WsStates.CLOSED);\n      if (isSocketOpened) {\n        enqueueSnackbar('Connexion lost ', { variant: 'error' });\n        setWebsocket(undefined);\n      }\n    },\n    [enqueueSnackbar],\n  );\n  const safeOnClose = useSafeMounted(onCloseCallback);\n\n  const connect = React.useCallback(() => {\n    const socket = new WebSocket(url);\n    let isSocketOpened = false;\n    setWsState(WsStates.CONNECTING);\n    setWebsocket(socket);\n\n    socket.onopen = function () {\n      isSocketOpened = true;\n      // identifie the request\n      socket.send(JSON.stringify({ PlayerToken: getToken() }));\n      setWsState(WsStates.CONNECTED);\n    };\n\n    socket.onclose = function () {\n      safeOnClose(isSocketOpened);\n    };\n  }, [safeOnClose]);\n\n  React.useEffect(() => {\n    if (websocket) {\n      return () => websocket.close();\n    }\n    connect();\n  }, [connect, websocket]);\n\n  return { wsState, websocket };\n}\n","import React from 'react';\nimport { WsStates, useWebsocket } from './useWebsocket';\n\ntype WebsocketContextProps = {\n  wsState: WsStates;\n  websocket?: WebSocket;\n};\n\nconst WebsocketContext = React.createContext<WebsocketContextProps>({\n  wsState: WsStates.IDLE,\n});\n\ntype WebsocketContextProviderProps = { children: React.ReactElement };\n\nexport function WebsocketProvider({ children }: WebsocketContextProviderProps) {\n  const { wsState, websocket } = useWebsocket();\n\n  const values = { wsState, websocket };\n\n  return (\n    <WebsocketContext.Provider value={values}>\n      {children}\n    </WebsocketContext.Provider>\n  );\n}\n\nexport function useWebsocketContext() {\n  const context = React.useContext(WebsocketContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Loading from '../components/Loading';\nimport Player from '../types/Player.type';\nimport { parseJson } from '../utils/json';\nimport { WebsocketEvent, WebsocketMessage } from './useWebsocket';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype PlayerContextProps = {\n  player?: Player;\n};\n\nconst PlayerContext = React.createContext<PlayerContextProps>({});\n\ntype PlayerContextProviderProps = { children: React.ReactElement };\n\nexport function PlayerContextProvider({\n  children,\n}: PlayerContextProviderProps) {\n  const [player, setPlayer] = React.useState<Player>();\n  const { enqueueSnackbar } = useSnackbar();\n  const { websocket } = useWebsocketContext();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewOwnerPlayer:\n          if (websocketMessage?.player?.id === player?.id) {\n            setPlayer(prev => (prev ? { ...prev, isOwner: true } : prev));\n          }\n          break;\n      }\n    }\n    if (websocket && player) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [player, websocket]);\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Player>('player/me', { token: getToken() }).then(\n      player => !deleted && setPlayer(player),\n      () => {\n        enqueueSnackbar(\"We couldn't get you back online.\", {\n          variant: 'error',\n        });\n        history.push('/home');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  const values = { player };\n\n  return (\n    <PlayerContext.Provider value={values}>\n      {player ? children : <Loading />}\n    </PlayerContext.Provider>\n  );\n}\n\nexport function usePlayerContext() {\n  const context = React.useContext(PlayerContext);\n  if (!context)\n    throw new Error(\n      'usePlayerContext should be used within a PlayerContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from '../api/client';\nimport { destroy, getToken } from '../api/player-provider';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { usePlayerContext } from './PlayerProvider';\n\nexport function useRoomStates() {\n  const [room, setRoom] = React.useState<Room>();\n  const [players, setPlayers] = React.useState<Player[]>([]);\n  const { player } = usePlayerContext();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateRoom = React.useCallback(() => {\n    client<Room>(`room/${player?.roomId}`, { token: getToken() }).then(setRoom);\n  }, [player?.roomId]);\n\n  const updatePlayer = React.useCallback(() => {\n    client<Player[]>(`room/${player?.roomId}/players`, {\n      token: getToken(),\n    }).then(setPlayers);\n  }, [player?.roomId]);\n\n  const removePlayer = React.useCallback(\n    (playerId?: number) => {\n      if (!playerId) return;\n      if (playerId === player?.id) {\n        history.push('/home');\n        destroy();\n        enqueueSnackbar(\"Seems like you've been kicked from the room \", {\n          variant: 'info',\n        });\n      }\n      setPlayers(prevPlayers => {\n        const playerIndex = prevPlayers?.findIndex(p => p.id === playerId);\n        if (playerIndex !== -1) {\n          const playersCopy = [...prevPlayers];\n          playersCopy.splice(playerIndex, 1);\n          return playersCopy;\n        }\n        return prevPlayers;\n      });\n    },\n    [enqueueSnackbar, history, player?.id],\n  );\n\n  const addPlayer = React.useCallback((player?: Player) => {\n    if (!player) return;\n\n    setPlayers(prevPlayers => {\n      if (prevPlayers.find(p => p.id === player.id)) return prevPlayers;\n      return [...prevPlayers, player];\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (!player?.roomId) {\n      history.push('/home');\n      return;\n    }\n    updateRoom();\n    updatePlayer();\n  }, [history, player?.roomId, updatePlayer, updateRoom]);\n\n  return { updatePlayer, updateRoom, removePlayer, addPlayer, room, players };\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { parseJson } from '../utils/json';\nimport { useRoomStates } from './useRoomStates';\nimport { WebsocketMessage, WebsocketEvent, WsStates } from './useWebsocket';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype RoomSocketContextProps = {\n  room?: Room;\n  wsState: WsStates;\n  players: Player[];\n};\n\nconst RoomContext = React.createContext<RoomSocketContextProps>({\n  wsState: WsStates.IDLE,\n  players: [],\n});\n\ntype RoomSocketContextProviderProps = { children: React.ReactElement };\n\nexport function RoomContextProvider({\n  children,\n}: RoomSocketContextProviderProps) {\n  const {\n    room,\n    players,\n    updatePlayer,\n    removePlayer,\n    addPlayer,\n  } = useRoomStates();\n  const history = useHistory();\n  const { wsState, websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const message = event.data;\n      const websocketMessage = parseJson<WebsocketMessage>(message);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.Invalid:\n          enqueueSnackbar(\n            \"You are not playing, we'll redirect you on Home page.\",\n            { variant: 'error' },\n          );\n          history.push('/home');\n          break;\n        case WebsocketEvent.PlayerJoin:\n          addPlayer(websocketMessage.player);\n          break;\n        case WebsocketEvent.PlayerLeft:\n          removePlayer(websocketMessage.playerId);\n          break;\n        case WebsocketEvent.NewOwnerPlayer:\n          updatePlayer();\n          break;\n        case WebsocketEvent.SessionStart:\n          history?.push('/r/start');\n          break;\n        case WebsocketEvent.PlayerKicked:\n          removePlayer(websocketMessage.playerId);\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [\n    addPlayer,\n    enqueueSnackbar,\n    history,\n    removePlayer,\n    updatePlayer,\n    websocket,\n  ]);\n\n  const values = { room, wsState, players };\n\n  return <RoomContext.Provider value={values}>{children}</RoomContext.Provider>;\n}\n\nexport function useRoomContext() {\n  const context = React.useContext(RoomContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport LoopIcon from '@material-ui/icons/Loop';\n\nconst useStyles = makeStyles(() => ({\n  spin: {\n    animation: `spinnerIconEffect 1s linear infinite`,\n  },\n  '@global': {\n    '@keyframes spinnerIconEffect': {\n      '0%': { transform: 'rotate(0deg)' },\n      '100%': { transform: 'rotate(-360deg)' },\n    },\n  },\n}));\n\nexport default function SpinnerIcon(props: {\n  className?: string;\n  style?: any;\n}) {\n  const classes = useStyles();\n  return (\n    <LoopIcon\n      style={props.style}\n      aria-label=\"spinner icon\"\n      className={clsx(props.className, classes.spin)}\n    />\n  );\n}\n","import React from 'react';\nimport { Button, ButtonProps } from '@material-ui/core';\nimport SpinnerIcon from './SpinnerIcon';\n\ntype BigButtonProps = ButtonProps & {\n  children?: React.ReactNode;\n  loading?: boolean;\n  onClick?: () => void;\n};\n\nexport default function BigButton({\n  children,\n  loading,\n  onClick,\n  ...props\n}: BigButtonProps) {\n  return (\n    <Button onClick={onClick} variant=\"contained\" color=\"secondary\" {...props}>\n      {loading ? <SpinnerIcon /> : children}\n    </Button>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\n\ntype PlayerCountProps = {\n  count: number;\n  max: number;\n};\n\nexport default function PlayerCount({ count, max }: PlayerCountProps) {\n  return (\n    <Box py={1}>\n      <Typography variant=\"subtitle1\">\n        {count}/{max}\n      </Typography>\n    </Box>\n  );\n}\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  text: {\n    margin: 0,\n    fontFamily: 'Modak',\n    fontSize: 64,\n    fontWeight: 'normal',\n    textAlign: 'center',\n    color: '#FFFFFF',\n    width: '100%',\n  },\n  drawText: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nexport default function AppTitle() {\n  const classes = useStyles();\n  return (\n    <h1 className={classes.text}>\n      Holy<span className={classes.drawText}>Draw</span>\n    </h1>\n  );\n}\n","import React, { InputHTMLAttributes } from 'react';\nimport { fade, makeStyles, Theme } from '@material-ui/core';\n\ntype ContainerProps = {\n  focus: boolean;\n  disabled?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, ContainerProps>(theme => ({\n  input: {\n    backgroundColor: 'inherit',\n    border: 'none',\n    width: '100%',\n    fontSize: 24,\n    height: 34,\n    fontFamily: 'Work Sans',\n    color: theme.palette.text.primary,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 32,\n      height: 36,\n    },\n    '&:disabled': {\n      color: theme.palette.text.disabled,\n    },\n  },\n  container: {\n    display: 'flex',\n    backgroundColor: props =>\n      props.disabled\n        ? fade(theme.palette.background.default, 0.4)\n        : theme.palette.background.default,\n    cursor: props => (props.disabled ? 'not-allowed' : 'pointer'),\n    border: props =>\n      props.disabled\n        ? `1px solid ${fade(theme.palette.secondary.main, 0.6)}`\n        : `1px solid ${theme.palette.secondary.main}`,\n    borderRadius: 4,\n    alignItems: 'center',\n    transition: 'box-shadow ease-in .2s',\n    gap: 12,\n    height: 40,\n    padding: '4px 0 4px 8px',\n    [theme.breakpoints.up('sm')]: {\n      gap: 16,\n      height: 48,\n      padding: '8px 4px 8px 16px',\n    },\n    boxShadow: props =>\n      props.focus\n        ? `0 0 2px 0.2rem ${fade(theme.palette.secondary.main, 0.4)}`\n        : undefined,\n  },\n  icon: {\n    width: 32,\n    height: 32,\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n}));\n\ntype BigInputProps = InputHTMLAttributes<HTMLInputElement> & {\n  startIcon?: React.ReactElement;\n};\n\nexport default function BigInput({\n  disabled,\n  startIcon,\n  ...props\n}: BigInputProps) {\n  const [focus, setFocus] = React.useState(false);\n  const classes = useStyles({ disabled, focus });\n\n  return (\n    <div className={classes.container}>\n      {startIcon &&\n        React.cloneElement(startIcon, {\n          className: classes.icon,\n          'data-testid': 'biginput-icon',\n        })}\n      <input\n        className={classes.input}\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n        disabled={disabled}\n        {...props}\n      />\n    </div>\n  );\n}\n","export const baseColor = '#880061';\nexport const bgColor = '#0F131A';\nexport const paperColor = '#1A1D24';\nexport const disabledText = '#BDBDBD';\nexport const secondaryText = '#E0E0E0';\nexport const primaryText = '#F2F2F2';\n\nexport const primaryFade = (fade: number) => `rgba(136, 0, 97, ${fade})`;\nexport const bgFade = (fade: number) => `rgba(15, 19, 26, ${fade})`;\n","import { baseColor, bgColor } from 'styles/colors';\nimport { Avatar, Box, makeStyles, Typography } from '@material-ui/core';\nimport PersonIcon from '@material-ui/icons/Person';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport clsx from 'clsx';\n\ntype PlayerCardProps = {\n  id: number;\n  name: string;\n  avatar: string;\n  isOwner?: boolean;\n  isKickable?: boolean;\n  isCurrentPlayer?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 48,\n    height: 48,\n    backgroundColor: 'transparent',\n    border: `1px solid ${theme.palette.secondary.main}`,\n    overflow: 'visible',\n    '&> img': {\n      height: 48,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: baseColor,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  icon: {\n    color: '#ffffff',\n  },\n  badgeIcon: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontFamily: 'Work Sans',\n    fontSize: 20,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    maxWidth: 128,\n    whiteSpace: 'nowrap',\n  },\n  kickButton: {\n    cursor: 'pointer',\n  },\n}));\n\nexport default function PlayerCard({\n  id,\n  name,\n  avatar,\n  isOwner,\n  isKickable,\n  isCurrentPlayer,\n  onKick,\n}: PlayerCardProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      border={1}\n      width={256}\n      height={64}\n      borderRadius={4}\n      padding={1}\n      display=\"flex\"\n      alignItems=\"center\"\n      borderColor=\"secondary.main\"\n      justifyContent=\"space-between\"\n      bgcolor={bgColor}>\n      <Box position=\"relative\">\n        {isCurrentPlayer && (\n          <div className={classes.badge}>\n            <PersonIcon\n              className={clsx(classes.icon, classes.badgeIcon)}\n              data-testid=\"user-icon\"\n            />\n          </div>\n        )}\n        <Avatar src={avatar} className={classes.avatar} />\n      </Box>\n\n      <Typography color=\"textPrimary\" className={classes.username}>\n        {name}\n      </Typography>\n      <Box display=\"flex\" alignItems=\"center\">\n        {isOwner ? (\n          <StarIcon className={classes.icon} data-testid=\"star-icon\" />\n        ) : (\n          isKickable && (\n            <Box\n              component=\"button\"\n              padding={0}\n              border={0}\n              className={classes.kickButton}\n              height={24}\n              onClick={() => onKick?.(id, name)}\n              bgcolor=\"transparent\">\n              <CloseIcon className={classes.icon} />\n            </Box>\n          )\n        )}\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/pp-1.acb77223.png\";","import Pp1 from './pp-1.png';\nimport Pp2 from './pp-2.png';\nimport Pp3 from './pp-3.png';\nimport Pp4 from './pp-4.png';\nimport Pp5 from './pp-5.png';\nimport Pp6 from './pp-6.png';\nimport Pp7 from './pp-7.png';\nimport Pp8 from './pp-8.png';\n\nconst profilesPictures = [Pp1, Pp2, Pp3, Pp4, Pp5, Pp6, Pp7, Pp8];\n\nexport default profilesPictures;\n","export default __webpack_public_path__ + \"static/media/pp-2.c82c2211.png\";","export default __webpack_public_path__ + \"static/media/pp-3.9c11a583.png\";","export default __webpack_public_path__ + \"static/media/pp-4.5ae6cc4a.png\";","export default __webpack_public_path__ + \"static/media/pp-5.d5627fd6.png\";","export default __webpack_public_path__ + \"static/media/pp-6.228ed3be.png\";","export default __webpack_public_path__ + \"static/media/pp-7.762b4b0e.png\";","export default __webpack_public_path__ + \"static/media/pp-8.7bfd9d10.png\";","import PlayerCard from './PlayerCard';\nimport Player from 'types/Player.type';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport { Box, Grid } from '@material-ui/core';\n\ntype PlayerCardListProps = {\n  players?: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nexport default function PlayerCardList({\n  players,\n  playerId,\n  isKickable,\n  onKick,\n}: PlayerCardListProps) {\n  return (\n    <Box height={384} width={256 + 8 + 8} overflow=\"hidden scroll\">\n      <Grid container spacing={2} alignItems=\"flex-end\">\n        {players &&\n          players.map(player => {\n            const isPlayerSelected = playerId === player.id;\n            return (\n              <Grid item xs={12} key={player.id}>\n                <PlayerCard\n                  id={player.id}\n                  name={player.username}\n                  avatar={profilesPictures[Number(player.avatarUrl)]}\n                  isOwner={player.isOwner}\n                  isKickable={isKickable}\n                  isCurrentPlayer={isPlayerSelected}\n                  onKick={onKick}\n                />\n              </Grid>\n            );\n          })}\n      </Grid>\n    </Box>\n  );\n}\n","import React from 'react';\n\nexport type UseTimerIntervalProps = {\n  finishAt: Date;\n  timeDuration: number;\n  onFinish?: () => void;\n};\n\nexport default function useTimerInterval({\n  finishAt,\n  timeDuration,\n  onFinish,\n}: UseTimerIntervalProps) {\n  const [progress, setProgress] = React.useState(0);\n  const [timerInterval, setTimerInterval] = React.useState<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    setProgress(updateProgress(finishAt, timeDuration));\n    const interval = setInterval(\n      () => setProgress(updateProgress(finishAt, timeDuration)),\n      1000,\n    );\n    setTimerInterval(interval);\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration]);\n\n  React.useEffect(() => {\n    if (progress >= 100) {\n      onFinish?.();\n      timerInterval && clearInterval(timerInterval);\n    }\n  }, [progress, onFinish, timerInterval]);\n\n  return { progress };\n}\n\nfunction updateProgress(finishAt: Date, timeDuration: number) {\n  const diff = Math.round((finishAt.getTime() - new Date().getTime()) / 1000);\n  const progress = 100 - (diff * 100) / timeDuration;\n  return progress > 100 ? 100 : progress;\n}\n","import React from 'react';\nimport { CircularProgress } from '@material-ui/core';\nimport useTimerInterval, {\n  UseTimerIntervalProps,\n} from 'hooks/useTimerInterval';\n\nexport default function StepTimer(props: UseTimerIntervalProps) {\n  const { progress } = useTimerInterval(props);\n\n  return (\n    <CircularProgress\n      size={64}\n      thickness={4}\n      variant=\"determinate\"\n      value={progress}\n    />\n  );\n}\n","import { Box, fade, makeStyles, Typography } from '@material-ui/core';\n\ntype DirectiveLabelProps = {\n  directive: string;\n  sentence?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  sentence: {\n    textAlign: 'center',\n  },\n  container: {\n    backgroundColor: fade(theme.palette.secondary.main, 0.8),\n    boxShadow: `0px 0px 4px ${fade(theme.palette.background.default, 0.8)}`,\n  },\n}));\n\nexport default function DirectiveLabel({\n  directive,\n  sentence,\n}: DirectiveLabelProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      width={470}\n      display=\"flex\"\n      padding={1}\n      borderRadius={4}\n      alignItems=\"center\"\n      flexDirection=\"column\"\n      className={classes.container}>\n      <Typography variant=\"subtitle1\" color=\"textSecondary\">\n        {directive}\n      </Typography>\n      {sentence && (\n        <Typography\n          variant=\"h4\"\n          color=\"textPrimary\"\n          className={classes.sentence}>\n          {sentence}\n        </Typography>\n      )}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles } from '@material-ui/core';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\n\ntype PlayerAvatarProps = {\n  image: string;\n  onShuffle?: () => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    backgroundColor: theme.palette.secondary.main,\n    outline: 'none',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    cursor: 'pointer',\n    border: 'none',\n    width: 48,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 48,\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n    '&:active': {\n      bottom: -4,\n      boxShadow: 'none',\n    },\n  },\n  imgBox: {\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n  },\n  img: {\n    height: 256,\n    width: 'auto',\n    margin: 'auto',\n  },\n}));\n\nexport default function PlayerAvatar({ image, onShuffle }: PlayerAvatarProps) {\n  const classes = useStyles();\n  return (\n    <Box alignItems=\"center\" width={256} position=\"relative\" height={256}>\n      <button className={classes.button} onClick={onShuffle}>\n        <ShuffleIcon style={{ color: '#FFFFFF' }} />\n      </button>\n      <Box\n        border={2}\n        display=\"flex\"\n        borderColor=\"secondary.main\"\n        borderRadius=\"50%\"\n        width={256}\n        height={256}\n        bgcolor=\"background.default\"\n        className={classes.imgBox}>\n        <img src={image} className={classes.img} alt=\"Avatar\" />\n      </Box>\n    </Box>\n  );\n}\n","import { primaryFade } from 'styles/colors';\nimport React from 'react';\nimport { Box } from '@material-ui/core';\n\ntype DrawColorPickerProps = {\n  colors: string[];\n  onColorChange?: (color: string) => void;\n  currentColor: string;\n};\n\nfunction getCoupleColors(colors: string[]) {\n  return colors.reduce(\n    (accumulator: { index: number; result: string[][] }, value) => {\n      const colorCouples = accumulator.result[accumulator.index];\n      switch (colorCouples?.length) {\n        case undefined:\n          accumulator.result[accumulator.index] = [value];\n          break;\n        case 1:\n          accumulator.result[accumulator.index].push(value);\n          break;\n        default:\n          accumulator.index++;\n          accumulator.result[accumulator.index] = [value];\n      }\n      return accumulator;\n    },\n    { index: 0, result: [] },\n  ).result;\n}\n\nexport default function DrawColorPicker({\n  colors,\n  currentColor,\n  onColorChange,\n}: DrawColorPickerProps) {\n  const coupleColors: string[][] = React.useMemo(\n    () => getCoupleColors(colors),\n    [colors],\n  );\n\n  return (\n    <Box\n      width={88}\n      display=\"flex\"\n      flexDirection=\"column\"\n      padding=\"8px\"\n      borderRadius={4}\n      gridGap={8}\n      border={1}\n      borderColor=\"#000000\"\n      justifyContent=\"center\"\n      bgcolor={primaryFade(0.2)}>\n      {coupleColors.map((couple, index) => (\n        <Box\n          key={index}\n          display=\"flex\"\n          flexDirection=\"row\"\n          justifyContent=\"space-between\"\n          top={248}>\n          {couple.map((squareColor, index) => {\n            const isSelected = squareColor === currentColor;\n\n            return (\n              <Box\n                component=\"button\"\n                key={index}\n                onClick={() => onColorChange?.(squareColor)}\n                border={isSelected ? 2 : 1}\n                bgcolor={squareColor}\n                borderColor={isSelected ? '#FFFFFF' : '#000000'}\n                width={32}\n                height={32}\n                borderRadius={4}\n              />\n            );\n          })}\n        </Box>\n      ))}\n    </Box>\n  );\n}","import { Box, makeStyles, Theme } from '@material-ui/core';\nimport { bgFade, primaryFade } from 'styles/colors';\n\ntype SizePickerProps = {\n  currentSize: number;\n  onSizeChange: (size: number) => void;\n};\n\nconst buttonSizes = [4, 8, 16, 20, 24, 30];\n\nexport default function SizePicker({\n  currentSize,\n  onSizeChange,\n}: SizePickerProps) {\n  return (\n    <Box\n      padding={1}\n      gridGap={8}\n      bgcolor={primaryFade(0.2)}\n      display=\"flex\"\n      borderRadius={4}\n      border={1}\n      borderColor=\"#000000\"\n      alignItems=\"center\"\n      boxShadow={`0px 0px 4px ${bgFade(0.8)}`}>\n      {buttonSizes.map((size, i) => {\n        const isCurrentSize = currentSize === size;\n        return (\n          <SizePickerPoint\n            key={size}\n            onSizeChange={onSizeChange}\n            size={size}\n            isCurrentSize={isCurrentSize}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nconst useStyles = makeStyles<Theme, { isCurrentSize: boolean }>(() => ({\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    border: '2px solid #000000',\n    borderRadius: '50%',\n    width: 40,\n    height: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    boxShadow: props =>\n      props.isCurrentSize ? `0 0 0 2px ${primaryFade(0.8)}` : undefined,\n  },\n}));\n\nfunction SizePickerPoint({\n  onSizeChange,\n  size,\n  isCurrentSize,\n}: {\n  onSizeChange: (size: number) => void;\n  size: number;\n  isCurrentSize: boolean;\n}) {\n  const classes = useStyles({ isCurrentSize });\n  return (\n    <button onClick={() => onSizeChange(size)} className={classes.button}>\n      <Box\n        borderRadius=\"50%\"\n        border=\"1px solid #000000\"\n        bgcolor=\"#000000\"\n        width={size}\n        height={size}\n      />\n    </button>\n  );\n}\n","import { copyToClipboard } from 'utils/clipboard';\nimport { Button } from '@material-ui/core';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useSnackbar } from 'notistack';\n\ntype ShareRoomButtonProps = {\n  identifier?: string;\n};\n\nexport default function ShareRoomButton({ identifier }: ShareRoomButtonProps) {\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onShared() {\n    if (identifier) {\n      copyToClipboard(`${window.location.origin}/join/${identifier}`);\n      enqueueSnackbar('URL successfully copied ', { variant: 'success' });\n    }\n  }\n  return (\n    <Button\n      startIcon={<VpnKeyIcon style={{ fontSize: 32 }} />}\n      onClick={onShared}\n      size=\"large\"\n      variant=\"contained\">\n      {identifier || 'loading...'}\n    </Button>\n  );\n}\n","export function copyToClipboard(value: string) {\n  const tempInput = document.createElement('input');\n  tempInput.value = value;\n  document.body.appendChild(tempInput);\n  tempInput.select();\n  document.execCommand('copy');\n  document.body.removeChild(tempInput);\n}\n","import { Avatar, fade, makeStyles, Theme } from '@material-ui/core';\nimport profilesPictures from 'images/profiles/profiles-pictures';\n\nconst useAvatarStyles = makeStyles<Theme, { isSelected: boolean }>(theme => ({\n  avatar: {\n    height: 64,\n    width: 64,\n    overflow: 'visible',\n    backgroundColor: props =>\n      props.isSelected\n        ? fade(theme.palette.secondary.main, 0.6)\n        : fade(theme.palette.secondary.main, 0.2),\n    [theme.breakpoints.up('sm')]: {\n      height: 40,\n      width: 40,\n    },\n    '&> img': {\n      height: 64,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n      [theme.breakpoints.up('sm')]: {\n        height: 40,\n      },\n    },\n  },\n}));\n\nexport default function BookPlayerAvatar({\n  avatarUrl,\n  isSelected,\n}: {\n  avatarUrl: string;\n  isSelected: boolean;\n}) {\n  const classes = useAvatarStyles({ isSelected });\n  return (\n    <Avatar\n      className={classes.avatar}\n      src={profilesPictures[Number(avatarUrl)]}\n    />\n  );\n}\n","import Player from 'types/Player.type';\nimport {\n  Box,\n  makeStyles,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BookPlayerAvatar from './BookPlayerAvatar';\n\ntype BookPlayerListProps = {\n  players: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onClick?: (id: number, username: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: theme.palette.secondary.main,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    border: 0,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 2,\n  },\n  container: {\n    overflowX: 'scroll',\n  },\n  username: {\n    overflow: 'hidden',\n    textAlign: 'center',\n    maxWidth: 64,\n    whiteSpace: 'nowrap',\n  },\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    padding: 0,\n  },\n  icon: {\n    fontSize: 16,\n    color: theme.palette.common.white,\n  },\n}));\n\nexport default function BookPlayerList({\n  players,\n  playerId,\n  onClick,\n  isKickable,\n}: BookPlayerListProps) {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const classes = useStyles();\n\n  return (\n    <Box\n      display=\"flex\"\n      gridGap={8}\n      maxWidth={isDeviceSM ? 200 : 285}\n      className={classes.container}\n      alignItems=\"center\"\n      flexDirection=\"row\">\n      {players.map((player, i) => {\n        const isPlayerSelected = playerId === player.id;\n        return (\n          <Tooltip key={player.id} title={player.username} placement=\"top\">\n            <Box flexDirection=\"column\" alignItems=\"center\" zIndex={4}>\n              <Box position={{ xs: 'relative', sm: 'initial' }}>\n                {!isDeviceSM &&\n                  (player.isOwner ? (\n                    <div className={classes.badge}>\n                      <StarIcon\n                        data-testid=\"star-icon\"\n                        className={classes.icon}\n                      />\n                    </div>\n                  ) : (\n                    isKickable && (\n                      <button\n                        onClick={() =>\n                          !player.isOwner &&\n                          isKickable &&\n                          onClick?.(player.id, player.username)\n                        }\n                        className={classes.badge}>\n                        <CloseIcon\n                          data-testid=\"kick-icon\"\n                          className={classes.icon}\n                        />\n                      </button>\n                    )\n                  ))}\n                <BookPlayerAvatar\n                  isSelected={isPlayerSelected}\n                  avatarUrl={player.avatarUrl}\n                />\n              </Box>\n              {!isDeviceSM && (\n                <Typography\n                  className={classes.username}\n                  component=\"p\"\n                  variant=\"subtitle1\">\n                  {player.username}\n                </Typography>\n              )}\n            </Box>\n          </Tooltip>\n        );\n      })}\n    </Box>\n  );\n}\n","export type Coordinate = {\n  x: number;\n  y: number;\n};\n\nexport type Line = {\n  id?: number;\n  type: LineType;\n  color: string;\n  size: number;\n  points: Coordinate[];\n};\n\nexport enum LineType {\n  LINE = 0,\n}\n","import React from 'react';\nimport BigButton from '../BigButton';\nimport PlayForWorkIcon from '@material-ui/icons/PlayForWork';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  TextField,\n} from '@material-ui/core';\n\ntype ModalJoinProps = {\n  identifier?: string;\n  onClick: (identifier: string) => void;\n  loading?: boolean;\n  className?: string;\n};\n\nexport default function ModalJoin({\n  identifier: urlIdentifier,\n  loading,\n  onClick,\n  className,\n}: ModalJoinProps) {\n  const [open, setOpen] = React.useState(false);\n  const [identifier, setIdentifier] = React.useState('');\n  return (\n    <>\n      <BigButton\n        startIcon={<PlayForWorkIcon style={{ fontSize: 32 }} />}\n        loading={loading}\n        className={className}\n        size=\"large\"\n        onClick={() =>\n          urlIdentifier ? onClick(urlIdentifier) : setOpen(true)\n        }>\n        Join\n      </BigButton>\n\n      <Dialog\n        fullWidth\n        maxWidth=\"xs\"\n        open={open}\n        onClose={() => setOpen(false)}>\n        <DialogTitle>Join a game </DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Identifier\"\n            type=\"email\"\n            value={identifier}\n            onChange={event => setIdentifier(event.target.value)}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"primary\">\n            Cancel \n          </Button>\n          <Button\n            onClick={() => {\n              onClick(identifier);\n              setOpen(false);\n            }}\n            color=\"primary\">\n            Join \n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import { Coordinate, Line, LineType } from 'types/canvas.types';\n\nexport const canvasScale = 2;\n\nexport const rerenderDraw = (canvas: HTMLCanvasElement, lines: Line[]) => {\n  const context = canvas.getContext('2d');\n  if (!context) return;\n\n  clearDraw(canvas, context);\n\n  lines &&\n    lines.forEach(line => {\n      let currentPosition: Coordinate = line.points[0];\n      const positionCopy: Coordinate[] = [];\n      line.points.forEach(coordinate => {\n        positionCopy.push(coordinate);\n        if (positionCopy.length > 3) {\n          const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n            positionCopy,\n          );\n\n          drawCanvasLine(\n            context,\n            currentPosition,\n            controlPoint,\n            endPoint,\n            line,\n          );\n          currentPosition = endPoint;\n        }\n      });\n    });\n};\n\nexport const clearDraw = (\n  canvas: HTMLCanvasElement,\n  context?: CanvasRenderingContext2D | null,\n) => {\n  context?.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nexport const drawCanvasLine = (\n  ctx: CanvasRenderingContext2D,\n  beginPosition: Coordinate,\n  controlPosition: Coordinate,\n  endPosition: Coordinate,\n  line: Line,\n) => {\n  ctx.strokeStyle = line.color;\n  ctx.lineJoin = 'round';\n  ctx.lineCap = 'round';\n  ctx.lineWidth = line.size;\n\n  ctx.beginPath();\n\n  switch (line.type) {\n    case LineType.LINE:\n      ctx.moveTo(beginPosition.x, beginPosition.y);\n      ctx.quadraticCurveTo(\n        controlPosition.x,\n        controlPosition.y,\n        endPosition.x,\n        endPosition.y,\n      );\n      ctx.stroke();\n      break;\n  }\n  ctx.closePath();\n};\n\nexport function getQuadraticCurveCoordinates(positions: Coordinate[]) {\n  const [lastPoint, prevPoint] = positions.slice(-2);\n  const controlPoint = lastPoint;\n  const endPoint = {\n    x: (lastPoint.x + prevPoint.x) / 2,\n    y: (lastPoint.y + prevPoint.y) / 2,\n  };\n\n  return { controlPoint, endPoint };\n}\n\nexport const getCoordinates = (\n  event: MouseEvent,\n  canvas?: HTMLCanvasElement | null,\n): Coordinate | undefined => {\n  if (!canvas) return;\n  return {\n    x: (event.pageX - canvas.offsetLeft) * canvasScale,\n    y: (event.pageY - canvas.offsetTop) * canvasScale,\n  };\n};\n","import React from 'react';\nimport { Coordinate, Line, LineType } from 'types/canvas.types';\nimport {\n  clearDraw,\n  drawCanvasLine,\n  canvasScale,\n  getQuadraticCurveCoordinates,\n  rerenderDraw,\n} from 'utils/canvas.utils';\n\ntype useCanvasMouseProps = {\n  color: string;\n  size: number;\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>;\n};\n\nfunction useCanvasPaint({ color, size, canvasRef }: useCanvasMouseProps) {\n  const mouseCoordinate = React.useRef<Coordinate>({\n    x: 0,\n    y: 0,\n  });\n  const lines = React.useRef<Line[]>([]);\n\n  const getLastLine = () => lines.current[lines.current.length - 1];\n\n  const addLastLine = React.useCallback((coordinate?: Coordinate) => {\n    if (!coordinate) return;\n    getLastLine().points.push(coordinate);\n    mouseCoordinate.current = coordinate;\n  }, []);\n\n  const paint = React.useCallback(\n    (newMousePosition?: Coordinate) => {\n      if (!newMousePosition || !mouseCoordinate || !canvasRef.current) return;\n\n      const lastLine = getLastLine();\n      lastLine.points.push(newMousePosition);\n\n      const context = canvasRef.current.getContext('2d');\n      if (!context || lastLine.points.length <= 2) return;\n\n      const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n        lastLine.points,\n      );\n\n      drawCanvasLine(\n        context,\n        mouseCoordinate.current,\n        controlPoint,\n        endPoint,\n        lastLine,\n      );\n      mouseCoordinate.current = endPoint;\n    },\n    [canvasRef],\n  );\n\n  const create = React.useCallback(\n    (coordinate: Coordinate, isNewLine?: boolean) => {\n      mouseCoordinate.current = coordinate;\n      if (isNewLine)\n        lines.current.push({\n          type: LineType.LINE,\n          color,\n          size: size * canvasScale,\n          points: [coordinate],\n        });\n      else paint(coordinate);\n    },\n    [color, paint, size],\n  );\n\n  const undo = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    lines.current.pop();\n    rerenderDraw(canvasRef.current, lines.current);\n  }, [canvasRef]);\n\n  const clear = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    clearDraw(canvasRef.current, canvasRef.current.getContext('2d'));\n  }, [canvasRef]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const onKeyDown = (event: any) => {\n      if (event.keyCode === 90 && (event.ctrlKey || event.metaKey)) undo();\n    };\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [canvasRef, undo]);\n\n  return {\n    paint,\n    create,\n    addLastLine,\n    undo,\n    lines,\n    mouseCoordinate,\n    clear,\n  };\n}\n\nexport default useCanvasPaint;\n","import { Box, IconButton } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\n\ntype CanvasDrawActionsProps = {\n  onClear?: () => void;\n  onUndo?: () => void;\n};\n\nexport default function CanvasDrawActions({\n  onClear,\n  onUndo,\n}: CanvasDrawActionsProps) {\n  return (\n    <Box ml={1} display=\"flex\" flexDirection=\"column\">\n      <IconButton onClick={onClear}>\n        <DeleteIcon />\n      </IconButton>\n      <IconButton onClick={onUndo}>\n        <UndoIcon />\n      </IconButton>\n    </Box>\n  );\n}\n","import { Box, makeStyles } from '@material-ui/core';\nimport useCanvasEventListener from 'components/room/draw/useCanvasEventListener';\nimport useCanvasPaint from './useCanvasPaint';\nimport React from 'react';\nimport { canvasScale, getCoordinates } from 'utils/canvas.utils';\nimport CanvasDrawActions from './CanvasDrawActions';\n\nconst canvasWidth = {\n  width: 512,\n  height: 320,\n  border: 4,\n};\n\ntype CanvasDrawProps = {\n  color?: string;\n  size?: number;\n};\n\nconst useStyles = makeStyles(theme => ({\n  canvas: {\n    backgroundColor: '#DDDDDD',\n    width: canvasWidth.width,\n    height: canvasWidth.height,\n    cursor: 'crosshair',\n  },\n}));\n\nexport default function CanvasDraw({\n  color = '#900050',\n  size = 4,\n}: CanvasDrawProps) {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const [isPainting, setIsPainting] = React.useState(false);\n  const { paint, create, addLastLine, clear, undo } = useCanvasPaint({\n    color,\n    size,\n    canvasRef,\n  });\n  const classes = useStyles();\n\n  const onMouseDown = React.useCallback(\n    (event: MouseEvent, isNewLine: boolean = true) => {\n      const coordinates = getCoordinates(event, canvasRef.current);\n      if (!coordinates) return;\n      setIsPainting(true);\n\n      create(coordinates, isNewLine);\n    },\n    [create],\n  );\n\n  const onMouseUp = React.useCallback(\n    (event: MouseEvent) => {\n      setIsPainting(false);\n      const coordinate = getCoordinates(event);\n      addLastLine(coordinate);\n    },\n    [addLastLine],\n  );\n\n  const onMouseEnter = React.useCallback(\n    (event: MouseEvent) => {\n      if (isPainting) onMouseDown(event, false);\n    },\n    [isPainting, onMouseDown],\n  );\n\n  const onMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      if (!isPainting || !canvasRef.current) return;\n      const newMousePosition = getCoordinates(event, canvasRef.current);\n      paint(newMousePosition);\n    },\n    [isPainting, paint],\n  );\n\n  useCanvasEventListener({\n    canvasRef,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    onMouseMove,\n    isPainting,\n  });\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.width = canvasWidth.width * canvasScale;\n    canvas.height = canvasWidth.height * canvasScale;\n  }, [canvasRef]);\n\n  return (\n    <>\n      <Box\n        width={canvasWidth.width + canvasWidth.border * canvasScale}\n        height={canvasWidth.height + canvasWidth.border * canvasScale}\n        border={canvasWidth.border}\n        borderColor=\"secondary.main\"\n        boxShadow={1}>\n        <canvas ref={canvasRef} className={classes.canvas} />\n      </Box>\n\n      <CanvasDrawActions onClear={clear} onUndo={undo} />\n    </>\n  );\n}\n","import React from 'react';\n\ntype UseCanvasEventListenerProps = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  isPainting?: boolean;\n  onMouseUp: (event: MouseEvent) => void;\n  onMouseEnter: (event: MouseEvent) => void;\n  onMouseMove: (event: MouseEvent) => void;\n  onMouseDown: (event: MouseEvent) => void;\n};\n\nexport default function useCanvasEventListener({\n  canvasRef,\n  isPainting,\n  onMouseMove,\n  onMouseEnter,\n  onMouseDown,\n  onMouseUp,\n}: UseCanvasEventListenerProps) {\n  React.useEffect(() => {\n    if (!isPainting) return;\n\n    window.document.addEventListener('mousemove', onMouseMove);\n    return () => {\n      window.document.removeEventListener('mousemove', onMouseMove);\n    };\n  }, [isPainting, onMouseMove]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.addEventListener('mouseenter', onMouseEnter);\n    return () => {\n      canvas.removeEventListener('mouseenter', onMouseEnter);\n    };\n  }, [canvasRef, onMouseEnter]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.addEventListener('mousedown', onMouseDown);\n    window.document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      canvas.removeEventListener('mousedown', onMouseDown);\n      window.document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [canvasRef, onMouseDown, onMouseUp]);\n}\n","import { Box, Typography, useTheme } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport Player from 'types/Player.type';\nimport PlayArrowRoundedIcon from '@material-ui/icons/PlayArrowRounded';\n\ntype StartButtonProps = {\n  player?: Player;\n  onStart: () => void;\n};\n\nexport default function StartButton({ player, onStart }: StartButtonProps) {\n  const theme = useTheme();\n  return (\n    <Box m={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <Box display=\"flex\" alignItems=\"center\">\n        {!player?.isOwner && (\n          <SpinnerIcon\n            style={{ color: theme.palette.text.secondary, marginRight: 4 }}\n          />\n        )}\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {player?.isOwner\n            ? \"you're the owner, click here to start the game\"\n            : 'Waiting for the host to start the game.'}\n        </Typography>\n      </Box>\n      {player?.isOwner && (\n        <Box mt={2}>\n          <BigButton\n            onClick={onStart}\n            size=\"large\"\n            startIcon={<PlayArrowRoundedIcon style={{ fontSize: 48 }} />}>\n            Start\n          </BigButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import {\n  createStyles,\n  withStyles,\n  Theme,\n  Box,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\n\ntype StepProgressProps = {\n  stepActual: number;\n  stepMax: number;\n};\n\nconst CustomLinearProgress = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.background.default,\n    },\n    bar: {\n      backgroundColor: theme.palette.secondary.main,\n    },\n  }),\n)(LinearProgress);\n\nexport default function StepProgress({\n  stepActual,\n  stepMax,\n}: StepProgressProps) {\n  const progress = stepPercentage(stepActual, stepMax);\n\n  return (\n    <Box\n      width=\"100%\"\n      position=\"relative\"\n      borderTop={1}\n      borderColor=\"secondary.main\">\n      <Box\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        display=\"flex\"\n        position=\"absolute\"\n        zIndex={1}\n        top={0}\n        bottom={0}\n        left={5}>\n        <Typography variant=\"subtitle1\">\n          {stepActual}/{stepMax}\n        </Typography>\n      </Box>\n      <CustomLinearProgress variant=\"determinate\" value={progress} />\n    </Box>\n  );\n}\n\nfunction stepPercentage(current: number, max: number) {\n  const percentage = (current * 100) / max;\n  return percentage > 100 ? 100 : percentage;\n}\n","import React, { useState } from 'react';\nimport BigButton from '../components/BigButton';\nimport PlayerCount from '../components/room/PlayerCount';\nimport AppTitle from '../components/AppTitle';\nimport BigInput from '../components/BigInput';\nimport PlayerCard from '../components/room/lobby/PlayerCard';\nimport PlayerCardList from '../components/room/lobby/PlayerCardList';\nimport StepTimer from '../components/room/StepTimer';\nimport profilesPictures from '../images/profiles/profiles-pictures';\nimport DirectiveLabel from '../components/room/DirectiveLabel';\nimport PlayerAvatar from '../components/home/PlayerAvatar';\nimport DrawColorPicker from '../components/room/draw/DrawColorPicker';\nimport SizePicker from '../components/room/draw/SizePicker';\nimport ShareRoomButton from '../components/room/lobby/ShareRoomButton';\nimport BookPlayerList from '../components/room/book/BookPlayerList';\nimport ButtonModalJoin from '../components/home/ButtonModalJoin';\nimport CanvasDraw from 'components/room/draw/CanvasDraw';\nimport testPlayerList from '__tests__/json/players.json';\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew';\nimport { Box } from '@material-ui/core';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport StartButton from 'components/room/lobby/StartButton';\nimport StepProgress from 'components/room/StepProgress';\nimport { Slider } from '@material-ui/core';\n\nconst colors = [\n  '#000000',\n  '#7f8c8d',\n  '#bdc3c7',\n  '#ecf0f1',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#e74c3c',\n  '#c0392b',\n  '#FA00FF',\n  '#FDA7DF',\n  '#FEAFA8',\n  '#CB5A57',\n  '#FFC312',\n  '#F79F1F',\n];\n\nexport default function ComponentTest() {\n  const [ppIndex, setPpIndex] = useState(0);\n  const [color, setColor] = useState(colors[5]);\n  const [size, setSize] = useState(8);\n  const [progress, setProgress] = React.useState<number>(1);\n\n  const handleChange = (event: any, newValue: any) => {\n    setProgress(newValue);\n  };\n\n  const nextPp = () => {\n    setPpIndex(p => (p > profilesPictures.length - 2 ? 0 : p + 1));\n  };\n\n  return (\n    <Box>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        width=\"100%\"\n        gridGap={32}>\n        <AppTitle />\n\n        <Box display=\"flex\" flexDirection=\"column\">\n          <Box display=\"flex\">\n            <DrawColorPicker\n              colors={colors}\n              currentColor={color}\n              onColorChange={color => setColor(color)}\n            />\n            <CanvasDraw size={size} color={color} />\n          </Box>\n          <SizePicker currentSize={size} onSizeChange={size => setSize(size)} />\n        </Box>\n\n        <StepTimer\n          finishAt={new Date('2021-03-02T10:27:00')}\n          timeDuration={100}\n        />\n        <ButtonModalJoin\n          loading={false}\n          identifier={undefined}\n          onClick={console.log}></ButtonModalJoin>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n        <BigInput\n          onChange={() => void 0}\n          value={'didier'}\n          startIcon={<AccessibilityNewIcon />}\n        />\n        <ShareRoomButton identifier=\"LH4AH3\" />\n        <PlayerCard\n          id={1}\n          name=\"John Doe\"\n          avatar={profilesPictures[ppIndex]}\n          isOwner={true}\n          isKickable={false}\n          onKick={id => console.log('User id is :', id)}\n        />\n\n        <BigButton size=\"large\" onClick={nextPp}>\n          Test\n        </BigButton>\n\n        <StartButton player={testPlayerList[1]} onStart={() => void 0} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          playerId={3}\n          isKickable={true}\n          onKick={id => console.log('id is', id)}\n        />\n        <DirectiveLabel sentence=\"Salzt\" directive=\"bonsoir\" />\n\n        <SpinnerIcon />\n\n        <PlayerCount count={8} max={12} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          isKickable={true}\n          onKick={id => console.log('id is', id)}\n        />\n\n        <BookPlayerList players={testPlayerList} playerId={2} />\n\n        <Slider\n          defaultValue={progress}\n          onChange={handleChange}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={1}\n          min={1}\n          max={7}\n        />\n\n        <StepProgress stepActual={progress} stepMax={7} />\n      </Box>\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\nexport default function DevNav() {\n  return (\n    <Box p={2} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <h1>You're in DevNav</h1>\n      {/* With react-router-dom it's not a good practive do don't use\n          <Link /> but Rsuits alredy render a link */}\n      <NavLink to=\"/\">Dev nav</NavLink>\n      <NavLink to=\"/r/start\">Go Room Start</NavLink>\n      <NavLink to=\"/r/write\">Go Room Write</NavLink>\n      <NavLink to=\"/r/draw\">Go Room Draw</NavLink>\n      <NavLink to=\"/r/lobby\">Go Room Lobby</NavLink>\n      <NavLink to=\"/r\">Go Room</NavLink>\n      <NavLink to=\"/home\">Go home</NavLink>\n      <NavLink to=\"/t\">Go to TESTS pages</NavLink>\n    </Box>\n  );\n}\n\nfunction NavLink({ to, children }: any) {\n  return (\n    <Box\n      p={1}\n      bgcolor=\"background.default\"\n      m={1}\n      borderRadius={2}\n      border={1}\n      borderColor=\"secondary.main\">\n      <Link to={to} style={{ color: 'white' }}>\n        {children}\n      </Link>\n    </Box>\n  );\n}\n","import React from 'react';\n\nconst usernames = [\n  'Dieu',\n  'JeSuisCovid',\n  'GrosBg',\n  'Macco',\n  'Petite cochonne',\n  'GrosTas',\n  'C moi',\n  'C pas moi',\n  'Staline',\n  'Krokette',\n  'Petite loutre',\n  'Bob le bob',\n  'SavageWolf',\n  'Padawan',\n  'BigBear',\n  'BigFather',\n  'Terminator',\n  'Stitch',\n];\n\nconst getRandomUsername = () =>\n  usernames[Math.floor(Math.random() * usernames.length)];\n\nexport function useRandomUsername() {\n  const usernameRef = React.useRef(getRandomUsername());\n\n  return usernameRef.current;\n}\n","import { useRandomUsername } from 'hooks/useRandomUsername';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from 'api/client';\nimport { setToken } from 'api/player-provider';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport Player from 'types/Player.type';\nimport BigButton from '../BigButton';\nimport BigInput from '../BigInput';\nimport ButtonModalJoin from './ButtonModalJoin';\nimport PlayerAvatar from './PlayerAvatar';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport CreateIcon from '@material-ui/icons/Create';\nimport { Box, makeStyles } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    '&>*': {\n      marginBottom: theme.spacing(4),\n    },\n  },\n  buttonContainer: {\n    '&>*': {\n      marginBottom: theme.spacing(2),\n    },\n  },\n}));\n\nexport default function PlayerForm({ identifier }: { identifier?: string }) {\n  const [username, setUsername] = React.useState('');\n  const [ppIndex, setPpIndex] = React.useState(0);\n  const [loading, setLoading] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n  const defaultUsername = useRandomUsername();\n  const classes = useStyles();\n\n  const nextPp = () => {\n    setPpIndex((p: number) => (p >= profilesPictures.length - 1 ? 0 : p + 1));\n  };\n\n  function onConnect(token: string, text: string, isSuccess: boolean = true) {\n    enqueueSnackbar(text, { variant: isSuccess ? 'success' : 'error' });\n    setToken(token);\n    history?.push('/r/lobby');\n  }\n\n  function onStart() {\n    setLoading(true);\n    client<Player>('room', {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, 'Room successfully created ');\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured ', { variant: 'error' }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  function onJoin(identifier: string) {\n    setLoading(true);\n    client<Player>(`room/join/${identifier}`, {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n      method: 'PATCH',\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, \"You've joined the room!\", false);\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured ', { variant: 'error' }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems=\"center\"\n      width=\"100%\"\n      className={classes.container}>\n      <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n\n      <BigInput\n        startIcon={<CreateIcon />}\n        value={username}\n        onChange={e => setUsername(e.target.value)}\n        placeholder={defaultUsername}\n      />\n\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        className={classes.buttonContainer}>\n        <ButtonModalJoin\n          identifier={identifier}\n          onClick={onJoin}\n          loading={loading}\n        />\n\n        {!identifier && (\n          <BigButton\n            size=\"large\"\n            startIcon={<PlayArrowIcon style={{ fontSize: 32 }} />}\n            onClick={onStart}\n            loading={loading}>\n            Start\n          </BigButton>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","import { RouteComponentProps } from 'react-router-dom';\nimport AppTitle from 'components/AppTitle';\nimport PlayerForm from 'components/home/PlayerForm';\nimport { Box } from '@material-ui/core';\n\nexport default function Home(\n  props: RouteComponentProps<{ identifier?: string }>,\n) {\n  const identifier = props.match.params.identifier;\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" width=\"100%\">\n      <Box p={{ xs: 1, sm: 2 }} width=\"100%\">\n        <AppTitle />\n      </Box>\n      <Box mt={{ xs: 1, sm: 2 }}>\n        <PlayerForm identifier={identifier} />\n      </Box>\n    </Box>\n  );\n}\n","export default function Book() {\n  return <div>You're in Book</div>;\n}\n","export default function Draw() {\n  return <div>You're in Draw</div>;\n}\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport { client } from 'api/client';\nimport Session from 'types/Session.type';\nimport StartButton from './StartButton';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\n\nexport default function LobbyStartAction() {\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onStart() {\n    client<Session>('session', { method: 'POST', token: getToken() }).then(\n      () =>\n        enqueueSnackbar('Game successfully started ', { variant: 'success' }),\n      () => enqueueSnackbar('Sorry, an error occured ', { variant: 'error' }),\n    );\n  }\n\n  return <StartButton onStart={onStart} player={player} />;\n}\n","import { client } from 'api/client';\nimport { usePlayerContext } from 'hooks/PlayerProvider';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport Loading from '../../Loading';\nimport PlayerCount from '../../room/PlayerCount';\nimport BookPlayerList from '../book/BookPlayerList';\nimport PlayerCardList from './PlayerCardList';\nimport { Box, useMediaQuery, useTheme } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nexport function Players() {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { players } = useRoomContext();\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onKick(id: number, name: string) {\n    window.confirm(`Do you really want to kick ${name} ?`) && kickPlayer(id);\n  }\n\n  function kickPlayer(id: number) {\n    const url = `player/players/${id}/kick`;\n    client(url, {\n      token: player?.token?.tokenKey,\n      method: 'PATCH',\n    }).then(\n      () => enqueueSnackbar('Player kicked ', { variant: 'success' }),\n      () => enqueueSnackbar('Sorry, an error occured ', { variant: 'error' }),\n    );\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\">\n      {players?.length > 0 ? (\n        isDeviceSM ? (\n          <PlayerCardList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onKick={(id, name) => onKick(id, name)}\n          />\n        ) : (\n          <BookPlayerList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onClick={(id, name) => onKick(id, name)}\n          />\n        )\n      ) : (\n        <Loading />\n      )}\n    </Box>\n  );\n}\n\nexport function PlayerCountBox() {\n  const { players } = useRoomContext();\n\n  return (\n    <Box pr={{ xs: 1, md: 2 }}>\n      <PlayerCount count={players?.length || 0} max={12} />\n    </Box>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport ShareRoomButton from './ShareRoomButton';\n\nexport default function SettingsMenu() {\n  const { room, wsState } = useRoomContext();\n  return (\n    <Box\n      borderRadius=\"0 4px 4px 0\"\n      minWidth={328}\n      pl={2}\n      height=\"auto\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems={{ xs: 'center', sm: 'flex-start' }}\n      gridGap={24}>\n      <Typography variant=\"h5\">{wsState}</Typography>\n      <ShareRoomButton identifier={room?.identifier} />\n    </Box>\n  );\n}\n","import AppTitle from 'components/AppTitle';\nimport LobbyStartButton from 'components/room/lobby/LobbyStartAction';\nimport { Players, PlayerCountBox } from 'components/room/lobby/Players';\nimport SettingsMenu from 'components/room/lobby/SettingsMenu';\nimport { Box, fade, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  playersContainer: {\n    alignItems: 'center',\n    flexDirection: 'column',\n    gap: 64,\n    [theme.breakpoints.up('sm')]: {\n      alignItems: 'flex-start',\n      flexDirection: 'row',\n    },\n  },\n  container: {\n    backgroundColor: fade(theme.palette.background.default, 0.8),\n  },\n}));\n\nexport default function Lobby() {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      height=\"100vh\"\n      alignItems=\"center\"\n      width=\"100%\">\n      <Box p={4} mb={3} width=\"100%\">\n        <AppTitle />\n      </Box>\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        width=\"100%\"\n        m={3}\n        height=\"100vh\"\n        alignItems=\"center\"\n        flexDirection=\"column\">\n        <Box\n          display=\"flex\"\n          className={classes.container}\n          flexDirection=\"column\"\n          alignItems=\"flex-end\"\n          width=\"100%\">\n          <PlayerCountBox />\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            width=\"100%\"\n            className={classes.playersContainer}>\n            <SettingsMenu />\n            <Players />\n          </Box>\n        </Box>\n        <LobbyStartButton />\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/gym-guy.604134af.svg\";","import Room from './Room.type';\n\ntype Session = {\n  id: number;\n  finishAt?: string;\n  stepFinishAt?: string;\n  createdAt: string;\n  actualStep: number;\n  timeDuration: number;\n  roomId: number;\n  room?: Room;\n  stepType: SessionStepType;\n};\n\nexport enum SessionStepType {\n  Start = 0,\n  Draw = 1,\n  Write = 2,\n  Book = 3,\n}\n\nexport default Session;\n","import { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport Session, { SessionStepType } from 'types/Session.type';\n\nfunction useSessionStates() {\n  const [session, setSession] = React.useState<Session>();\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Session>('session/current', { token: getToken() }).then(\n      session => !deleted && setSession(session),\n      () => {\n        enqueueSnackbar('Sorry, an error occured ', { variant: 'error' });\n        history.push('/r/lobby');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  // handling page with the Session\n  React.useEffect(() => {\n    const pathname = history.location.pathname;\n    let newPathname = '';\n    switch (session?.stepType) {\n      case SessionStepType.Start:\n        newPathname = '/r/start';\n        break;\n      case SessionStepType.Write:\n        newPathname = '/r/write';\n        break;\n      case SessionStepType.Draw:\n        newPathname = '/r/draw';\n        break;\n      case SessionStepType.Book:\n        newPathname = '/r/book';\n        break;\n    }\n    // change only if pathname is different than before\n    if (newPathname && pathname !== newPathname) history.push(newPathname);\n  }, [session?.stepType, history]);\n\n  return { session, setSession };\n}\n\nexport default useSessionStates;\n","import Loading from 'components/Loading';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport HolyElement from 'types/HolyElement.type';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Session from '../types/Session.type';\nimport { parseJson } from '../utils/json';\nimport useSessionStates from './useSessionStates';\nimport { WebsocketEvent, WebsocketMessage } from './useWebsocket';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype SessionContextProps = {\n  session?: Session;\n  currentElement?: HolyElement;\n};\n\nconst SessionContext = React.createContext<SessionContextProps>({});\n\ntype SessionContextProviderProps = { children: React.ReactElement };\n\nexport function SessionContextProvider({\n  children,\n}: SessionContextProviderProps) {\n  const { session, setSession } = useSessionStates();\n  const [currentElement, setCurrentElement] = React.useState<HolyElement>();\n  const { websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.SessionUpdate:\n          const session = websocketMessage.session;\n          setSession(prev => prev && { ...prev, ...session });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [session, setSession, websocket]);\n\n  React.useEffect(() => {\n    if (!session?.actualStep) return;\n\n    let deleted = false;\n    client<HolyElement>('element/current', { token: getToken() }).then(\n      session => !deleted && setCurrentElement(session),\n      () => enqueueSnackbar('Sorry, an error occured ', { variant: 'error' }),\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, session?.actualStep]);\n\n  const values = { session, currentElement };\n\n  return (\n    <SessionContext.Provider value={values}>\n      {session ? children : <Loading />}\n    </SessionContext.Provider>\n  );\n}\n\nexport function useSessionContext() {\n  const context = React.useContext(SessionContext);\n  if (!context)\n    throw new Error(\n      'useSessionContext should be used within a SessionContextProvider',\n    );\n  return context;\n}\n","import PlayerCount from './room/PlayerCount';\nimport AppTitle from './AppTitle';\nimport StepTimer from './room/StepTimer';\nimport { useRoomContext } from '../hooks/RoomProvider';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { Box, makeStyles } from '@material-ui/core';\n\ntype GameBarProps = {\n  max: number;\n  onFinish?: () => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  infoContainer: {\n    [theme.breakpoints.up('sm')]: {\n      top: -64,\n      position: 'relative',\n    },\n  },\n}));\n\nexport default function GameBar({ max, onFinish }: GameBarProps) {\n  const { players } = useRoomContext();\n  const { session } = useSessionContext();\n  const classes = useStyles();\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" width=\"100%\">\n      <AppTitle />\n\n      <Box\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"space-between\"\n        width=\"100%\"\n        className={classes.infoContainer}>\n        <PlayerCount count={players?.length || 0} max={max} />\n\n        <Box display=\"block\">\n          <StepTimer\n            finishAt={new Date(session?.stepFinishAt || '')}\n            timeDuration={session?.timeDuration || 60}\n            onFinish={onFinish}\n          />\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n","import BigButton from 'components/BigButton';\nimport BigInput from 'components/BigInput';\nimport GymGuy from 'images/gym-guy.svg';\nimport GameBar from 'components/GameBar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { Box, Typography } from '@material-ui/core';\nimport SaveIcon from '@material-ui/icons/Save';\n\nexport default function Start() {\n  return (\n    <Box padding={4} display=\"flex\" flexDirection=\"column\" gridGap={42}>\n      <GameBar max={12} />\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n        <img src={GymGuy} alt=\"\" width={256} />\n        <Typography variant=\"h4\">Start a story</Typography>\n      </Box>\n      <Box\n        gridGap={16}\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\">\n        <BigInput\n          placeholder=\"A grandma ate my father\"\n          startIcon={<EditIcon />}\n        />\n        <BigButton\n          startIcon={<SaveIcon style={{ fontSize: 32 }} />}\n          size=\"large\">\n          Save\n        </BigButton>\n      </Box>\n    </Box>\n  );\n}\n","export default function Write() {\n  return <div>You're in Write</div>;\n}\n","import AppLayout from 'components/AppLayout';\nimport { BrowserRouter, HashRouter, Switch, Route } from 'react-router-dom';\nimport { PlayerContextProvider } from 'hooks/PlayerProvider';\nimport { RoomContextProvider } from 'hooks/RoomProvider';\nimport ComponentTest from 'pages/ComponentTest';\nimport DevNav from 'pages/DevNav';\nimport Home from 'pages/Home';\nimport Book from 'pages/room/Book';\nimport Draw from 'pages/room/Draw';\nimport Lobby from 'pages/room/Lobby';\nimport Start from 'pages/room/Start';\nimport Write from 'pages/room/Write';\nimport { WebsocketProvider } from 'hooks/WebsocketProvider';\nimport { SessionContextProvider } from 'hooks/SessionProvider';\n\nconst Router: any =\n  process.env.NODE_ENV === 'production' ? HashRouter : BrowserRouter;\n\nconst basename: string =\n  process.env.NODE_ENV === 'production' ? 'holydraw' : '';\n\nexport default function Routes() {\n  return (\n    <AppLayout>\n      <Router basename={basename}>\n        <Switch>\n          <Route path=\"/join/:identifier\" component={Home} />\n          <Route path=\"/r\" component={RoomRoutes} />\n          <Route path=\"/t\" component={ComponentTest} />\n          <Route path=\"/home\" component={Home} />\n          {/* For test, I add a special Nav\n          TODO: replace it by `Home` */}\n          <Route path=\"/\" component={DevNav} />\n        </Switch>\n      </Router>\n    </AppLayout>\n  );\n}\n\nfunction RoomRoutes() {\n  return (\n    <WebsocketProvider>\n      <PlayerContextProvider>\n        <RoomContextProvider>\n          <Switch>\n            <Route path=\"/r/lobby\" component={Lobby} />\n            <Route path=\"/r\" component={SessionRoutes} />\n          </Switch>\n        </RoomContextProvider>\n      </PlayerContextProvider>\n    </WebsocketProvider>\n  );\n}\n\nfunction SessionRoutes() {\n  return (\n    <SessionContextProvider>\n      <Switch>\n        <Route path=\"/r/start\" component={Start} />\n        <Route path=\"/r/draw\" component={Draw} />\n        <Route path=\"/r/write\" component={Write} />\n        <Route path=\"/r/book\" component={Book} />\n        <Route path=\"/r/lobby\" component={Lobby} />\n      </Switch>\n    </SessionContextProvider>\n  );\n}\n","import { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport theme from 'theme';\nimport Routes from 'Routes';\nimport { SnackbarProvider } from 'notistack';\n\n/*\n * Entry point for our App\n * Do not add Logic here\n */\nfunction App() {\n  return (\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      preventDuplicate\n      maxSnack={3}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Routes />\n      </ThemeProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}