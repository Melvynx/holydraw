{"version":3,"sources":["theme.ts","components/AppLayout.tsx","types/websocket.types.ts","api/client.tsx","api/player-provider.tsx","images/spinner.svg","components/Loading.tsx","utils/json.ts","hooks/useSafeMounted.ts","hooks/useWebsocket.tsx","hooks/WebsocketProvider.tsx","hooks/PlayerProvider.tsx","hooks/useRoomStates.tsx","hooks/RoomProvider.tsx","components/SpinnerIcon.tsx","components/BigButton.tsx","components/room/PlayerCount.tsx","images/holydraw-logo.svg","components/HolyDrawLogo.tsx","components/BigInput.tsx","styles/colors.ts","components/room/lobby/PlayerCard.tsx","images/profiles/pp-1.png","images/profiles/profiles-pictures.ts","images/profiles/pp-2.png","images/profiles/pp-3.png","images/profiles/pp-4.png","images/profiles/pp-5.png","images/profiles/pp-6.png","images/profiles/pp-7.png","images/profiles/pp-8.png","components/room/lobby/PlayerCardList.tsx","hooks/useTimerInterval.ts","components/room/StepTimer.tsx","components/room/DirectiveLabel.tsx","components/home/PlayerAvatar.tsx","components/room/draw/DrawColorPicker.tsx","components/room/draw/SizePicker.tsx","components/room/lobby/ShareRoomButton.tsx","utils/clipboard.ts","components/room/book/BookPlayerAvatar.tsx","components/room/book/BookPlayerList.tsx","components/home/ButtonModalJoin.tsx","components/canvas/DrawingCanvasContext.tsx","components/canvas/DrawingCanvas.tsx","components/room/lobby/StartButton.tsx","components/room/StepProgress.tsx","components/room/book/BookSentenceElement.tsx","images/gym-guy.svg","components/room/CurrentDrawImage.tsx","components/room/book/BookDrawingElement.tsx","types/canvas.types.ts","utils/canvas.utils.ts","components/canvas/useCanvasPaint.tsx","types/HolyElement.type.ts","types/Session.type.ts","components/canvas/DrawingCanvasProvider.tsx","components/canvas/useCanvasEventListener.tsx","hooks/useSessionStates.tsx","hooks/SessionProvider.tsx","utils/utils.ts","components/canvas/DrawingCanvasActions.tsx","pages/ComponentTest.tsx","pages/DevNav.tsx","hooks/useRandomUsername.tsx","components/home/PlayerForm.tsx","pages/Home.tsx","components/GameBar.tsx","components/room/GameLayout.tsx","components/room/book/BookStartAction.tsx","components/room/book/BookMock.tsx","hooks/AlbumProvider.tsx","pages/room/Book.tsx","components/room/draw/CanvasActionButtons.tsx","components/room/draw/GameCanvas.tsx","pages/room/Draw.tsx","components/room/draw/useDisableBodyOverflow.tsx","components/room/lobby/LobbyStartAction.tsx","components/room/lobby/KickModal.tsx","components/room/lobby/Players.tsx","components/room/lobby/SettingsMenu.tsx","pages/room/Lobby.tsx","hooks/useRandomSentence.tsx","components/room/start/SentenceForm.tsx","pages/room/Start.tsx","pages/room/Write.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["palette","theme","createPalette","type","primary","main","secondary","background","default","paper","custom","createMuiTheme","typography","h1","fontSize","fontFamily","h4","fontWeight","h5","subtitle1","subtitle2","body1","body2","join","spacing","overrides","MuiButton","label","textOverflow","whiteSpace","root","textTransform","borderRadius","contained","height","minWidth","color","common","white","padding","backgroundColor","position","action","hover","containedSizeLarge","iconSizeLarge","marginLeft","responsiveFontSizes","useStyles","makeStyles","container","maxWidth","breakpoints","values","lg","AppLayout","children","classes","Container","className","Box","display","margin","width","WsStates","WebsocketEvent","SendMessageType","apiURL","process","client","endpoint","a","data","method","token","customHeaders","headers","customConfig","config","body","JSON","stringify","Authorization","Accept","window","fetch","then","response","status","Promise","reject","message","json","ok","playerTokenKey","getToken","localStorage","getItem","setToken","setItem","Loading","justifyContent","alignItems","src","Spinner","alt","parseJson","text","init","parse","e","useSafeMounted","dispatch","mounted","React","useRef","useLayoutEffect","current","useCallback","url","exec","WebsocketContext","createContext","wsState","IDLE","WebsocketProvider","useState","websocket","setWebsocket","setWsState","enqueueSnackbar","useSnackbar","onCloseCallback","isSocketOpened","CLOSED","variant","undefined","safeOnClose","connect","socket","WebSocket","CONNECTING","onopen","send","Authentication","playerToken","CONNECTED","onclose","useEffect","close","useWebsocket","Provider","value","useWebsocketContext","context","useContext","Error","PlayerContext","PlayerContextProvider","player","setPlayer","history","useHistory","onMessage","event","websocketMessage","websocketEvent","NewOwnerPlayer","id","prev","isOwner","addEventListener","removeEventListener","deleted","push","usePlayerContext","useRoomStates","room","setRoom","players","setPlayers","updateRoom","roomId","updatePlayer","removePlayer","playerId","removeItem","prevPlayers","playerIndex","findIndex","p","playersCopy","splice","addPlayer","find","RoomContext","RoomContextProvider","Invalid","error","PlayerJoin","PlayerLeft","SessionStart","PlayerKicked","playingPlayers","filter","isPlaying","location","pathname","length","useRoomContext","spin","animation","transform","SpinnerIcon","props","style","aria-label","clsx","BigButton","loading","startIcon","Button","size","PlayerCount","count","max","py","Typography","logo","textAlign","down","HolyDrawLogo","HolyDrawImage","input","border","cursor","inputMedium","up","inputLarge","disabled","fade","transition","boxShadow","focus","shadows","iconMedium","marginRight","iconLarge","BigInput","fullWidth","inputRef","setFocus","onClick","cloneElement","ref","onFocus","onBlur","avatar","overflow","badge","bottom","left","zIndex","icon","badgeIcon","username","kickButton","PlayerCard","name","isKickable","isCurrentPlayer","onKick","borderColor","bgcolor","data-testid","Avatar","component","profilesPictures","PlayerCardList","Grid","map","isPlayerSelected","item","xs","Number","avatarUrl","useTimerEvent","finishAt","timeDuration","onFinish","onFinishPercentage","intervalRef","interval","setInterval","getProgressPercentage","clearInterval","progress","Math","round","getTime","Date","CustomCircularProgress","withStyles","createStyles","circle","strokeLinecap","CircularProgress","StepTimer","setProgress","timerInterval","setTimerInterval","useTimerInterval","useTheme","matches","useMediaQuery","thickness","sentence","DirectiveLabel","directive","flexDirection","button","outline","imgBox","img","PlayerAvatar","image","onShuffle","DrawColorPicker","colors","currentColor","onColorChange","coupleColors","useMemo","reduce","accumulator","colorCouples","result","index","getCoupleColors","gridGap","couple","top","squareColor","isSelected","buttonSizes","SizePicker","currentSize","onSizeChange","i","isCurrentSize","SizePickerPoint","ShareRoomButton","identifier","tempInput","document","createElement","appendChild","select","execCommand","removeChild","copyToClipboard","origin","useAvatarStyles","BookPlayerAvatar","overflowX","BookPlayerList","isDeviceSM","Tooltip","title","placement","sm","ButtonModalJoin","urlIdentifier","open","setOpen","setIdentifier","Dialog","onClose","DialogTitle","DialogContent","TextField","autoFocus","onChange","target","DialogActions","DrawingCanvasContext","useCanvasContext","canvas","canvasBox","DrawingCanvas","canvasRef","StartButton","startName","isLoading","onStart","m","mt","CustomLinearProgress","colorPrimary","bar","dark","LinearProgress","StepProgress","stepActual","stepMax","percentage","stepPercentage","box","BookSentenceElement","ml","mr","alignSelf","CurrentDrawImage","LineType","minHeight","BookDrawingElement","clearDraw","getContext","clearRect","drawCanvasLine","ctx","line","beginPosition","controlPosition","endPosition","strokeStyle","fillStyle","lineJoin","lineCap","lineWidth","beginPath","LINE","moveTo","x","y","quadraticCurveTo","stroke","CIRCLE","arc","PI","fill","closePath","getQuadraticCurveCoordinates","positions","slice","lastPoint","prevPoint","controlPoint","endPoint","getCoordinates","canvasScale","pageX","offsetLeft","pageY","offsetTop","useCanvasPaint","ElementType","SessionStepType","scale","mouseCoordinate","lines","deletedLines","getLastLine","addLastLine","coordinate","points","paint","newMousePosition","lastLine","create","isNewLine","refresh","forEach","currentPosition","positionCopy","rerenderDraw","undo","deletedLine","pop","redo","redoLine","clear","confirm","onKeyDown","keyCode","ctrlKey","metaKey","canvasWidth","DrawingCanvasProvider","lineSize","setCurrentSize","isPainting","setIsPainting","onResize","newWidth","parentElement","getBoundingClientRect","newHeight","onMouseDown","coordinates","onMouseUp","onMouseEnter","onMouseMove","touchMove","mouseEvent","MouseEvent","clientX","touches","clientY","touchStart","useCanvasEventListener","useSessionStates","session","setSession","newPathname","stepType","Start","Write","Draw","Book","SessionContext","onSave","resolve","SessionContextProvider","currentElement","setCurrentElement","SessionUpdate","actualStep","content","elementId","elementContent","Drawing","drawimage","element","catch","finally","useSessionContext","callAll","fns","args","fn","getRandomValueFromArray","possibilities","floor","random","OnClearAction","OnUndoAction","OnRedoAction","OnSaveAction","stepFinishAt","draw","toDataURL","ComponentTest","ppIndex","setPpIndex","setColor","mobileCanvas","setMobileCanvas","setDisabled","setSize","nextPp","GymGuy","FormControlLabel","control","Switch","checked","flexWrap","IconButton","canvasImage","win","write","testPlayerList","Slider","defaultValue","newValue","aria-labelledby","valueLabelDisplay","step","min","DevNav","NavLink","to","usernames","marginButton","PlayerForm","setUsername","setLoading","defaultUsername","onConnect","mb","px","placeholder","catchedIdentifier","startsWith","split","String","tokenKey","Home","match","params","direction","justify","GameBar","playerFinished","totalPlayers","GameLayout","StepProgressWithContext","BookStartAction","setIsLoading","BookMock","album","setAlbum","elements","sortedElements","initiatorId","flatArray","Object","keys","key","alert","creator","Sentence","drawImage","AlbumContext","AlbumContextProvider","albums","setAlbums","NewAlbumElement","prevAlbums","prevAlbumsCopy","wrap","CanvasActionButtons","GameCanvas","isEditing","Boolean","styleElement","currentStyle","innerHTML","getElementsByTagName","useDisableBodyOverflow","CurrentDirectiveLabel","order","parent","LobbyStartAction","KickModal","Players","playerToKick","setPlayerToKick","kickPlayer","PlayerCountBox","pr","md","SettingsMenu","pl","playersContainer","gap","Lobby","sentences","StartForm","setSentence","defaultSentence","CurrentDrawImageWithContext","Router","HashRouter","Routes","path","RoomRoutes","SessionRoutes","App","anchorOrigin","vertical","horizontal","preventDuplicate","maxSnack","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"8NAoHA,IA9GyBA,EA8GrBC,GA9GqBD,E,MA+GvBE,GAAc,CACZC,KAAM,OACNC,QAAS,CACPC,KArHiB,WAuHnBC,UAAW,CACTD,KAvHmB,WAyHrBE,WAAY,CACVC,QAAS,UACTC,MAAO,WAETC,OAAQ,CACNL,KAAM,aA3HHM,YAAe,CACpBX,QAASA,EACTY,WAAY,CACVC,GAAI,CACFC,SAAU,GACVC,WAAY,SAEdC,GAAI,CACFD,WAAY,YACZE,WAAY,OACZH,SAAU,IAEZI,GAAI,CACFJ,SAAU,GACVG,WAAY,OACZF,WAAY,0DAEdI,UAAW,CACTJ,WAAY,YACZE,WAAY,OACZH,SAAU,IAEZM,UAAW,CACTN,SAAU,IAEZO,MAAO,CACLP,SAAU,IAEZQ,MAAO,CACLR,SAAU,IAEZC,WAAY,CACV,gBACA,qBACA,WACA,SACA,SACA,SACA,YACA,YACA,iBACA,cACAQ,KAAK,MAETC,QAAS,EACTC,UAAW,CACTC,UAAW,CACTC,MAAO,CACLC,aAAc,WACdC,WAAY,UAEdC,KAAM,CACJC,cAAe,OACfC,aAAc,GAEhBC,UAAW,CACTC,OAAQ,GACRC,SAAU,IACVrB,SAAU,GACVsB,MAAOpC,EAAQqC,OAAOC,MACtBC,QAAS,YACTP,aAAc,GACdjB,WAAY,YACZyB,gBAAiBxC,EAAQU,OAAOL,KAChCoC,SAAU,WACV,sBAAuB,CACrBP,OAAQ,IAEV,4BAA6B,CAC3BpB,SAAU,GACVoB,OAAQ,IAEV,UAAW,CACTM,gBAAiBxC,EAAQ0C,OAAOC,QAGpCC,mBAAoB,CAClB9B,SAAU,GACVoB,OAAQ,GACRF,aAAc,GACd,4BAA6B,CAC3BlB,SAAU,GACVoB,OAAQ,GACRF,aAAc,KAIlBa,cAAe,CACbC,WAAY,QA0CP7C,EAFfA,EAAQ8C,YAAoB9C,G,kCChItB+C,EAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrCiD,UAAW,CACTX,QAAS,EACTL,OAAQ,OACRiB,SAAS,QAAD,OAAUlD,EAAMmD,YAAYC,OAAOC,GAAnC,oBAIG,SAASC,EAAT,GAAkD,IAA7BC,EAA4B,EAA5BA,SAC5BC,EAAUT,IAChB,OACE,cAACU,EAAA,EAAD,CAAWC,UAAWF,EAAQP,UAAWC,SAAS,KAAlD,SACE,cAACS,EAAA,EAAD,CACEC,QAAQ,QACRC,OAAO,OACP5B,OAAO,OACP6B,MAAM,OACN5B,SAAU,IALZ,SAMGqB,M,ICrBGQ,EAOAC,EAaAC,E,iDApBAF,K,kBAAAA,E,mCAAAA,E,8BAAAA,E,8BAAAA,M,cAOAC,O,sBAAAA,I,2BAAAA,I,2BAAAA,I,mCAAAA,I,mCAAAA,I,+BAAAA,I,gCAAAA,I,kCAAAA,I,wBAAAA,I,uCAAAA,M,cAaAC,O,oCAAAA,M,kCCbL,IAAMC,EANAC,6B,SAsCEC,E,8EAAf,WACEC,GADF,uCAAAC,EAAA,8FAE0E,GAAtEC,EAFJ,EAEIA,KAAMC,EAFV,EAEUA,OAAQC,EAFlB,EAEkBA,MAAgBC,EAFlC,EAEyBC,QAAwBC,EAFjD,EAEiDA,aAEzCC,EAJR,aAKIL,OAAQA,IAAWD,EAAO,OAAS,OACnCO,KAAMP,EAAOQ,KAAKC,UAAUT,GAAQ,KACpCI,QAAQ,aACNM,cAAeR,EAAK,iBAAaA,GAAU,GAC3C,eAAgBF,EAAO,mBAAqB,GAC5CW,OAAQ,oBACLR,IAEFE,GAbP,kBAgBSO,OAAOC,MAAP,UAAgBlB,EAAhB,YAA0BG,GAAYQ,GAAQQ,KAA9C,uCAAmD,WAAMC,GAAN,eAAAhB,EAAA,yDAEhC,MAApBgB,EAASC,OAF2C,yCAG/CC,QAAQC,OAAO,CAAEC,QAAS,6BAHqB,uBAMrCJ,EAASK,OAN4B,UAMlDpB,EANkD,QAOpDe,EAASM,GAP2C,yCAQ/CrB,GAR+C,gCAU/CiB,QAAQC,OAAOlB,IAVgC,4CAAnD,wDAhBT,4C,sBC3CA,IAAMsB,EAAiB,4BAEvB,SAASC,IAEP,OAAOX,OAAOY,aAAaC,QAAQH,GAQrC,SAASI,EAASxB,GAChBU,OAAOY,aAAaG,QAAQL,EAAgBpB,GCb/B,UAA0B,oCCG1B,SAAS0B,IACtB,OACE,cAACxC,EAAA,EAAD,CAAKC,QAAQ,OAAOwC,eAAe,SAASC,WAAW,SAAvD,SACE,qBAAKC,IAAKC,EAASC,IAAI,cCNtB,SAASC,EAAaC,EAAcC,GACzC,IAAIhB,EAEJ,IACEA,EAAOZ,KAAK6B,MAAMF,GAClB,MAAOG,GACP,OAAOF,EAGT,OAAOhB,GAAcgB,ECYRG,I,EAAAA,EAhBf,SAAwBC,GACtB,IAAMC,EAAUC,IAAMC,QAAO,GAS7B,OAPAD,IAAME,iBAAgB,WAEpB,OADAH,EAAQI,SAAU,EACX,WACLJ,EAAQI,SAAU,KAEnB,IAEIH,IAAMI,aACX,kBAAyBL,EAAQI,QAAUL,EAAQ,WAAR,kBAAoB,IAC/D,CAACA,KCPCO,EAAG,UAHwD,MAGxD,wBADY,yCACqBC,KAAKrD,UAAtC,aAAoB,EAA4B,GAAhD,eCDT,IAAMsD,EAAmBP,IAAMQ,cAAqC,CAClEC,QAAS3D,EAAS4D,OAKb,SAASC,EAAT,GAAyE,IAA5CrE,EAA2C,EAA3CA,SAClC,EDJK,WACL,MAAkC0D,IAAMY,WAAxC,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA8Bd,IAAMY,SAAmB9D,EAAS4D,MAAhE,mBAAOD,EAAP,KAAgBM,EAAhB,KACQC,EAAoBC,cAApBD,gBAEFE,EAAkBlB,IAAMI,aAC5B,SAACe,GACCJ,EAAWjE,EAASsE,QAChBD,IACFH,EAAgB,mCAA0B,CAAEK,QAAS,UACrDP,OAAaQ,MAGjB,CAACN,IAEGO,EAAc1B,EAAeqB,GAE7BM,EAAUxB,IAAMI,aAAY,WAChC,IAAMqB,EAAS,IAAIC,UAAUrB,GACzBc,GAAiB,EACrBJ,EAAWjE,EAAS6E,YACpBb,EAAaW,GAEbA,EAAOG,OAAS,WACdT,GAAiB,EAEjBM,EAAOI,KACL/D,KAAKC,UAAU,CACb9E,KAAM+D,EAAgB8E,eACtBC,YAAalD,OAGjBkC,EAAWjE,EAASkF,YAGtBP,EAAOQ,QAAU,WACfV,EAAYJ,MAEb,CAACI,IASJ,OAPAvB,IAAMkC,WAAU,WACd,GAAIrB,EACF,OAAO,kBAAMA,EAAUsB,SAEzBX,MACC,CAACA,EAASX,IAEN,CAAEJ,UAASI,aC3CauB,GAEzBjG,EAAS,CAAEsE,QAFjB,EAAQA,QAEkBI,UAF1B,EAAiBA,WAIjB,OACE,cAACN,EAAiB8B,SAAlB,CAA2BC,MAAOnG,EAAlC,SACGG,IAKA,SAASiG,IACd,IAAMC,EAAUxC,IAAMyC,WAAWlC,GACjC,IAAKiC,EACH,MAAM,IAAIE,MACR,oEAEJ,OAAOF,EClBT,IAAMG,EAAgB3C,IAAMQ,cAAkC,IAIvD,SAASoC,EAAT,GAEyB,IAD9BtG,EAC6B,EAD7BA,SAEA,EAA4B0D,IAAMY,WAAlC,mBAAOiC,EAAP,KAAeC,EAAf,KACQ9B,EAAoBC,cAApBD,gBACAH,EAAc0B,IAAd1B,UACFkC,EAAUC,cAEhBhD,IAAMkC,WAAU,WACd,SAASe,EAAUC,GAA0B,IAAD,EACpCC,EAAmB3D,EAA4B0D,EAAM5F,MAC3D,GAAK6F,EAEL,OAAQA,EAAiBC,gBACvB,KAAKrG,EAAesG,gBACE,OAAhBF,QAAgB,IAAhBA,GAAA,UAAAA,EAAkBN,cAAlB,eAA0BS,OAA1B,OAAiCT,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAQS,KAC3CR,GAAU,SAAAS,GAAI,OAAKA,EAAI,2BAAQA,GAAR,IAAcC,SAAS,IAASD,MAK/D,GAAI1C,GAAagC,EAEf,OADAhC,EAAU4C,iBAAiB,UAAWR,GAC/B,kBAAMpC,EAAU6C,oBAAoB,UAAWT,MAEvD,CAACJ,EAAQhC,IAEZb,IAAMkC,WAAU,WACd,IAAIyB,GAAU,EASd,OARAxG,EAAe,YAAa,CAAEK,MAAOqB,MAAcT,MACjD,SAAAyE,GAAM,OAAKc,GAAWb,EAAUD,MAChC,WACE7B,EAAgB,iCAAkC,CAAEK,QAAS,UAC7D0B,EAAQa,KAAK,YAIV,WACLD,GAAU,KAEX,CAAC3C,EAAiB+B,IAErB,IAAM5G,EAAS,CAAE0G,UAEjB,OACE,cAACF,EAAcN,SAAf,CAAwBC,MAAOnG,EAA/B,SACG0G,EAASvG,EAAW,cAAC4C,EAAD,MAKpB,SAAS2E,IACd,IAAMrB,EAAUxC,IAAMyC,WAAWE,GACjC,IAAKH,EACH,MAAM,IAAIE,MACR,kEAEJ,OAAOF,E,YCnEF,SAASsB,IACd,MAAwB9D,IAAMY,WAA9B,mBAAOmD,EAAP,KAAaC,EAAb,KACA,EAA8BhE,IAAMY,SAAmB,IAAvD,mBAAOqD,EAAP,KAAgBC,EAAhB,KACQrB,EAAWgB,IAAXhB,OACFE,EAAUC,cACRhC,EAAoBC,cAApBD,gBAEFmD,EAAanE,IAAMI,aAAY,WACnCjD,EAAM,sBAAe0F,QAAf,IAAeA,OAAf,EAAeA,EAAQuB,QAAU,CAAE5G,MAAOqB,MAAcT,KAAK4F,KAClE,QAACnB,QAAD,IAACA,OAAD,EAACA,EAAQuB,SAENC,EAAerE,IAAMI,aAAY,WACrCjD,EAAM,sBAAmB0F,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAQuB,OAA3B,YAA6C,CACjD5G,MAAOqB,MACNT,KAAK8F,KACP,QAACrB,QAAD,IAACA,OAAD,EAACA,EAAQuB,SAENE,EAAetE,IAAMI,aACzB,SAACmE,GACMA,IACDA,KAAQ,OAAK1B,QAAL,IAAKA,OAAL,EAAKA,EAAQS,MACvBP,EAAQa,KAAK,SRtBnB1F,OAAOY,aAAa0F,WAAW5F,GQwBzBoC,EAAgB,2DAAkD,CAChEK,QAAS,UAGb6C,GAAW,SAAAO,GACT,IAAMC,EAAW,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAaE,WAAU,SAAAC,GAAC,OAAIA,EAAEtB,KAAOiB,KACzD,IAAqB,IAAjBG,EAAoB,CACtB,IAAMG,EAAW,YAAOJ,GAExB,OADAI,EAAYC,OAAOJ,EAAa,GACzBG,EAET,OAAOJ,QAGX,CAACzD,EAAiB+B,EAAlB,OAA2BF,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAQS,KAG/ByB,EAAY/E,IAAMI,aAAY,SAACyC,GAC9BA,GAELqB,GAAW,SAAAO,GACT,OAAIA,EAAYO,MAAK,SAAAJ,GAAC,OAAIA,EAAEtB,KAAOT,EAAOS,MAAYmB,EAChD,GAAN,mBAAWA,GAAX,CAAwB5B,SAEzB,IAWH,OATA7C,IAAMkC,WAAU,YACV,OAACW,QAAD,IAACA,OAAD,EAACA,EAAQuB,SAIbD,IACAE,KAJEtB,EAAQa,KAAK,WAKd,CAACb,EAAD,OAAUF,QAAV,IAAUA,OAAV,EAAUA,EAAQuB,OAAQC,EAAcF,IAEpC,CAAEE,eAAcF,aAAYG,eAAcS,YAAWhB,OAAME,WC/CpE,IAAMgB,EAAcjF,IAAMQ,cAAsC,CAC9DC,QAAS3D,EAAS4D,KAClBuD,QAAS,KAKJ,SAASiB,EAAT,GAE6B,IADlC5I,EACiC,EADjCA,SAEA,EAMIwH,IALFC,EADF,EACEA,KACAE,EAFF,EAEEA,QACAI,EAHF,EAGEA,aACAC,EAJF,EAIEA,aACAS,EALF,EAKEA,UAEIhC,EAAUC,cAChB,EAA+BT,IAAvB9B,EAAR,EAAQA,QAASI,EAAjB,EAAiBA,UACTG,EAAoBC,cAApBD,gBAERhB,IAAMkC,WAAU,WACd,SAASe,EAAUC,GACjB,IACMC,EAAmB3D,EADT0D,EAAM5F,MAEtB,GAAK6F,EAEL,OAAQA,EAAiBC,gBACvB,KAAKrG,EAAeoI,QAClBnE,EAAgBmC,EAAiBiC,MAAO,CAAE/D,QAAS,UACnD0B,EAAQa,KAAK,SACb,MACF,KAAK7G,EAAesI,WAClBN,EAAU5B,EAAiBN,QAC3B,MACF,KAAK9F,EAAeuI,WAClBhB,EAAanB,EAAiBoB,UAC9B,MACF,KAAKxH,EAAesG,eAClBgB,IACA,MACF,KAAKtH,EAAewI,aACX,OAAPxC,QAAO,IAAPA,KAASa,KAAK,YACd,MACF,KAAK7G,EAAeyI,aAClBlB,EAAanB,EAAiBoB,WAIpC,GAAI1D,EAEF,OADAA,EAAU4C,iBAAiB,UAAWR,GAC/B,kBAAMpC,EAAU6C,oBAAoB,UAAWT,MAEvD,CACD8B,EACA/D,EACA+B,EACAuB,EACAD,EACAxD,IAGFb,IAAMkC,WAAU,WACd,IAAMuD,EAAiBxB,EAAQyB,QAAO,SAAA7C,GAAM,OAAIA,EAAO8C,aACrB,aAA9B5C,EAAQ6C,SAASC,UAA2BJ,EAAeK,OAAS,IAC/D,OAAP/C,QAAO,IAAPA,KAASa,KAAK,eAEf,CAACK,EAASlB,IAEb,IAAM5G,EAAS,CAAE4H,OAAMtD,UAASwD,WAEhC,OAAO,cAACgB,EAAY5C,SAAb,CAAsBC,MAAOnG,EAA7B,SAAsCG,IAGxC,SAASyJ,KACd,IAAMvD,EAAUxC,IAAMyC,WAAWwC,GACjC,IAAKzC,EACH,MAAM,IAAIE,MACR,oEAEJ,OAAOF,E,mDChGH1G,GAAYC,aAAW,iBAAO,CAClCiK,KAAM,CACJC,UAAU,wCAEZ,UAAW,CACT,+BAAgC,CAC9B,KAAM,CAAEC,UAAW,gBACnB,OAAQ,CAAEA,UAAW,yBAKZ,SAASC,GAAYC,GAIlC,IAAM7J,EAAUT,KAChB,OACE,cAAC,KAAD,CACEuK,MAAOD,EAAMC,MACbC,aAAW,eACX7J,UAAW8J,aAAKH,EAAM3J,UAAWF,EAAQyJ,QCRhC,SAASQ,GAAT,GAMK,IALlBlK,EAKiB,EALjBA,SACAmK,EAIiB,EAJjBA,QAIiB,IAHjBvL,aAGiB,MAHT,UAGS,EAFjBwL,EAEiB,EAFjBA,UACGN,EACc,2DACjB,OACE,cAACO,GAAA,EAAD,yBACEtF,QAAQ,YACRnG,MAAOA,EACPwL,UAAWD,OAAUnF,EAAYoF,GAC7BN,GAJN,aAKGK,EACC,cAACN,GAAD,CAAaE,MAAO,CAAEzM,SAAyB,WAAfwM,EAAMQ,KAAoB,GAAK,MAE/DtK,K,cC1BO,SAASuK,GAAT,GAAwD,IAAjCC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,IAC3C,OACE,cAACrK,EAAA,EAAD,CAAKsK,GAAI,EAAT,SACE,eAACC,GAAA,EAAD,CAAY5F,QAAQ,YAApB,UACGyF,EADH,IACWC,O,aCXF,OAA0B,0CCGnCjL,GAAYC,aAAqC,SAAAhD,GAAK,MAAK,CAC/DmO,KAAK,cACHC,UAAW,SACXtK,MAAO,SAAAuJ,GAAK,OAAkB,EAAdA,EAAMvJ,OACtB7B,OAAQ,QACPjC,EAAMmD,YAAYkL,KAAK,MAAQ,CAC9BvK,MAAO,SAAAuJ,GAAK,OAAoB,EAAdA,EAAMvJ,MAAa,EAAK,SAKjC,SAASwK,GAAT,GAA2D,IAAD,IAAlCxK,MAC/BN,EAAUT,GAAU,CAAEe,WAD2C,MAA1B,GAA0B,IAEvE,OACE,qBAAKwC,IAAKiI,GAAe7K,UAAWF,EAAQ2K,KAAM3H,IAAI,mB,aCLpDzD,GAAYC,aAA+B,SAAAhD,GAAK,cAAK,CACzDwO,MAAO,CACLjM,gBAAiB,UACjBkM,OAAQ,OACR3K,MAAO,OACPhD,WAAY,YACZqB,MAAOnC,EAAMD,QAAQ2G,KAAKvG,QAC1BuO,OAAQ,WAEVC,YAAY,cACV9N,SAAU,GACVoB,OAAQ,IACPjC,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5B/N,SAAU,GACVoB,OAAQ,KAGZ4M,WAAW,cACThO,SAAU,GACVoB,OAAQ,IACPjC,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5B/N,SAAU,GACVoB,OAAQ,KAGZgB,UAAW,CACTW,QAAS,OACTtB,QAAS,SAAA+K,GAAK,MAAuB,WAAlBA,EAAM/E,QAAuB,YAAc,aAC9D/F,gBAAiB,SAAA8K,GAAK,OACpBA,EAAMyB,SAAW,UAAY9O,EAAMD,QAAQO,WAAWE,OACxDkO,OAAQ,SAAArB,GAAK,OAAKA,EAAMyB,SAAW,cAAgB,QACnDL,OAAQ,SAAApB,GAAK,OACXA,EAAMyB,SAAN,oBACiBC,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,KADlD,oBAEiBJ,EAAMD,QAAQI,QAAQC,OACzC2B,aAAc,SAAAsL,GAAK,MAAuB,WAAlBA,EAAM/E,QAAuB,GAAK,IAC1DjC,WAAY,SACZ2I,WAAY,yBACZC,UAAW,SAAA5B,GAAK,OACdA,EAAM6B,MAAN,yBACsBH,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,KACnDJ,EAAMmP,QAAQ,KAEtBC,YAAU,GACRtL,MAAO,GACP7B,OAAQ,GACRoN,YAAarP,EAAMuB,QAAQ,MAHnB,eAIPvB,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5BS,YAAarP,EAAMuB,QAAQ,GAC3BU,OAAQ,GACR6B,MAAO,KAPD,wBASD,SAAAuJ,GAAK,OACVA,EAAMyB,SAAW9O,EAAMD,QAAQ2G,KAAKoI,SAAW9O,EAAMD,QAAQ2G,KAAKvG,WAV5D,GAYVmP,WAAS,GACPxL,MAAO,GACP7B,OAAQ,GACRoN,YAAarP,EAAMuB,QAAQ,MAHpB,eAINvB,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5BS,YAAarP,EAAMuB,QAAQ,GAC3BU,OAAQ,GACR6B,MAAO,KAPF,wBASA,SAAAuJ,GAAK,OACVA,EAAMyB,SAAW9O,EAAMD,QAAQ2G,KAAKoI,SAAW9O,EAAMD,QAAQ2G,KAAKvG,WAV7D,OAoBI,SAASoP,GAAT,GAMI,IALjBT,EAKgB,EALhBA,SAKgB,IAJhBxG,eAIgB,MAJN,SAIM,EAHhBqF,EAGgB,EAHhBA,UACA6B,EAEgB,EAFhBA,UACGnC,EACa,+DACVoC,EAAWxI,IAAMC,OAAyB,MAChD,EAA0BD,IAAMY,UAAS,GAAzC,mBAAOqH,EAAP,KAAcQ,EAAd,KACMlM,EAAUT,GAAU,CAAE+L,WAAUI,QAAO5G,YAE7C,OACE,sBACE5E,UAAW8J,aAAKhK,EAAQP,UAAW,CAAE,aAAcuM,IACnDG,QAAS,kCAAMF,EAASrI,eAAf,aAAM,EAAkB8H,SAFnC,UAGGvB,GACC1G,IAAM2I,aAAajC,EAAW,CAC5BjK,UACc,WAAZ4E,EAAuB9E,EAAQ4L,WAAa5L,EAAQ8L,UACtD,cAAe,kBAEnB,mCACEO,IAAKJ,EACL/L,UAAW8J,aACThK,EAAQgL,MACI,WAAZlG,EAAuB9E,EAAQmL,YAAcnL,EAAQqL,WACrD,oBAEFiB,QAAS,kBAAMJ,GAAS,IACxBK,OAAQ,kBAAML,GAAS,IACvBZ,SAAUA,GACNzB,OCtHL,I,sECiBDtK,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrCgQ,OAAQ,CACNlM,MAAO,GACP7B,OAAQ,GACRM,gBAAiB,cACjBkM,OAAO,aAAD,OAAezO,EAAMD,QAAQI,QAAQC,MAC3C6P,SAAU,UACV,SAAU,CACRhO,OAAQ,GACR6B,MAAO,OACPD,OAAQ,OACRrB,SAAU,UAGd0N,MAAO,CACLpM,MAAO,GACP7B,OAAQ,GACRF,aAAc,MACdQ,gBDnCqB,UCoCrB8D,WAAY,SACZD,eAAgB,SAChBxC,QAAS,OACTpB,SAAU,WACV2N,OAAQ,EACRC,KAAM,EACNC,OAAQ,GAEVC,KAAM,CACJnO,MAAO,WAEToO,UAAW,CACTzM,MAAO,GACP7B,OAAQ,IAEVuO,SAAU,CACR1P,WAAY,YACZD,SAAU,GACVG,WAAY,OACZiP,SAAU,SACV/M,SAAU,IACVtB,WAAY,UAEd6O,WAAY,CACV/B,OAAQ,eAIG,SAASgC,GAAT,GAQM,IAPnBnG,EAOkB,EAPlBA,GACAoG,EAMkB,EANlBA,KACAX,EAKkB,EALlBA,OACAvF,EAIkB,EAJlBA,QACAmG,EAGkB,EAHlBA,WACAC,EAEkB,EAFlBA,gBACAC,EACkB,EADlBA,OAEMtN,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CACE8K,OAAQ,EACR3K,MAAO,IACP7B,OAAQ,GACRF,aAAc,EACdO,QAAS,EACTsB,QAAQ,OACRyC,WAAW,SACX0K,YAAY,eACZ3K,eAAe,gBACf4K,QDpFiB,UC0EnB,UAWE,eAACrN,EAAA,EAAD,CAAKnB,SAAS,WAAd,UACGqO,GACC,qBAAKnN,UAAWF,EAAQ0M,MAAxB,SACE,cAAC,KAAD,CACExM,UAAW8J,aAAKhK,EAAQ8M,KAAM9M,EAAQ+M,WACtCU,cAAY,gBAIlB,cAACC,GAAA,EAAD,CAAQ5K,IAAK0J,EAAQtM,UAAWF,EAAQwM,YAG1C,cAAC9B,GAAA,EAAD,CAAY/L,MAAM,cAAcuB,UAAWF,EAAQgN,SAAnD,SACGG,IAEH,cAAChN,EAAA,EAAD,CAAKC,QAAQ,OAAOyC,WAAW,SAA/B,SACGoE,EACC,cAAC,KAAD,CAAU/G,UAAWF,EAAQ8M,KAAMW,cAAY,cAE/CL,GACE,cAACjN,EAAA,EAAD,CACEwN,UAAU,SACV7O,QAAS,EACTmM,OAAQ,EACR/K,UAAWF,EAAQiN,WACnBxO,OAAQ,GACR0N,QAAS,yBAAMmB,QAAN,IAAMA,OAAN,EAAMA,EAASvG,EAAIoG,IAC5BK,QAAQ,cAPV,SAQE,cAAC,KAAD,CAAWtN,UAAWF,EAAQ8M,cClH7B,ICWAc,GAFU,CDTV,IAA0B,iCEA1B,IAA0B,iCCA1B,IAA0B,iCCA1B,IAA0B,iCCA1B,IAA0B,iCCA1B,IAA0B,iCCA1B,IAA0B,iCCA1B,IAA0B,kC,UCY1B,SAASC,GAAT,GAKU,IAJvBnG,EAIsB,EAJtBA,QACAM,EAGsB,EAHtBA,SACAoF,EAEsB,EAFtBA,WACAE,EACsB,EADtBA,OAEA,OACE,cAACnN,EAAA,EAAD,CAAK1B,OAAQ,IAAK6B,MAAO,IAAamM,SAAS,gBAA/C,SACE,cAACqB,GAAA,EAAD,CAAMrO,WAAS,EAAC1B,QAAS,EAAG8E,WAAW,WAAvC,SACG6E,GACCA,EAAQqG,KAAI,SAAAzH,GACV,IAAM0H,EAAmBhG,IAAa1B,EAAOS,GAC7C,OACE,cAAC+G,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GAAf,SACE,cAAChB,GAAD,CACEnG,GAAIT,EAAOS,GACXoG,KAAM7G,EAAO0G,SACbR,OAAQoB,GAAiBO,OAAO7H,EAAO8H,YACvCnH,QAASX,EAAOW,QAChBmG,WAAYA,EACZC,gBAAiBW,EACjBV,OAAQA,KARYhH,EAAOS,W,mDCYtC,SAASsH,GAAT,GAKoB,IAJzBC,EAIwB,EAJxBA,SACAC,EAGwB,EAHxBA,aACAC,EAEwB,EAFxBA,SAEwB,IADxBC,0BACwB,MADH,IACG,EAClBC,EAAcjL,IAAMC,SAE1BD,IAAMkC,WAAU,WACd,IAAMgJ,EAAWC,aAAY,WACvBC,GAAsBP,EAAUC,IAAiBE,IAC3C,OAARD,QAAQ,IAARA,OACAE,EAAY9K,SAAWkL,cAAcJ,EAAY9K,YAElD,KAGH,OADA8K,EAAY9K,QAAU+K,EACf,kBAAMG,cAAcH,MAC1B,CAACL,EAAUC,EAAcE,EAAoBD,IAGlD,SAASK,GAAsBP,EAAgBC,GAC7C,IACMQ,EAAW,IAAc,IADlBC,KAAKC,OAAOX,EAASY,WAAY,IAAIC,MAAOD,WAAa,KAChCX,EACtC,OAAOQ,EAAW,IAAM,IAAMA,EClDhC,IAAMK,GAAyBC,cAAW,SAAA7S,GAAK,OAC7C8S,aAAa,CACXjR,KAAM,CACJI,OAAQjC,EAAMuB,QAAQ,IAExBwR,OAAQ,CACNxQ,gBAAiB,OACjByQ,cAAe,aAPUH,CAU7BI,MAEa,SAASC,GAAU7F,GAChC,IAAQkF,EDfK,YAIY,IAHzBT,EAGwB,EAHxBA,SACAC,EAEwB,EAFxBA,aACAC,EACwB,EADxBA,SAEA,EAAgC/K,IAAMY,SAAS,GAA/C,mBAAO0K,EAAP,KAAiBY,EAAjB,KACA,EAA0ClM,IAAMY,WAAhD,mBAAOuL,EAAP,KAAsBC,EAAtB,KAmBA,OAjBApM,IAAMkC,WAAU,WACdgK,EAAYd,GAAsBP,EAAUC,IAC5C,IAAMI,EAAWC,aACf,kBAAMe,EAAYd,GAAsBP,EAAUC,MAClD,KAGF,OADAsB,EAAiBlB,GACV,kBAAMG,cAAcH,MAC1B,CAACL,EAAUC,IAEd9K,IAAMkC,WAAU,WACVoJ,GAAY,MACN,OAARP,QAAQ,IAARA,OACAoB,GAAiBd,cAAcc,MAEhC,CAACb,EAAUP,EAAUoB,IAEjB,CAAEb,YCVYe,CAAiBjG,GAA9BkF,SACFvS,EAAQuT,eACRC,EAAUC,aAAczT,EAAMmD,YAAYyL,GAAG,OAEnD,OACE,cAACgE,GAAD,CACE/E,KAAM2F,EAAU,GAAK,GACrBE,UAAW,EACXpL,QAAQ,cACRiB,MAAOgJ,IC1Bb,IAAMxP,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrC2T,SAAU,CACRvF,UAAW,UAEbnL,UAAW,CACTV,gBAAiBwM,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,IAClD6O,UAAWjP,EAAMmP,QAAQ,QAId,SAASyE,GAAT,GAGU,IAFvBC,EAEsB,EAFtBA,UACAF,EACsB,EADtBA,SAEMnQ,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CACEG,MAAM,OACNF,QAAQ,OACRtB,QAAS,EACTP,aAAc,EACdsE,WAAW,SACXyN,cAAc,SACdpQ,UAAWF,EAAQP,UAPrB,UAQE,cAACiL,GAAA,EAAD,CAAY5F,QAAQ,YAAYnG,MAAM,gBAAtC,SACG0R,IAEFF,GACC,cAACzF,GAAA,EAAD,CACE5F,QAAQ,KACRnG,MAAM,cACNuB,UAAWF,EAAQmQ,SAHrB,SAIGA,O,wBC/BL5Q,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrC+T,OAAQ,CACNxR,gBAAiBvC,EAAMD,QAAQI,QAAQC,KACvC4T,QAAS,OACTjS,aAAc,MACdS,SAAU,WACV4N,KAAM,EACND,OAAQ,EACRzB,OAAQ,UACRD,OAAQ,OACR3K,MAAO,GACPF,QAAS,OACTwC,eAAgB,SAChBC,WAAY,SACZpE,OAAQ,GACRgN,UAAU,eAAD,OAAiBF,aAAK/O,EAAMD,QAAQO,WAAWC,QAAS,KACjE,WAAY,CACV4P,QAAS,EACTlB,UAAW,SAGfgF,OAAQ,CACNhF,UAAU,eAAD,OAAiBF,aAAK/O,EAAMD,QAAQO,WAAWC,QAAS,MAEnE2T,IAAK,CACHjS,OAAQ,IACR6B,MAAO,OACPD,OAAQ,YAIG,SAASsQ,GAAT,GAAgE,IAAxCC,EAAuC,EAAvCA,MAAOC,EAAgC,EAAhCA,UACtC7Q,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CAAK0C,WAAW,SAASvC,MAAO,IAAKtB,SAAS,WAAWP,OAAQ,IAAjE,UACE,wBAAQyB,UAAWF,EAAQuQ,OAAQpE,QAAS0E,EAA5C,SACE,cAAC,KAAD,CAAa/G,MAAO,CAAEnL,MAAO,eAE/B,cAACwB,EAAA,EAAD,CACE8K,OAAQ,EACR7K,QAAQ,OACRmN,YAAY,eACZhP,aAAa,MACb+B,MAAO,IACP7B,OAAQ,IACR+O,QAAQ,qBACRtN,UAAWF,EAAQyQ,OARrB,SASE,qBAAK3N,IAAK8N,EAAO1Q,UAAWF,EAAQ0Q,IAAK1N,IAAI,gBCvBtC,SAAS8N,GAAT,GAKW,IhB9BEvF,EgB0B1BwF,EAIuB,EAJvBA,OACAC,EAGuB,EAHvBA,aACAC,EAEuB,EAFvBA,cAEuB,IADvBX,qBACuB,MADP,SACO,EACjBY,EAA2BzN,IAAM0N,SACrC,kBA5BJ,SAAyBJ,GACvB,OAAOA,EAAOK,QACZ,SAACC,EAAoDtL,GACnD,IAAMuL,EAAeD,EAAYE,OAAOF,EAAYG,OACpD,cAAQF,QAAR,IAAQA,OAAR,EAAQA,EAAc/H,QACpB,UAAKxE,EACHsM,EAAYE,OAAOF,EAAYG,OAAS,CAACzL,GACzC,MACF,KAAK,EACHsL,EAAYE,OAAOF,EAAYG,OAAOnK,KAAKtB,GAC3C,MACF,QACEsL,EAAYG,QACZH,EAAYE,OAAOF,EAAYG,OAAS,CAACzL,GAE7C,OAAOsL,IAET,CAAEG,MAAO,EAAGD,OAAQ,KACpBA,OAUME,CAAgBV,KACtB,CAACA,IAGH,OACE,cAAC5Q,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAeA,EACfxR,QAAQ,MACRP,aAAc,EACdmT,QAAS,EACTzG,OAAQ,EACRsC,YAAY,UACZ3K,eAAe,SACf4K,ShB9CsBjC,EgB8CD,GhB9CA,2BAAsCA,EAAtC,MgBqCvB,SAUG2F,EAAanD,KAAI,SAAC4D,EAAQH,GAAT,OAChB,cAACrR,EAAA,EAAD,CAEEC,QAAQ,OACRkQ,cAAiC,WAAlBA,EAA6B,MAAQ,SACpD1N,eAAe,gBACfgP,IAAK,IALP,SAMGD,EAAO5D,KAAI,SAAC8D,EAAaL,GACxB,IAAMM,EAAaD,IAAgBb,EAEnC,OACE,cAAC7Q,EAAA,EAAD,CACEwN,UAAU,SAEVxB,QAAS,yBAAM8E,QAAN,IAAMA,OAAN,EAAMA,EAAgBY,IAC/B5G,OAAQ6G,EAAa,EAAI,EACzBtE,QAASqE,EACTtE,YAAauE,EAAa,UAAY,UACtCxR,MAAO,GACP7B,OAAQ,GACRF,aAAc,EACd2B,UAAU,kBARLsR,OAXNA,QChDf,IAAMO,GAAc,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,IAExB,SAASC,GAAT,GAIM,IAHnBC,EAGkB,EAHlBA,YACAC,EAEkB,EAFlBA,aAEkB,IADlB5B,qBACkB,MADF,MACE,EACZ9T,EAAQuT,eACd,OACE,cAAC5P,EAAA,EAAD,CACErB,QAAS,EACT4S,QAAS,EACTlE,QAASjC,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,IAC1CwD,QAAQ,OACR7B,aAAc,EACd0M,OAAQ,EACRqF,cAAeA,EACf/C,YAAY,eACZ1K,WAAW,SACX4I,UAAW,EAVb,SAWGsG,GAAYhE,KAAI,SAAC1D,EAAM8H,GACtB,IAAMC,EAAgBH,IAAgB5H,EACtC,OACE,cAACgI,GAAD,CAEEH,aAAcA,EACd7H,KAAMA,EACN+H,cAAeA,GAHV/H,QAWjB,IAAM9K,GAAYC,aAA8C,SAAAhD,GAAK,MAAK,CACxE+T,OAAQ,CACNxR,gBAAiB,cACjByR,QAAS,OACTvF,OAAQ,oBACR1M,aAAc,MACd+B,MAAO,GACP7B,OAAQ,GACRoE,WAAY,SACZD,eAAgB,SAChBxC,QAAS,OACTkQ,cAAe,SACfpF,OAAQ,UACRO,UAAW,SAAA5B,GAAK,OACdA,EAAMuI,cAAN,uBACoB7G,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,KACjD,aAIV,SAASyV,GAAT,GAQI,IAPFH,EAOC,EAPDA,aACA7H,EAMC,EANDA,KACA+H,EAKC,EALDA,cAMMpS,EAAUT,GAAU,CAAE6S,kBAC5B,OACE,wBAAQjG,QAAS,kBAAM+F,EAAa7H,IAAOnK,UAAWF,EAAQuQ,OAA9D,SACE,cAACpQ,EAAA,EAAD,CACE5B,aAAa,MACb0M,OAAO,oBACPuC,QAAQ,UACRlN,MAAO+J,EACP5L,OAAQ4L,M,yBCvED,SAASiI,GAAT,GAAgE,IAArCC,EAAoC,EAApCA,WAChC9N,EAAoBC,cAApBD,gBAQR,OACE,cAAC2F,GAAA,EAAD,CACED,UAAW,cAAC,KAAD,CAAYL,MAAO,CAAEzM,SAAU,MAC1C8O,QATJ,WACMoG,KCbD,SAAyBxM,GAC9B,IAAMyM,EAAYC,SAASC,cAAc,SACzCF,EAAUzM,MAAQA,EAClB0M,SAASnR,KAAKqR,YAAYH,GAC1BA,EAAUI,SACVH,SAASI,YAAY,QACrBJ,SAASnR,KAAKwR,YAAYN,GDQtBO,CAAgB,GAAD,OAAIpR,OAAO0H,SAAS2J,OAApB,iBAAmCT,IAClD9N,EAAgB,uCAA8B,CAAEK,QAAS,cAOzDuF,KAAK,QACLvF,QAAQ,YAJV,SAKGyN,GAAc,e,cErBfU,GAAkBzT,aAA2C,SAAAhD,GAAK,YAAK,CAC3EgQ,QAAM,GACJ/N,OAAQ,GACR6B,MAAO,GACPmM,SAAU,UACV1N,gBAAiB,SAAA8K,GAAK,OACpBA,EAAMiI,WACFvG,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,IACjC2O,aAAK/O,EAAMD,QAAQI,QAAQC,KAAM,MAPnC,eAQHJ,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5B3M,OAAQ,GACR6B,MAAO,KAVL,eAYJ,SAZI,cAaF7B,OAAQ,GACR6B,MAAO,OACPD,OAAQ,OACRrB,SAAU,SACTxC,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5B3M,OAAQ,MAlBR,OAwBO,SAASyU,GAAT,GAMX,IALF9E,EAKC,EALDA,UACA0D,EAIC,EAJDA,WAKM9R,EAAUiT,GAAgB,CAAEnB,eAClC,OACE,cAACpE,GAAA,EAAD,CACExN,UAAWF,EAAQwM,OACnB1J,IAAK8K,GAAiBO,OAAOC,MCnBnC,IAAM7O,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrCkQ,MAAO,CACLpM,MAAO,GACP7B,OAAQ,GACRF,aAAc,MACdQ,gBAAiBvC,EAAMD,QAAQI,QAAQC,KACvCiG,WAAY,SACZD,eAAgB,SAChBxC,QAAS,OACT6K,OAAQ,EACRjM,SAAU,WACV2N,OAAQ,EACRC,KAAM,EACNC,OAAQ,GAEVpN,UAAW,CACT0T,UAAW,UAEbnG,SAAU,CACRP,SAAU,SACV7B,UAAW,SACXlL,SAAU,GACVtB,WAAY,UAEdmS,OAAQ,CACNxR,gBAAiB,cACjByR,QAAS,OACT1R,QAAS,GAEXgO,KAAM,CACJzP,SAAU,GACVsB,MAAOnC,EAAMD,QAAQqC,OAAOC,WAIjB,SAASuU,GAAT,GAKU,IAJvB1L,EAIsB,EAJtBA,QACAM,EAGsB,EAHtBA,SACAmE,EAEsB,EAFtBA,QACAiB,EACsB,EADtBA,WAEM5Q,EAAQuT,eACRsD,EAAapD,aAAczT,EAAMmD,YAAYyL,GAAG,OAChDpL,EAAUT,KAEhB,OACE,cAACY,EAAA,EAAD,CACEC,QAAQ,OACRsR,QAAS,EACThS,SAAU2T,EAAa,IAAM,IAC7BnT,UAAWF,EAAQP,UACnBoD,WAAW,SACXyN,cAAc,MANhB,SAOG5I,EAAQqG,KAAI,SAACzH,EAAQ6L,GACpB,IAAMnE,EAAmBhG,IAAa1B,EAAOS,GAC7C,OACE,cAACuM,GAAA,EAAD,CAAyBC,MAAOjN,EAAO0G,SAAUwG,UAAU,MAA3D,SACE,eAACrT,EAAA,EAAD,CAAKmQ,cAAc,SAASzN,WAAW,SAASgK,OAAQ,EAAxD,UACE,eAAC1M,EAAA,EAAD,CAAKnB,SAAU,CAAEkP,GAAI,WAAYuF,GAAI,WAArC,WACIJ,IACC/M,EAAOW,QACN,qBAAK/G,UAAWF,EAAQ0M,MAAxB,SACE,cAAC,KAAD,CACEe,cAAY,YACZvN,UAAWF,EAAQ8M,SAIvBM,GACE,wBACEjB,QAAS,kBACN7F,EAAOW,SACRmG,IADA,OAEAjB,QAFA,IAEAA,OAFA,EAEAA,EAAU7F,EAAOS,GAAIT,EAAO0G,YAE9B9M,UAAWF,EAAQ0M,MANrB,SAOE,cAAC,KAAD,CACEe,cAAY,YACZvN,UAAWF,EAAQ8M,UAK7B,cAACoG,GAAD,CACEpB,WAAY9D,EACZI,UAAW9H,EAAO8H,gBAGpBiF,GACA,cAAC3I,GAAA,EAAD,CACExK,UAAWF,EAAQgN,SACnBW,UAAU,IACV7I,QAAQ,YAHV,SAIGwB,EAAO0G,eArCF1G,EAAOS,S,0ECzDhB,SAAS2M,GAAT,GAKW,IAJZC,EAIW,EAJvBpB,WACArI,EAGuB,EAHvBA,QACAiC,EAEuB,EAFvBA,QACAjM,EACuB,EADvBA,UAEA,EAAwBuD,IAAMY,UAAS,GAAvC,mBAAOuP,EAAP,KAAaC,EAAb,KACA,EAAoCpQ,IAAMY,SAAS,IAAnD,mBAAOkO,EAAP,KAAmBuB,EAAnB,KACA,OACE,qCACE,cAAC7J,GAAD,CACEE,UACEwJ,EAAgB,cAAC,KAAD,CAAe7J,MAAO,CAAEzM,SAAU,WAAW0H,EAE/DiH,WAAS,EACT9B,QAASA,EACThK,UAAWA,EACXmK,KAAK,SACL1L,MAAOgV,EAAgB,UAAY,UACnCxH,QAAS,kBACPwH,EAAgBxH,EAAQwH,GAAiBE,GAAQ,IAVrD,kBAeA,eAACE,GAAA,EAAD,CACE/H,WAAS,EACTtM,SAAS,KACTkU,KAAMA,EACNI,QAAS,kBAAMH,GAAQ,IAJzB,UAKE,cAACI,GAAA,EAAD,yDACA,cAACC,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CACExV,MAAM,YACNyV,WAAS,EACT/T,OAAO,QACP0G,GAAG,OACH7I,MAAM,aACN6H,MAAOwM,EACP8B,SAAU,SAAA1N,GAAK,OAAImN,EAAcnN,EAAM2N,OAAOvO,QAC9CiG,WAAS,MAGb,eAACuI,GAAA,EAAD,WACE,cAACnK,GAAA,EAAD,CAAQ+B,QAAS,kBAAM0H,GAAQ,IAAQlV,MAAM,YAA7C,iCAGA,cAACyL,GAAA,EAAD,CACE+B,QAAS,WACPA,EAAQoG,GACRsB,GAAQ,IAEVlV,MAAM,YALR,wCCvDH,IAAM6V,GAAuB/Q,IAAMQ,cACxC,IAGK,SAASwQ,KACd,IAAMxO,EAAUxC,IAAMyC,WAAWsO,IACjC,IAAKvO,EACH,MAAM,IAAIE,MACR,iEAEJ,OAAOF,ECjBT,IAAM1G,GAAYC,aAChB,SAAAhD,GAAK,MAAK,CACRkY,OAAQ,CACN3V,gBAAiB,SAAA8K,GAAK,OAAKA,EAAMyB,SAAW,UAAY,WACxDhL,MAAO,SAAAuJ,GAAK,OAAIA,EAAMQ,KAAK/J,OAC3B7B,OAAQ,SAAAoL,GAAK,OAAIA,EAAMQ,KAAK5L,QAC5ByM,OAAQ,SAAArB,GAAK,OAAKA,EAAMyB,SAAW,cAAgB,cAErDqJ,UAAW,CACTrU,MAAO,SAAAuJ,GAAK,OAAIA,EAAMQ,KAAK/J,MAA4B,EAApBuJ,EAAMQ,KAAKY,QAC9CxM,OAAQ,SAAAoL,GAAK,OAAIA,EAAMQ,KAAK5L,OAA6B,EAApBoL,EAAMQ,KAAKY,QAChDA,OAAQ,SAAApB,GAAK,gBACRA,EAAMQ,KAAKY,OADH,oBACqBzO,EAAMD,QAAQI,QAAQC,OACxD6O,UAAWjP,EAAMmP,QAAQ,QAKhB,SAASiJ,GAAT,GAA8D,IAArCtJ,EAAoC,EAApCA,SACtC,EAA4BmJ,KAApBI,EAAR,EAAQA,UAAWxK,EAAnB,EAAmBA,KACbrK,EAAUT,GAAU,CAAE8K,OAAMiB,aAElC,OACE,qBAAKpL,UAAWF,EAAQ2U,UAAxB,SACE,wBAAQtI,IAAKwI,EAAW3U,UAAWF,EAAQ0U,W,qFCflC,SAASI,GAAT,GAKO,IAJpBxO,EAImB,EAJnBA,OAImB,IAHnByO,iBAGmB,MAHP,OAGO,EAFnBC,EAEmB,EAFnBA,UACAC,EACmB,EADnBA,QAEMzY,EAAQuT,eACd,OACE,eAAC5P,EAAA,EAAD,CAAK+U,EAAG,EAAG9U,QAAQ,OAAOkQ,cAAc,SAASzN,WAAW,SAA5D,UACE,eAAC1C,EAAA,EAAD,CAAKC,QAAQ,OAAOyC,WAAW,SAA/B,YACG,OAACyD,QAAD,IAACA,OAAD,EAACA,EAAQW,UACR,cAAC2C,GAAD,CACEE,MAAO,CAAEnL,MAAOnC,EAAMD,QAAQ2G,KAAKrG,UAAWgP,YAAa,KAG/D,cAACnB,GAAA,EAAD,CAAY5F,QAAQ,QAAQnG,MAAM,gBAAlC,UACS,OAAN2H,QAAM,IAANA,OAAA,EAAAA,EAAQW,SAAR,oDACgD8N,GADhD,4CAEwCA,SAGtC,OAANzO,QAAM,IAANA,OAAA,EAAAA,EAAQW,UACP,cAAC9G,EAAA,EAAD,CAAKgV,GAAI,EAAT,SACE,cAAClL,GAAD,CACEC,QAAS8K,EACT7I,QAAS8I,EACT5K,KAAK,QACLF,UAAW,cAAC,KAAD,CAAsBL,MAAO,CAAEzM,SAAU,MAJtD,wB,cCtBJ+X,GAAuB/F,cAAW,SAAC7S,GAAD,OACtC8S,aAAa,CACXjR,KAAM,CACJI,OAAQjC,EAAMuB,QAAQ,IAExBsX,aAAc,CACZtW,gBAAiBvC,EAAMD,QAAQO,WAAWC,SAE5CuY,IAAK,CACH/W,aAAc,EACdQ,gBAAiBvC,EAAMD,QAAQI,QAAQ4Y,UAVhBlG,CAa3BmG,MAEa,SAASC,GAAT,GAGQ,IAAD,IAFpBC,kBAEoB,MAFP,EAEO,MADpBC,eACoB,MADV,EACU,EACd5G,EAsBR,SAAwBnL,EAAiB4G,GACvC,IAAMoL,EAAwB,IAAVhS,EAAiB4G,EACrC,OAAOoL,EAAa,IAAM,IAAMA,EAxBfC,CAAeH,EAAYC,GAE5C,OACE,eAACxV,EAAA,EAAD,CAAKsM,SAAS,SAASnM,MAAM,OAAOtB,SAAS,WAAWqJ,EAAG,EAA3D,UACE,cAAClI,EAAA,EAAD,CACE0C,WAAW,SACXD,eAAe,SACfxC,QAAQ,OACRpB,SAAS,WACT6N,OAAQ,EACR+E,IAAK,EACLjF,OAAQ,EACRC,KAAM,GARR,SASE,eAAClC,GAAA,EAAD,CAAY5F,QAAQ,YAApB,UACG4Q,EADH,IACgBC,OAGlB,cAACP,GAAD,CAAsBtQ,QAAQ,cAAciB,MAAOgJ,O,cC1CnDxP,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrCgQ,OAAQ,CACNlM,MAAO,GACP7B,OAAQ,GACRM,gBAAiBvC,EAAMD,QAAQI,QAAQ4Y,KACvC9I,SAAU,UACVhB,UAAWjP,EAAMmP,QAAQ,GACzB,SAAU,CACRlN,OAAQ,GACR6B,MAAO,OACPD,OAAQ,OACRrB,SAAU,UAGd8W,IAAK,CACH/W,gBAAiBvC,EAAMD,QAAQU,OAAOL,KACtC2B,aAAc,GACd0M,OAAQ,YAIG,SAAS8K,GAAT,GAIe,IAH5B/I,EAG2B,EAH3BA,SACAjN,EAE2B,EAF3BA,SACAqO,EAC2B,EAD3BA,UAEMpO,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAAlC,UACE,cAAC5F,GAAA,EAAD,CAAY5F,QAAQ,YAApB,SAAiCkI,IACjC,eAAC7M,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,MACdjI,EAAG,GACH/H,MAAO,IACPJ,UAAWF,EAAQ8V,IALrB,UAME,cAACpI,GAAA,EAAD,CAAQ5K,IAAKsL,EAAWlO,UAAWF,EAAQwM,SAC3C,cAACrM,EAAA,EAAD,CAAK6V,GAAI,EAAGC,GAAI,EAAGC,UAAU,SAA7B,SACE,cAACxL,GAAA,EAAD,CAAY5F,QAAQ,QAApB,SAA6B/E,YC9CxB,WAA0B,oCCO1B,SAASoW,GAAT,GAGY,IAFzBjW,EAEwB,EAFxBA,UACA4C,EACwB,EADxBA,IAEA,OACE,cAAC3C,EAAA,EAAD,CACEqN,QAAQ,eACRvC,OAAQ,EACRsC,YAAY,eACZ9B,UAAW,EACXrL,QAAQ,OALV,SAME,qBAAK0C,IAAKA,EAAKE,IAAI,GAAG9C,UAAWA,MCVvC,ICKYkW,GDLN7W,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrC8D,MAAM,cACJA,MAAO,IACP7B,OAAQ,OACR4X,UAAW,KACV7Z,EAAMmD,YAAYkL,KAAK,MAAQ,CAC9BvK,MAAO,SAIX0M,SAAU,CACRpC,UAAW,QACXlL,SAAU,IACVtB,WAAY,SACZqO,SAAU,cAIC,SAAS6J,GAAT,GAGc,IAF3BtJ,EAE0B,EAF1BA,SACAlK,EAC0B,EAD1BA,IAEM9C,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAAlC,UACE,cAAC5F,GAAA,EAAD,CAAY5F,QAAQ,YAAY5E,UAAWF,EAAQgN,SAAnD,SACGA,IAEH,cAACmJ,GAAD,CAAkBrT,IAAKA,EAAK5C,UAAWF,EAAQM,Y,SCvBzC8V,O,eAAAA,I,oBAAAA,Q,KCXL,IAmCMG,GAAY,SAAC7B,GAA+B,IAAD,EACtD,UAAAA,EAAO8B,WAAW,aAAlB,SAAyBC,UAAU,EAAG,EAAG/B,EAAOpU,MAAOoU,EAAOjW,SAGnDiY,GAAiB,SAC5BC,EACAC,EAF4B,GAYxB,IARFC,EAQC,EARDA,cACAC,EAOC,EAPDA,gBACAC,EAMC,EANDA,YAeF,OARAJ,EAAIK,YAAcJ,EAAKjY,MACvBgY,EAAIM,UAAYL,EAAKjY,MACrBgY,EAAIO,SAAW,QACfP,EAAIQ,QAAU,QACdR,EAAIS,UAAYR,EAAKvM,KAErBsM,EAAIU,YAEIT,EAAKla,MACX,KAAK0Z,GAASkB,KACZ,IAAKR,IAAoBC,EAAa,OACtCJ,EAAIY,OAAOV,EAAcW,EAAGX,EAAcY,GAC1Cd,EAAIe,iBACFZ,EAAgBU,EAChBV,EAAgBW,EAChBV,EAAYS,EACZT,EAAYU,GAEdd,EAAIgB,SACJ,MACF,KAAKvB,GAASwB,OACZjB,EAAIkB,IAAIhB,EAAcW,EAAGX,EAAcY,EAAGb,EAAKvM,KAAO,EAAG,EAAG,EAAI2E,KAAK8I,IACrEnB,EAAIoB,OAGRpB,EAAIqB,aAGC,SAASC,GACdC,GAKA,MAA+BA,EAAUC,OAAO,GAAhD,mBAAOC,EAAP,KAAkBC,EAAlB,KAOA,MAAO,CAAEC,aANYF,EAMEG,SALN,CACff,GAAIY,EAAUZ,EAAIa,EAAUb,GAAK,EACjCC,GAAIW,EAAUX,EAAIY,EAAUZ,GAAK,IAM9B,IAAMe,GAAiB,SAC5B7R,EACA8R,EACA/D,GAEA,GAAKA,EACL,MAAO,CACL8C,GAAI7Q,EAAM+R,MAAQhE,EAAOiE,YAAcF,EACvChB,GAAI9Q,EAAMiS,MAAQlE,EAAOmE,WAAaJ,IC2B3BK,ICvHHC,GCGAC,GFoHGF,GArHf,YAKyB,IAJvBna,EAIsB,EAJtBA,MACA0L,EAGsB,EAHtBA,KACAwK,EAEsB,EAFtBA,UACAoE,EACsB,EADtBA,MAEMC,EAAkBzV,IAAMC,OAAmB,CAAE8T,EAAG,EAAGC,EAAG,IACtD0B,EAAQ1V,IAAMC,OAAe,IAC7B0V,EAAe3V,IAAMC,OAAe,IAEpC2V,EAAc,kBAAMF,EAAMvV,QAAQuV,EAAMvV,QAAQ2F,OAAS,IAEzD+P,EAAc7V,IAAMI,aAAY,SAAC0V,GAChCA,IACLF,IAAcG,OAAOnS,KAAKkS,GAC1BL,EAAgBtV,QAAU2V,KACzB,IAEGE,EAAQhW,IAAMI,aAClB,SAAC6V,GACC,GAAKA,GAAqBR,GAAoBrE,EAAUjR,QAAxD,CAEA,IAAM+V,EAAWN,IACjBM,EAASH,OAAOnS,KAAKqS,GAErB,IAAMzT,EAAU4O,EAAUjR,QAAQ4S,WAAW,MAC7C,GAAKvQ,KAAW0T,EAASH,OAAOjQ,QAAU,GAA1C,CAEA,MAAmC0O,GACjC0B,EAASH,QADHlB,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,SAItB7B,GAAezQ,EAAS0T,EAAU,CAChC9C,cAAeqC,EAAgBtV,QAC/BkT,gBAAiBwB,EACjBvB,YAAawB,IAEfW,EAAgBtV,QAAU2U,MAE5B,CAAC1D,IAGG+E,EAASnW,IAAMI,aACnB,SAAC0V,EAAwBM,GAGvB,GAFAX,EAAgBtV,QAAU2V,EAC1BH,EAAaxV,QAAU,GACnBiW,EAAW,CAAC,IAAD,EACbV,EAAMvV,QAAQyD,KAAK,CACjB3K,KAAM0Z,GAASkB,KACf3Y,QACA0L,KAAMA,EAAO4O,EACbO,OAAQ,CAACD,KAEX,IAAMtT,EAAO,OAAG4O,QAAH,IAAGA,GAAH,UAAGA,EAAWjR,eAAd,aAAG,EAAoB4S,WAAW,MAC/C,IAAKvQ,EAAS,OACdyQ,GACEzQ,EADY,YAAC,eAERoT,KAFO,IAEQ3c,KAAM0Z,GAASwB,SACnC,CAAEf,cAAe0C,SAEdE,EAAMF,KAEf,CAAC1E,EAAWlW,EAAO8a,EAAOR,EAAO5O,IAG7ByP,EAAUrW,IAAMI,aAAY,WAC3BgR,EAAUjR,SDhFS,SAAC8Q,EAA2ByE,GACtD,IAAMlT,EAAUyO,EAAO8B,WAAW,MAC7BvQ,IAELsQ,GAAU7B,GAEVyE,GACEA,EAAMY,SAAQ,SAAAnD,GACZ,IAAIoD,EAA8BpD,EAAK4C,OAAO,GACxCS,EAA6B,GAEnCvD,GACEzQ,EADY,YAAC,eAER2Q,GAFO,IAEDla,KAAM0Z,GAASwB,SAC1B,CAAEf,cAAeD,EAAK4C,OAAO,KAG/B5C,EAAK4C,OAAOO,SAAQ,SAAAR,GAElB,GADAU,EAAa5S,KAAKkS,GACdU,EAAa1Q,OAAS,EAAG,CAC3B,MAAmC0O,GACjCgC,GADM3B,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,SAItB7B,GAAezQ,EAAS2Q,EAAM,CAC5BC,cAAemD,EACflD,gBAAiBwB,EACjBvB,YAAawB,IAEfyB,EAAkBzB,UCoDxB2B,CAAarF,EAAUjR,QAASuV,EAAMvV,WACrC,CAACiR,IAEEsF,EAAO1W,IAAMI,aAAY,WAC7B,IAAMuW,EAAcjB,EAAMvV,QAAQyW,MAClCD,GAAehB,EAAaxV,QAAQyD,KAAK+S,GACzCN,MACC,CAACA,IAEEQ,EAAO7W,IAAMI,aAAY,WAC7B,IAAM0W,EAAWnB,EAAaxV,QAAQyW,MACtCE,GAAYpB,EAAMvV,QAAQyD,KAAKkT,GAC/BT,MACC,CAACA,IAEEU,EAAQ/W,IAAMI,aAAY,WACzBgR,EAAUjR,SAEZjC,OAAO8Y,QACN,qEAIJtB,EAAMvV,QAAU,GAChBwV,EAAaxV,QAAU,GACvB2S,GAAU1B,EAAUjR,YACnB,CAACiR,IAWJ,OATApR,IAAMkC,WAAU,WACd,GAAKkP,EAAUjR,QAAf,CACA,IAAM8W,EAAY,SAAC/T,GACK,KAAlBA,EAAMgU,UAAmBhU,EAAMiU,SAAWjU,EAAMkU,UAAUV,KAGhE,OADA1H,SAASvL,iBAAiB,UAAWwT,GAC9B,kBAAMjI,SAAStL,oBAAoB,UAAWuT,OACpD,CAAC7F,EAAWsF,IAER,CACLV,QACAG,SACAN,cACAa,OACAhB,QACAD,kBACAsB,QACAF,OACAR,YG1HEgB,GAAc,CAClBxa,MAAO,IACP7B,OAAQ,IACRwM,OAAQ,EACRgO,MAAO,GAKF,SAAS8B,GAAT,GAKyB,IAAD,IAJ7Bpc,aAI6B,MAJrB,UAIqB,MAH7Bqc,gBAG6B,MAHlB,EAGkB,MAF7B1P,gBAE6B,SAD7BvL,EAC6B,EAD7BA,SAEA,EAAsC0D,IAAMY,SAASyW,IAArD,mBAAO7I,EAAP,KAAoBgJ,EAApB,KACMpG,EAAYpR,IAAMC,OAA0B,MAClD,EAAoCD,IAAMY,UAAS,GAAnD,mBAAO6W,EAAP,KAAmBC,EAAnB,KAEMC,EAAW3X,IAAMI,aAAY,WAAO,IAAD,MACjCwX,EAAQ,UAAGxG,EAAUjR,eAAb,iBAAG,EAAmB0X,qBAAtB,iBAAG,EAAkCA,qBAArC,aAAG,EAAiDC,wBAC/Djb,MACH,GAAK+a,KAAYA,EAAW,IAA5B,CAEA,IAAMpC,EAAQ,KAAOoC,EACfG,EAAYH,EAlBR,IAmBJpQ,EAASoQ,EAAW,IAAM,EAAI,GAIlCA,EAHoB,EAGOpJ,EAAY3R,OACvC+a,EAJoB,EAIOpJ,EAAY3R,QAEvC2a,EAAe,CACb3a,MAAO+a,EAAoB,EAATpQ,EAClBxM,OAAQ+c,EAAqB,EAATvQ,EACpBA,SACAgO,aAGH,CAAChH,EAAY3R,QAEhB,EAQIwY,GAAe,CACjBna,QACA0L,KAAM2Q,EACNnG,YACAoE,MAAOhH,EAAYgH,QAXnBQ,EADF,EACEA,MACAG,EAFF,EAEEA,OACAN,EAHF,EAGEA,YACAkB,EAJF,EAIEA,MACAL,EALF,EAKEA,KACAL,EANF,EAMEA,QACAQ,EAPF,EAOEA,KAQImB,EAAchY,IAAMI,aACxB,SAAC8C,GAAkD,IAA/BkT,IAA8B,yDAC1C6B,EAAclD,GAClB7R,EACAsL,EAAYgH,MACZpE,EAAUjR,SAEP8X,IACLP,GAAc,GAEdvB,EAAO8B,EAAa7B,MAEtB,CAACD,EAAQ3H,EAAYgH,QAGjB0C,EAAYlY,IAAMI,aACtB,SAAC8C,GACCwU,GAAc,GACd,IAAM5B,EAAaf,GAAe7R,EAAOsL,EAAYgH,OACrDK,EAAYC,KAEd,CAACD,EAAarH,EAAYgH,QAGtB2C,EAAenY,IAAMI,aACzB,SAAC8C,GACKuU,GAAYO,EAAY9U,GAAO,KAErC,CAACuU,EAAYO,IAGTI,EAAcpY,IAAMI,aACxB,SAAC8C,GACC,GAAKuU,GAAerG,EAAUjR,QAA9B,CACA,IAAM8V,EAAmBlB,GACvB7R,EACAsL,EAAYgH,MACZpE,EAAUjR,SAEZ6V,EAAMC,MAER,CAACzH,EAAYgH,MAAOiC,EAAYzB,KC5FrB,YASkB,IAR/B5E,EAQ8B,EAR9BA,UACAqG,EAO8B,EAP9BA,WACAW,EAM8B,EAN9BA,YACAD,EAK8B,EAL9BA,aACAH,EAI8B,EAJ9BA,YACAE,EAG8B,EAH9BA,UACArQ,EAE8B,EAF9BA,SACA8P,EAC8B,EAD9BA,SAEA3X,IAAMkC,WAAU,WACd,GAAKuV,IAAc5P,EAYnB,OAFA3J,OAAO8Q,SAASvL,iBAAiB,YAAa2U,GAC9Cla,OAAO8Q,SAASvL,iBAAiB,YAAa4U,GACvC,WACLna,OAAO8Q,SAAStL,oBAAoB,YAAa0U,GACjDla,OAAO8Q,SAAStL,oBAAoB,YAAa2U,IAZnD,SAASA,EAAUnV,GACjB,IAAMoV,EAAa,IAAIC,WAAW,YAAa,CAC7CC,QAAStV,EAAMuV,QAAQ,GAAGD,QAC1BE,QAASxV,EAAMuV,QAAQ,GAAGC,UAE5BN,EAAYE,MASb,CAACzQ,EAAU4P,EAAYW,IAE1BpY,IAAMkC,WAAU,WACd,GAAKkP,EAAUjR,UAAW0H,EAA1B,CACA,IAAMoJ,EAA4BG,EAAUjR,QAG5C,OADA8Q,EAAOxN,iBAAiB,aAAc0U,GAC/B,WACLlH,EAAOvN,oBAAoB,aAAcyU,OAE1C,CAAC/G,EAAWvJ,EAAUsQ,IAEzBnY,IAAMkC,WAAU,WACd,GAAKkP,EAAUjR,UAAW0H,EAA1B,CACA,IAAMoJ,EAA4BG,EAAUjR,QAa5C,OAHA8Q,EAAOxN,iBAAiB,YAAauU,GACrC/G,EAAOxN,iBAAiB,aAAckV,GACtCza,OAAO8Q,SAASvL,iBAAiB,UAAWyU,GACrC,WACLjH,EAAOvN,oBAAoB,YAAasU,GACxC/G,EAAOvN,oBAAoB,aAAciV,GACzCza,OAAO8Q,SAAStL,oBAAoB,UAAWwU,IAdjD,SAASS,EAAWzV,GAClB,IAAMoV,EAAa,IAAIC,WAAW,YAAa,CAC7CC,QAAStV,EAAMuV,QAAQ,GAAGD,QAC1BE,QAASxV,EAAMuV,QAAQ,GAAGC,UAE5BV,EAAYM,MAWb,CAAClH,EAAWvJ,EAAUmQ,EAAaE,IAEtClY,IAAMkC,WAAU,WAEd,OADAhE,OAAOuF,iBAAiB,SAAUkU,GAC3B,kBAAMzZ,OAAOwF,oBAAoB,SAAUiU,MACjD,CAACA,ID+BJiB,CAAuB,CACrBxH,YACA4G,cACAE,YACAC,eACAC,cACAX,aACAE,WACA9P,aAGF7H,IAAMkC,WAAU,WACd,GAAKkP,EAAUjR,QAAf,CACA,IAAM8Q,EAA4BG,EAAUjR,QAE5C8Q,EAAOpU,MAAQ2R,EAAY3R,MAAQ2R,EAAYgH,MAC/CvE,EAAOjW,OAASwT,EAAYxT,OAASwT,EAAYgH,MACjDa,OACC,CAACjF,EAAWiF,EAAS7H,IAExB,IAAMrS,EAAS6D,IAAM0N,SACnB,iBAAO,CAAEqJ,QAAOL,OAAMtF,YAAWyF,OAAMjQ,KAAM4H,KAC7C,CAACuI,EAAOvI,EAAaqI,EAAMH,IAG7B,OACE,cAAC3F,GAAqB1O,SAAtB,CAA+BC,MAAOnG,EAAtC,SACGG,K,SFzHKgZ,O,uBAAAA,I,sBAAAA,Q,cCGAC,O,iBAAAA,I,eAAAA,I,iBAAAA,I,gBAAAA,Q,KGqCGsD,OA/Cf,WACE,MAA8B7Y,IAAMY,WAApC,mBAAOkY,EAAP,KAAgBC,EAAhB,KACQ/X,EAAoBC,cAApBD,gBACF+B,EAAUC,cAyChB,OAvCAhD,IAAMkC,WAAU,WACd,IAAIyB,GAAU,EAWd,OAVAxG,EAAgB,kBAAmB,CAAEK,MAAOqB,MAAcT,MACxD,SAAA0a,GAAO,OAAKnV,GAAWoV,EAAWD,MAClC,WACE9X,EAAgB,qDAA4C,CAC1DK,QAAS,UAEX0B,EAAQa,KAAK,eAIV,WACLD,GAAU,KAEX,CAAC3C,EAAiB+B,IAGrB/C,IAAMkC,WAAU,WACd,IAAM2D,EAAW9C,EAAQ6C,SAASC,SAC9BmT,EAAc,GAClB,cAAQF,QAAR,IAAQA,OAAR,EAAQA,EAASG,UACf,KAAK1D,GAAgB2D,MACnBF,EAAc,WACd,MACF,KAAKzD,GAAgB4D,MACnBH,EAAc,WACd,MACF,KAAKzD,GAAgB6D,KACnBJ,EAAc,UACd,MACF,KAAKzD,GAAgB8D,KACnBL,EAAc,UAIdA,GAAenT,IAAamT,GAAajW,EAAQa,KAAKoV,KACzD,QAACF,QAAD,IAACA,OAAD,EAACA,EAASG,SAAUlW,IAEhB,CAAE+V,UAASC,eChCdO,GAAiBtZ,IAAMQ,cAAmC,CAC9D+Y,OAAQ,kBAAMhb,QAAQib,aAKjB,SAASC,GAAT,GAE0B,IAD/Bnd,EAC8B,EAD9BA,SAEA,EAAgCuc,KAAxBC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,WACjB,EAA4C/Y,IAAMY,WAAlD,mBAAO8Y,EAAP,KAAuBC,EAAvB,KACQ9Y,EAAc0B,IAAd1B,UACAG,EAAoBC,cAApBD,gBA6BRhB,IAAMkC,WAAU,WACd,SAASe,EAAUC,GACjB,IAAMC,EAAmB3D,EAA4B0D,EAAM5F,MAC3D,GAAK6F,EACL,OAAQA,EAAiBC,gBACvB,KAAKrG,EAAe6c,cAClB,IAAMd,EAAU3V,EAAiB2V,QACjCC,GAAW,SAAAxV,GAAI,OAAIA,GAAI,2BAASA,GAASuV,OAI/C,GAAIjY,EAEF,OADAA,EAAU4C,iBAAiB,UAAWR,GAC/B,kBAAMpC,EAAU6C,oBAAoB,UAAWT,MAEvD,CAAC6V,EAASC,EAAYlY,IAEzBb,IAAMkC,WAAU,WACd,GAAI,OAAC4W,QAAD,IAACA,OAAD,EAACA,EAASe,WAAd,CAEA,IAAIlW,GAAU,EASd,OARAxG,EAAoB,kBAAmB,CAAEK,MAAOqB,MAAcT,MAC5D,SAAA0a,GAAO,OAAKnV,GAAWgW,EAAkBb,MACzC,kBACE9X,EAAgB,qDAA4C,CAC1DK,QAAS,aAIR,WACLsC,GAAU,MAEX,CAAC3C,EAAD,OAAkB8X,QAAlB,IAAkBA,OAAlB,EAAkBA,EAASe,aAE9B,IAAM1d,EAAS,CAAE2c,UAASY,iBAAgBH,OA7D1C,SAAgBO,GACd,IAAMC,EAAS,OAAGL,QAAH,IAAGA,OAAH,EAAGA,EAAgBpW,GAE5B0W,GACU,OAAdN,QAAc,IAAdA,OAAA,EAAAA,EAAgBzgB,QAASqc,GAAY2E,QACjC,CAAEC,UAAWJ,GACb,CAAEra,KAAMqa,GAEd,OAAO,IAAIvb,SAAQ,SAAAib,GACjBrc,EAAM,kBAAyB4c,GAAa,CAC1Cvc,MAAOqB,IACPtB,OAAQ,QACRD,KAAM0c,IAEL5b,MAAK,SAAA+b,GACJnZ,EAAgB,6BAAoB,CAAEK,QAAS,YAC/CsY,GAAkB,SAAA/Z,GAAC,kCAAUA,GAAMua,SAEpCC,OAAM,kBACLpZ,EAAgB,oDAA2C,CACzDK,QAAS,aAGZgZ,SAAQ,kBAAMb,YAwCrB,OACE,cAACF,GAAejX,SAAhB,CAAyBC,MAAOnG,EAAhC,SACG2c,EAAUxc,EAAW,cAAC4C,EAAD,MAKrB,SAASob,KACd,IAAM9X,EAAUxC,IAAMyC,WAAW6W,IACjC,IAAK9W,EACH,MAAM,IAAIE,MACR,oEAEJ,OAAOF,EC7GF,IAAM+X,GAAU,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAiC,sCAAIC,EAAJ,yBAAIA,EAAJ,uBACtDD,EAAIlE,SAAQ,SAACoE,GAAD,OAAaA,GAAMA,EAAE,WAAF,EAAMD,QAEhC,SAASE,GAA2BC,GACzC,OAAOA,EAAcrP,KAAKsP,MAAMtP,KAAKuP,SAAWF,EAAc9U,SCYzD,SAASiV,GAAT,GAAwE,IAA/Cze,EAA8C,EAA9CA,SACtBya,EAAU/F,KAAV+F,MACR,OAAO/W,IAAM2I,aAAarM,EAAU,CAClCoM,QAAS6R,GAAQxD,EAAOza,EAAS8J,MAAMsC,WAKpC,SAASsS,GAAT,GAAuE,IAA/C1e,EAA8C,EAA9CA,SACrBoa,EAAS1F,KAAT0F,KACR,OAAO1W,IAAM2I,aAAarM,EAAU,CAClCoM,QAAS6R,GAAQ7D,EAAMpa,EAAS8J,MAAMsC,WAKnC,SAASuS,GAAT,GAAuE,IAA/C3e,EAA8C,EAA9CA,SACrBua,EAAS7F,KAAT6F,KACR,OAAO7W,IAAM2I,aAAarM,EAAU,CAClCoM,QAAS6R,GAAQ1D,EAAMva,EAAS8J,MAAMsC,WAMnC,SAASwS,GAAT,GAMH,IALF5e,EAKC,EALDA,SACAid,EAIC,EAJDA,OAKA,EAAoCe,KAA5BZ,EAAR,EAAQA,eAAgBZ,EAAxB,EAAwBA,QAChB1H,EAAcJ,KAAdI,UAeR,OAbAxG,GAAc,CACZC,SAAU,IAAIa,MAAY,OAAPoN,QAAO,IAAPA,OAAA,EAAAA,EAASqC,eAAgB,IAC5CrQ,cAAqB,OAAPgO,QAAO,IAAPA,OAAA,EAAAA,EAAShO,eAAgB,GACvCC,SAAU,WAAO,IAAD,EACd5N,EAAM,8BAA8Buc,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAgBpW,IAAM,CACxD9F,MAAOqB,IACPtB,OAAQ,QACRD,KAAM,CAAE8d,KAAI,OAAEhK,QAAF,IAAEA,GAAF,UAAEA,EAAWjR,eAAb,aAAE,EAAoBkb,gBAGtCrQ,mBAAoB,KAGfhL,IAAM2I,aAAarM,EAAU,CAClCoM,QAAS,WAAO,IAAD,MACb6Q,EAAM,UAACnI,EAAUjR,eAAX,aAAC,EAAmBkb,aAC1B,aAAA/e,EAAS8J,OAAMsC,eAAf,oB,gEC7BA4E,GAAS,CACb,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGa,SAASgO,KACtB,MAA8B1a,mBAAS,GAAvC,mBAAO2a,EAAP,KAAgBC,EAAhB,KACA,EAA0B5a,mBAAS0M,GAAO,IAA1C,mBAAOpS,EAAP,KAAcugB,EAAd,KACA,EAAwC7a,oBAAS,GAAjD,mBAAO8a,EAAP,KAAqBC,EAArB,KACA,EAAgC/a,oBAAS,GAAzC,mBAAOiH,EAAP,KAAiB+T,EAAjB,KACA,EAAwBhb,mBAAS,GAAjC,mBAAOgG,EAAP,KAAaiV,EAAb,KACA,EAAgC7b,IAAMY,SAAiB,GAAvD,mBAAO0K,EAAP,KAAiBY,EAAjB,KAMM4P,EAAS,WACbN,GAAW,SAAA5W,GAAC,OAAKA,EAAIuF,GAAiBrE,OAAS,EAAI,EAAIlB,EAAI,MAG7D,OACE,cAAClI,EAAA,EAAD,UACE,eAACA,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,SACdzN,WAAW,SACXvC,MAAM,OACNoR,QAAS,GALX,UAME,cAAC5G,GAAD,IAEA,cAAC3K,EAAA,EAAD,UACE,cAAC4V,GAAD,CACE/I,SAAS,cACToB,UAAWR,GAAiBoR,GAF9B,oDAOF,cAAC1I,GAAD,CAAoBtJ,SAAS,wBAAwBlK,IAAK0c,KAE1D,cAACC,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAAST,EACT9K,SAAU,SAAAhR,GAAC,OAAI+b,EAAgB/b,EAAEiR,OAAOsL,YAG5C1hB,MAAM,qBAER,cAACuhB,GAAA,EAAD,CACEC,QACE,cAACC,GAAA,EAAD,CACEC,QAAStU,EACT+I,SAAU,SAAAhR,GAAC,OAAIgc,EAAYhc,EAAEiR,OAAOsL,YAGxC1hB,MAAM,uBAER,cAACiC,EAAA,EAAD,CAAKC,QAAQ,OAAOE,MAAM,OAAOZ,SAAU,IAAM4Q,cAAc,SAA/D,SACE,eAACyK,GAAD,CACEpc,MAAOA,EACP2M,SAAUA,EACV0P,SAAU3Q,EAHZ,UAIE,eAAClK,EAAA,EAAD,CAAKC,QAAQ,OAAOE,MAAM,OAAOuf,SAAS,OAA1C,UACE,cAAC1f,EAAA,EAAD,CAAKG,MAAM,OAAX,SACE,cAACsU,GAAD,CAAetJ,SAAUA,MAE3B,eAACnL,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAAlC,UACE,cAACkO,GAAD,UACE,cAACsB,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAACrB,GAAD,UACE,cAACqB,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAACpB,GAAD,UACE,cAACoB,GAAA,EAAD,UACE,cAAC,KAAD,WAKN,cAAChP,GAAD,CACEC,OAAQA,GACRC,aAAcrS,EACdsS,cAAe,SAAAtS,GAAK,OAAIugB,EAASvgB,MAEnC,cAACqT,GAAD,CACEC,YAAa5H,EACb6H,aAAc,SAAA7H,GAAI,OAAIiV,EAAQjV,IAC9BiG,cAAc,cAIlB,cAACqO,GAAD,CACE3B,OAAQ,SAAA+C,GACN,GAAKA,EAAL,CACA,IAAMC,EAAMre,OAAOiS,OAChB,OAAHoM,QAAG,IAAHA,KAAKvN,SAASwN,MACZ,6CACEF,EACA,gBAPR,SAUE,cAAC9V,GAAD,CAAWI,KAAK,QAAhB,2BAKN,cAACqF,GAAD,CACEpB,SAAU,IAAIa,KAAK,uBACnBZ,aAAc,MAEhB,cAACmF,GAAD,CACExJ,SAAS,EACTqI,gBAAYxN,EACZoH,QAAS,eACX,cAACwE,GAAD,CAAcC,MAAOhD,GAAiBoR,GAAUnO,UAAW0O,IAC3D,cAACxT,GAAD,CACEsI,SAAU,aACVtO,MAAO,SACPoE,UAAW,cAAC,KAAD,MAEb,cAACmI,GAAD,CAAiBC,WAAW,WAC5B,cAACrF,GAAD,CACEnG,GAAI,EACJoG,KAAK,WACLX,OAAQoB,GAAiBoR,GACzB/X,SAAS,EACTmG,YAAY,EACZE,OAAQ,SAAAvG,OAGV,cAACkD,GAAD,CAAWI,KAAK,QAAQ8B,QAASoT,EAAjC,kBAIA,cAACzK,GAAD,CAAaxO,OAAQ4Z,GAAe,GAAIjL,QAAS,eAEjD,cAACpH,GAAD,CACEnG,QAASwY,GACTlY,SAAU,EACVoF,YAAY,EACZE,OAAQ,SAAAvG,OAEV,cAACqJ,GAAD,CAAgBD,SAAS,QAAQE,UAAU,YAE3C,cAACzG,GAAD,IAEA,cAACU,GAAD,CAAaC,MAAO,EAAGC,IAAK,KAE5B,cAACqD,GAAD,CACEnG,QAASwY,GACT9S,YAAY,EACZE,OAAQ,SAAAvG,OAGV,cAACqM,GAAD,CAAgB1L,QAASwY,GAAgBlY,SAAU,IAEnD,cAACmY,GAAA,EAAD,CACEC,aAAcrR,EACdsF,SAxJa,SAAC1N,EAAY0Z,GAChC1Q,EAAY0Q,IAwJNC,kBAAgB,kBAChBC,kBAAkB,OAClBC,KAAM,EACNC,IAAK,EACLjW,IAAK,IAGP,cAACiL,GAAD,CAAcC,WAAY3G,EAAU4G,QAAS,SC9NtC,SAAS+K,KACtB,OACE,eAACvgB,EAAA,EAAD,CAAKkI,EAAG,EAAGjI,QAAQ,OAAOkQ,cAAc,SAASzN,WAAW,SAA5D,UACE,kDAGA,cAAC8d,GAAD,CAASC,GAAG,IAAZ,qBACA,cAACD,GAAD,CAASC,GAAG,WAAZ,2BACA,cAACD,GAAD,CAASC,GAAG,WAAZ,2BACA,cAACD,GAAD,CAASC,GAAG,UAAZ,0BACA,cAACD,GAAD,CAASC,GAAG,WAAZ,2BACA,cAACD,GAAD,CAASC,GAAG,KAAZ,qBACA,cAACD,GAAD,CAASC,GAAG,QAAZ,qBACA,cAACD,GAAD,CAASC,GAAG,KAAZ,kCAKN,SAASD,GAAT,GAAyC,IAAtBC,EAAqB,EAArBA,GAAI7gB,EAAiB,EAAjBA,SACrB,OACE,cAACI,EAAA,EAAD,CACEkI,EAAG,EACHmF,QAAQ,qBACR0H,EAAG,EACH3W,aAAc,EACd0M,OAAQ,EACRsC,YAAY,eANd,SAOE,cAAC,IAAD,CAAMqT,GAAIA,EAAI9W,MAAO,CAAEnL,MAAO,SAA9B,SACGoB,MC5BT,IAAM8gB,GAAY,CAChB,MACA,mBACA,eACA,QACA,mBACA,YACA,OACA,QACA,UACA,WACA,eACA,cACA,aACA,UACA,UACA,YACA,aACA,UCNF,IAAMthB,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrCskB,aAAc,CACZzhB,WAAY7C,EAAMuB,QAAQ,QAIf,SAASgjB,GAAT,GAA8D,IAAxCxO,EAAuC,EAAvCA,WACnC,EAAgC9O,IAAMY,SAAS,IAA/C,mBAAO2I,EAAP,KAAiBgU,EAAjB,KACA,EAA8Bvd,IAAMY,SAAS,GAA7C,mBAAO2a,EAAP,KAAgBC,EAAhB,KACA,EAA8Bxb,IAAMY,UAAS,GAA7C,mBAAO6F,EAAP,KAAgB+W,EAAhB,KACQxc,EAAoBC,cAApBD,gBACF+B,EAAUC,cACVya,EDFczd,IAAMC,OAAO0a,GAAwByC,KAEtCjd,QCCb5D,EAAUT,KAMhB,SAAS4hB,EAAUlgB,EAAeiC,GAChCuB,EAAgBvB,EAAM,CAAE4B,QAAS,YACjCrC,EAASxB,GACF,OAAPuF,QAAO,IAAPA,KAASa,KAAK,YAiDhB,OACE,qCACE,cAACyG,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAAC0C,GAAD,CAAcC,MAAOhD,GAAiBoR,GAAUnO,UA3DvC,WACboO,GAAW,SAAC5W,GAAD,OAAgBA,GAAKuF,GAAiBrE,OAAS,EAAI,EAAIlB,EAAI,UA6DpE,cAACyF,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,eAAC9N,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAAS8Q,GAAI,EAAGC,GAAI,EAAG3hB,SAAU,IAAnE,UACE,cAACqM,GAAD,CACEhG,MAAOiH,EACPhB,WAAS,EACTqI,SAAU,SAAAhR,GAAC,OAAI2d,EAAY3d,EAAEiR,OAAOvO,QACpCub,YAAaJ,IAGf,eAAC/gB,EAAA,EAAD,CAAKC,QAAQ,OAAO+U,GAAI,EAAxB,UACE,cAACzB,GAAD,CACEnB,WAAYA,EACZpG,QA3CZ,SAAgBoG,GACd,IAAMgP,EAAoBhP,EAAWiP,WAAW,QAC5CjP,EAAWkP,MAAM,KAAKpH,MACtB9H,EACJ0O,GAAW,GACXrgB,EAAM,oBAAsB2gB,GAAqB,CAC/CxgB,KAAM,CACJiM,SAAUA,GAAYkU,EACtB9S,UAAWsT,OAAO1C,IAEpBhe,OAAQ,UAEPa,MACC,SAAAyE,GAAW,IAAD,KACR,UAAIA,EAAOrF,aAAX,aAAI,EAAc0gB,WAChBR,EAAS,UAAC7a,EAAOrF,aAAR,aAAC,EAAc0gB,SAAU,8BAEtC,kBACEld,EAAgB,oDAA2C,CACzDK,QAAS,aAGdgZ,SAAQ,kBAAMmD,GAAW,OAsBlB/W,QAASA,KAGTqI,GACA,cAACtI,GAAD,CACE+B,WAAS,EACT9L,UAAWF,EAAQ8gB,aACnBniB,MAAM,UACNwL,UAAW,cAAC,KAAD,CAAeL,MAAO,CAAEzM,SAAU,MAC7C8O,QA1Ed,WACE8U,GAAW,GACXrgB,EAAe,OAAQ,CACrBG,KAAM,CACJiM,SAAUA,GAAYkU,EACtB9S,UAAWsT,OAAO1C,MAGnBnd,MACC,SAAAyE,GAAW,IAAD,KACR,UAAIA,EAAOrF,aAAX,aAAI,EAAc0gB,WAChBR,EAAS,UAAC7a,EAAOrF,aAAR,aAAC,EAAc0gB,SAAU,6CAEtC,kBACEld,EAAgB,mDAA0C,CACxDK,QAAS,aAGdgZ,SAAQ,kBAAMmD,GAAW,OAyDhB/W,QAASA,EANX,+BCxGC,SAAS0X,GACtB/X,GAEA,IAAM0I,EAAa1I,EAAMgY,MAAMC,OAAOvP,WAEtC,OACE,eAACzE,GAAA,EAAD,CACErO,WAAS,EACTsiB,UAAU,SACVlf,WAAW,SACX3C,UAAU,cACV8hB,QAAQ,gBALV,UAME,cAAClU,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACnD,GAAD,CAAcxK,MAAO,OAEvB,cAACygB,GAAD,CAAYxO,WAAYA,OCXf,SAAS0P,GAAT,GAA8C,IAA3BzT,EAA0B,EAA1BA,SACxB+N,EAAYwB,KAAZxB,QACR,OACE,eAACpc,EAAA,EAAD,CACEC,QAAQ,OACRyf,SAAS,OACTvP,cAAc,MACdzN,WAAW,SACXwF,EAAG,EACHgZ,GAAI,CAAEnT,GAAI,EAAGuF,GAAI,GACjB7Q,eAAe,gBACftC,MAAM,OARR,UASE,cAACH,EAAA,EAAD,CAAKG,MAAO,CAAE4N,GAAI,GAAIuF,GAAI,IAA1B,SACE,cAACnJ,GAAD,CACEC,OAAc,OAAPgS,QAAO,IAAPA,OAAA,EAAAA,EAAS2F,iBAAkB,EAClC1X,KAAY,OAAP+R,QAAO,IAAPA,OAAA,EAAAA,EAAS4F,eAAgB,MAIlC,cAAChiB,EAAA,EAAD,CAAKG,MAAO,CAAE4N,GAAI,GAAIuF,GAAI,IAA1B,SACE,cAAC/D,GAAD,CACEpB,SAAU,IAAIa,MAAY,OAAPoN,QAAO,IAAPA,OAAA,EAAAA,EAASqC,eAAgB,IAC5CrQ,cAAqB,OAAPgO,QAAO,IAAPA,OAAA,EAAAA,EAAShO,eAAgB,GACvCC,SAAUA,SCpBL,SAAS4T,GAAT,GAGM,IAAD,IAFlB1iB,gBAEkB,MAFP,KAEO,EADlBK,EACkB,EADlBA,SAEA,OACE,eAACI,EAAA,EAAD,CAAK1B,OAAO,QAAQ2B,QAAQ,OAAOkQ,cAAc,SAAjD,UACE,cAAC2R,GAAD,IACA,cAAChiB,EAAA,EAAD,CAAWP,SAAUA,EAAUQ,UAAU,cAAzC,SACGH,IAEF,cAAC,GAAD,OAKP,IAAMsiB,GAA0B,WAC9B,IAAQ9F,EAAYwB,KAAZxB,QACR,OACE,cAAC9G,GAAD,CACEC,WAAU,OAAE6G,QAAF,IAAEA,OAAF,EAAEA,EAASe,WACrB3H,QAAO,OAAE4G,QAAF,IAAEA,OAAF,EAAEA,EAAS4F,gBCzBT,SAASG,KACtB,IAAQ7d,EAAoBC,cAApBD,gBACA6B,EAAWgB,IAAXhB,OACR,EAAkCjC,oBAAS,GAA3C,mBAAO2Q,EAAP,KAAkBuN,EAAlB,KAsBA,OAAO,cAACzN,GAAD,CAAaG,QApBpB,WACEsN,GAAa,GACb3hB,EAAa,qBAAsB,CACjCI,OAAQ,OACRC,MAAOqB,MAENT,MACC,kBACE4C,EACE,0EACA,CAAEK,QAAS,eAEf,kBACEL,EAAgB,sDAA6C,CAC3DK,QAAS,aAGdgZ,SAAQ,kBAAMyE,GAAa,OAGMvN,UAAWA,EAAWD,UAAU,OAAOzO,OAAQA,ICpBxE,SAASkc,KACtB,IAAQjG,EAAYwB,KAAZxB,QACR,EAA0B9Y,IAAMY,SAA0B,IAA1D,mBAAOoe,EAAP,KAAcC,EAAd,KA0BA,OAxBAjf,IAAMkC,WAAU,WACd/E,EAAM,iBAAgC,OAAP2b,QAAO,IAAPA,OAAA,EAAAA,EAASxV,KAAM,GAAK,CAAE9F,MAAOqB,MACzDT,MAAK,SAAA8gB,GACJ,IAAMC,EAAiBD,EAASvR,QAC9B,SAACC,EAA4CtL,GAC3C,OAAKA,EAAM8c,YACPxR,EAAYtL,EAAM8c,cACpBxR,EAAYtL,EAAM8c,aAAaxb,KAAKtB,GAC7BsL,IAETA,EAAYtL,EAAM8c,aAAe,CAAC9c,GAC3BsL,GANwBA,IAQjC,IAEIyR,EAA6B,GACnCC,OAAOC,KAAKJ,GAAgB7I,SAAQ,SAACkJ,GAAD,OAClCH,EAAUzb,KAAKub,EAAeK,OAEhCP,EAASI,MAEVjF,MAAMqF,SACR,QAAC3G,QAAD,IAACA,OAAD,EAACA,EAASxV,KAEN0b,EAAMlZ,QAAU,EACrB,cAACpJ,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,MAAlC,SACGmS,EAAM1U,KAAI,SAAA4U,GAAa,IAAD,EACrB,OACE,eAACxiB,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAAS5Q,SAAU,IAArD,UACE,cAACgL,GAAA,EAAD,CAAY5F,QAAQ,KAApB,mBACG6d,EAAS,GAAGQ,eADf,aACG,EAAqBnW,WAEvB2V,EAAS5U,KAAI,SAAA6P,GAAY,IAAD,MAEvB,OADmBA,EAAQlhB,OAASqc,GAAYqK,SAE9C,cAACrN,GAAD,CAEE/I,SAAQ,UAAE4Q,EAAQuF,eAAV,aAAE,EAAiBnW,SAC3BoB,UACER,GAAiBO,OAAM,UAACyP,EAAQuF,eAAT,aAAC,EAAiB/U,YAJ7C,SAMGwP,EAAQ1a,MALJ0a,EAAQ7W,IAQf,cAACuP,GAAD,CAEEtJ,SAAQ,UAAE4Q,EAAQuF,eAAV,aAAE,EAAiBnW,SAC3BlK,IAAK8a,EAAQyF,WAFRzF,EAAQ7W,eAW3B,cAAC5G,EAAA,EAAD,UACE,cAACwC,EAAD,MC/DN,IAAM2gB,GAAe7f,IAAMQ,cAAiC,IAerD,SAASsf,GAAT,GAAwE,IAAxCxjB,EAAuC,EAAvCA,SACrC,EAA4B0D,IAAMY,SAAwC,IAA1E,mBAAOmf,EAAP,KAAeC,EAAf,KACQnf,EAAc0B,IAAd1B,UAERb,IAAMkC,WAAU,WACd,SAASe,EAAUC,GACjB,IAAMC,EAAmB3D,EAA4B0D,EAAM5F,MAC3D,GAAK6F,EACL,OAAQA,EAAiBC,gBACvB,KAAKrG,EAAekjB,gBAClB,IAAK9c,EAAiB6b,MAAO,MAE7B,IAAMA,EAAQ7b,EAAiB6b,MAC/BgB,GAAU,SAAAE,GACR,IAAKlB,EAAMI,YAAa,OAAOc,EAC/B,IAAMC,EAAc,eAAQD,GAQ5B,OANIC,EAAenB,EAAMI,aACvBe,EAAenB,EAAMI,aAAaxb,KAAKob,GAEvCmB,EAAenB,EAAMI,aAAe,CAACJ,GAGhCmB,MAKf,GAAItf,EAEF,OADAA,EAAU4C,iBAAiB,UAAWR,GAC/B,kBAAMpC,EAAU6C,oBAAoB,UAAWT,MAEvD,CAACpC,IAEJ,IAAM1E,EAAS,CAAE4jB,UAEjB,OACE,cAACF,GAAaxd,SAAd,CAAuBC,MAAOnG,EAA9B,SAAuCG,ICrD5B,SAAS+c,KACtB,IAAQpV,EAAY8B,KAAZ9B,QACR,OACE,cAAC6b,GAAD,UACE,eAACnB,GAAD,CAAY1iB,SAAS,KAArB,UACE,cAAC8iB,GAAD,IACA,eAAC1U,GAAA,EAAD,CACErO,WAAS,EACT1B,QAAS,EACTgkB,UAAU,SACVlf,WAAW,SACX3C,UAAU,cACV2jB,KAAK,SACL7B,QAAQ,gBAPV,UAQE,cAAClU,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACmF,GAAD,CAAgB1L,QAASA,MAE3B,cAACoG,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACqU,GAAD,cCjBG,SAASwB,KACtB,OACE,eAAC3jB,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,MAAlC,UACE,cAACkO,GAAD,UACE,cAACsB,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAACrB,GAAD,UACE,cAACqB,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAACpB,GAAD,UACE,cAACoB,GAAA,EAAD,UACE,cAAC,KAAD,W,4CCRK,SAASiE,GAAT,GAAuD,IAAjC1Z,EAAgC,EAAhCA,KAAM1L,EAA0B,EAA1BA,MAIzC,GADmBsR,aAAczT,EAAMmD,YAAYyL,GAAG,OACnB2S,MAA3BZ,EAAR,EAAQA,eAAgBH,EAAxB,EAAwBA,OAClBgH,EAAYC,UAAQ,OAAC9G,QAAD,IAACA,OAAD,EAACA,EAAgB7O,WAC3C,EAA8BjK,oBAAS,GAAvC,mBAAO6F,EAAP,KAAgB+W,EAAhB,KAEA,OACE,cAAClG,GAAD,CAAuBpc,MAAOA,EAAO2M,UAAW0Y,EAAWhJ,SAAU3Q,EAArE,SACE,eAAClK,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,SACdoB,QAAS,EACT7O,WAAW,SAJb,UAKE,cAAC1C,EAAA,EAAD,CAAKT,SAAU,IAAKY,MAAM,OAA1B,SACE,cAACsU,GAAD,CAAetJ,UAAW0Y,MAE5B,eAAC7jB,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,MACdoB,QAAS,EACT7O,WAAW,SACXD,eAAe,gBACftC,MAAM,OANR,UAOE,cAACwjB,GAAD,IACA,cAACnF,GAAD,CACE3B,OAAQ,SAAA+C,GACDA,IACLkB,GAAW,GACXjE,EAAO+C,GAAale,MAAK,kBAAMof,GAAW,QAJ9C,SAME,cAAChX,GAAD,CACEC,QAASA,EACTC,UACE6Z,EACE,cAAC,KAAD,CAAUla,MAAO,CAAEzM,SAAU,MAE7B,cAAC,KAAD,CAAUyM,MAAO,CAAEzM,SAAU,MAGjCsB,MAAM,UACN0L,KAAK,SAVP,SAWG2Z,EAAY,OAAS,mBCjDpC,IAAMjT,GAAS,CACb,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGa,SAAS8L,KACtB,IAAMxJ,EAAapD,aAAczT,EAAMmD,YAAYyL,GAAG,OACtD,EAA0B/G,mBAAS0M,GAAO,IAA1C,mBAAOpS,EAAP,KAAcugB,EAAd,KACA,EAAwB7a,mBAAS,GAAjC,mBAAOgG,EAAP,KAAaiV,EAAb,KAEA,OC9BK,WACL,IAAM4E,EAAezgB,IAAMC,OAAO+O,SAASC,cAAc,UAEzDjP,IAAMkC,WAAU,WACd,IAAMwe,EAAeD,EAAatgB,QAKlC,OAHAugB,EAAaC,UAAY,6BAEzB3R,SAAS4R,qBAAqB,QAAQ,GAAG1R,YAAYwR,GAC9C,WACL1R,SAAS4R,qBAAqB,QAAQ,GAAGvR,YAAYqR,MAEtD,IDiBHG,GAEE,cAAClC,GAAD,CAAY1iB,SAAS,KAArB,SACE,eAACS,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,SACdzN,WAAW,SACX6O,QAAS,GAJX,UAKE,cAACvR,EAAA,EAAD,CAAKG,MAAM,OAAOZ,SAAU,IAA5B,SACE,cAAC6kB,GAAD,MAGF,eAACpkB,EAAA,EAAD,CACEC,QAAQ,OACRE,MAAM,OACNsC,eAAgB,CAAEsL,GAAI,SAAUuF,GAAI,QACpCnD,cAAe,CAAEpC,GAAI,SAAUuF,GAAI,OACnC/B,QAAS,GALX,UAME,cAACvR,EAAA,EAAD,CAAKqkB,MAAO,CAAEtW,GAAI,EAAGuF,GAAI,GAAzB,SACE,cAAC3C,GAAD,CACEC,OAAQA,GACRC,aAAcrS,EACdsS,cAAe,SAAAtS,GAAK,OAAIugB,EAASvgB,IACjC2R,cAAe+C,EAAa,SAAW,UAI3C,cAAC0Q,GAAD,CAAY1Z,KAAMA,EAAM1L,MAAOA,IAC/B,cAACwB,EAAA,EAAD,CAAKqkB,MAAO,CAAEtW,GAAI,EAAGuF,GAAI,GAAzB,SACE,cAACzB,GAAD,CACEC,YAAa5H,EACb6H,aAAc,SAAA7H,GAAI,OAAIiV,EAAQjV,IAC9BiG,cAAe+C,EAAa,SAAW,kBASrD,SAASkR,KAAyB,IAAD,EACvBpH,EAAmBY,KAAnBZ,eACR,OACE,cAAC/M,GAAD,CACEC,UAAU,eACVF,SAAQ,OAAEgN,QAAF,IAAEA,GAAF,UAAEA,EAAgBsH,cAAlB,aAAE,EAAwBvhB,OExEzB,SAASwhB,KACtB,IAAQpe,EAAWgB,IAAXhB,OACA7B,EAAoBC,cAApBD,gBACR,EAAkCJ,oBAAS,GAA3C,mBAAO2Q,EAAP,KAAkBuN,EAAlB,KAkBA,OACE,cAACzN,GAAD,CAAaG,QAjBf,WACEsN,GAAa,GACb3hB,EAAgB,UAAW,CAAEI,OAAQ,OAAQC,MAAOqB,MACjDT,MACC,kBACE4C,EAAgB,yCAAgC,CAC9CK,QAAS,eAEb,kBACEL,EAAgB,sDAA6C,CAC3DK,QAAS,aAGdgZ,SAAQ,kBAAMyE,GAAa,OAICvN,UAAWA,EAAW1O,OAAQA,ICpB1D,SAASqe,GAAT,GAAyE,IAApD/Q,EAAmD,EAAnDA,KAAM5G,EAA6C,EAA7CA,SAAUM,EAAmC,EAAnCA,OAAQ0G,EAA2B,EAA3BA,QAClD,OACE,eAACD,GAAA,EAAD,CAAQ/H,WAAS,EAACtM,SAAS,KAAKkU,KAAMA,EAAMI,QAAS,kBAAMA,KAA3D,UACE,eAACC,GAAA,EAAD,yCAAyCjH,EAAzC,QACA,eAACuH,GAAA,EAAD,WACE,cAACnK,GAAA,EAAD,CAAQ+B,QAAS,kBAAM6H,KAAWrV,MAAM,YAAxC,iCAGA,cAACyL,GAAA,EAAD,CAAQ+B,QAAS,kBAAMmB,KAAU3O,MAAM,YAAvC,qCCND,SAASimB,KACd,IAAMpoB,EAAQuT,eACRsD,EAAapD,aAAczT,EAAMmD,YAAYyL,GAAG,OAC9C1D,EAAY8B,KAAZ9B,QACApB,EAAWgB,IAAXhB,OACA7B,EAAoBC,cAApBD,gBACR,EAAwChB,IAAMY,SAGpC,MAHV,mBAAOwgB,EAAP,KAAqBC,EAArB,KAKA,SAASxX,EAAOvG,EAAYoG,GAC1B2X,EAAgB,CAAE/d,KAAIoG,SAiBxB,OACE,eAAChN,EAAA,EAAD,CAAKC,QAAQ,OAAOkQ,cAAc,SAASzN,WAAW,WAAtD,WACU,OAAP6E,QAAO,IAAPA,OAAA,EAAAA,EAAS6B,QAAS,EACjB8J,EACE,cAACxF,GAAD,CACEnG,QAASA,EACTM,SAAQ,OAAE1B,QAAF,IAAEA,OAAF,EAAEA,EAAQS,GAClBqG,WAAU,OAAE9G,QAAF,IAAEA,OAAF,EAAEA,EAAQW,QACpBqG,OAAQ,SAACvG,EAAIoG,GAAL,OAAcG,EAAOvG,EAAIoG,MAGnC,cAACiG,GAAD,CACE1L,QAASA,EACTM,SAAQ,OAAE1B,QAAF,IAAEA,OAAF,EAAEA,EAAQS,GAClBqG,WAAU,OAAE9G,QAAF,IAAEA,OAAF,EAAEA,EAAQW,QACpBkF,QAAS,SAACpF,EAAIoG,GAAL,OAAcG,EAAOvG,EAAIoG,MAItC,cAACxK,EAAD,IAEF,cAACgiB,GAAD,CACE/Q,KAAMqQ,QAAQY,GACd7X,SAAQ,OAAE6X,QAAF,IAAEA,OAAF,EAAEA,EAAc1X,KACxBG,OAAQ,WACDuX,KAvCb,SAAoB9d,GAAa,IAAD,EAE9BnG,EADS,yBAAqBmG,EAArB,SACG,CACV9F,MAAK,OAAEqF,QAAF,IAAEA,GAAF,UAAEA,EAAQrF,aAAV,aAAE,EAAe0gB,SACtB3gB,OAAQ,UACPa,MACD,kBAAM4C,EAAgB,6BAAoB,CAAEK,QAAS,eACrD,kBACEL,EAAgB,oDAA2C,CACzDK,QAAS,aA+BTigB,CAAU,OAACF,QAAD,IAACA,OAAD,EAACA,EAAc9d,IACzB+d,EAAgB,QAElB9Q,QAAS,kBAAM8Q,EAAgB,YAMhC,SAASE,KACd,IAAQtd,EAAY8B,KAAZ9B,QAER,OACE,cAACvH,EAAA,EAAD,CAAK8kB,GAAI,CAAE/W,GAAI,EAAGgX,GAAI,GAAtB,SACE,cAAC5a,GAAD,CAAaC,OAAc,OAAP7C,QAAO,IAAPA,OAAA,EAAAA,EAAS6B,SAAU,EAAGiB,IAAK,OC7EtC,SAAS2a,KACtB,MAA0B3b,KAAlBhC,EAAR,EAAQA,KAAMtD,EAAd,EAAcA,QACd,OACE,eAAC/D,EAAA,EAAD,CACE5B,aAAa,cACbG,SAAU,IACV0mB,GAAI,EACJ3mB,OAAO,OACP2B,QAAQ,OACRkQ,cAAc,SACdzN,WAAY,CAAEqL,GAAI,SAAUuF,GAAI,cAChC/B,QAAS,GARX,UASE,cAAChH,GAAA,EAAD,CAAY5F,QAAQ,KAApB,SAA0BZ,IAC1B,cAACoO,GAAD,CAAiBC,WAAU,OAAE/K,QAAF,IAAEA,OAAF,EAAEA,EAAM+K,gBCXzC,IAAMhT,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrC6oB,iBAAiB,cACfxiB,WAAY,SACZyN,cAAe,SACfgV,IAAK,IACJ9oB,EAAMmD,YAAYyL,GAAG,MAAQ,CAC5BvI,WAAY,aACZyN,cAAe,QAGnB7Q,UAAW,CACTV,gBAAiBwM,aAAK/O,EAAMD,QAAQO,WAAWC,QAAS,SAI7C,SAASwoB,KACtB,IAAMvlB,EAAUT,KAChB,OACE,eAACY,EAAA,EAAD,CACEC,QAAQ,OACRkQ,cAAc,SACd7R,OAAO,QACPoE,WAAW,SACXvC,MAAM,OALR,UAME,cAACH,EAAA,EAAD,CAAKihB,GAAI,EAAG9gB,MAAM,OAAOF,QAAQ,OAAOwC,eAAe,SAAvD,SACE,cAACkI,GAAD,CAAcxK,MAAO,OAEvB,eAACH,EAAA,EAAD,CACEC,QAAQ,OACRwC,eAAe,gBACftC,MAAM,OACN4U,EAAG,EACHzW,OAAO,QACPoE,WAAW,SACXyN,cAAc,SAPhB,UAQE,eAACnQ,EAAA,EAAD,CACEC,QAAQ,OACRF,UAAWF,EAAQP,UACnB6Q,cAAc,SACdzN,WAAW,WACXvC,MAAM,OALR,UAME,cAAC0kB,GAAD,IACA,eAAC7kB,EAAA,EAAD,CACEC,QAAQ,OACRwC,eAAe,gBACftC,MAAM,OACNJ,UAAWF,EAAQqlB,iBAJrB,UAKE,cAACF,GAAD,IACA,cAACP,GAAD,UAGJ,cAAC,GAAD,UCtDR,IAAMY,GAAY,CAChB,kDACA,+BACA,wBACA,qCACA,iCACA,kCACA,6BACA,wBACA,kCACA,oCACA,qCACA,6BACA,oCACA,6CACA,wBACA,qCACA,kDACA,+CCRa,SAASC,KACtB,MAA4C1H,KAApCxB,EAAR,EAAQA,QAASY,EAAjB,EAAiBA,eAAgBH,EAAjC,EAAiCA,OACjC,EAAgCvZ,IAAMY,SAAS,IAA/C,mBAAO8L,EAAP,KAAiBuV,EAAjB,KACA,EAA8BjiB,IAAMY,UAAS,GAA7C,mBAAO6F,EAAP,KAAgB+W,EAAhB,KACM+C,EAAYC,UAAQ,OAAC9G,QAAD,IAACA,OAAD,EAACA,EAAgB7O,WACrCqX,EDOcliB,IAAMC,OAAO0a,GAAwBoH,KAEtC5hB,QCMnB,OAbAyK,GAAc,CACZC,SAAU,IAAIa,MAAY,OAAPoN,QAAO,IAAPA,OAAA,EAAAA,EAASqC,eAAgB,IAC5CrQ,cAAqB,OAAPgO,QAAO,IAAPA,OAAA,EAAAA,EAAShO,eAAgB,GACvCC,SAAU,WACR5N,EAAM,8BAA8Buc,QAA9B,IAA8BA,OAA9B,EAA8BA,EAAgBpW,IAAM,CACxD9F,MAAOqB,IACPtB,OAAQ,QACRD,KAAM,CAAEmC,KAAMiN,MAGlB1B,mBAAoB,KAIpB,qCACE,cAACX,GAAA,EAAD,CAAMG,MAAI,EAAC/N,UAAU,aAArB,SACE,cAAC6L,GAAD,CACET,UAAW0Y,EACX1C,YAAaqE,EACbxb,UAAW,cAAC,KAAD,IACXpE,MAAOoK,EACPkE,SAAU,SAAAhR,GAAC,OAAIqiB,EAAYriB,EAAEiR,OAAOvO,YAGxC,cAAC+H,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAAChE,GAAD,CACEC,QAASA,EACToB,SAA8B,IAApB6E,EAAS5G,OACnB4C,QAAS,WACP8U,GAAW,GACXjE,EAAO7M,GAAUtO,MAAK,kBAAMof,GAAW,OAEzC9W,UACE6Z,EACE,cAAC,KAAD,CAAUla,MAAO,CAAEzM,SAAU,MAE7B,cAAC,KAAD,CAAUyM,MAAO,CAAEzM,SAAU,MAGjCgN,KAAK,QAdP,SAeG2Z,EAAY,OAAS,cCvDjB,SAASrH,KACtB,OACE,cAACyF,GAAD,CAAY1iB,SAAS,KAArB,SACE,eAACoO,GAAA,EAAD,CACErO,WAAS,EACT1B,QAAS,EACTgkB,UAAU,SACVlf,WAAW,SACX3C,UAAU,cACV2jB,KAAK,SACL7B,QAAQ,SAPV,UAQE,cAAClU,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,qBAAKnL,IAAK0c,GAAQxc,IAAI,GAAG1C,MAAO,QAElC,cAACwN,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAACvD,GAAA,EAAD,CAAY5F,QAAQ,KAApB,6BAEF,cAAC,GAAD,SCfR,IAAMvF,GAAYC,aAAW,SAAAhD,GAAK,MAAK,CACrC8D,MAAM,cACJA,MAAO,IACP7B,OAAQ,OACR4X,UAAW,KACV7Z,EAAMmD,YAAYkL,KAAK,MAAQ,CAC9BvK,MAAO,OACP+V,UAAW,QAKF,SAASuG,KACtB,IAAM5c,EAAUT,KAChB,OACE,cAAC6iB,GAAD,UACE,cAACjiB,EAAA,EAAD,CAAKT,SAAU,IAAf,SACE,eAACoO,GAAA,EAAD,CACErO,WAAS,EACT1B,QAAS,EACTgkB,UAAU,SACVlf,WAAW,SACX3C,UAAU,cACV2jB,KAAK,SACL7B,QAAQ,SAPV,UAQE,cAAClU,GAAA,EAAD,CAAMG,MAAI,EAAC/N,UAAU,aAArB,SACE,cAACkQ,GAAD,CAAgBC,UAAU,0BAE5B,cAACvC,GAAA,EAAD,CAAMG,MAAI,EAAV,SACE,cAAC2X,GAAD,CAA6B1lB,UAAWF,EAAQM,UAElD,cAACmlB,GAAD,WAOV,SAASG,GAAT,GAA4E,IAArC1lB,EAAoC,EAApCA,UAC7Bid,EAAmBY,KAAnBZ,eACR,OACE,cAAChH,GAAD,CACErT,IAAG,OAAEqa,QAAF,IAAEA,OAAF,EAAEA,EAAgBsH,OAAOpB,UAC5BnjB,UAAWA,ICnCjB,IAAM2lB,GACoCC,IAE3B,SAASC,KACtB,OACE,cAACjmB,EAAD,UACE,cAAC+lB,GAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOG,KAAK,oBAAoBrY,UAAWiU,KAC3C,cAAC,IAAD,CAAOoE,KAAK,SAASrY,UAAWgP,KAChC,cAAC,IAAD,CAAOqJ,KAAK,KAAKrY,UAAWsY,KAC5B,cAAC,IAAD,CAAOD,KAAK,KAAKrY,UAAWoR,KAC5B,cAAC,IAAD,CAAOiH,KAAK,QAAQrY,UAAWiU,KAG/B,cAAC,IAAD,CAAOoE,KAAK,IAAIrY,UAAW+S,YAOrC,SAASuF,KACP,OACE,cAAC7hB,EAAD,UACE,cAACiC,EAAD,UACE,cAACsC,EAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOqd,KAAK,WAAWrY,UAAW4X,KAClC,cAAC,IAAD,CAAOS,KAAK,KAAKrY,UAAWuY,cAQxC,SAASA,KACP,OACE,cAAChJ,GAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAO8I,KAAK,WAAWrY,UAAWgP,KAClC,cAAC,IAAD,CAAOqJ,KAAK,UAAUrY,UAAWkP,KACjC,cAAC,IAAD,CAAOmJ,KAAK,WAAWrY,UAAWiP,KAClC,cAAC,IAAD,CAAOoJ,KAAK,UAAUrY,UAAWmP,KACjC,cAAC,IAAD,CAAOkJ,KAAK,WAAWrY,UAAW4X,UClC3BY,OAjBf,WACE,OACE,cAAC,IAAD,CACEC,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,kBAAgB,EAChBC,SAAU,EANZ,SAOE,eAACC,EAAA,EAAD,CAAejqB,MAAOA,EAAtB,UACE,cAACkqB,EAAA,EAAD,IACA,cAACX,GAAD,U,OCfRY,IAASC,OAEP,cAAC,GAAD,IAEAnU,SAASoU,eAAe,U","file":"static/js/main.370d4b4d.chunk.js","sourcesContent":["import { responsiveFontSizes, createMuiTheme } from '@material-ui/core';\nimport createPalette, { Palette } from '@material-ui/core/styles/createPalette';\n\nexport const PRIMARY = '#880061';\nexport const SECONDARY = '#9c27b0';\n\nfunction createBaseTheme(palette: Palette) {\n  return createMuiTheme({\n    palette: palette,\n    typography: {\n      h1: {\n        fontSize: 64,\n        fontFamily: 'Modak',\n      },\n      h4: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 32,\n      },\n      h5: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        fontFamily: 'Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI',\n      },\n      subtitle1: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 16,\n      },\n      subtitle2: {\n        fontSize: 12,\n      },\n      body1: {\n        fontSize: 16,\n      },\n      body2: {\n        fontSize: 14,\n      },\n      fontFamily: [\n        '-apple-system',\n        'BlinkMacSystemFont',\n        'Segoe UI',\n        'Roboto',\n        'Oxygen',\n        'Ubuntu',\n        'Cantarell',\n        'Open Sans',\n        'Helvetica Neue',\n        'sans-serif',\n      ].join(','),\n    },\n    spacing: 8,\n    overrides: {\n      MuiButton: {\n        label: {\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n        },\n        root: {\n          textTransform: 'none',\n          borderRadius: 8,\n        },\n        contained: {\n          height: 68,\n          minWidth: 128,\n          fontSize: 24,\n          color: palette.common.white,\n          padding: '18px 24px',\n          borderRadius: 34,\n          fontFamily: 'Work Sans',\n          backgroundColor: palette.custom.main,\n          position: 'relative',\n          '& .$MuiButton-label': {\n            height: 20,\n          },\n          '@media (min-width: 600px)': {\n            fontSize: 28,\n            height: 72,\n          },\n          '&:hover': {\n            backgroundColor: palette.action.hover,\n          },\n        },\n        containedSizeLarge: {\n          fontSize: 32,\n          height: 78,\n          borderRadius: 38,\n          '@media (min-width: 600px)': {\n            fontSize: 36,\n            height: 82,\n            borderRadius: 40,\n          },\n        },\n\n        iconSizeLarge: {\n          marginLeft: 0,\n        },\n      },\n    },\n  });\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface Palette {\n    custom: {\n      main: string;\n    };\n  }\n\n  interface PaletteOptions {\n    custom: {\n      main: string;\n    };\n  }\n}\n\nlet theme = createBaseTheme(\n  createPalette({\n    type: 'dark',\n    primary: {\n      main: PRIMARY,\n    },\n    secondary: {\n      main: SECONDARY,\n    },\n    background: {\n      default: '#0f131a',\n      paper: '#1a1d24',\n    },\n    custom: {\n      main: '#272B31',\n    },\n  }),\n);\n\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import { Box, Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\n\ntype AppLayoutProps = {\n  children?: React.ReactElement | React.ReactElement[];\n};\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    padding: 0,\n    height: '100%',\n    maxWidth: `calc(${theme.breakpoints.values.lg}px - 128px)`,\n  },\n}));\n\nexport default function AppLayout({ children }: AppLayoutProps) {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container} maxWidth=\"lg\">\n      <Box\n        display=\"block\"\n        margin=\"auto\"\n        height=\"100%\"\n        width=\"100%\"\n        minWidth={320}>\n        {children}\n      </Box>\n    </Container>\n  );\n}\n","import { SessionState } from 'node:http2';\nimport Player from 'types/Player.type';\nimport { HolyElement } from './HolyElement.type';\n\nexport enum WsStates {\n  IDLE = 'Loading...',\n  CONNECTING = 'You will be connected',\n  CONNECTED = 'You are connected',\n  CLOSED = \"You're disconnected\",\n}\n\nexport enum WebsocketEvent {\n  Invalid = -1,\n  PlayerJoin = 1,\n  PlayerLeft = 2,\n  PlayerFinished = 3,\n  NewOwnerPlayer = 4,\n  PlayerKicked = 5,\n  SessionStart = 11,\n  SessionUpdate = 12,\n  NextStep = 13, // on a step is finish\n  NewAlbumElement = 14,\n}\n\nexport enum SendMessageType {\n  Authentication = 1,\n}\n\nexport type WebsocketMessage = {\n  websocketEvent: WebsocketEvent;\n  player?: Player;\n  playerId?: number;\n  album?: HolyElement;\n  session?: Partial<SessionState>;\n  error?: string;\n};\n","function getApiUrl() {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return process.env.REACT_APP_API_URL;\n    case 'production':\n      return process.env.REACT_APP_PROD_API_URL;\n    case 'test':\n      return 'http://test-api-url.com/api';\n  }\n}\n\nexport const apiURL: string = getApiUrl() || 'http://default-url.com/api';\n\ntype config = {\n  data?: any;\n  token?: string | null;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'OPTIONS' | 'PATCH';\n  headers?: HeadersInit;\n  // if you want all possibility of `fetch`\n  customConfig?: RequestInit;\n};\n\n/*\n  To call the api.\n\n  To `get` an item\n  client(\"item\") OR client(\"item\", {method: \"GET\"}).then(resultJson => ...)\n  But it's \"GET\" by default if no data.\n\n  If you want `POST` an item, you need to provide data.\n  If Data was provided, default method is `POST`\n  client(\"item\", {data: myObject}).then(resultJson => ...).catch(error => ...)\n\n  To `patch` an item\n  client(\"item/1\", {method: \"PATCH\"}).then(resultJson => ...).catch(error => ...)\n  \n  To provide a Token :\n  client(\"item/1\", {method: \"PATCH\", token: \"MYTOKEN\"}).then(resultJson => ..., error => ...)\n\n  Same for post etc...\n\n  You can see exemple in `client.test.tsx`\n*/\nasync function client<T>(\n  endpoint: string,\n  { data, method, token, headers: customHeaders, customConfig }: config = {},\n): Promise<T> {\n  const config: RequestInit = {\n    method: method || (data ? 'POST' : 'GET'),\n    body: data ? JSON.stringify(data) : null,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : '',\n      'Content-Type': data ? 'application/json' : '',\n      Accept: 'application/json',\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n\n  return window.fetch(`${apiURL}/${endpoint}`, config).then(async response => {\n    // statusCode \"401\" is for unauthenticated request\n    if (response.status === 401) {\n      return Promise.reject({ message: 'Please re-authenticate.' });\n    }\n\n    const data = await response.json();\n    if (response.ok) {\n      return data;\n    } else {\n      return Promise.reject(data);\n    }\n  });\n}\n\nexport { client };\n","const playerTokenKey = '__player_provider_token__';\n\nfunction getToken() {\n  // TODO: check the token exist in the API\n  return window.localStorage.getItem(playerTokenKey);\n}\n\nfunction destroy() {\n  window.localStorage.removeItem(playerTokenKey);\n  // TODO: invalidate the token in API\n}\n\nfunction setToken(token: string) {\n  window.localStorage.setItem(playerTokenKey, token);\n  // TODO: invalidate the token in API\n}\n\nexport { getToken, destroy, setToken };\n","export default __webpack_public_path__ + \"static/media/spinner.efdf2d72.svg\";","import { Box } from '@material-ui/core';\nimport Spinner from '../images/spinner.svg';\n\nexport default function Loading() {\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n      <img src={Spinner} alt=\"loading\" />\n    </Box>\n  );\n}\n","export function parseJson<T>(text: string, init?: T): T | undefined {\n  let json: T;\n\n  try {\n    json = JSON.parse(text);\n  } catch (e) {\n    return init;\n  }\n\n  return json ? json : init;\n}\n","import React from 'react';\n\n/*\n * return function will be only called if component is currently mounted\n */\nfunction useSafeMounted(dispatch: (...args: any[]) => any) {\n  const mounted = React.useRef(false);\n\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  return React.useCallback(\n    (...args: unknown[]) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch],\n  );\n}\n\nexport default useSafeMounted;\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { getToken } from '../api/player-provider';\nimport useSafeMounted from 'hooks/useSafeMounted';\nimport { SendMessageType, WsStates } from 'types/websocket.types';\nimport { apiURL } from 'api/client';\n\nconst protocol = process.env.NODE_ENV === 'development' ? 'ws' : 'wss';\n\nconst domainRegExp = /\\b(?:(?:https?|ftp):\\/\\/)?([^/\\n]+)\\/?/;\nconst url = `${protocol}://${domainRegExp.exec(apiURL)?.[1]}/api/stream`;\n\nexport function useWebsocket() {\n  const [websocket, setWebsocket] = React.useState<WebSocket>();\n  const [wsState, setWsState] = React.useState<WsStates>(WsStates.IDLE);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const onCloseCallback = React.useCallback(\n    (isSocketOpened: boolean) => {\n      setWsState(WsStates.CLOSED);\n      if (isSocketOpened) {\n        enqueueSnackbar('Connexion lost ⚡️ [ws]', { variant: 'error' });\n        setWebsocket(undefined);\n      }\n    },\n    [enqueueSnackbar],\n  );\n  const safeOnClose = useSafeMounted(onCloseCallback);\n\n  const connect = React.useCallback(() => {\n    const socket = new WebSocket(url);\n    let isSocketOpened = false;\n    setWsState(WsStates.CONNECTING);\n    setWebsocket(socket);\n\n    socket.onopen = function () {\n      isSocketOpened = true;\n      // identifie the request\n      socket.send(\n        JSON.stringify({\n          type: SendMessageType.Authentication,\n          playerToken: getToken(),\n        }),\n      );\n      setWsState(WsStates.CONNECTED);\n    };\n\n    socket.onclose = function () {\n      safeOnClose(isSocketOpened);\n    };\n  }, [safeOnClose]);\n\n  React.useEffect(() => {\n    if (websocket) {\n      return () => websocket.close();\n    }\n    connect();\n  }, [connect, websocket]);\n\n  return { wsState, websocket };\n}\n","import React from 'react';\nimport { WsStates } from 'types/websocket.types';\nimport { useWebsocket } from './useWebsocket';\n\ntype WebsocketContextProps = {\n  wsState: WsStates;\n  websocket?: WebSocket;\n};\n\nconst WebsocketContext = React.createContext<WebsocketContextProps>({\n  wsState: WsStates.IDLE,\n});\n\ntype WebsocketContextProviderProps = { children: React.ReactElement };\n\nexport function WebsocketProvider({ children }: WebsocketContextProviderProps) {\n  const { wsState, websocket } = useWebsocket();\n\n  const values = { wsState, websocket };\n\n  return (\n    <WebsocketContext.Provider value={values}>\n      {children}\n    </WebsocketContext.Provider>\n  );\n}\n\nexport function useWebsocketContext() {\n  const context = React.useContext(WebsocketContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Loading from '../components/Loading';\nimport Player from '../types/Player.type';\nimport { parseJson } from '../utils/json';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype PlayerContextProps = {\n  player?: Player;\n};\n\nconst PlayerContext = React.createContext<PlayerContextProps>({});\n\ntype PlayerContextProviderProps = { children: React.ReactElement };\n\nexport function PlayerContextProvider({\n  children,\n}: PlayerContextProviderProps) {\n  const [player, setPlayer] = React.useState<Player>();\n  const { enqueueSnackbar } = useSnackbar();\n  const { websocket } = useWebsocketContext();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewOwnerPlayer:\n          if (websocketMessage?.player?.id === player?.id) {\n            setPlayer(prev => (prev ? { ...prev, isOwner: true } : prev));\n          }\n          break;\n      }\n    }\n    if (websocket && player) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [player, websocket]);\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Player>('player/me', { token: getToken() }).then(\n      player => !deleted && setPlayer(player),\n      () => {\n        enqueueSnackbar(\"You haven't joined a game yet.\", { variant: 'error' });\n        history.push('/home');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  const values = { player };\n\n  return (\n    <PlayerContext.Provider value={values}>\n      {player ? children : <Loading />}\n    </PlayerContext.Provider>\n  );\n}\n\nexport function usePlayerContext() {\n  const context = React.useContext(PlayerContext);\n  if (!context)\n    throw new Error(\n      'usePlayerContext should be used within a PlayerContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from '../api/client';\nimport { destroy, getToken } from '../api/player-provider';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { usePlayerContext } from './PlayerProvider';\n\nexport function useRoomStates() {\n  const [room, setRoom] = React.useState<Room>();\n  const [players, setPlayers] = React.useState<Player[]>([]);\n  const { player } = usePlayerContext();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateRoom = React.useCallback(() => {\n    client<Room>(`room/${player?.roomId}`, { token: getToken() }).then(setRoom);\n  }, [player?.roomId]);\n\n  const updatePlayer = React.useCallback(() => {\n    client<Player[]>(`room/${player?.roomId}/players`, {\n      token: getToken(),\n    }).then(setPlayers);\n  }, [player?.roomId]);\n\n  const removePlayer = React.useCallback(\n    (playerId?: number) => {\n      if (!playerId) return;\n      if (playerId === player?.id) {\n        history.push('/home');\n        destroy();\n        enqueueSnackbar(\"Seems like you've been kicked from the room 😅\", {\n          variant: 'info',\n        });\n      }\n      setPlayers(prevPlayers => {\n        const playerIndex = prevPlayers?.findIndex(p => p.id === playerId);\n        if (playerIndex !== -1) {\n          const playersCopy = [...prevPlayers];\n          playersCopy.splice(playerIndex, 1);\n          return playersCopy;\n        }\n        return prevPlayers;\n      });\n    },\n    [enqueueSnackbar, history, player?.id],\n  );\n\n  const addPlayer = React.useCallback((player?: Player) => {\n    if (!player) return;\n\n    setPlayers(prevPlayers => {\n      if (prevPlayers.find(p => p.id === player.id)) return prevPlayers;\n      return [...prevPlayers, player];\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (!player?.roomId) {\n      history.push('/home');\n      return;\n    }\n    updateRoom();\n    updatePlayer();\n  }, [history, player?.roomId, updatePlayer, updateRoom]);\n\n  return { updatePlayer, updateRoom, removePlayer, addPlayer, room, players };\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { parseJson } from '../utils/json';\nimport { useRoomStates } from './useRoomStates';\nimport {\n  WebsocketMessage,\n  WebsocketEvent,\n  WsStates,\n} from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype RoomSocketContextProps = {\n  room?: Room;\n  wsState: WsStates;\n  players: Player[];\n};\n\nconst RoomContext = React.createContext<RoomSocketContextProps>({\n  wsState: WsStates.IDLE,\n  players: [],\n});\n\ntype RoomSocketContextProviderProps = { children: React.ReactElement };\n\nexport function RoomContextProvider({\n  children,\n}: RoomSocketContextProviderProps) {\n  const {\n    room,\n    players,\n    updatePlayer,\n    removePlayer,\n    addPlayer,\n  } = useRoomStates();\n  const history = useHistory();\n  const { wsState, websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const message = event.data;\n      const websocketMessage = parseJson<WebsocketMessage>(message);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.Invalid:\n          enqueueSnackbar(websocketMessage.error, { variant: 'error' });\n          history.push('/home');\n          break;\n        case WebsocketEvent.PlayerJoin:\n          addPlayer(websocketMessage.player);\n          break;\n        case WebsocketEvent.PlayerLeft:\n          removePlayer(websocketMessage.playerId);\n          break;\n        case WebsocketEvent.NewOwnerPlayer:\n          updatePlayer();\n          break;\n        case WebsocketEvent.SessionStart:\n          history?.push('/r/start');\n          break;\n        case WebsocketEvent.PlayerKicked:\n          removePlayer(websocketMessage.playerId);\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [\n    addPlayer,\n    enqueueSnackbar,\n    history,\n    removePlayer,\n    updatePlayer,\n    websocket,\n  ]);\n\n  React.useEffect(() => {\n    const playingPlayers = players.filter(player => player.isPlaying);\n    if (history.location.pathname === '/r/lobby' && playingPlayers.length > 0) {\n      history?.push('/r/start');\n    }\n  }, [players, history]);\n\n  const values = { room, wsState, players };\n\n  return <RoomContext.Provider value={values}>{children}</RoomContext.Provider>;\n}\n\nexport function useRoomContext() {\n  const context = React.useContext(RoomContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport LoopIcon from '@material-ui/icons/Loop';\n\nconst useStyles = makeStyles(() => ({\n  spin: {\n    animation: `spinnerIconEffect 1s linear infinite`,\n  },\n  '@global': {\n    '@keyframes spinnerIconEffect': {\n      '0%': { transform: 'rotate(0deg)' },\n      '100%': { transform: 'rotate(-360deg)' },\n    },\n  },\n}));\n\nexport default function SpinnerIcon(props: {\n  className?: string;\n  style?: any;\n}) {\n  const classes = useStyles();\n  return (\n    <LoopIcon\n      style={props.style}\n      aria-label=\"spinner icon\"\n      className={clsx(props.className, classes.spin)}\n    />\n  );\n}\n","import React from 'react';\nimport { Button, ButtonProps } from '@material-ui/core';\nimport SpinnerIcon from './SpinnerIcon';\n\ntype BigButtonProps = ButtonProps & {\n  children?: React.ReactNode;\n  loading?: boolean;\n  onClick?: () => void;\n};\n\n/*\n  BigButton is an abstraction of `Button` from `Material-ui` using the theme.\n\n  <BigButton>Label</BigButton>: Will create button with black background.\n  <BigButton color=\"primary\">Label</BigButton>: Will create button with the primary background.\n  <BigButton size=\"large\">Label</BigButton>: Only large and medium using on this button\n*/\nexport default function BigButton({\n  children,\n  loading,\n  color = 'default',\n  startIcon,\n  ...props\n}: BigButtonProps) {\n  return (\n    <Button\n      variant=\"contained\"\n      color={color}\n      startIcon={loading ? undefined : startIcon}\n      {...props}>\n      {loading ? (\n        <SpinnerIcon style={{ fontSize: props.size === 'medium' ? 32 : 40 }} />\n      ) : (\n        children\n      )}\n    </Button>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\n\ntype PlayerCountProps = {\n  count: number;\n  max: number;\n};\n\nexport default function PlayerCount({ count, max }: PlayerCountProps) {\n  return (\n    <Box py={1}>\n      <Typography variant=\"subtitle1\">\n        {count}/{max}\n      </Typography>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/holydraw-logo.78893378.svg\";","import { makeStyles, Theme } from '@material-ui/core';\nimport HolyDrawImage from 'images/holydraw-logo.svg';\n\nconst useStyles = makeStyles<Theme, { width: number }>(theme => ({\n  logo: {\n    textAlign: 'center',\n    width: props => props.width * 8,\n    height: 'auto',\n    [theme.breakpoints.down('xs')]: {\n      width: props => ((props.width * 8) / 3) * 2,\n    },\n  },\n}));\n\nexport default function HolyDrawLogo({ width = 24 }: { width?: number }) {\n  const classes = useStyles({ width });\n  return (\n    <img src={HolyDrawImage} className={classes.logo} alt=\"holy draw logo\" />\n  );\n}\n","import React, { InputHTMLAttributes } from 'react';\nimport { fade, makeStyles, Theme } from '@material-ui/core';\nimport clsx from 'clsx';\n\ntype Variant = 'medium' | 'large';\n\ntype StylesProps = {\n  focus: boolean;\n  disabled?: boolean;\n  variant: Variant;\n};\n\nconst useStyles = makeStyles<Theme, StylesProps>(theme => ({\n  input: {\n    backgroundColor: 'inherit',\n    border: 'none',\n    width: '100%',\n    fontFamily: 'Work Sans',\n    color: theme.palette.text.primary,\n    cursor: 'inherit',\n  },\n  inputMedium: {\n    fontSize: 24,\n    height: 32,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 28,\n      height: 32,\n    },\n  },\n  inputLarge: {\n    fontSize: 32,\n    height: 38,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 36,\n      height: 40,\n    },\n  },\n  container: {\n    display: 'flex',\n    padding: props => (props.variant === 'medium' ? '18px 20px' : '20px 20px'),\n    backgroundColor: props =>\n      props.disabled ? '#15181F' : theme.palette.background.paper,\n    cursor: props => (props.disabled ? 'not-allowed' : 'text'),\n    border: props =>\n      props.disabled\n        ? `2px solid ${fade(theme.palette.primary.main, 0.6)}`\n        : `2px solid ${theme.palette.primary.main}`,\n    borderRadius: props => (props.variant === 'medium' ? 34 : 38),\n    alignItems: 'center',\n    transition: 'box-shadow ease-in .2s',\n    boxShadow: props =>\n      props.focus\n        ? `0 0 2px 0.2rem ${fade(theme.palette.primary.main, 0.4)}`\n        : theme.shadows[2],\n  },\n  iconMedium: {\n    width: 28,\n    height: 28,\n    marginRight: theme.spacing(1.5),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n      height: 32,\n      width: 32,\n    },\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n  iconLarge: {\n    width: 38,\n    height: 38,\n    marginRight: theme.spacing(1.5),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n      height: 40,\n      width: 40,\n    },\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n}));\n\ntype BigInputProps = {\n  startIcon?: React.ReactElement;\n  variant?: Variant;\n  fullWidth?: boolean;\n} & InputHTMLAttributes<HTMLInputElement>;\n\nexport default function BigInput({\n  disabled,\n  variant = 'medium',\n  startIcon,\n  fullWidth,\n  ...props\n}: BigInputProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [focus, setFocus] = React.useState(false);\n  const classes = useStyles({ disabled, focus, variant });\n\n  return (\n    <div\n      className={clsx(classes.container, { 'full-width': fullWidth })}\n      onClick={() => inputRef.current?.focus()}>\n      {startIcon &&\n        React.cloneElement(startIcon, {\n          className:\n            variant === 'medium' ? classes.iconMedium : classes.iconLarge,\n          'data-testid': 'biginput-icon',\n        })}\n      <input\n        ref={inputRef}\n        className={clsx(\n          classes.input,\n          variant === 'medium' ? classes.inputMedium : classes.inputLarge,\n          'big-input-safari',\n        )}\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n        disabled={disabled}\n        {...props}\n      />\n    </div>\n  );\n}\n","export const baseColor = '#880061';\nexport const bgColor = '#0F131A';\nexport const paperColor = '#1A1D24';\nexport const disabledText = '#BDBDBD';\nexport const secondaryText = '#E0E0E0';\nexport const primaryText = '#F2F2F2';\n\nexport const primaryFade = (fade: number) => `rgba(136, 0, 97, ${fade})`;\nexport const bgFade = (fade: number) => `rgba(15, 19, 26, ${fade})`;\n","import { baseColor, bgColor } from 'styles/colors';\nimport { Avatar, Box, makeStyles, Typography } from '@material-ui/core';\nimport PersonIcon from '@material-ui/icons/Person';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport clsx from 'clsx';\n\ntype PlayerCardProps = {\n  id: number;\n  name: string;\n  avatar: string;\n  isOwner?: boolean;\n  isKickable?: boolean;\n  isCurrentPlayer?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 48,\n    height: 48,\n    backgroundColor: 'transparent',\n    border: `1px solid ${theme.palette.primary.main}`,\n    overflow: 'visible',\n    '&> img': {\n      height: 48,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: baseColor,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  icon: {\n    color: '#ffffff',\n  },\n  badgeIcon: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontFamily: 'Work Sans',\n    fontSize: 20,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    maxWidth: 128,\n    whiteSpace: 'nowrap',\n  },\n  kickButton: {\n    cursor: 'pointer',\n  },\n}));\n\nexport default function PlayerCard({\n  id,\n  name,\n  avatar,\n  isOwner,\n  isKickable,\n  isCurrentPlayer,\n  onKick,\n}: PlayerCardProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      border={1}\n      width={256}\n      height={64}\n      borderRadius={4}\n      padding={1}\n      display=\"flex\"\n      alignItems=\"center\"\n      borderColor=\"primary.main\"\n      justifyContent=\"space-between\"\n      bgcolor={bgColor}>\n      <Box position=\"relative\">\n        {isCurrentPlayer && (\n          <div className={classes.badge}>\n            <PersonIcon\n              className={clsx(classes.icon, classes.badgeIcon)}\n              data-testid=\"user-icon\"\n            />\n          </div>\n        )}\n        <Avatar src={avatar} className={classes.avatar} />\n      </Box>\n\n      <Typography color=\"textPrimary\" className={classes.username}>\n        {name}\n      </Typography>\n      <Box display=\"flex\" alignItems=\"center\">\n        {isOwner ? (\n          <StarIcon className={classes.icon} data-testid=\"star-icon\" />\n        ) : (\n          isKickable && (\n            <Box\n              component=\"button\"\n              padding={0}\n              border={0}\n              className={classes.kickButton}\n              height={24}\n              onClick={() => onKick?.(id, name)}\n              bgcolor=\"transparent\">\n              <CloseIcon className={classes.icon} />\n            </Box>\n          )\n        )}\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/pp-1.acb77223.png\";","import Pp1 from './pp-1.png';\nimport Pp2 from './pp-2.png';\nimport Pp3 from './pp-3.png';\nimport Pp4 from './pp-4.png';\nimport Pp5 from './pp-5.png';\nimport Pp6 from './pp-6.png';\nimport Pp7 from './pp-7.png';\nimport Pp8 from './pp-8.png';\n\nconst profilesPictures = [Pp1, Pp2, Pp3, Pp4, Pp5, Pp6, Pp7, Pp8];\n\nexport default profilesPictures;\n","export default __webpack_public_path__ + \"static/media/pp-2.c82c2211.png\";","export default __webpack_public_path__ + \"static/media/pp-3.9c11a583.png\";","export default __webpack_public_path__ + \"static/media/pp-4.5ae6cc4a.png\";","export default __webpack_public_path__ + \"static/media/pp-5.d5627fd6.png\";","export default __webpack_public_path__ + \"static/media/pp-6.228ed3be.png\";","export default __webpack_public_path__ + \"static/media/pp-7.762b4b0e.png\";","export default __webpack_public_path__ + \"static/media/pp-8.7bfd9d10.png\";","import PlayerCard from './PlayerCard';\nimport Player from 'types/Player.type';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport { Box, Grid } from '@material-ui/core';\n\ntype PlayerCardListProps = {\n  players?: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nexport default function PlayerCardList({\n  players,\n  playerId,\n  isKickable,\n  onKick,\n}: PlayerCardListProps) {\n  return (\n    <Box height={384} width={256 + 8 + 8} overflow=\"hidden scroll\">\n      <Grid container spacing={2} alignItems=\"flex-end\">\n        {players &&\n          players.map(player => {\n            const isPlayerSelected = playerId === player.id;\n            return (\n              <Grid item xs={12} key={player.id}>\n                <PlayerCard\n                  id={player.id}\n                  name={player.username}\n                  avatar={profilesPictures[Number(player.avatarUrl)]}\n                  isOwner={player.isOwner}\n                  isKickable={isKickable}\n                  isCurrentPlayer={isPlayerSelected}\n                  onKick={onKick}\n                />\n              </Grid>\n            );\n          })}\n      </Grid>\n    </Box>\n  );\n}\n","import React from 'react';\n\nexport type UseTimerIntervalProps = {\n  finishAt: Date;\n  timeDuration: number;\n  onFinish?: () => void;\n  onFinishPercentage?: number;\n};\n\nexport default function useTimerInterval({\n  finishAt,\n  timeDuration,\n  onFinish,\n}: UseTimerIntervalProps) {\n  const [progress, setProgress] = React.useState(0);\n  const [timerInterval, setTimerInterval] = React.useState<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    setProgress(getProgressPercentage(finishAt, timeDuration));\n    const interval = setInterval(\n      () => setProgress(getProgressPercentage(finishAt, timeDuration)),\n      1000,\n    );\n    setTimerInterval(interval);\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration]);\n\n  React.useEffect(() => {\n    if (progress >= 100) {\n      onFinish?.();\n      timerInterval && clearInterval(timerInterval);\n    }\n  }, [progress, onFinish, timerInterval]);\n\n  return { progress };\n}\n\nexport function useTimerEvent({\n  finishAt,\n  timeDuration,\n  onFinish,\n  onFinishPercentage = 100,\n}: UseTimerIntervalProps) {\n  const intervalRef = React.useRef<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      if (getProgressPercentage(finishAt, timeDuration) >= onFinishPercentage) {\n        onFinish?.();\n        intervalRef.current && clearInterval(intervalRef.current);\n      }\n    }, 1000);\n\n    intervalRef.current = interval;\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration, onFinishPercentage, onFinish]);\n}\n\nfunction getProgressPercentage(finishAt: Date, timeDuration: number): number {\n  const diff = Math.round((finishAt.getTime() - new Date().getTime()) / 1000);\n  const progress = 100 - (diff * 100) / timeDuration;\n  return progress > 100 ? 100 : progress;\n}\n","import {\n  CircularProgress,\n  createStyles,\n  useMediaQuery,\n  useTheme,\n  withStyles,\n} from '@material-ui/core';\nimport useTimerInterval, {\n  UseTimerIntervalProps,\n} from 'hooks/useTimerInterval';\n\nconst CustomCircularProgress = withStyles(theme =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    circle: {\n      backgroundColor: 'blue',\n      strokeLinecap: 'round',\n    },\n  }),\n)(CircularProgress);\n\nexport default function StepTimer(props: UseTimerIntervalProps) {\n  const { progress } = useTimerInterval(props);\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n\n  return (\n    <CustomCircularProgress\n      size={matches ? 64 : 32}\n      thickness={4}\n      variant=\"determinate\"\n      value={progress}\n    />\n  );\n}\n","import { Box, fade, makeStyles, Typography } from '@material-ui/core';\n\ntype DirectiveLabelProps = {\n  directive: string;\n  sentence?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  sentence: {\n    textAlign: 'center',\n  },\n  container: {\n    backgroundColor: fade(theme.palette.primary.main, 0.8),\n    boxShadow: theme.shadows[2],\n  },\n}));\n\nexport default function DirectiveLabel({\n  directive,\n  sentence,\n}: DirectiveLabelProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      width=\"100%\"\n      display=\"flex\"\n      padding={1}\n      borderRadius={4}\n      alignItems=\"center\"\n      flexDirection=\"column\"\n      className={classes.container}>\n      <Typography variant=\"subtitle1\" color=\"textSecondary\">\n        {directive}\n      </Typography>\n      {sentence && (\n        <Typography\n          variant=\"h4\"\n          color=\"textPrimary\"\n          className={classes.sentence}>\n          {sentence}\n        </Typography>\n      )}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles } from '@material-ui/core';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\n\ntype PlayerAvatarProps = {\n  image: string;\n  onShuffle?: () => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    backgroundColor: theme.palette.primary.main,\n    outline: 'none',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    cursor: 'pointer',\n    border: 'none',\n    width: 48,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 48,\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n    '&:active': {\n      bottom: -4,\n      boxShadow: 'none',\n    },\n  },\n  imgBox: {\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n  },\n  img: {\n    height: 256,\n    width: 'auto',\n    margin: 'auto',\n  },\n}));\n\nexport default function PlayerAvatar({ image, onShuffle }: PlayerAvatarProps) {\n  const classes = useStyles();\n  return (\n    <Box alignItems=\"center\" width={256} position=\"relative\" height={256}>\n      <button className={classes.button} onClick={onShuffle}>\n        <ShuffleIcon style={{ color: '#FFFFFF' }} />\n      </button>\n      <Box\n        border={2}\n        display=\"flex\"\n        borderColor=\"primary.main\"\n        borderRadius=\"50%\"\n        width={256}\n        height={256}\n        bgcolor=\"background.default\"\n        className={classes.imgBox}>\n        <img src={image} className={classes.img} alt=\"Avatar\" />\n      </Box>\n    </Box>\n  );\n}\n","import { primaryFade } from 'styles/colors';\nimport React from 'react';\nimport { Box } from '@material-ui/core';\n\ntype DrawColorPickerProps = {\n  colors: string[];\n  onColorChange?: (color: string) => void;\n  currentColor: string;\n  flexDirection?: 'row' | 'column';\n};\n\nfunction getCoupleColors(colors: string[]) {\n  return colors.reduce(\n    (accumulator: { index: number; result: string[][] }, value) => {\n      const colorCouples = accumulator.result[accumulator.index];\n      switch (colorCouples?.length) {\n        case undefined:\n          accumulator.result[accumulator.index] = [value];\n          break;\n        case 1:\n          accumulator.result[accumulator.index].push(value);\n          break;\n        default:\n          accumulator.index++;\n          accumulator.result[accumulator.index] = [value];\n      }\n      return accumulator;\n    },\n    { index: 0, result: [] },\n  ).result;\n}\n\nexport default function DrawColorPicker({\n  colors,\n  currentColor,\n  onColorChange,\n  flexDirection = 'column',\n}: DrawColorPickerProps) {\n  const coupleColors: string[][] = React.useMemo(\n    () => getCoupleColors(colors),\n    [colors],\n  );\n\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection={flexDirection}\n      padding=\"8px\"\n      borderRadius={4}\n      gridGap={8}\n      border={1}\n      borderColor=\"#000000\"\n      justifyContent=\"center\"\n      bgcolor={primaryFade(0.2)}>\n      {coupleColors.map((couple, index) => (\n        <Box\n          key={index}\n          display=\"flex\"\n          flexDirection={flexDirection === 'column' ? 'row' : 'column'}\n          justifyContent=\"space-between\"\n          top={248}>\n          {couple.map((squareColor, index) => {\n            const isSelected = squareColor === currentColor;\n\n            return (\n              <Box\n                component=\"button\"\n                key={index}\n                onClick={() => onColorChange?.(squareColor)}\n                border={isSelected ? 2 : 1}\n                bgcolor={squareColor}\n                borderColor={isSelected ? '#FFFFFF' : '#000000'}\n                width={32}\n                height={32}\n                borderRadius={4}\n                className=\"cursor-pointer\"\n              />\n            );\n          })}\n        </Box>\n      ))}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles, Theme, useTheme } from '@material-ui/core';\n\ntype SizePickerProps = {\n  currentSize: number;\n  onSizeChange: (size: number) => void;\n  flexDirection?: 'row' | 'column';\n};\n\nconst buttonSizes = [4, 8, 16, 20, 24, 30];\n\nexport default function SizePicker({\n  currentSize,\n  onSizeChange,\n  flexDirection = 'row',\n}: SizePickerProps) {\n  const theme = useTheme();\n  return (\n    <Box\n      padding={1}\n      gridGap={8}\n      bgcolor={fade(theme.palette.primary.main, 0.2)}\n      display=\"flex\"\n      borderRadius={4}\n      border={1}\n      flexDirection={flexDirection}\n      borderColor=\"common.black\"\n      alignItems=\"center\"\n      boxShadow={2}>\n      {buttonSizes.map((size, i) => {\n        const isCurrentSize = currentSize === size;\n        return (\n          <SizePickerPoint\n            key={size}\n            onSizeChange={onSizeChange}\n            size={size}\n            isCurrentSize={isCurrentSize}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nconst useStyles = makeStyles<Theme, { isCurrentSize: boolean }>(theme => ({\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    border: '2px solid #000000',\n    borderRadius: '50%',\n    width: 40,\n    height: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    cursor: 'pointer',\n    boxShadow: props =>\n      props.isCurrentSize\n        ? `0 0 .2px 2px ${fade(theme.palette.primary.main, 0.8)}`\n        : 'none',\n  },\n}));\n\nfunction SizePickerPoint({\n  onSizeChange,\n  size,\n  isCurrentSize,\n}: {\n  onSizeChange: (size: number) => void;\n  size: number;\n  isCurrentSize: boolean;\n}) {\n  const classes = useStyles({ isCurrentSize });\n  return (\n    <button onClick={() => onSizeChange(size)} className={classes.button}>\n      <Box\n        borderRadius=\"50%\"\n        border=\"1px solid #000000\"\n        bgcolor=\"#000000\"\n        width={size}\n        height={size}\n      />\n    </button>\n  );\n}\n","import { copyToClipboard } from 'utils/clipboard';\nimport { Button } from '@material-ui/core';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useSnackbar } from 'notistack';\n\ntype ShareRoomButtonProps = {\n  identifier?: string;\n};\n\nexport default function ShareRoomButton({ identifier }: ShareRoomButtonProps) {\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onShared() {\n    if (identifier) {\n      copyToClipboard(`${window.location.origin}/join/${identifier}`);\n      enqueueSnackbar('URL successfully copied 😎', { variant: 'success' });\n    }\n  }\n  return (\n    <Button\n      startIcon={<VpnKeyIcon style={{ fontSize: 32 }} />}\n      onClick={onShared}\n      size=\"large\"\n      variant=\"contained\">\n      {identifier || 'loading...'}\n    </Button>\n  );\n}\n","export function copyToClipboard(value: string) {\n  const tempInput = document.createElement('input');\n  tempInput.value = value;\n  document.body.appendChild(tempInput);\n  tempInput.select();\n  document.execCommand('copy');\n  document.body.removeChild(tempInput);\n}\n","import { Avatar, fade, makeStyles, Theme } from '@material-ui/core';\nimport profilesPictures from 'images/profiles/profiles-pictures';\n\nconst useAvatarStyles = makeStyles<Theme, { isSelected: boolean }>(theme => ({\n  avatar: {\n    height: 64,\n    width: 64,\n    overflow: 'visible',\n    backgroundColor: props =>\n      props.isSelected\n        ? fade(theme.palette.primary.main, 0.6)\n        : fade(theme.palette.primary.main, 0.2),\n    [theme.breakpoints.up('sm')]: {\n      height: 40,\n      width: 40,\n    },\n    '&> img': {\n      height: 64,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n      [theme.breakpoints.up('sm')]: {\n        height: 40,\n      },\n    },\n  },\n}));\n\nexport default function BookPlayerAvatar({\n  avatarUrl,\n  isSelected,\n}: {\n  avatarUrl: string;\n  isSelected: boolean;\n}) {\n  const classes = useAvatarStyles({ isSelected });\n  return (\n    <Avatar\n      className={classes.avatar}\n      src={profilesPictures[Number(avatarUrl)]}\n    />\n  );\n}\n","import Player from 'types/Player.type';\nimport {\n  Box,\n  makeStyles,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BookPlayerAvatar from './BookPlayerAvatar';\n\ntype BookPlayerListProps = {\n  players: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onClick?: (id: number, username: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: theme.palette.primary.main,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    border: 0,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 2,\n  },\n  container: {\n    overflowX: 'scroll',\n  },\n  username: {\n    overflow: 'hidden',\n    textAlign: 'center',\n    maxWidth: 64,\n    whiteSpace: 'nowrap',\n  },\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    padding: 0,\n  },\n  icon: {\n    fontSize: 16,\n    color: theme.palette.common.white,\n  },\n}));\n\nexport default function BookPlayerList({\n  players,\n  playerId,\n  onClick,\n  isKickable,\n}: BookPlayerListProps) {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const classes = useStyles();\n\n  return (\n    <Box\n      display=\"flex\"\n      gridGap={8}\n      maxWidth={isDeviceSM ? 200 : 285}\n      className={classes.container}\n      alignItems=\"center\"\n      flexDirection=\"row\">\n      {players.map((player, i) => {\n        const isPlayerSelected = playerId === player.id;\n        return (\n          <Tooltip key={player.id} title={player.username} placement=\"top\">\n            <Box flexDirection=\"column\" alignItems=\"center\" zIndex={4}>\n              <Box position={{ xs: 'relative', sm: 'initial' }}>\n                {!isDeviceSM &&\n                  (player.isOwner ? (\n                    <div className={classes.badge}>\n                      <StarIcon\n                        data-testid=\"star-icon\"\n                        className={classes.icon}\n                      />\n                    </div>\n                  ) : (\n                    isKickable && (\n                      <button\n                        onClick={() =>\n                          !player.isOwner &&\n                          isKickable &&\n                          onClick?.(player.id, player.username)\n                        }\n                        className={classes.badge}>\n                        <CloseIcon\n                          data-testid=\"kick-icon\"\n                          className={classes.icon}\n                        />\n                      </button>\n                    )\n                  ))}\n                <BookPlayerAvatar\n                  isSelected={isPlayerSelected}\n                  avatarUrl={player.avatarUrl}\n                />\n              </Box>\n              {!isDeviceSM && (\n                <Typography\n                  className={classes.username}\n                  component=\"p\"\n                  variant=\"subtitle1\">\n                  {player.username}\n                </Typography>\n              )}\n            </Box>\n          </Tooltip>\n        );\n      })}\n    </Box>\n  );\n}\n","import React from 'react';\nimport BigButton from '../BigButton';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  TextField,\n} from '@material-ui/core';\n\ntype ButtonModalJoinProps = {\n  identifier?: string;\n  onClick: (identifier: string) => void;\n  loading?: boolean;\n  className?: string;\n};\n\nexport default function ButtonModalJoin({\n  identifier: urlIdentifier,\n  loading,\n  onClick,\n  className,\n}: ButtonModalJoinProps) {\n  const [open, setOpen] = React.useState(false);\n  const [identifier, setIdentifier] = React.useState('');\n  return (\n    <>\n      <BigButton\n        startIcon={\n          urlIdentifier ? <PlayArrowIcon style={{ fontSize: 32 }} /> : undefined\n        }\n        fullWidth\n        loading={loading}\n        className={className}\n        size=\"medium\"\n        color={urlIdentifier ? 'primary' : 'default'}\n        onClick={() =>\n          urlIdentifier ? onClick(urlIdentifier) : setOpen(true)\n        }>\n        Join\n      </BigButton>\n\n      <Dialog\n        fullWidth\n        maxWidth=\"xs\"\n        open={open}\n        onClose={() => setOpen(false)}>\n        <DialogTitle>Join a game 👨‍🎨</DialogTitle>\n        <DialogContent>\n          <TextField\n            color=\"secondary\"\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Identifier\"\n            value={identifier}\n            onChange={event => setIdentifier(event.target.value)}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"secondary\">\n            Cancel 👋\n          </Button>\n          <Button\n            onClick={() => {\n              onClick(identifier);\n              setOpen(false);\n            }}\n            color=\"secondary\">\n            Join 🥳\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { MutableRefObject } from 'react';\nimport { CanvasWidth } from './canvas.type';\n\ntype DrawingCanvasContextProps = {\n  clear: () => void;\n  undo: () => void;\n  redo: () => void;\n  canvasRef: MutableRefObject<HTMLCanvasElement | null>;\n  size: CanvasWidth;\n};\n\nexport const DrawingCanvasContext = React.createContext<DrawingCanvasContextProps>(\n  {} as any,\n);\n\nexport function useCanvasContext() {\n  const context = React.useContext(DrawingCanvasContext);\n  if (!context)\n    throw new Error(\n      'useCanvasContext should be used within a DrawingCanvasContext',\n    );\n  return context;\n}\n","import { makeStyles, Theme } from '@material-ui/core';\nimport { CanvasWidth } from './canvas.type';\nimport { useCanvasContext } from './DrawingCanvasContext';\n\nconst useStyles = makeStyles<Theme, { size: CanvasWidth; disabled?: boolean }>(\n  theme => ({\n    canvas: {\n      backgroundColor: props => (props.disabled ? '#BBBBBB' : '#DDDDDD'),\n      width: props => props.size.width,\n      height: props => props.size.height,\n      cursor: props => (props.disabled ? 'not-allowed' : 'crosshair'),\n    },\n    canvasBox: {\n      width: props => props.size.width + props.size.border * 2,\n      height: props => props.size.height + props.size.border * 2,\n      border: props =>\n        `${props.size.border}px solid ${theme.palette.primary.main}`,\n      boxShadow: theme.shadows[1],\n    },\n  }),\n);\n\nexport default function DrawingCanvas({ disabled }: { disabled?: boolean }) {\n  const { canvasRef, size } = useCanvasContext();\n  const classes = useStyles({ size, disabled });\n\n  return (\n    <div className={classes.canvasBox}>\n      <canvas ref={canvasRef} className={classes.canvas} />\n    </div>\n  );\n}\n","import { Box, Typography, useTheme } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport Player from 'types/Player.type';\nimport PlayArrowRoundedIcon from '@material-ui/icons/PlayArrowRounded';\n\ntype StartButtonProps = {\n  player?: Player;\n  startName?: string;\n  onStart: () => void;\n  isLoading?: boolean;\n};\n\nexport default function StartButton({\n  player,\n  startName = 'game',\n  isLoading,\n  onStart,\n}: StartButtonProps) {\n  const theme = useTheme();\n  return (\n    <Box m={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <Box display=\"flex\" alignItems=\"center\">\n        {!player?.isOwner && (\n          <SpinnerIcon\n            style={{ color: theme.palette.text.secondary, marginRight: 4 }}\n          />\n        )}\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {player?.isOwner\n            ? `you're the owner, click here to start the ${startName}`\n            : `Waiting for the host to start the ${startName}`}\n        </Typography>\n      </Box>\n      {player?.isOwner && (\n        <Box mt={2}>\n          <BigButton\n            loading={isLoading}\n            onClick={onStart}\n            size=\"large\"\n            startIcon={<PlayArrowRoundedIcon style={{ fontSize: 48 }} />}>\n            Start\n          </BigButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import {\n  createStyles,\n  withStyles,\n  Theme,\n  Box,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\n\ntype StepProgressProps = {\n  stepActual?: number;\n  stepMax?: number;\n};\n\nconst CustomLinearProgress = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.background.default,\n    },\n    bar: {\n      borderRadius: 8,\n      backgroundColor: theme.palette.primary.dark,\n    },\n  }),\n)(LinearProgress);\n\nexport default function StepProgress({\n  stepActual = 0,\n  stepMax = 0,\n}: StepProgressProps) {\n  const progress = stepPercentage(stepActual, stepMax);\n\n  return (\n    <Box overflow=\"hidden\" width=\"100%\" position=\"relative\" p={1}>\n      <Box\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        display=\"flex\"\n        position=\"absolute\"\n        zIndex={1}\n        top={4}\n        bottom={0}\n        left={16}>\n        <Typography variant=\"subtitle1\">\n          {stepActual}/{stepMax}\n        </Typography>\n      </Box>\n      <CustomLinearProgress variant=\"determinate\" value={progress} />\n    </Box>\n  );\n}\n\nfunction stepPercentage(current: number, max: number) {\n  const percentage = (current * 100) / max;\n  return percentage > 100 ? 100 : percentage;\n}\n","import { Box, makeStyles, Avatar, Typography } from '@material-ui/core';\n\ntype BookSentenceElementProps = {\n  username?: string;\n  children?: string;\n  avatarUrl?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 32,\n    height: 32,\n    backgroundColor: theme.palette.primary.dark,\n    overflow: 'visible',\n    boxShadow: theme.shadows[2],\n    '&> img': {\n      height: 26,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  box: {\n    backgroundColor: theme.palette.custom.main,\n    borderRadius: 20,\n    border: 'none',\n  },\n}));\n\nexport default function BookSentenceElement({\n  username,\n  children,\n  avatarUrl,\n}: BookSentenceElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\">{username}</Typography>\n      <Box\n        display=\"flex\"\n        flexDirection=\"row\"\n        p={0.5}\n        width={320}\n        className={classes.box}>\n        <Avatar src={avatarUrl} className={classes.avatar} />\n        <Box ml={1} mr={1} alignSelf=\"center\">\n          <Typography variant=\"body1\">{children}</Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/gym-guy.71a7fbf1.svg\";","import { Box } from '@material-ui/core';\n\ntype CurrentDrawImageProps = {\n  className?: string;\n  src?: string;\n};\n\nexport default function CurrentDrawImage({\n  className,\n  src,\n}: CurrentDrawImageProps) {\n  return (\n    <Box\n      bgcolor=\"common.white\"\n      border={4}\n      borderColor=\"primary.main\"\n      boxShadow={1}\n      display=\"flex\">\n      <img src={src} alt=\"\" className={className} />\n    </Box>\n  );\n}\n","import { Box, makeStyles, Typography } from '@material-ui/core';\nimport CurrentDrawImage from '../CurrentDrawImage';\n\ntype BookDrawingElementProps = {\n  username?: string;\n  src?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 256,\n    height: 'auto',\n    minHeight: 160,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n    },\n  },\n\n  username: {\n    textAlign: 'right',\n    maxWidth: 256,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n}));\n\nexport default function BookDrawingElement({\n  username,\n  src,\n}: BookDrawingElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\" className={classes.username}>\n        {username}\n      </Typography>\n      <CurrentDrawImage src={src} className={classes.width} />\n    </Box>\n  );\n}\n","export type Coordinate = {\n  x: number;\n  y: number;\n};\n\nexport type Line = {\n  id?: number;\n  type: LineType;\n  color: string;\n  size: number;\n  points: Coordinate[];\n};\n\nexport enum LineType {\n  LINE = 0,\n  CIRCLE = 1,\n}\n","import { Coordinate, Line, LineType } from 'types/canvas.types';\n\nexport const rerenderDraw = (canvas: HTMLCanvasElement, lines: Line[]) => {\n  const context = canvas.getContext('2d');\n  if (!context) return;\n\n  clearDraw(canvas);\n\n  lines &&\n    lines.forEach(line => {\n      let currentPosition: Coordinate = line.points[0];\n      const positionCopy: Coordinate[] = [];\n\n      drawCanvasLine(\n        context,\n        { ...line, type: LineType.CIRCLE },\n        { beginPosition: line.points[0] },\n      );\n\n      line.points.forEach(coordinate => {\n        positionCopy.push(coordinate);\n        if (positionCopy.length > 3) {\n          const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n            positionCopy,\n          );\n\n          drawCanvasLine(context, line, {\n            beginPosition: currentPosition,\n            controlPosition: controlPoint,\n            endPosition: endPoint,\n          });\n          currentPosition = endPoint;\n        }\n      });\n    });\n};\n\nexport const clearDraw = (canvas: HTMLCanvasElement) => {\n  canvas.getContext('2d')?.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nexport const drawCanvasLine = (\n  ctx: CanvasRenderingContext2D,\n  line: Line,\n  {\n    beginPosition,\n    controlPosition,\n    endPosition,\n  }: {\n    beginPosition: Coordinate;\n    controlPosition?: Coordinate;\n    endPosition?: Coordinate;\n  },\n) => {\n  ctx.strokeStyle = line.color;\n  ctx.fillStyle = line.color;\n  ctx.lineJoin = 'round';\n  ctx.lineCap = 'round';\n  ctx.lineWidth = line.size;\n\n  ctx.beginPath();\n\n  switch (line.type) {\n    case LineType.LINE:\n      if (!controlPosition || !endPosition) return;\n      ctx.moveTo(beginPosition.x, beginPosition.y);\n      ctx.quadraticCurveTo(\n        controlPosition.x,\n        controlPosition.y,\n        endPosition.x,\n        endPosition.y,\n      );\n      ctx.stroke();\n      break;\n    case LineType.CIRCLE:\n      ctx.arc(beginPosition.x, beginPosition.y, line.size / 2, 0, 2 * Math.PI);\n      ctx.fill();\n      break;\n  }\n  ctx.closePath();\n};\n\nexport function getQuadraticCurveCoordinates(\n  positions: Coordinate[],\n): {\n  controlPoint: Coordinate;\n  endPoint: Coordinate;\n} {\n  const [lastPoint, prevPoint] = positions.slice(-2);\n  const controlPoint = lastPoint;\n  const endPoint = {\n    x: (lastPoint.x + prevPoint.x) / 2,\n    y: (lastPoint.y + prevPoint.y) / 2,\n  };\n\n  return { controlPoint, endPoint };\n}\n\nexport const getCoordinates = (\n  event: MouseEvent,\n  canvasScale: number,\n  canvas?: HTMLCanvasElement | null,\n): Coordinate | undefined => {\n  if (!canvas) return;\n  return {\n    x: (event.pageX - canvas.offsetLeft) * canvasScale,\n    y: (event.pageY - canvas.offsetTop) * canvasScale,\n  };\n};\n","import React from 'react';\nimport { Coordinate, Line, LineType } from 'types/canvas.types';\nimport {\n  clearDraw,\n  drawCanvasLine,\n  getQuadraticCurveCoordinates,\n  rerenderDraw,\n} from 'utils/canvas.utils';\n\ntype useCanvasMouseProps = {\n  color: string;\n  size: number;\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>;\n  scale: number;\n};\n\nfunction useCanvasPaint({\n  color,\n  size,\n  canvasRef,\n  scale,\n}: useCanvasMouseProps) {\n  const mouseCoordinate = React.useRef<Coordinate>({ x: 0, y: 0 });\n  const lines = React.useRef<Line[]>([]);\n  const deletedLines = React.useRef<Line[]>([]);\n\n  const getLastLine = () => lines.current[lines.current.length - 1];\n\n  const addLastLine = React.useCallback((coordinate?: Coordinate) => {\n    if (!coordinate) return;\n    getLastLine().points.push(coordinate);\n    mouseCoordinate.current = coordinate;\n  }, []);\n\n  const paint = React.useCallback(\n    (newMousePosition?: Coordinate) => {\n      if (!newMousePosition || !mouseCoordinate || !canvasRef.current) return;\n\n      const lastLine = getLastLine();\n      lastLine.points.push(newMousePosition);\n\n      const context = canvasRef.current.getContext('2d');\n      if (!context || lastLine.points.length <= 2) return;\n\n      const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n        lastLine.points,\n      );\n\n      drawCanvasLine(context, lastLine, {\n        beginPosition: mouseCoordinate.current,\n        controlPosition: controlPoint,\n        endPosition: endPoint,\n      });\n      mouseCoordinate.current = endPoint;\n    },\n    [canvasRef],\n  );\n\n  const create = React.useCallback(\n    (coordinate: Coordinate, isNewLine?: boolean) => {\n      mouseCoordinate.current = coordinate;\n      deletedLines.current = [];\n      if (isNewLine) {\n        lines.current.push({\n          type: LineType.LINE,\n          color,\n          size: size * scale,\n          points: [coordinate],\n        });\n        const context = canvasRef?.current?.getContext('2d');\n        if (!context) return;\n        drawCanvasLine(\n          context,\n          { ...getLastLine(), type: LineType.CIRCLE },\n          { beginPosition: coordinate },\n        );\n      } else paint(coordinate);\n    },\n    [canvasRef, color, paint, scale, size],\n  );\n\n  const refresh = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    rerenderDraw(canvasRef.current, lines.current);\n  }, [canvasRef]);\n\n  const undo = React.useCallback(() => {\n    const deletedLine = lines.current.pop();\n    deletedLine && deletedLines.current.push(deletedLine);\n    refresh();\n  }, [refresh]);\n\n  const redo = React.useCallback(() => {\n    const redoLine = deletedLines.current.pop();\n    redoLine && lines.current.push(redoLine);\n    refresh();\n  }, [refresh]);\n\n  const clear = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    if (\n      !window.confirm(\n        'This action is definitive. Are you sure you want to clear all ?',\n      )\n    )\n      return;\n    lines.current = [];\n    deletedLines.current = [];\n    clearDraw(canvasRef.current);\n  }, [canvasRef]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const onKeyDown = (event: any) => {\n      if (event.keyCode === 90 && (event.ctrlKey || event.metaKey)) undo();\n    };\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [canvasRef, undo]);\n\n  return {\n    paint,\n    create,\n    addLastLine,\n    undo,\n    lines,\n    mouseCoordinate,\n    clear,\n    redo,\n    refresh,\n  };\n}\n\nexport default useCanvasPaint;\n","import Player from './Player.type';\n\nexport type HolyElement = {\n  id: number;\n  step: number;\n  type: 0 | 1;\n  text: string;\n  finishAt: string;\n  createdAt: string;\n  drawImage: string;\n  initiatorId?: number;\n  creator?: Player;\n};\n\nexport enum ElementType {\n  Sentence = 0,\n  Drawing = 1,\n}\n\ntype StepElement = HolyElement & {\n  parent: HolyElement;\n};\n\nexport default StepElement;\n","import Room from './Room.type';\n\ntype Session = {\n  id: number;\n  finishAt?: string;\n  stepFinishAt?: string;\n  createdAt: string;\n  actualStep: number;\n  timeDuration: number;\n  roomId: number;\n  currentAlbumId?: number;\n  room?: Room;\n  stepType: SessionStepType;\n  totalPlayers: number;\n  playerFinished: number;\n};\n\nexport enum SessionStepType {\n  Start = 0,\n  Draw = 1,\n  Write = 2,\n  Book = 3,\n}\n\nexport default Session;\n","import React from 'react';\nimport { getCoordinates } from 'utils/canvas.utils';\nimport { DrawingCanvasProviderProps } from './canvas.type';\nimport { DrawingCanvasContext } from './DrawingCanvasContext';\nimport useCanvasEventListener from './useCanvasEventListener';\nimport useCanvasPaint from './useCanvasPaint';\n\nconst canvasWidth = {\n  width: 512,\n  height: 320,\n  border: 4,\n  scale: 2,\n};\n\nconst ratio = 1.6;\n\nexport function DrawingCanvasProvider({\n  color = '#900050',\n  lineSize = 4,\n  disabled = false,\n  children,\n}: DrawingCanvasProviderProps) {\n  const [currentSize, setCurrentSize] = React.useState(canvasWidth);\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const [isPainting, setIsPainting] = React.useState(false);\n\n  const onResize = React.useCallback(() => {\n    const newWidth = canvasRef.current?.parentElement?.parentElement?.getBoundingClientRect()\n      .width;\n    if (!newWidth || newWidth < 64) return;\n\n    const scale = 1024 / newWidth;\n    const newHeight = newWidth / ratio;\n    const border = newWidth < 400 ? 2 : 4;\n    const noUpdateRange = 1;\n\n    if (\n      newWidth - noUpdateRange > currentSize.width ||\n      newWidth + noUpdateRange < currentSize.width\n    ) {\n      setCurrentSize({\n        width: newWidth - border * 2,\n        height: newHeight - border * 2,\n        border,\n        scale,\n      });\n    }\n  }, [currentSize.width]);\n\n  const {\n    paint,\n    create,\n    addLastLine,\n    clear,\n    undo,\n    refresh,\n    redo,\n  } = useCanvasPaint({\n    color,\n    size: lineSize,\n    canvasRef,\n    scale: currentSize.scale,\n  });\n\n  const onMouseDown = React.useCallback(\n    (event: MouseEvent, isNewLine: boolean = true) => {\n      const coordinates = getCoordinates(\n        event,\n        currentSize.scale,\n        canvasRef.current,\n      );\n      if (!coordinates) return;\n      setIsPainting(true);\n\n      create(coordinates, isNewLine);\n    },\n    [create, currentSize.scale],\n  );\n\n  const onMouseUp = React.useCallback(\n    (event: MouseEvent) => {\n      setIsPainting(false);\n      const coordinate = getCoordinates(event, currentSize.scale);\n      addLastLine(coordinate);\n    },\n    [addLastLine, currentSize.scale],\n  );\n\n  const onMouseEnter = React.useCallback(\n    (event: MouseEvent) => {\n      if (isPainting) onMouseDown(event, false);\n    },\n    [isPainting, onMouseDown],\n  );\n\n  const onMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      if (!isPainting || !canvasRef.current) return;\n      const newMousePosition = getCoordinates(\n        event,\n        currentSize.scale,\n        canvasRef.current,\n      );\n      paint(newMousePosition);\n    },\n    [currentSize.scale, isPainting, paint],\n  );\n\n  useCanvasEventListener({\n    canvasRef,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    onMouseMove,\n    isPainting,\n    onResize,\n    disabled,\n  });\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.width = currentSize.width * currentSize.scale;\n    canvas.height = currentSize.height * currentSize.scale;\n    refresh();\n  }, [canvasRef, refresh, currentSize]);\n\n  const values = React.useMemo(\n    () => ({ clear, undo, canvasRef, redo, size: currentSize }),\n    [clear, currentSize, redo, undo],\n  );\n\n  return (\n    <DrawingCanvasContext.Provider value={values}>\n      {children}\n    </DrawingCanvasContext.Provider>\n  );\n}\n","import React from 'react';\n\ntype UseCanvasEventListenerProps = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  isPainting?: boolean;\n  onMouseUp: (event: MouseEvent) => void;\n  onMouseEnter: (event: MouseEvent) => void;\n  onMouseMove: (event: MouseEvent) => void;\n  onMouseDown: (event: MouseEvent) => void;\n  onResize: (event: UIEvent) => void;\n  disabled?: boolean;\n};\n\nexport default function useCanvasEventListener({\n  canvasRef,\n  isPainting,\n  onMouseMove,\n  onMouseEnter,\n  onMouseDown,\n  onMouseUp,\n  disabled,\n  onResize,\n}: UseCanvasEventListenerProps) {\n  React.useEffect(() => {\n    if (!isPainting || disabled) return;\n\n    function touchMove(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseMove(mouseEvent);\n    }\n\n    window.document.addEventListener('mousemove', onMouseMove);\n    window.document.addEventListener('touchmove', touchMove);\n    return () => {\n      window.document.removeEventListener('mousemove', onMouseMove);\n      window.document.removeEventListener('touchmove', touchMove);\n    };\n  }, [disabled, isPainting, onMouseMove]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.addEventListener('mouseenter', onMouseEnter);\n    return () => {\n      canvas.removeEventListener('mouseenter', onMouseEnter);\n    };\n  }, [canvasRef, disabled, onMouseEnter]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    function touchStart(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseDown(mouseEvent);\n    }\n\n    canvas.addEventListener('mousedown', onMouseDown);\n    canvas.addEventListener('touchstart', touchStart);\n    window.document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      canvas.removeEventListener('mousedown', onMouseDown);\n      canvas.removeEventListener('touchstart', touchStart);\n      window.document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [canvasRef, disabled, onMouseDown, onMouseUp]);\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, [onResize]);\n}\n","import { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport Session, { SessionStepType } from 'types/Session.type';\n\nfunction useSessionStates() {\n  const [session, setSession] = React.useState<Session>();\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Session>('session/current', { token: getToken() }).then(\n      session => !deleted && setSession(session),\n      () => {\n        enqueueSnackbar('Sorry, an error occured 😕 [Session-GET]', {\n          variant: 'error',\n        });\n        history.push('/r/lobby');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  // handling page with the Session\n  React.useEffect(() => {\n    const pathname = history.location.pathname;\n    let newPathname = '';\n    switch (session?.stepType) {\n      case SessionStepType.Start:\n        newPathname = '/r/start';\n        break;\n      case SessionStepType.Write:\n        newPathname = '/r/write';\n        break;\n      case SessionStepType.Draw:\n        newPathname = '/r/draw';\n        break;\n      case SessionStepType.Book:\n        newPathname = '/r/book';\n        break;\n    }\n    // change only if pathname is different than before\n    if (newPathname && pathname !== newPathname) history.push(newPathname);\n  }, [session?.stepType, history]);\n\n  return { session, setSession };\n}\n\nexport default useSessionStates;\n","import Loading from 'components/Loading';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport StepElement, { ElementType } from 'types/HolyElement.type';\nimport HolyElement from 'types/HolyElement.type';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Session from '../types/Session.type';\nimport { parseJson } from '../utils/json';\nimport useSessionStates from './useSessionStates';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype SessionContextProps = {\n  session?: Session;\n  currentElement?: HolyElement;\n  onSave: (content: string) => Promise<void>;\n};\n\nconst SessionContext = React.createContext<SessionContextProps>({\n  onSave: () => Promise.resolve(),\n});\n\ntype SessionContextProviderProps = { children: React.ReactElement };\n\nexport function SessionContextProvider({\n  children,\n}: SessionContextProviderProps) {\n  const { session, setSession } = useSessionStates();\n  const [currentElement, setCurrentElement] = React.useState<StepElement>();\n  const { websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onSave(content: string): Promise<void> {\n    const elementId = currentElement?.id;\n\n    const elementContent =\n      currentElement?.type === ElementType.Drawing\n        ? { drawimage: content }\n        : { text: content };\n\n    return new Promise(resolve => {\n      client<HolyElement>(`element/${elementId}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: elementContent,\n      })\n        .then(element => {\n          enqueueSnackbar('Element Saved 😎', { variant: 'success' });\n          setCurrentElement(e => ({ ...e, ...element }));\n        })\n        .catch(() =>\n          enqueueSnackbar('Sorry, an error occured while saving 😕', {\n            variant: 'error',\n          }),\n        )\n        .finally(() => resolve());\n    });\n  }\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.SessionUpdate:\n          const session = websocketMessage.session;\n          setSession(prev => prev && { ...prev, ...session });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [session, setSession, websocket]);\n\n  React.useEffect(() => {\n    if (!session?.actualStep) return;\n\n    let deleted = false;\n    client<HolyElement>('element/current', { token: getToken() }).then(\n      session => !deleted && setCurrentElement(session),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [Element-GET]', {\n          variant: 'error',\n        }),\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, session?.actualStep]);\n\n  const values = { session, currentElement, onSave };\n\n  return (\n    <SessionContext.Provider value={values}>\n      {session ? children : <Loading />}\n    </SessionContext.Provider>\n  );\n}\n\nexport function useSessionContext() {\n  const context = React.useContext(SessionContext);\n  if (!context)\n    throw new Error(\n      'useSessionContext should be used within a SessionContextProvider',\n    );\n  return context;\n}\n","export const callAll = (...fns: (any | undefined)[]) => (...args: any) =>\n  fns.forEach((fn: any) => fn && fn(...args));\n\nexport function getRandomValueFromArray<T>(possibilities: T[]): T {\n  return possibilities[Math.floor(Math.random() * possibilities.length)];\n}\n","import { useSessionContext } from 'hooks/SessionProvider';\nimport { useTimerEvent } from 'hooks/useTimerInterval';\nimport React from 'react';\nimport { callAll } from 'utils/utils';\nimport { useCanvasContext } from './DrawingCanvasContext';\nimport { client } from 'api/client';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { getToken } from 'api/player-provider';\n\n/*\n * All this component will injected on click event on the children.\n * Those event will match with the name of component.\n * They be only used inside a <DrawingCanvasContext>\n */\n\n// clear all line on the canvas\nexport function OnClearAction({ children }: { children: React.ReactElement }) {\n  const { clear } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(clear, children.props.onClick),\n  });\n}\n\n// undo last line on the canvas\nexport function OnUndoAction({ children }: { children: React.ReactElement }) {\n  const { undo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(undo, children.props.onClick),\n  });\n}\n\n// redo last line \"undo\" if exist on the canvas\nexport function OnRedoAction({ children }: { children: React.ReactElement }) {\n  const { redo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(redo, children.props.onClick),\n  });\n}\n\n// this component will not injected onClick but call the onSave on click on children\n// the onSave will contain the big data url of canvas\nexport function OnSaveAction({\n  children,\n  onSave,\n}: {\n  children: React.ReactElement;\n  onSave: (drawImage?: string) => void;\n}) {\n  const { currentElement, session } = useSessionContext();\n  const { canvasRef } = useCanvasContext();\n\n  useTimerEvent({\n    finishAt: new Date(session?.stepFinishAt || ''),\n    timeDuration: session?.timeDuration || 60,\n    onFinish: () => {\n      client<HolyElement>(`element/auto/${currentElement?.id}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: { draw: canvasRef?.current?.toDataURL() },\n      });\n    },\n    onFinishPercentage: 99,\n  });\n\n  return React.cloneElement(children, {\n    onClick: () => {\n      onSave(canvasRef.current?.toDataURL());\n      children.props.onClick?.();\n    },\n  });\n}\n","import React, { useState } from 'react';\nimport BigButton from '../components/BigButton';\nimport PlayerCount from '../components/room/PlayerCount';\nimport HolyDrawLogo from '../components/HolyDrawLogo';\nimport BigInput from '../components/BigInput';\nimport PlayerCard from '../components/room/lobby/PlayerCard';\nimport PlayerCardList from '../components/room/lobby/PlayerCardList';\nimport StepTimer from '../components/room/StepTimer';\nimport profilesPictures from '../images/profiles/profiles-pictures';\nimport DirectiveLabel from '../components/room/DirectiveLabel';\nimport PlayerAvatar from '../components/home/PlayerAvatar';\nimport DrawColorPicker from '../components/room/draw/DrawColorPicker';\nimport SizePicker from '../components/room/draw/SizePicker';\nimport ShareRoomButton from '../components/room/lobby/ShareRoomButton';\nimport BookPlayerList from '../components/room/book/BookPlayerList';\nimport ButtonModalJoin from '../components/home/ButtonModalJoin';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport testPlayerList from '__tests__/json/players.json';\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew';\nimport { Box, FormControlLabel, IconButton, Switch } from '@material-ui/core';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport StartButton from 'components/room/lobby/StartButton';\nimport StepProgress from 'components/room/StepProgress';\nimport { Slider } from '@material-ui/core';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport GymGuy from 'images/gym-guy.svg';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport {\n  OnClearAction,\n  OnUndoAction,\n  OnSaveAction,\n  OnRedoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nconst colors = [\n  '#000000',\n  '#7f8c8d',\n  '#bdc3c7',\n  '#ecf0f1',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#e74c3c',\n  '#c0392b',\n  '#FA00FF',\n  '#FDA7DF',\n  '#FEAFA8',\n  '#CB5A57',\n  '#FFC312',\n  '#F79F1F',\n];\n\nexport default function ComponentTest() {\n  const [ppIndex, setPpIndex] = useState(0);\n  const [color, setColor] = useState(colors[5]);\n  const [mobileCanvas, setMobileCanvas] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [size, setSize] = useState(8);\n  const [progress, setProgress] = React.useState<number>(1);\n\n  const handleChange = (event: any, newValue: any) => {\n    setProgress(newValue);\n  };\n\n  const nextPp = () => {\n    setPpIndex(p => (p > profilesPictures.length - 2 ? 0 : p + 1));\n  };\n\n  return (\n    <Box>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        width=\"100%\"\n        gridGap={32}>\n        <HolyDrawLogo />\n\n        <Box>\n          <BookSentenceElement\n            username=\"Houn Salade\"\n            avatarUrl={profilesPictures[ppIndex]}>\n            Combien sont ces six saucissons-ci ?\n          </BookSentenceElement>\n        </Box>\n\n        <BookDrawingElement username=\"Jean-Philippes-Pascal\" src={GymGuy} />\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={mobileCanvas}\n              onChange={e => setMobileCanvas(e.target.checked)}\n            />\n          }\n          label=\"Is mobile canvas\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={disabled}\n              onChange={e => setDisabled(e.target.checked)}\n            />\n          }\n          label=\"Is canvas disabled\"\n        />\n        <Box display=\"flex\" width=\"100%\" maxWidth={1000} flexDirection=\"column\">\n          <DrawingCanvasProvider\n            color={color}\n            disabled={disabled}\n            lineSize={size}>\n            <Box display=\"flex\" width=\"100%\" flexWrap=\"wrap\">\n              <Box width=\"100%\">\n                <DrawingCanvas disabled={disabled} />\n              </Box>\n              <Box display=\"flex\" flexDirection=\"column\">\n                <OnClearAction>\n                  <IconButton>\n                    <DeleteIcon />\n                  </IconButton>\n                </OnClearAction>\n                <OnUndoAction>\n                  <IconButton>\n                    <UndoIcon />\n                  </IconButton>\n                </OnUndoAction>\n                <OnRedoAction>\n                  <IconButton>\n                    <RedoIcon />\n                  </IconButton>\n                </OnRedoAction>\n              </Box>\n\n              <DrawColorPicker\n                colors={colors}\n                currentColor={color}\n                onColorChange={color => setColor(color)}\n              />\n              <SizePicker\n                currentSize={size}\n                onSizeChange={size => setSize(size)}\n                flexDirection=\"column\"\n              />\n            </Box>\n\n            <OnSaveAction\n              onSave={canvasImage => {\n                if (!canvasImage) return;\n                const win = window.open();\n                win?.document.write(\n                  '<iframe width=\"1200px\" height=\"700px\" src=' +\n                    canvasImage +\n                    '></iframe>',\n                );\n              }}>\n              <BigButton size=\"large\">Submit</BigButton>\n            </OnSaveAction>\n          </DrawingCanvasProvider>\n        </Box>\n\n        <StepTimer\n          finishAt={new Date('2021-03-30T08:31:00')}\n          timeDuration={120}\n        />\n        <ButtonModalJoin\n          loading={false}\n          identifier={undefined}\n          onClick={() => void 0}></ButtonModalJoin>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n        <BigInput\n          onChange={() => void 0}\n          value={'didier'}\n          startIcon={<AccessibilityNewIcon />}\n        />\n        <ShareRoomButton identifier=\"LH4AH3\" />\n        <PlayerCard\n          id={1}\n          name=\"John Doe\"\n          avatar={profilesPictures[ppIndex]}\n          isOwner={true}\n          isKickable={false}\n          onKick={id => void 0}\n        />\n\n        <BigButton size=\"large\" onClick={nextPp}>\n          Test\n        </BigButton>\n\n        <StartButton player={testPlayerList[1]} onStart={() => void 0} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          playerId={3}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n        <DirectiveLabel sentence=\"Salzt\" directive=\"bonsoir\" />\n\n        <SpinnerIcon />\n\n        <PlayerCount count={8} max={12} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n\n        <BookPlayerList players={testPlayerList} playerId={2} />\n\n        <Slider\n          defaultValue={progress}\n          onChange={handleChange}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={1}\n          min={1}\n          max={7}\n        />\n\n        <StepProgress stepActual={progress} stepMax={7} />\n      </Box>\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\nexport default function DevNav() {\n  return (\n    <Box p={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <h1>You're in DevNav</h1>\n      {/* With react-router-dom it's not a good practive do don't use\n          <Link /> but Rsuits alredy render a link */}\n      <NavLink to=\"/\">Dev nav</NavLink>\n      <NavLink to=\"/r/start\">Go Room Start</NavLink>\n      <NavLink to=\"/r/write\">Go Room Write</NavLink>\n      <NavLink to=\"/r/draw\">Go Room Draw</NavLink>\n      <NavLink to=\"/r/lobby\">Go Room Lobby</NavLink>\n      <NavLink to=\"/r\">Go Room</NavLink>\n      <NavLink to=\"/home\">Go home</NavLink>\n      <NavLink to=\"/t\">Go to TESTS pages</NavLink>\n    </Box>\n  );\n}\n\nfunction NavLink({ to, children }: any) {\n  return (\n    <Box\n      p={1}\n      bgcolor=\"background.default\"\n      m={1}\n      borderRadius={2}\n      border={1}\n      borderColor=\"primary.main\">\n      <Link to={to} style={{ color: 'white' }}>\n        {children}\n      </Link>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst usernames = [\n  'God',\n  'Mushu the Dragon',\n  'Bob Razowski',\n  'Macco',\n  'Woody Woodpecker',\n  'Mr Potato',\n  'Nemo',\n  'Shrek',\n  'Staline',\n  'Krokette',\n  'Little Otter',\n  'Bob the bob',\n  'SavageWolf',\n  'Padawan',\n  'BigBear',\n  'BigFather',\n  'Terminator',\n  'Stitch',\n];\n\nexport function useRandomUsername() {\n  const usernameRef = React.useRef(getRandomValueFromArray(usernames));\n\n  return usernameRef.current;\n}\n","import { useRandomUsername } from 'hooks/useRandomUsername';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from 'api/client';\nimport { setToken } from 'api/player-provider';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport Player from 'types/Player.type';\nimport BigButton from '../BigButton';\nimport BigInput from '../BigInput';\nimport ButtonModalJoin from './ButtonModalJoin';\nimport PlayerAvatar from './PlayerAvatar';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { Box, Grid, makeStyles } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nconst useStyles = makeStyles(theme => ({\n  marginButton: {\n    marginLeft: theme.spacing(2),\n  },\n}));\n\nexport default function PlayerForm({ identifier }: { identifier?: string }) {\n  const [username, setUsername] = React.useState('');\n  const [ppIndex, setPpIndex] = React.useState(0);\n  const [loading, setLoading] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n  const defaultUsername = useRandomUsername();\n  const classes = useStyles();\n\n  const nextPp = () => {\n    setPpIndex((p: number) => (p >= profilesPictures.length - 1 ? 0 : p + 1));\n  };\n\n  function onConnect(token: string, text: string, isSuccess: boolean = true) {\n    enqueueSnackbar(text, { variant: 'success' });\n    setToken(token);\n    history?.push('/r/lobby');\n  }\n\n  function onCreate() {\n    setLoading(true);\n    client<Player>('room', {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, 'Room successfully created 🙌');\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  function onJoin(identifier: string) {\n    const catchedIdentifier = identifier.startsWith('http')\n      ? identifier.split('/').pop()\n      : identifier;\n    setLoading(true);\n    client<Player>(`room/join/${catchedIdentifier}`, {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n      method: 'PATCH',\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, \"You've joined the room!\");\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-PATCH]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <>\n      <Grid item>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n      </Grid>\n\n      <Grid item>\n        <Box display=\"flex\" flexDirection=\"column\" mb={1} px={1} maxWidth={356}>\n          <BigInput\n            value={username}\n            fullWidth\n            onChange={e => setUsername(e.target.value)}\n            placeholder={defaultUsername}\n          />\n\n          <Box display=\"flex\" mt={2}>\n            <ButtonModalJoin\n              identifier={identifier}\n              onClick={onJoin}\n              loading={loading}\n            />\n\n            {!identifier && (\n              <BigButton\n                fullWidth\n                className={classes.marginButton}\n                color=\"primary\"\n                startIcon={<PlayArrowIcon style={{ fontSize: 32 }} />}\n                onClick={onCreate}\n                loading={loading}>\n                Create\n              </BigButton>\n            )}\n          </Box>\n        </Box>\n      </Grid>\n    </>\n  );\n}\n","import { RouteComponentProps } from 'react-router-dom';\nimport HolyDrawLogo from 'components/HolyDrawLogo';\nimport PlayerForm from 'components/home/PlayerForm';\nimport { Grid } from '@material-ui/core';\n\nexport default function Home(\n  props: RouteComponentProps<{ identifier?: string }>,\n) {\n  const identifier = props.match.params.identifier;\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className=\"full-height\"\n      justify=\"space-between\">\n      <Grid item>\n        <HolyDrawLogo width={32} />\n      </Grid>\n      <PlayerForm identifier={identifier} />\n    </Grid>\n  );\n}\n","import PlayerCount from './room/PlayerCount';\nimport StepTimer from './room/StepTimer';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { Box } from '@material-ui/core';\n\ntype GameBarProps = {\n  onFinish?: () => void;\n};\n\nexport default function GameBar({ onFinish }: GameBarProps) {\n  const { session } = useSessionContext();\n  return (\n    <Box\n      display=\"flex\"\n      flexWrap=\"wrap\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      p={1}\n      px={{ xs: 2, sm: 4 }}\n      justifyContent=\"space-between\"\n      width=\"100%\">\n      <Box width={{ xs: 32, sm: 64 }}>\n        <PlayerCount\n          count={session?.playerFinished || 0}\n          max={session?.totalPlayers || 0}\n        />\n      </Box>\n\n      <Box width={{ xs: 32, sm: 64 }}>\n        <StepTimer\n          finishAt={new Date(session?.stepFinishAt || '')}\n          timeDuration={session?.timeDuration || 60}\n          onFinish={onFinish}\n        />\n      </Box>\n    </Box>\n  );\n}\n","import { Box, Container } from '@material-ui/core';\nimport { Breakpoint } from '@material-ui/core/styles/createBreakpoints';\nimport GameBar from 'components/GameBar';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport React from 'react';\nimport StepProgress from './StepProgress';\n\ntype GameLayoutProps = {\n  maxWidth?: Breakpoint;\n  children: React.ReactElement | React.ReactElement[];\n};\n\nexport default function GameLayout({\n  maxWidth = 'sm',\n  children,\n}: GameLayoutProps) {\n  return (\n    <Box height=\"100vh\" display=\"flex\" flexDirection=\"column\">\n      <GameBar />\n      <Container maxWidth={maxWidth} className=\"full-height\">\n        {children}\n      </Container>\n      {<StepProgressWithContext />}\n    </Box>\n  );\n}\n\nconst StepProgressWithContext = () => {\n  const { session } = useSessionContext();\n  return (\n    <StepProgress\n      stepActual={session?.actualStep}\n      stepMax={session?.totalPlayers}\n    />\n  );\n};\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport StartButton from '../lobby/StartButton';\nimport { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport { useState } from 'react';\n\nexport default function BookStartAction() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { player } = usePlayerContext();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function onStart() {\n    setIsLoading(true)\n    client<null>('session/album/next', {\n      method: 'POST',\n      token: getToken(),\n    })\n      .then(\n        () =>\n          enqueueSnackbar(\n            'Album successfully started, wait 3 seconds before starting 💪',\n            { variant: 'success' },\n          ),\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Session-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setIsLoading(false));\n  }\n\n  return <StartButton onStart={onStart} isLoading={isLoading} startName=\"book\" player={player} />;\n}\n","import { Box, Typography } from '@material-ui/core';\nimport { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport Loading from 'components/Loading';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport React from 'react';\n\nimport { ElementType, HolyElement } from 'types/HolyElement.type';\n\nexport default function BookMock() {\n  const { session } = useSessionContext();\n  const [album, setAlbum] = React.useState<HolyElement[][]>([]);\n\n  React.useEffect(() => {\n    client<HolyElement[]>(`album/${session?.id || 1}`, { token: getToken() })\n      .then(elements => {\n        const sortedElements = elements.reduce(\n          (accumulator: Record<number, HolyElement[]>, value: HolyElement) => {\n            if (!value.initiatorId) return accumulator;\n            if (accumulator[value.initiatorId]) {\n              accumulator[value.initiatorId].push(value);\n              return accumulator;\n            }\n            accumulator[value.initiatorId] = [value];\n            return accumulator;\n          },\n          {},\n        );\n        const flatArray: HolyElement[][] = [];\n        Object.keys(sortedElements).forEach((key: any) =>\n          flatArray.push(sortedElements[key]),\n        );\n        setAlbum(flatArray);\n      })\n      .catch(alert);\n  }, [session?.id]);\n\n  return album.length >= 1 ? (\n    <Box display=\"flex\" flexDirection=\"row\">\n      {album.map(elements => {\n        return (\n          <Box display=\"flex\" flexDirection=\"column\" maxWidth={300}>\n            <Typography variant=\"h4\">\n              {elements[0].creator?.username}\n            </Typography>\n            {elements.map(element => {\n              const isSentence = element.type === ElementType.Sentence;\n              return isSentence ? (\n                <BookSentenceElement\n                  key={element.id}\n                  username={element.creator?.username}\n                  avatarUrl={\n                    profilesPictures[Number(element.creator?.avatarUrl)]\n                  }>\n                  {element.text}\n                </BookSentenceElement>\n              ) : (\n                <BookDrawingElement\n                  key={element.id}\n                  username={element.creator?.username}\n                  src={element.drawImage}\n                />\n              );\n            })}\n          </Box>\n        );\n      })}\n    </Box>\n  ) : (\n    <Box>\n      <Loading />\n    </Box>\n  );\n}\n","import React from 'react';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { parseJson } from '../utils/json';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype AlbumContextProps = {\n  albums?: Record<number, HolyElement[]>;\n};\n\nconst AlbumContext = React.createContext<AlbumContextProps>({});\n\ntype AlbumContextProviderProps = { children: React.ReactElement };\n\n/*\n  AlbumContextProvider return `albums` than contain objects like this :\n\n  44: [               <- is the id of the initiator \n    { id: 3, ... },   <- element with the same initiator id, the first element creator is equal to the initiator\n    { id: 4, ... },\n  ],\n  45: [\n    ...\n  ]\n*/\nexport function AlbumContextProvider({ children }: AlbumContextProviderProps) {\n  const [albums, setAlbums] = React.useState<Record<number, HolyElement[]>>({});\n  const { websocket } = useWebsocketContext();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewAlbumElement:\n          if (!websocketMessage.album) break;\n\n          const album = websocketMessage.album;\n          setAlbums(prevAlbums => {\n            if (!album.initiatorId) return prevAlbums;\n            const prevAlbumsCopy = { ...prevAlbums };\n\n            if (prevAlbumsCopy[album.initiatorId]) {\n              prevAlbumsCopy[album.initiatorId].push(album);\n            } else {\n              prevAlbumsCopy[album.initiatorId] = [album];\n            }\n\n            return prevAlbumsCopy;\n          });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [websocket]);\n\n  const values = { albums };\n\n  return (\n    <AlbumContext.Provider value={values}>{children}</AlbumContext.Provider>\n  );\n}\n\nexport function useAlbumContext() {\n  const context = React.useContext(AlbumContext);\n  if (!context)\n    throw new Error(\n      'useAlbumContext should be used within a AlbumContextProvider',\n    );\n  return context;\n}\n","import BookPlayerList from 'components/room/book/BookPlayerList';\nimport React from 'react';\nimport GameLayout from 'components/room/GameLayout';\nimport { Grid } from '@material-ui/core';\nimport BookStartAction from 'components/room/book/BookStartAction';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport BookMock from 'components/room/book/BookMock';\nimport { AlbumContextProvider } from 'hooks/AlbumProvider';\n\nexport default function Book() {\n  const { players } = useRoomContext();\n  return (\n    <AlbumContextProvider>\n      <GameLayout maxWidth=\"sm\">\n        <BookMock />\n        <Grid\n          container\n          spacing={2}\n          direction=\"column\"\n          alignItems=\"center\"\n          className=\"full-height\"\n          wrap=\"nowrap\"\n          justify=\"space-between\">\n          <Grid item>\n            <BookPlayerList players={players} />\n          </Grid>\n          <Grid item>\n            <BookStartAction />\n          </Grid>\n        </Grid>\n      </GameLayout>\n    </AlbumContextProvider>\n  );\n}\n","import { Box, IconButton } from '@material-ui/core';\nimport {\n  OnClearAction,\n  OnRedoAction,\n  OnUndoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\n\nexport default function CanvasActionButtons() {\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <OnClearAction>\n        <IconButton>\n          <DeleteIcon />\n        </IconButton>\n      </OnClearAction>\n      <OnUndoAction>\n        <IconButton>\n          <UndoIcon />\n        </IconButton>\n      </OnUndoAction>\n      <OnRedoAction>\n        <IconButton>\n          <RedoIcon />\n        </IconButton>\n      </OnRedoAction>\n    </Box>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport { OnSaveAction } from 'components/canvas/DrawingCanvasActions';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport CanvasActionButtons from 'components/room/draw/CanvasActionButtons';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport theme from 'theme';\nimport { useState } from 'react';\n\ntype GameCanvasProps = {\n  size: number;\n  color: string;\n};\n\nexport default function GameCanvas({ size, color }: GameCanvasProps) {\n  // will be used when we will implement the GameCanvasV2\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { currentElement, onSave } = useSessionContext();\n  const isEditing = Boolean(!currentElement?.finishAt);\n  const [loading, setLoading] = useState(false);\n\n  return (\n    <DrawingCanvasProvider color={color} disabled={!isEditing} lineSize={size}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        gridGap={8}\n        alignItems=\"center\">\n        <Box maxWidth={512} width=\"100%\">\n          <DrawingCanvas disabled={!isEditing} />\n        </Box>\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          gridGap={8}\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n          width=\"100%\">\n          <CanvasActionButtons />\n          <OnSaveAction\n            onSave={canvasImage => {\n              if (!canvasImage) return;\n              setLoading(true);\n              onSave(canvasImage).then(() => setLoading(false));\n            }}>\n            <BigButton\n              loading={loading}\n              startIcon={\n                isEditing ? (\n                  <SaveIcon style={{ fontSize: 32 }} />\n                ) : (\n                  <EditIcon style={{ fontSize: 32 }} />\n                )\n              }\n              color=\"primary\"\n              size=\"medium\">\n              {isEditing ? 'Save' : 'Edit'}\n            </BigButton>\n          </OnSaveAction>\n        </Box>\n      </Box>\n    </DrawingCanvasProvider>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport DrawColorPicker from 'components/room/draw/DrawColorPicker';\nimport SizePicker from 'components/room/draw/SizePicker';\nimport GameLayout from 'components/room/GameLayout';\nimport GameCanvas from 'components/room/draw/GameCanvas';\nimport { useState } from 'react';\nimport theme from 'theme';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { useDisableBodyOverflow } from 'components/room/draw/useDisableBodyOverflow';\n\nconst colors = [\n  '#000000',\n  '#7f8c8d',\n  '#bdc3c7',\n  '#ecf0f1',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#e74c3c',\n  '#c0392b',\n  '#FA00FF',\n  '#FDA7DF',\n  '#FEAFA8',\n  '#CB5A57',\n  '#FFC312',\n  '#F79F1F',\n];\n\nexport default function Draw() {\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const [color, setColor] = useState(colors[5]);\n  const [size, setSize] = useState(8);\n  useDisableBodyOverflow();\n  return (\n    <GameLayout maxWidth=\"md\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        gridGap={16}>\n        <Box width=\"100%\" maxWidth={682}>\n          <CurrentDirectiveLabel />\n        </Box>\n\n        <Box\n          display=\"flex\"\n          width=\"100%\"\n          justifyContent={{ xs: 'center', sm: 'auto' }}\n          flexDirection={{ xs: 'column', sm: 'row' }}\n          gridGap={16}>\n          <Box order={{ xs: 1, sm: 0 }}>\n            <DrawColorPicker\n              colors={colors}\n              currentColor={color}\n              onColorChange={color => setColor(color)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n\n          <GameCanvas size={size} color={color} />\n          <Box order={{ xs: 2, sm: 0 }}>\n            <SizePicker\n              currentSize={size}\n              onSizeChange={size => setSize(size)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n        </Box>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDirectiveLabel() {\n  const { currentElement } = useSessionContext();\n  return (\n    <DirectiveLabel\n      directive=\"Time to Draw\"\n      sentence={currentElement?.parent?.text}\n    />\n  );\n}\n","import React from 'react';\n\n/*\n  This hook will add style with `overflow: hidden` and remove it on cleanup\n*/\nexport function useDisableBodyOverflow() {\n  const styleElement = React.useRef(document.createElement('style'));\n\n  React.useEffect(() => {\n    const currentStyle = styleElement.current;\n\n    currentStyle.innerHTML = 'body { overflow: hidden; }';\n\n    document.getElementsByTagName('head')[0].appendChild(currentStyle);\n    return () => {\n      document.getElementsByTagName('head')[0].removeChild(currentStyle);\n    };\n  }, []);\n}\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport { client } from 'api/client';\nimport Session from 'types/Session.type';\nimport StartButton from './StartButton';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport { useState } from 'react';\n\nexport default function LobbyStartAction() {\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function onStart() {\n    setIsLoading(true);\n    client<Session>('session', { method: 'POST', token: getToken() })\n      .then(\n        () =>\n          enqueueSnackbar('Game successfully started 💪', {\n            variant: 'success',\n          }),\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Session-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setIsLoading(false));\n  }\n\n  return (\n    <StartButton onStart={onStart} isLoading={isLoading} player={player} />\n  );\n}\n","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogTitle } from '@material-ui/core';\n\ntype KickModalProps = {\n  open: boolean;\n  username?: string;\n  onKick: () => void;\n  onClose: () => void;\n};\n\nexport function KickModal({ open, username, onKick, onClose }: KickModalProps) {\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" open={open} onClose={() => onClose()}>\n      <DialogTitle>Do you really want to kick {username} ?</DialogTitle>\n      <DialogActions>\n        <Button onClick={() => onClose()} color=\"secondary\">\n          Cancel 👋\n        </Button>\n        <Button onClick={() => onKick()} color=\"secondary\">\n          Kick 🤫\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport { client } from 'api/client';\nimport { usePlayerContext } from 'hooks/PlayerProvider';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport Loading from '../../Loading';\nimport PlayerCount from '../../room/PlayerCount';\nimport BookPlayerList from '../book/BookPlayerList';\nimport PlayerCardList from './PlayerCardList';\nimport { Box, useMediaQuery, useTheme } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\nimport { KickModal } from './KickModal';\n\nexport function Players() {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { players } = useRoomContext();\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n  const [playerToKick, setPlayerToKick] = React.useState<{\n    id: number;\n    name: string;\n  } | null>(null);\n\n  function onKick(id: number, name: string) {\n    setPlayerToKick({ id, name });\n  }\n\n  function kickPlayer(id: number) {\n    const url = `player/players/${id}/kick`;\n    client(url, {\n      token: player?.token?.tokenKey,\n      method: 'PATCH',\n    }).then(\n      () => enqueueSnackbar('Player kicked 😎', { variant: 'success' }),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [kick-PATCH]', {\n          variant: 'error',\n        }),\n    );\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\">\n      {players?.length > 0 ? (\n        isDeviceSM ? (\n          <PlayerCardList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onKick={(id, name) => onKick(id, name)}\n          />\n        ) : (\n          <BookPlayerList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onClick={(id, name) => onKick(id, name)}\n          />\n        )\n      ) : (\n        <Loading />\n      )}\n      <KickModal\n        open={Boolean(playerToKick)}\n        username={playerToKick?.name}\n        onKick={() => {\n          if (!playerToKick) return;\n          kickPlayer(playerToKick?.id);\n          setPlayerToKick(null);\n        }}\n        onClose={() => setPlayerToKick(null)}\n      />\n    </Box>\n  );\n}\n\nexport function PlayerCountBox() {\n  const { players } = useRoomContext();\n\n  return (\n    <Box pr={{ xs: 1, md: 2 }}>\n      <PlayerCount count={players?.length || 0} max={12} />\n    </Box>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport ShareRoomButton from './ShareRoomButton';\n\nexport default function SettingsMenu() {\n  const { room, wsState } = useRoomContext();\n  return (\n    <Box\n      borderRadius=\"0 4px 4px 0\"\n      minWidth={328}\n      pl={2}\n      height=\"auto\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems={{ xs: 'center', sm: 'flex-start' }}\n      gridGap={24}>\n      <Typography variant=\"h5\">{wsState}</Typography>\n      <ShareRoomButton identifier={room?.identifier} />\n    </Box>\n  );\n}\n","import HolyDrawLogo from 'components/HolyDrawLogo';\nimport LobbyStartButton from 'components/room/lobby/LobbyStartAction';\nimport { Players, PlayerCountBox } from 'components/room/lobby/Players';\nimport SettingsMenu from 'components/room/lobby/SettingsMenu';\nimport { Box, fade, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  playersContainer: {\n    alignItems: 'center',\n    flexDirection: 'column',\n    gap: 64,\n    [theme.breakpoints.up('sm')]: {\n      alignItems: 'flex-start',\n      flexDirection: 'row',\n    },\n  },\n  container: {\n    backgroundColor: fade(theme.palette.background.default, 0.8),\n  },\n}));\n\nexport default function Lobby() {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      height=\"100vh\"\n      alignItems=\"center\"\n      width=\"100%\">\n      <Box mb={3} width=\"100%\" display=\"flex\" justifyContent=\"center\">\n        <HolyDrawLogo width={32} />\n      </Box>\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        width=\"100%\"\n        m={3}\n        height=\"100vh\"\n        alignItems=\"center\"\n        flexDirection=\"column\">\n        <Box\n          display=\"flex\"\n          className={classes.container}\n          flexDirection=\"column\"\n          alignItems=\"flex-end\"\n          width=\"100%\">\n          <PlayerCountBox />\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            width=\"100%\"\n            className={classes.playersContainer}>\n            <SettingsMenu />\n            <Players />\n          </Box>\n        </Box>\n        <LobbyStartButton />\n      </Box>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst sentences = [\n  'A samurai eating a kebab with samouraï sauce',\n  'A man walking on the ceiling',\n  'A gas station on fire',\n  'A T-Rex playing chess with monkeys',\n  'Someone watching himself on TV',\n  \"Pinocchio but he's made of iron\",\n  'A nice shark without teeth',\n  'A knight far too tall',\n  'A man chained by circus animals',\n  'A shipwreck on a chocolate island',\n  'An invasion of multicolored aliens',\n  'Spongebob becoming HandBob',\n  'New colony on Mars leaded by Musk',\n  'Sad jedi because the force is not with him',\n  'Godzilla VS King Kong',\n  'Woman pissed of by noisy neighbors',\n  'A world where sofas and humans are interchanged',\n  \"Stitch meeting The Rock at Shrek's birthday\",\n];\n\nexport function useRandomSentence() {\n  const sentenceRef = React.useRef(getRandomValueFromArray(sentences));\n\n  return sentenceRef.current;\n}\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport BigInput from 'components/BigInput';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useRandomSentence } from 'hooks/useRandomSentence';\nimport { useTimerEvent } from 'hooks/useTimerInterval';\nimport { client } from 'api/client';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { getToken } from 'api/player-provider';\n\nexport default function StartForm() {\n  const { session, currentElement, onSave } = useSessionContext();\n  const [sentence, setSentence] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n  const isEditing = Boolean(!currentElement?.finishAt);\n  const defaultSentence = useRandomSentence();\n\n  useTimerEvent({\n    finishAt: new Date(session?.stepFinishAt || ''),\n    timeDuration: session?.timeDuration || 60,\n    onFinish: () => {\n      client<HolyElement>(`element/auto/${currentElement?.id}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: { text: sentence },\n      });\n    },\n    onFinishPercentage: 98,\n  });\n\n  return (\n    <>\n      <Grid item className=\"full-width\">\n        <BigInput\n          disabled={!isEditing}\n          placeholder={defaultSentence}\n          startIcon={<EditIcon />}\n          value={sentence}\n          onChange={e => setSentence(e.target.value)}\n        />\n      </Grid>\n      <Grid item>\n        <BigButton\n          loading={loading}\n          disabled={sentence.length === 0}\n          onClick={() => {\n            setLoading(true);\n            onSave(sentence).then(() => setLoading(false));\n          }}\n          startIcon={\n            isEditing ? (\n              <SaveIcon style={{ fontSize: 32 }} />\n            ) : (\n              <EditIcon style={{ fontSize: 32 }} />\n            )\n          }\n          size=\"large\">\n          {isEditing ? 'Save' : 'Edit'}\n        </BigButton>\n      </Grid>\n    </>\n  );\n}\n","import GymGuy from 'images/gym-guy.svg';\nimport { Grid, Typography } from '@material-ui/core';\nimport SentenceForm from 'components/room/start/SentenceForm';\nimport GameLayout from 'components/room/GameLayout';\n\nexport default function Start() {\n  return (\n    <GameLayout maxWidth=\"sm\">\n      <Grid\n        container\n        spacing={2}\n        direction=\"column\"\n        alignItems=\"center\"\n        className=\"full-height\"\n        wrap=\"nowrap\"\n        justify=\"center\">\n        <Grid item>\n          <img src={GymGuy} alt=\"\" width={384} />\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h4\">Start a story</Typography>\n        </Grid>\n        <SentenceForm />\n      </Grid>\n    </GameLayout>\n  );\n}\n","import { Box, Grid, makeStyles } from '@material-ui/core';\nimport StartForm from 'components/room/start/SentenceForm';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport GameLayout from 'components/room/GameLayout';\nimport CurrentDrawImage from 'components/room/CurrentDrawImage';\nimport { useSessionContext } from 'hooks/SessionProvider';\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 512,\n    height: 'auto',\n    minHeight: 320,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      minHeight: 0,\n    },\n  },\n}));\n\nexport default function Write() {\n  const classes = useStyles();\n  return (\n    <GameLayout>\n      <Box maxWidth={520}>\n        <Grid\n          container\n          spacing={2}\n          direction=\"column\"\n          alignItems=\"center\"\n          className=\"full-height\"\n          wrap=\"nowrap\"\n          justify=\"center\">\n          <Grid item className=\"full-width\">\n            <DirectiveLabel directive=\"Describe this scene\" />\n          </Grid>\n          <Grid item>\n            <CurrentDrawImageWithContext className={classes.width} />\n          </Grid>\n          <StartForm />\n        </Grid>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDrawImageWithContext({ className }: { className: string }) {\n  const { currentElement } = useSessionContext();\n  return (\n    <CurrentDrawImage\n      src={currentElement?.parent.drawImage}\n      className={className}\n    />\n  );\n}\n","import AppLayout from 'components/AppLayout';\nimport { BrowserRouter, HashRouter, Switch, Route } from 'react-router-dom';\nimport { PlayerContextProvider } from 'hooks/PlayerProvider';\nimport { RoomContextProvider } from 'hooks/RoomProvider';\nimport ComponentTest from 'pages/ComponentTest';\nimport DevNav from 'pages/DevNav';\nimport Home from 'pages/Home';\nimport Book from 'pages/room/Book';\nimport Draw from 'pages/room/Draw';\nimport Lobby from 'pages/room/Lobby';\nimport Start from 'pages/room/Start';\nimport Write from 'pages/room/Write';\nimport { WebsocketProvider } from 'hooks/WebsocketProvider';\nimport { SessionContextProvider } from 'hooks/SessionProvider';\n\nconst Router: any =\n  process.env.NODE_ENV === 'production' ? HashRouter : BrowserRouter;\n\nexport default function Routes() {\n  return (\n    <AppLayout>\n      <Router>\n        <Switch>\n          <Route path=\"/join/:identifier\" component={Home} />\n          <Route path=\"/start\" component={Start} />\n          <Route path=\"/r\" component={RoomRoutes} />\n          <Route path=\"/t\" component={ComponentTest} />\n          <Route path=\"/home\" component={Home} />\n          {/* For test, I add a special Nav\n          TODO: replace it by `Home` */}\n          <Route path=\"/\" component={DevNav} />\n        </Switch>\n      </Router>\n    </AppLayout>\n  );\n}\n\nfunction RoomRoutes() {\n  return (\n    <WebsocketProvider>\n      <PlayerContextProvider>\n        <RoomContextProvider>\n          <Switch>\n            <Route path=\"/r/lobby\" component={Lobby} />\n            <Route path=\"/r\" component={SessionRoutes} />\n          </Switch>\n        </RoomContextProvider>\n      </PlayerContextProvider>\n    </WebsocketProvider>\n  );\n}\n\nfunction SessionRoutes() {\n  return (\n    <SessionContextProvider>\n      <Switch>\n        <Route path=\"/r/start\" component={Start} />\n        <Route path=\"/r/draw\" component={Draw} />\n        <Route path=\"/r/write\" component={Write} />\n        <Route path=\"/r/book\" component={Book} />\n        <Route path=\"/r/lobby\" component={Lobby} />\n      </Switch>\n    </SessionContextProvider>\n  );\n}\n","import { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport theme from 'theme';\nimport Routes from 'Routes';\nimport { SnackbarProvider } from 'notistack';\n\n/*\n * Entry point for our App\n * Do not add Logic here\n */\nfunction App() {\n  return (\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      preventDuplicate\n      maxSnack={3}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Routes />\n      </ThemeProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}