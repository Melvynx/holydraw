(this["webpackJsonpthyrel-web"]=this["webpackJsonpthyrel-web"]||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(14),o=n.n(a),c=n(203),s=n(204),l=n(111),u=n(209),d=n(98),b=n.n(d);var j,h=Object(u.a)((j=b()({type:"dark",primary:{main:"#880061"},secondary:{main:"#9c27b0"},background:{default:"#0f131a",paper:"#1a1d24"},custom:{main:"#272B31"}}),Object(l.a)({palette:j,typography:{h1:{fontSize:64,fontFamily:"Modak"},h4:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:32},h5:{fontSize:20,fontWeight:"bold",fontFamily:"Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI"},subtitle1:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:16},subtitle2:{fontSize:12},body1:{fontSize:16},body2:{fontSize:14},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Open Sans","Helvetica Neue","sans-serif"].join(",")},spacing:8,overrides:{MuiButton:{label:{textOverflow:"ellipsis",whiteSpace:"nowrap",height:20},root:{textTransform:"none",borderRadius:8},contained:{height:68,minWidth:128,fontSize:24,color:j.common.white,padding:"18px 24px",borderRadius:34,fontFamily:"Work Sans",backgroundColor:j.custom.main,position:"relative","@media (min-width: 600px)":{fontSize:28,height:72},"&:hover":{backgroundColor:j.action.hover}},containedSizeLarge:{fontSize:32,height:78,borderRadius:38,"@media (min-width: 600px)":{fontSize:36,height:82,borderRadius:40}},iconSizeLarge:{marginLeft:0}}}}))),f=n(184),m=n(186),v=n(206),x=n(1),p=Object(f.a)((function(e){return{container:{padding:0,height:"100%",maxWidth:"calc(".concat(e.breakpoints.values.lg,"px - 128px)")}}}));function O(e){var t=e.children,n=p();return Object(x.jsx)(m.a,{className:n.container,maxWidth:"lg",children:Object(x.jsx)(v.a,{display:"block",margin:"auto",height:"100%",pb:{xs:0,sm:2},width:"100%",minWidth:320,children:t})})}var g,w,y,k=n(46),C=n(16),S=n(18),I=n(7),E=n(17);!function(e){e.IDLE="Loading...",e.CONNECTING="You will be connected",e.CONNECTED="You are connected",e.CLOSED="You're disconnected"}(g||(g={})),function(e){e[e.Invalid=-1]="Invalid",e[e.PlayerJoin=1]="PlayerJoin",e[e.PlayerLeft=2]="PlayerLeft",e[e.PlayerFinished=3]="PlayerFinished",e[e.NewOwnerPlayer=4]="NewOwnerPlayer",e[e.PlayerKicked=5]="PlayerKicked",e[e.Restart=6]="Restart",e[e.SessionStart=11]="SessionStart",e[e.SessionUpdate=12]="SessionUpdate",e[e.NextStep=13]="NextStep",e[e.NewAlbumElement=14]="NewAlbumElement"}(w||(w={})),function(e){e[e.Authentication=1]="Authentication"}(y||(y={}));var N=n(58),D=n.n(N),L=n(82);var P="https://holydraw.games/api";function z(e){return R.apply(this,arguments)}function R(){return(R=Object(L.a)(D.a.mark((function e(t){var n,r,i,a,o,c,s,l=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.data,i=n.method,a=n.token,o=n.headers,c=n.customConfig,s=Object(S.a)({method:i||(r?"POST":"GET"),body:r?JSON.stringify(r):null,headers:Object(S.a)({Authorization:a?"Bearer ".concat(a):"","Content-Type":r?"application/json":"",Accept:"application/json"},o)},c),e.abrupt("return",window.fetch("".concat(P,"/").concat(t),s).then(function(){var e=Object(L.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=2;break}return e.abrupt("return",Promise.reject({message:"Please re-authenticate."}));case 2:return e.next=4,t.json();case 4:if(n=e.sent,!t.ok){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",Promise.reject(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A="__player_provider_token__";function F(){return window.localStorage.getItem(A)}function T(e){window.localStorage.setItem(A,e)}var W=n.p+"static/media/spinner.efdf2d72.svg";function B(){return Object(x.jsx)(v.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(x.jsx)("img",{src:W,alt:"loading"})})}function M(e,t){var n;try{n=JSON.parse(e)}catch(r){return t}return n||t}var K,U=function(e){var t=i.a.useRef(!1);return i.a.useLayoutEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),i.a.useCallback((function(){return t.current?e.apply(void 0,arguments):void 0}),[e])},H="".concat("wss","://").concat(null===(K=/\b(?:(?:https?|ftp):\/\/)?([^/\n]+)\/?/.exec(P))||void 0===K?void 0:K[1],"/api/stream");var G=i.a.createContext({wsState:g.IDLE});function J(e){var t=e.children,n=function(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=i.a.useState(g.IDLE),o=Object(I.a)(a,2),c=o[0],s=o[1],l=Object(E.b)().enqueueSnackbar,u=i.a.useCallback((function(e){s(g.CLOSED),e&&(l("Connexion lost \u26a1\ufe0f [ws]",{variant:"error"}),r(void 0))}),[l]),d=U(u),b=i.a.useCallback((function(){var e=new WebSocket(H),t=!1;s(g.CONNECTING),r(e),e.onopen=function(){t=!0,e.send(JSON.stringify({type:y.Authentication,playerToken:F()})),s(g.CONNECTED)},e.onclose=function(){d(t)}}),[d]);return i.a.useEffect((function(){if(n)return function(){return n.close()};b()}),[b,n]),{wsState:c,websocket:n}}(),r={wsState:n.wsState,websocket:n.websocket};return Object(x.jsx)(G.Provider,{value:r,children:t})}function Y(){var e=i.a.useContext(G);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var q=i.a.createContext({});function X(e){var t=e.children,n=i.a.useState(),r=Object(I.a)(n,2),a=r[0],o=r[1],c=Object(E.b)().enqueueSnackbar,s=Y().websocket,l=Object(C.f)();i.a.useEffect((function(){if(s&&a)return s.addEventListener("message",e),function(){return s.removeEventListener("message",e)};function e(e){var t,n=M(e.data);if(n)switch(n.websocketEvent){case w.NewOwnerPlayer:(null===n||void 0===n||null===(t=n.player)||void 0===t?void 0:t.id)===(null===a||void 0===a?void 0:a.id)&&o((function(e){return e?Object(S.a)(Object(S.a)({},e),{},{isOwner:!0}):e}))}}}),[a,s]),i.a.useEffect((function(){var e=!1;return z("player/me",{token:F()}).then((function(t){return!e&&o(t)}),(function(){c("You haven't joined a game yet.",{variant:"error"}),l.push("/home")})),function(){e=!0}}),[c,l]);var u={player:a};return Object(x.jsx)(q.Provider,{value:u,children:a?t:Object(x.jsx)(B,{})})}function _(){var e=i.a.useContext(q);if(!e)throw new Error("usePlayerContext should be used within a PlayerContextProvider");return e}var $=n(86);function V(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=i.a.useState([]),o=Object(I.a)(a,2),c=o[0],s=o[1],l=_().player,u=Object(C.f)(),d=Object(E.b)().enqueueSnackbar,b=i.a.useCallback((function(){z("room/".concat(null===l||void 0===l?void 0:l.roomId),{token:F()}).then(r)}),[null===l||void 0===l?void 0:l.roomId]),j=i.a.useCallback((function(){z("room/".concat(null===l||void 0===l?void 0:l.roomId,"/players"),{token:F()}).then(s)}),[null===l||void 0===l?void 0:l.roomId]),h=i.a.useCallback((function(e){e&&(e===(null===l||void 0===l?void 0:l.id)&&(u.push("/home"),window.localStorage.removeItem(A),d("Seems like you've been kicked from the room \ud83d\ude05",{variant:"info"})),s((function(t){var n=null===t||void 0===t?void 0:t.findIndex((function(t){return t.id===e}));if(-1!==n){var r=Object($.a)(t);return r.splice(n,1),r}return t})))}),[d,u,null===l||void 0===l?void 0:l.id]),f=i.a.useCallback((function(e){e&&s((function(t){return t.find((function(t){return t.id===e.id}))?t:[].concat(Object($.a)(t),[e])}))}),[]);return i.a.useEffect((function(){(null===l||void 0===l?void 0:l.roomId)?(b(),j()):u.push("/home")}),[u,null===l||void 0===l?void 0:l.roomId,j,b]),{updatePlayer:j,updateRoom:b,removePlayer:h,addPlayer:f,room:n,players:c}}var Z=i.a.createContext({wsState:g.IDLE,players:[]});function Q(e){var t=e.children,n=V(),r=n.room,a=n.players,o=n.updatePlayer,c=n.removePlayer,s=n.addPlayer,l=Object(C.f)(),u=Y(),d=u.wsState,b=u.websocket,j=Object(E.b)().enqueueSnackbar;i.a.useEffect((function(){function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.Invalid:j(t.error,{variant:"error"}),l.push("/home");break;case w.PlayerJoin:s(t.player);break;case w.PlayerLeft:c(t.playerId);break;case w.NewOwnerPlayer:o();break;case w.SessionStart:null===l||void 0===l||l.push("/r/start");break;case w.PlayerKicked:c(t.playerId);break;case w.Restart:null===l||void 0===l||l.push("/r/lobby")}}if(b)return b.addEventListener("message",e),function(){return b.removeEventListener("message",e)}}),[s,j,l,c,o,b]),i.a.useEffect((function(){var e=a.filter((function(e){return e.isPlaying}));"/r/lobby"===l.location.pathname&&e.length>0&&(null===l||void 0===l||l.push("/r/start"))}),[a,l]);var h={room:r,wsState:d,players:a};return Object(x.jsx)(Z.Provider,{value:h,children:t})}function ee(){var e=i.a.useContext(Z);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var te=n(76),ne=n(188),re=n(3),ie=n(100),ae=n.n(ie),oe=Object(f.a)((function(){return{spin:{animation:"spinnerIconEffect 1s linear infinite"},"@global":{"@keyframes spinnerIconEffect":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}}}}}));function ce(e){var t=oe();return Object(x.jsx)(ae.a,{style:e.style,"aria-label":"spinner icon",className:Object(re.a)(e.className,t.spin)})}function se(e){var t=e.children,n=e.loading,r=e.color,i=void 0===r?"default":r,a=e.startIcon,o=e.size,c=void 0===o?"medium":o,s=Object(te.a)(e,["children","loading","color","startIcon","size"]);return Object(x.jsx)(ne.a,Object(S.a)(Object(S.a)({variant:"contained",color:i,startIcon:n?void 0:a,size:c},s),{},{children:n?Object(x.jsx)(ce,{style:{fontSize:"medium"===c?32:40}}):t}))}var le=n(88);function ue(e){var t=e.count,n=e.max;return Object(x.jsx)(v.a,{py:1,children:Object(x.jsxs)(le.a,{variant:"subtitle1",children:[t,"/",n]})})}var de=n(20);function be(){var e=i.a.useState(!1),t=Object(I.a)(e,2),n=t[0],r=t[1];return i.a.useEffect((function(){function e(){var e=navigator.vendor.match(/apple/i)&&!navigator.userAgent.match(/crios/i)&&!navigator.userAgent.match(/fxios/i)?window.orientation:window.screen.orientation.angle;r(90===e||-90===e)}return e(),window.addEventListener("orientationchange",e),function(){return window.removeEventListener("orientationchange",e)}}),[]),n}var je=n.p+"static/media/holydraw-logo.78893378.svg",he=Object(f.a)((function(e){return{logo:Object(de.a)({textAlign:"center",width:function(e){return 8*e.width},height:"auto"},e.breakpoints.down("xs"),{width:function(e){return 8*e.width/3*2}})}}));function fe(e){var t=e.width,n=void 0===t?24:t,r=be();r&&(n=16);var i=he({width:n});return r?Object(x.jsx)(v.a,{position:"absolute",top:2,left:8,children:Object(x.jsx)("img",{src:je,className:i.logo,alt:"holy draw logo"})}):Object(x.jsx)("img",{src:je,className:i.logo,alt:"holy draw logo"})}var me=n(12),ve=Object(f.a)((function(e){var t,n;return{input:{backgroundColor:"inherit",border:"none",width:"100%",fontFamily:"Work Sans",color:e.palette.text.primary,cursor:"inherit"},inputMedium:Object(de.a)({fontSize:24,height:32},e.breakpoints.up("sm"),{fontSize:28,height:36}),inputLarge:Object(de.a)({fontSize:32,height:38},e.breakpoints.up("sm"),{fontSize:36,height:40}),container:{display:"flex",padding:function(e){return"medium"===e.variant?"16px 20px":"20px 20px"},backgroundColor:function(t){return t.disabled?"#15181F":e.palette.background.paper},cursor:function(e){return e.disabled?"not-allowed":"text"},border:function(t){return t.disabled?"2px solid ".concat(Object(me.c)(e.palette.primary.main,.6)):"2px solid ".concat(e.palette.primary.main)},borderRadius:function(e){return"medium"===e.variant?34:38},alignItems:"center",transition:"box-shadow ease-in .2s",boxShadow:function(t){return t.focus?"0 0 2px 0.2rem ".concat(Object(me.c)(e.palette.primary.main,.4)):e.shadows[2]}},iconMedium:(t={width:28,height:28,marginRight:e.spacing(1.5)},Object(de.a)(t,e.breakpoints.up("sm"),{marginRight:e.spacing(2),height:32,width:32}),Object(de.a)(t,"color",(function(t){return t.disabled?e.palette.text.disabled:e.palette.text.primary})),t),iconLarge:(n={width:38,height:38,marginRight:e.spacing(1.5)},Object(de.a)(n,e.breakpoints.up("sm"),{marginRight:e.spacing(2),height:40,width:40}),Object(de.a)(n,"color",(function(t){return t.disabled?e.palette.text.disabled:e.palette.text.primary})),n)}}));function xe(e){var t=e.disabled,n=e.variant,r=void 0===n?"medium":n,a=e.startIcon,o=e.fullWidth,c=Object(te.a)(e,["disabled","variant","startIcon","fullWidth"]),s=i.a.useRef(null),l=i.a.useState(!1),u=Object(I.a)(l,2),d=u[0],b=u[1],j=ve({disabled:t,focus:d,variant:r});return Object(x.jsxs)("div",{className:Object(re.a)(j.container,{"full-width":o}),onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},children:[a&&i.a.cloneElement(a,{className:"medium"===r?j.iconMedium:j.iconLarge,"data-testid":"biginput-icon"}),Object(x.jsx)("input",Object(S.a)({ref:s,className:Object(re.a)(j.input,"medium"===r?j.inputMedium:j.inputLarge,"big-input-safari"),onFocus:function(){return b(!0)},onBlur:function(){return b(!1)},disabled:t},c))]})}var pe=n(211),Oe=n(101),ge=n.n(Oe),we=n(69),ye=n.n(we),ke=n(45),Ce=n.n(ke),Se=Object(f.a)((function(e){return{avatar:{width:48,height:48,backgroundColor:"".concat(e.palette.primary.dark),boxShadow:e.shadows[5],overflow:"visible","&> img":{height:48,width:"auto",margin:"auto",position:"unset"}},badge:{width:20,height:20,borderRadius:"50%",backgroundColor:"#880061",alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",bottom:0,left:0,zIndex:1},icon:{color:"#ffffff"},badgeIcon:{width:16,height:16},username:{fontFamily:"Work Sans",fontSize:20,width:"100%",fontWeight:"bold",overflow:"hidden",whiteSpace:"nowrap",margin:"0 ".concat(e.spacing(1),"px")},kickButton:{cursor:"pointer"}}}));function Ie(e){var t=e.id,n=e.name,r=e.avatar,i=e.isOwner,a=e.isKickable,o=e.isCurrentPlayer,c=e.onKick,s=Se();return Object(x.jsxs)(v.a,{width:256,height:64,borderRadius:40,padding:1,display:"flex",alignItems:"center",justifyContent:"space-between",bgcolor:"background.default",children:[Object(x.jsxs)(v.a,{position:"relative",children:[o&&Object(x.jsx)("div",{className:s.badge,children:Object(x.jsx)(ge.a,{className:Object(re.a)(s.icon,s.badgeIcon),"data-testid":"user-icon"})}),Object(x.jsx)(pe.a,{src:r,className:s.avatar})]}),Object(x.jsx)(le.a,{color:"textPrimary",className:s.username,children:n}),Object(x.jsx)(v.a,{display:"flex",alignItems:"center",children:i?Object(x.jsx)(ye.a,{className:s.icon,"data-testid":"star-icon"}):a&&Object(x.jsx)(v.a,{component:"button",padding:0,border:0,className:s.kickButton,height:24,onClick:function(){return null===c||void 0===c?void 0:c(t,n)},bgcolor:"transparent",children:Object(x.jsx)(Ce.a,{className:s.icon})})})]})}var Ee=[n.p+"static/media/pp-1.acb77223.png",n.p+"static/media/pp-2.c82c2211.png",n.p+"static/media/pp-3.9c11a583.png",n.p+"static/media/pp-4.5ae6cc4a.png",n.p+"static/media/pp-5.d5627fd6.png",n.p+"static/media/pp-6.228ed3be.png",n.p+"static/media/pp-7.762b4b0e.png",n.p+"static/media/pp-8.7bfd9d10.png"],Ne=n(189);function De(e){var t=e.players,n=e.playerId,r=e.isKickable,i=e.onKick;return Object(x.jsx)(v.a,{height:384,width:272,overflow:"hidden scroll",children:Object(x.jsx)(Ne.a,{container:!0,spacing:2,alignItems:"flex-end",children:t&&t.map((function(e){var t=n===e.id;return Object(x.jsx)(Ne.a,{item:!0,xs:12,children:Object(x.jsx)(Ie,{id:e.id,name:e.username,avatar:Ee[Number(e.avatarUrl)],isOwner:e.isOwner,isKickable:r,isCurrentPlayer:t,onKick:i})},e.id)}))})})}var Le=n(5),Pe=n(210),ze=n(190),Re=n(25),Ae=n(191);function Fe(e){var t=e.finishAt,n=e.timeDuration,r=e.onFinish,a=e.onFinishPercentage,o=void 0===a?100:a,c=i.a.useRef();i.a.useEffect((function(){var e=setInterval((function(){Te(t,n)>=o&&(null===r||void 0===r||r(),c.current&&clearInterval(c.current))}),1e3);return c.current=e,function(){return clearInterval(e)}}),[t,n,o,r])}function Te(e,t){var n=100-100*Math.round((e.getTime()-(new Date).getTime())/1e3)/t;return n>100?100:n}var We=Object(Le.a)((function(e){return Object(Pe.a)({root:{height:e.spacing(3)},circle:{backgroundColor:"blue",strokeLinecap:"round"}})}))(ze.a);function Be(e){var t=function(e){var t=e.finishAt,n=e.timeDuration,r=e.onFinish,a=i.a.useState(0),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState(),u=Object(I.a)(l,2),d=u[0],b=u[1];return i.a.useEffect((function(){s(Te(t,n));var e=setInterval((function(){return s(Te(t,n))}),1e3);return b(e),function(){return clearInterval(e)}}),[t,n]),i.a.useEffect((function(){c>=100&&(null===r||void 0===r||r(),d&&clearInterval(d))}),[c,r,d]),{progress:c}}(e).progress,n=Object(Re.a)(),r=Object(Ae.a)(n.breakpoints.up("sm"));return Object(x.jsx)(We,{size:r?64:32,thickness:4,variant:"determinate",value:t})}var Me=Object(f.a)((function(e){return{sentence:{textAlign:"center"},container:{backgroundColor:Object(me.c)(e.palette.primary.main,.8),boxShadow:e.shadows[2]}}}));function Ke(e){var t=e.directive,n=e.sentence,r=Me();return Object(x.jsxs)(v.a,{width:"100%",display:"flex",padding:1,borderRadius:32,alignItems:"center",flexDirection:"column",className:r.container,children:[Object(x.jsx)(le.a,{variant:"subtitle1",color:"textSecondary",children:t}),n&&Object(x.jsx)(le.a,{variant:"h4",color:"textPrimary",className:r.sentence,children:n})]})}var Ue=n(102),He=n.n(Ue),Ge=Object(f.a)((function(e){return{button:{backgroundColor:e.palette.primary.main,outline:"none",borderRadius:"50%",position:"absolute",left:0,bottom:0,cursor:"pointer",border:"none",width:64,display:"flex",justifyContent:"center",alignItems:"center",height:64,boxShadow:"0px 4px 1px ".concat(Object(me.c)(e.palette.background.default,.8)),"&:active":{bottom:-4,boxShadow:"none"}},imgBox:{boxShadow:"0px 4px 1px ".concat(Object(me.c)(e.palette.background.default,.8))},img:{height:function(e){return e.size},width:"auto",margin:"auto"},root:{animation:"player-avatar-float 4s infinite ease-in-out"},"@global":{"@keyframes player-avatar-float":{"0%":{transform:"translateY(-10px)"},"50%":{transform:"translateY(10px)"},"100%":{transform:"translateY(-10px)"}}}}}));function Je(e){var t=e.image,n=e.onShuffle,r=e.size,i=void 0===r?256:r,a=Ge({size:i});return Object(x.jsxs)(v.a,{alignItems:"center",width:i,position:"relative",height:i,className:a.root,children:[Object(x.jsx)("button",{className:a.button,onClick:n,children:Object(x.jsx)(He.a,{"data-testid":"shuffle-icon",style:{color:"#FFFFFF",fontSize:32}})}),Object(x.jsx)(v.a,{border:2,display:"flex",borderColor:"primary.main",borderRadius:"50%",width:i,height:i,bgcolor:"background.default",className:a.imgBox,children:Object(x.jsx)("img",{src:t,className:a.img,alt:"Avatar"})})]})}var Ye=["#7f8c8d","#000001","#ecf0f1","#bdc3c7","#00a8ff","#1e3799","#2ecc71","#009432","#ff3f34","#C0392B","#FA00FF","#8E44AD","#F1C40F","#E67E22","#FEAFA8"],qe=["#7f8c8d","#000001","#ecf0f1","#bdc3c7","#00a8ff","#1e3799","#2ecc71","#009432","#FA00FF","#8E44AD","#F1C40F","#E67E22","#FEAFA8","#f3a683","#76b5c5","#9645CD","#C1CF2C","#EE090D","#99ff66","#0000e6"],Xe=n(103),_e=n.n(Xe),$e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e&&e.apply(void 0,n)}))}};function Ve(e){return e[Math.floor(Math.random()*e.length)]}function Ze(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}function Qe(e){var t=e.currentColor,n=e.onRandomClick,i=e.disabledColor,a=Object(r.useState)(Ze()),o=Object(I.a)(a,2),c=o[0],s=o[1],l=t===c,u=i||t;return Object(x.jsx)(v.a,{component:"button",onClick:function(){var e=Ze();s(e),null===n||void 0===n||n(e)},border:2,m:.5,pt:.5,bgcolor:u,boxShadow:l?4:0,borderColor:l?"#ffffff":u,width:42,height:42,borderRadius:"50%",className:"cursor-pointer",children:Object(x.jsx)(_e.a,{})},t)}var et=n(187),tt=n(104),nt=Object(f.a)((function(){return{container:{"& .$react-colorful":{height:100,zIndex:5}}}}));function rt(e){var t=e.currentColor,n=e.onColorChange,r=e.disabledColor,a=i.a.useState(t),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState(!1),u=Object(I.a)(l,2),d=u[0],b=u[1],j=r||t;i.a.useEffect((function(){s(t)}),[t]);var h=nt();return Object(x.jsx)(et.a,{onClickAway:function(){b(!1)},children:Object(x.jsxs)("div",{children:[Object(x.jsx)(v.a,{component:"button",onClick:function(){return!r&&b((function(e){return!e}))},border:2,m:.5,p:0,bgcolor:j,boxShadow:d?4:0,borderColor:d?"#ffffff":j,width:92,height:42,borderRadius:21,className:"cursor-pointer"}),d&&Object(x.jsx)(v.a,{height:20,position:"absolute",className:h.container,children:Object(x.jsx)(tt.a,{color:c,onMouseUp:function(){return n(c)},onChange:s})})]})})}function it(e){var t=e.currentColor,n=e.disabled,r=e.onColorChange,i=Object(Re.a)().palette.action.disabled;return Object(x.jsxs)(v.a,{display:"flex",flexWrap:"wrap",borderRadius:30,maxWidth:116,justifyContent:"center",bgcolor:"#272B31",padding:1,children:[Ye.map((function(e){var a=e===t,o=n?i:e;return Object(x.jsx)(v.a,{component:"button",onClick:function(){null===r||void 0===r||r(e)},border:2,m:.5,p:0,bgcolor:o,boxShadow:a?4:0,borderColor:a?"#ffffff":o,width:42,height:42,borderRadius:"50%",className:"cursor-pointer"},e)})),Object(x.jsx)(Qe,{currentColor:t,disabledColor:n?i:"",onRandomClick:function(e){return!n&&(null===r||void 0===r?void 0:r(e))}}),Object(x.jsx)(rt,{currentColor:t,disabledColor:n?i:"",onColorChange:function(e){return!n&&(null===r||void 0===r?void 0:r(e))}})]})}var at=[4,8,16,20,24,30];function ot(e){var t=e.currentSize,n=e.onSizeChange,r=e.flexDirection,i=void 0===r?"row":r,a=Object(Re.a)();return Object(x.jsx)(v.a,{padding:1,gridGap:8,bgcolor:Object(me.c)(a.palette.primary.main,.2),display:"flex",borderRadius:4,border:1,flexDirection:i,borderColor:"common.black",alignItems:"center",boxShadow:2,children:at.map((function(e,r){var i=t===e;return Object(x.jsx)(st,{onSizeChange:n,size:e,isCurrentSize:i},e)}))})}var ct=Object(f.a)((function(e){return{button:{backgroundColor:"transparent",outline:"none",border:"2px solid #000000",borderRadius:"50%",width:40,height:40,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",cursor:"pointer",boxShadow:function(t){return t.isCurrentSize?"0 0 .2px 2px ".concat(Object(me.c)(e.palette.primary.main,.8)):"none"}}}}));function st(e){var t=e.onSizeChange,n=e.size,r=e.isCurrentSize,i=ct({isCurrentSize:r});return Object(x.jsx)("button",{onClick:function(){return t(n)},className:i.button,children:Object(x.jsx)(v.a,{borderRadius:"50%",border:"1px solid #000000",bgcolor:"#000000",width:n,height:n})})}var lt=n(192),ut=n(105),dt=n.n(ut);function bt(e){var t=e.identifier,n=e.player,r=Object(E.b)().enqueueSnackbar;return Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(x.jsx)(ne.a,{startIcon:Object(x.jsx)(dt.a,{style:{fontSize:32}}),onClick:function(){t&&(!function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}("".concat(window.location.origin,"/join/").concat(t)),r("URL successfully copied \ud83d\ude0e",{variant:"success"}))},variant:"contained",children:t||"loading..."}),(null===n||void 0===n?void 0:n.isOwner)&&t&&Object(x.jsx)(lt.a,{component:"button",variant:"body2",color:"textSecondary",children:"Generate new code"})]})}var jt=n(212),ht=Object(f.a)((function(e){var t;return{avatar:(t={height:64,width:64,overflow:"visible",backgroundColor:function(t){return t.isSelected?Object(me.c)(e.palette.primary.main,.6):Object(me.c)(e.palette.primary.main,.2)}},Object(de.a)(t,e.breakpoints.up("sm"),{height:40,width:40}),Object(de.a)(t,"&> img",Object(de.a)({height:64,width:"auto",margin:"auto",position:"unset"},e.breakpoints.up("sm"),{height:40})),t)}}));function ft(e){var t=e.avatarUrl,n=e.isSelected,r=ht({isSelected:n});return Object(x.jsx)(pe.a,{className:r.avatar,src:Ee[Number(t)]})}var mt=Object(f.a)((function(e){return{badge:{width:20,height:20,borderRadius:"50%",backgroundColor:e.palette.primary.main,alignItems:"center",justifyContent:"center",display:"flex",border:0,position:"absolute",bottom:0,left:0,zIndex:2},container:{overflowX:"scroll"},username:{overflow:"hidden",textAlign:"center",maxWidth:64,whiteSpace:"nowrap"},button:{backgroundColor:"transparent",outline:"none",padding:0},icon:{fontSize:16,color:e.palette.common.white}}}));function vt(e){var t=e.players,n=e.playerId,r=e.onClick,i=e.isKickable,a=Object(Re.a)(),o=Object(Ae.a)(a.breakpoints.up("sm")),c=mt();return Object(x.jsx)(v.a,{display:"flex",gridGap:8,maxWidth:o?200:285,className:c.container,alignItems:"center",flexDirection:"row",children:t.map((function(e){var t=n===e.id;return Object(x.jsx)(jt.a,{title:e.username,placement:"top",children:Object(x.jsxs)(v.a,{flexDirection:"column",alignItems:"center",zIndex:4,children:[Object(x.jsxs)(v.a,{position:{xs:"relative",sm:"initial"},children:[!o&&(e.isOwner?Object(x.jsx)("div",{className:c.badge,children:Object(x.jsx)(ye.a,{"data-testid":"star-icon",className:c.icon})}):i&&Object(x.jsx)("button",{onClick:function(){return!e.isOwner&&i&&(null===r||void 0===r?void 0:r(e.id,e.username))},className:c.badge,children:Object(x.jsx)(Ce.a,{"data-testid":"kick-icon",className:c.icon})})),Object(x.jsx)(ft,{isSelected:t,avatarUrl:e.avatarUrl})]}),!o&&Object(x.jsx)(le.a,{className:c.username,component:"p",variant:"subtitle1",children:e.username})]})},e.id)}))})}var xt=n(70),pt=n.n(xt),Ot=n(208),gt=n(196),wt=n(197),yt=n(205),kt=n(198);function Ct(e){var t=e.identifier,n=e.loading,r=e.onClick,a=e.className,o=i.a.useState(!1),c=Object(I.a)(o,2),s=c[0],l=c[1],u=i.a.useState(""),d=Object(I.a)(u,2),b=d[0],j=d[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(se,{startIcon:t?Object(x.jsx)(pt.a,{style:{fontSize:32}}):void 0,fullWidth:!0,loading:n,className:a,color:t?"primary":"default",onClick:function(){return t?r(t):l(!0)},children:"Join"}),Object(x.jsxs)(Ot.a,{fullWidth:!0,maxWidth:"xs",open:s,onClose:function(){return l(!1)},children:[Object(x.jsx)(gt.a,{children:"Join a game \ud83d\udc68\u200d\ud83c\udfa8"}),Object(x.jsx)(wt.a,{children:Object(x.jsx)(yt.a,{color:"secondary",autoFocus:!0,margin:"dense",id:"name",label:"Identifier",value:b,onChange:function(e){return j(e.target.value)},fullWidth:!0})}),Object(x.jsxs)(kt.a,{children:[Object(x.jsx)(ne.a,{onClick:function(){return l(!1)},color:"secondary",children:"Cancel \ud83d\udc4b"}),Object(x.jsx)(ne.a,{onClick:function(){r(b),l(!1)},color:"secondary",children:"Join \ud83e\udd73"})]})]})]})}var St=i.a.createContext({});function It(){var e=i.a.useContext(St);if(!e)throw new Error("useCanvasContext should be used within a DrawingCanvasContext");return e}var Et=Object(f.a)((function(e){return{canvas:{backgroundColor:function(e){return e.disabled?"#BBBBBB":"#DDDDDD"},width:function(e){return e.size.width},height:function(e){return e.size.height},cursor:function(e){return e.disabled?"not-allowed":"crosshair"}},canvasBox:{width:function(e){return e.size.width+2*e.size.border},height:function(e){return e.size.height+2*e.size.border},borderRadius:32,overflow:"hidden",border:function(t){return"".concat(t.size.border,"px solid ").concat(e.palette.custom.main)},boxShadow:e.shadows[1]}}}));function Nt(e){var t=e.disabled,n=It(),r=n.canvasRef,i=n.size,a=Et({size:i,disabled:t});return Object(x.jsx)("div",{className:a.canvasBox,children:Object(x.jsx)("canvas",{ref:r,className:a.canvas})})}var Dt=n(59),Lt=n(109),Pt=n.n(Lt),zt=n(201),Rt=n(214),At=n(200),Ft=n(107),Tt=n.n(Ft);function Wt(e){var t=e.player,n=e.startName,r=void 0===n?"game":n,i=e.isLoading,a=e.onStart,o=e.label,c=void 0===o?"Start":o,s=Object(Re.a)();return Object(x.jsxs)(v.a,{mt:3,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(x.jsxs)(v.a,{display:"flex",alignItems:"center",children:[!(null===t||void 0===t?void 0:t.isOwner)&&Object(x.jsx)(ce,{style:{color:s.palette.text.secondary,marginRight:4}}),Object(x.jsx)(le.a,{variant:"body2",color:"textSecondary",children:(null===t||void 0===t?void 0:t.isOwner)?"you're the owner, click here to start the ".concat(r):"Waiting for the host to start the ".concat(r)})]}),(null===t||void 0===t?void 0:t.isOwner)&&Object(x.jsx)(v.a,{mt:2,children:Object(x.jsx)(se,{loading:i,onClick:a,color:"primary",startIcon:Object(x.jsx)(Tt.a,{style:{fontSize:48}}),children:c})})]})}var Bt=n(199),Mt=Object(Le.a)((function(e){return Object(Pe.a)({root:{height:e.spacing(3)},colorPrimary:{backgroundColor:e.palette.background.default},bar:{borderRadius:8,backgroundColor:e.palette.primary.dark}})}))(Bt.a);function Kt(e){var t=e.stepActual,n=void 0===t?0:t,r=e.stepMax,i=void 0===r?0:r,a=function(e,t){var n=100*e/t;return n>100?100:n}(n,i);return Object(x.jsxs)(v.a,{overflow:"hidden",width:"100%",position:"relative",p:1,children:[Object(x.jsx)(v.a,{alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",zIndex:1,top:4,bottom:0,left:16,children:Object(x.jsxs)(le.a,{variant:"subtitle1",children:[n,"/",i]})}),Object(x.jsx)(Mt,{variant:"determinate",value:a})]})}var Ut=n(213),Ht=Object(f.a)((function(e){return{avatar:{width:32,height:32,backgroundColor:e.palette.primary.dark,overflow:"visible",boxShadow:e.shadows[2],"&> img":{height:26,width:"auto",margin:"auto",position:"unset"}},box:{backgroundColor:e.palette.custom.main,borderRadius:20,border:"none"}}}));function Gt(e){var t=e.username,n=e.children,r=e.avatarUrl,i=Ht();return Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(x.jsx)(le.a,{variant:"subtitle1",children:t}),Object(x.jsxs)(v.a,{display:"flex",flexDirection:"row",p:.5,width:320,className:i.box,children:[Object(x.jsx)(pe.a,{src:r,className:i.avatar}),Object(x.jsx)(v.a,{ml:1,mr:1,alignSelf:"center",children:Object(x.jsx)(le.a,{variant:"body1",children:n})})]})]})}var Jt=n.p+"static/media/gym-guy.71a7fbf1.svg";function Yt(e){var t=e.className,n=e.src;return Object(x.jsx)(v.a,{bgcolor:"common.white",borderColor:"custom.main",borderRadius:32,boxShadow:1,border:4,display:"flex",children:Object(x.jsx)("img",{src:n,alt:"",className:t})})}var qt,Xt=Object(f.a)((function(e){return{width:Object(de.a)({width:296,height:"auto"},e.breakpoints.down("xs"),{width:"100%"}),username:{textAlign:"right",maxWidth:256,whiteSpace:"nowrap",overflow:"hidden",marginRight:e.spacing(2)}}}));function _t(e){var t=e.username,n=e.src,r=Xt();return Object(x.jsxs)(v.a,{display:"flex",alignItems:"flex-end",flexDirection:"column",maxWidth:{xs:"84%",sm:"auto"},children:[Object(x.jsx)(le.a,{variant:"subtitle1",className:r.username,children:t}),Object(x.jsx)(Yt,{src:n,className:r.width})]})}!function(e){e[e.LINE=0]="LINE",e[e.CIRCLE=1]="CIRCLE",e[e.FILL=2]="FILL"}(qt||(qt={}));var $t=function(e){var t;null===(t=e.getContext("2d"))||void 0===t||t.clearRect(0,0,e.width,e.height)},Vt=function(e,t,n){var r=n.beginPosition,i=n.controlPosition,a=n.endPosition;switch(e.strokeStyle=t.color,e.fillStyle=t.color,e.lineJoin="round",e.lineCap="round",e.lineWidth=t.size,e.beginPath(),t.type){case qt.LINE:if(!i||!a)return;e.moveTo(r.x,r.y),e.quadraticCurveTo(i.x,i.y,a.x,a.y),e.stroke();break;case qt.CIRCLE:e.arc(r.x,r.y,t.size/2,0,2*Math.PI),e.fill()}e.closePath()};function Zt(e){var t=e.slice(-2),n=Object(I.a)(t,2),r=n[0],i=n[1];return{controlPoint:r,endPoint:{x:(r.x+i.x)/2,y:(r.y+i.y)/2}}}var Qt=function(e,t,n){if(n)return{x:(e.pageX-n.offsetLeft)*t,y:(e.pageY-n.offsetTop)*t}};function en(e,t,n){var r=null===e||void 0===e?void 0:e.getContext("2d");if(r){var i=r.getImageData(0,0,e.width,e.height),a=function(e,t,n){var r=4*(e.y*t+e.x);return{r:n[r],g:n[r+1],b:n[r+2]}}(t,e.width,i.data),o=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(n);if(o&&(o.r!==a.r||o.g!==a.g||o.b!==a.b)){for(var c,s=function(e){var t=i.data[e],n=i.data[e+1],r=i.data[e+2];return t===a.r&&n===a.g&&r===a.b},l=[t],u=Math.round(4*e.width);l.length;){var d=l.pop();if(!d)return;for(var b=Math.round(4*(d.y*e.width+d.x)),j=d.y;j-- >=0&&s(b);)b-=u;b+=u,j++;for(var h=!1,f=!1;j++<e.height-1&&s(b);)c=b,i.data[c]=o.r,i.data[c+1]=o.g,i.data[c+2]=o.b,i.data[c+3]=255,d.x>0&&s(b-4)&&(h?h&&(h=!1):(l.push({x:d.x-1,y:j}),h=!0)),d.x<e.width-1&&s(b+4)&&(f?f&&(f=!1):(l.push({x:d.x+1,y:j}),f=!0)),b+=u}r.putImageData(i,0,0)}}}var tn,nn,rn,an=function(e){var t=e.color,n=e.size,r=e.canvasRef,a=e.scale,o=e.lineType,c=i.a.useRef({x:0,y:0}),s=i.a.useRef([]),l=i.a.useRef([]),u=function(){return s.current[s.current.length-1]},d=i.a.useCallback((function(e){e&&(u().points.push(e),c.current=e)}),[]),b=i.a.useCallback((function(e){if(e&&c&&r.current){var t=u();t.points.push(e);var n=r.current.getContext("2d");if(n&&!(t.points.length<=2)){var i=Zt(t.points),a=i.controlPoint,o=i.endPoint;Vt(n,t,{beginPosition:c.current,controlPosition:a,endPosition:o}),c.current=o}}}),[r]),j=i.a.useCallback((function(e){r.current&&en(r.current,e,t)}),[r,t]),h=i.a.useCallback((function(e,i){var d;if(c.current=e,l.current=[],i)switch(s.current.push({type:o,color:t,size:n*a,points:[e]}),o){case qt.LINE:var h=null===r||void 0===r||null===(d=r.current)||void 0===d?void 0:d.getContext("2d");if(!h)return;Vt(h,Object(S.a)(Object(S.a)({},u()),{},{type:qt.CIRCLE}),{beginPosition:e});break;case qt.FILL:j(e)}else b(e)}),[r,t,j,o,b,a,n]),f=i.a.useCallback((function(){r.current&&function(e,t){var n=e.getContext("2d");n&&($t(e),t&&t.forEach((function(t){var r=t.points[0],i=[];switch(t.type){case qt.LINE:Vt(n,Object(S.a)(Object(S.a)({},t),{},{type:qt.CIRCLE}),{beginPosition:t.points[0]}),t.points.forEach((function(e){if(i.push(e),i.length>3){var a=Zt(i),o=a.controlPoint,c=a.endPoint;Vt(n,t,{beginPosition:r,controlPosition:o,endPosition:c}),r=c}}));break;case qt.FILL:en(e,t.points[0],t.color)}})))}(r.current,s.current)}),[r]),m=i.a.useCallback((function(){var e=s.current.pop();e&&l.current.push(e),f()}),[f]),v=i.a.useCallback((function(){var e=l.current.pop();e&&s.current.push(e),f()}),[f]),x=i.a.useCallback((function(){r.current&&window.confirm("This action is definitive. Are you sure you want to clear all ?")&&(s.current=[],l.current=[],$t(r.current))}),[r]);return i.a.useEffect((function(){if(r.current){var e=function(e){"z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?v():m()),"c"===e.key&&x()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[r,x,v,m]),{paint:b,create:h,addLastLine:d,undo:m,lines:s,mouseCoordinate:c,clear:x,redo:v,refresh:f,fill:j}},on={width:512,height:320,border:4,scale:2};function cn(e){var t=e.color,n=void 0===t?"#900050":t,r=e.lineSize,a=void 0===r?4:r,o=e.disabled,c=void 0!==o&&o,s=e.children,l=i.a.useState(on),u=Object(I.a)(l,2),d=u[0],b=u[1],j=i.a.useState(qt.LINE),h=Object(I.a)(j,2),f=h[0],m=h[1],v=i.a.useRef(null),p=i.a.useState(!1),O=Object(I.a)(p,2),g=O[0],w=O[1],y=i.a.useCallback((function(){var e,t,n,r=null===(e=v.current)||void 0===e||null===(t=e.parentElement)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.getBoundingClientRect().width;if(r&&!(r<64)){var i=r/1.6,a=r<400?2:4,o=r-2*a;(o-1>d.width||o+1<d.width)&&b({width:o,height:i-2*a,border:a,scale:2})}}),[d.width]),k=an({color:n,size:a,canvasRef:v,scale:d.scale,lineType:f}),C=k.paint,S=k.create,E=k.addLastLine,N=k.clear,D=k.undo,L=k.refresh,P=k.redo,z=i.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Qt(e,d.scale,v.current);n&&(f!==qt.FILL&&w(!0),S(n,t))}),[S,d.scale,f]),R=i.a.useCallback((function(e){w(!1);var t=Qt(e,d.scale);E(t)}),[E,d.scale]),A=i.a.useCallback((function(e){g&&z(e,!1)}),[g,z]),F=i.a.useCallback((function(e){if(g&&v.current){var t=Qt(e,d.scale,v.current);C(t)}}),[d.scale,g,C]);!function(e){var t=e.canvasRef,n=e.isPainting,r=e.onMouseMove,a=e.onMouseEnter,o=e.onMouseDown,c=e.onMouseUp,s=e.disabled,l=e.onResize;i.a.useEffect((function(){if(n&&!s)return window.document.addEventListener("mousemove",r),window.document.addEventListener("touchmove",e),function(){window.document.removeEventListener("mousemove",r),window.document.removeEventListener("touchmove",e)};function e(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});r(t)}}),[s,n,r]),i.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mouseenter",a),function(){e.removeEventListener("mouseenter",a)}}}),[t,s,a]),i.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mousedown",o),e.addEventListener("touchstart",n),window.document.addEventListener("mouseup",c),function(){e.removeEventListener("mousedown",o),e.removeEventListener("touchstart",n),window.document.removeEventListener("mouseup",c)}}function n(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});o(t)}}),[t,s,o,c]),i.a.useEffect((function(){return l(),window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[l])}({canvasRef:v,onMouseDown:z,onMouseUp:R,onMouseEnter:A,onMouseMove:F,isPainting:g,onResize:y,disabled:c}),i.a.useEffect((function(){if(v.current){var e=v.current;e.width=d.width*d.scale,e.height=d.height*d.scale,L()}}),[v,L,d,y]);var T=i.a.useMemo((function(){return{clear:N,undo:D,canvasRef:v,redo:P,size:d,setLineType:m,lineType:f}}),[N,D,P,d,f]);return Object(x.jsx)(St.Provider,{value:T,children:s})}!function(e){e[e.Sentence=0]="Sentence",e[e.Drawing=1]="Drawing"}(tn||(tn={})),function(e){e[e.Start=0]="Start",e[e.Draw=1]="Draw",e[e.Write=2]="Write",e[e.Book=3]="Book"}(nn||(nn={})),function(e){e[e.IDLE=0]="IDLE",e[e.PENDING=1]="PENDING",e[e.STARTED=2]="STARTED",e[e.FINISHED=3]="FINISHED"}(rn||(rn={}));var sn=function(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=Object(E.b)().enqueueSnackbar,o=Object(C.f)();return i.a.useEffect((function(){var e=!1;return z("session/current",{token:F()}).then((function(t){return!e&&r(t)}),(function(){a("Sorry, an error occured \ud83d\ude15 [Session-GET]",{variant:"error"}),o.push("/r/lobby")})),function(){e=!0}}),[a,o]),i.a.useEffect((function(){var e=o.location.pathname,t="";switch(null===n||void 0===n?void 0:n.stepType){case nn.Start:t="/r/start";break;case nn.Write:t="/r/write";break;case nn.Draw:t="/r/draw";break;case nn.Book:t="/r/book"}t&&e!==t&&o.push(t)}),[null===n||void 0===n?void 0:n.stepType,o]),{session:n,setSession:r}},ln=i.a.createContext({onSave:function(){return Promise.resolve()}});function un(e){var t=e.children,n=sn(),r=n.session,a=n.setSession,o=i.a.useState(),c=Object(I.a)(o,2),s=c[0],l=c[1],u=Y().websocket,d=Object(E.b)().enqueueSnackbar;i.a.useEffect((function(){if(u)return u.addEventListener("message",e),function(){return u.removeEventListener("message",e)};function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.SessionUpdate:var n=t.session;a((function(e){return e&&Object(S.a)(Object(S.a)({},e),n)}))}}}),[r,a,u]),i.a.useEffect((function(){if((null===r||void 0===r?void 0:r.actualStep)&&r.stepType!==nn.Book){var e=!1;return z("element/current",{token:F()}).then((function(t){return!e&&l(t)}),(function(){return d("Sorry, an error occured \ud83d\ude15 [Element-GET]",{variant:"error"})})),function(){e=!0}}}),[d,null===r||void 0===r?void 0:r.actualStep,null===r||void 0===r?void 0:r.stepType]);var b={session:r,currentElement:s,onSave:function(e){var t=null===s||void 0===s?void 0:s.id,n=(null===s||void 0===s?void 0:s.type)===tn.Drawing?{drawimage:e}:{text:e};return new Promise((function(e){z("element/".concat(t),{token:F(),method:"PATCH",data:n}).then((function(e){d("Element Saved \ud83d\ude0e",{variant:"success"}),l((function(t){return Object(S.a)(Object(S.a)({},t),e)}))})).catch((function(){return d("Sorry, an error occured while saving \ud83d\ude15",{variant:"error"})})).finally((function(){return e()}))}))}};return Object(x.jsx)(ln.Provider,{value:b,children:r?t:Object(x.jsx)(B,{})})}function dn(){var e=i.a.useContext(ln);if(!e)throw new Error("useSessionContext should be used within a SessionContextProvider");return e}function bn(e){var t=e.children,n=It().clear;return i.a.cloneElement(t,{onClick:$e(n,t.props.onClick)})}function jn(e){var t=e.children,n=It().undo;return i.a.cloneElement(t,{onClick:$e(n,t.props.onClick)})}function hn(e){var t=e.children,n=It().redo;return i.a.cloneElement(t,{onClick:$e(n,t.props.onClick)})}function fn(e){var t=e.children,n=e.onSave,r=dn(),a=r.currentElement,o=r.session,c=It().canvasRef;return Fe({finishAt:new Date((null===o||void 0===o?void 0:o.stepFinishAt)||""),timeDuration:(null===o||void 0===o?void 0:o.timeDuration)||60,onFinish:function(){var e;z("element/auto/".concat(null===a||void 0===a?void 0:a.id),{token:F(),method:"PATCH",data:{draw:null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.toDataURL()}})},onFinishPercentage:99}),i.a.cloneElement(t,{onClick:function(){var e,r,i;n(null===(e=c.current)||void 0===e?void 0:e.toDataURL()),null===(r=(i=t.props).onClick)||void 0===r||r.call(i)}})}var mn=n(72),vn=n.n(mn),xn=n(73),pn=n.n(xn),On=n(74),gn=n.n(On),wn=Object(Le.a)({root:{color:"#C6C6C6",borderRadius:4,height:8,width:300},thumb:{height:16,width:16,backgroundColor:"#C6C6C6",marginTop:-4,marginLeft:-8,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4},vertical:{width:"8px !important","& .$MuiSlider-rail":{width:8},"& .$MuiSlider-track":{width:8},"& .$MuiSlider-thumb":{marginLeft:"-4px"}}})(Ut.a);function yn(e){var t=e.children,n=e.open,r=e.value;return Object(x.jsx)(jt.a,{open:n,enterTouchDelay:0,placement:"top",title:r,children:t})}function kn(e){var t=e.size,n=e.onSizeChange,r=e.orientation,i=void 0===r?"vertical":r,a="vertical"===i;return Object(x.jsxs)(v.a,{px:1,py:2,bgcolor:"#272B31",borderRadius:40,display:"flex",flexDirection:a?"column":"row",justifyContent:a?"center":"space-around",alignItems:"center",children:[Object(x.jsx)(v.a,{bgcolor:"#C6C6C6",mr:a?0:2,mb:a?2:0,borderRadius:"50%",height:8,width:8}),Object(x.jsx)(wn,{step:2,min:2,style:a?{height:256}:{width:256},max:60,"aria-labelledby":"size-picker-slider",orientation:i,value:t,onChange:function(e,t){return n(t)},ValueLabelComponent:yn}),Object(x.jsx)(v.a,{bgcolor:"#C6C6C6",ml:a?0:2,mt:a?2:0,borderRadius:"50%",height:24,width:24})]})}var Cn=Object(f.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),margin:0}}}));function Sn(e){var t=e.currentColor,n=e.onColorChange,r=e.open,i=e.onClose,a=Cn();return Object(x.jsxs)(Ot.a,{fullScreen:!0,onClose:function(){return i()},open:r,children:[Object(x.jsx)(v.a,{display:"flex",flexDirection:"row",maxWidth:"100%",justifyContent:"center",children:Object(x.jsxs)(v.a,{mt:2,children:[Object(x.jsx)(le.a,{variant:"h6",children:"Choose a color"}),Object(x.jsx)(At.a,{className:a.closeButton,onClick:function(){return i()},children:Object(x.jsx)(Ce.a,{})})]})}),Object(x.jsx)(v.a,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",mt:6,ml:12,mr:12,children:qe.map((function(e){var r=e===t;return Object(x.jsx)(v.a,{alignContent:"center",component:"button",onClick:function(){return null===n||void 0===n?void 0:n(e)},border:2,m:.5,p:0,bgcolor:e,boxShadow:r?4:0,borderColor:r?"#ffffff":e,width:50,height:50,borderRadius:"50%",className:"cursor-pointer"},e)}))})]})}var In=n(108),En=n.n(In);function Nn(){var e=Object(r.useState)(0),t=Object(I.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(Ye[5]),c=Object(I.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)(!1),d=Object(I.a)(u,2),b=d[0],j=d[1],h=Object(r.useState)(!1),f=Object(I.a)(h,2),m=f[0],p=f[1],O=Object(r.useState)(8),g=Object(I.a)(O,2),w=g[0],y=g[1],k=Object(r.useState)(10),C=Object(I.a)(k,2),S=C[0],E=C[1],N=i.a.useState(1),D=Object(I.a)(N,2),L=D[0],P=D[1],z=i.a.useState(!1),R=Object(I.a)(z,2),A=R[0],F=R[1],T=function(){a((function(e){return e>Ee.length-2?0:e+1}))};return Object(x.jsx)(v.a,{children:Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",gridGap:32,children:[Object(x.jsx)(fe,{}),Object(x.jsxs)(v.a,{children:[Object(x.jsx)(ne.a,{onClick:function(){F(!0)},children:Object(x.jsx)(En.a,{})}),Object(x.jsx)(Sn,{open:A,onClose:function(){return F(!1)},currentColor:s,onColorChange:function(e){return l(e)}})]}),Object(x.jsx)(v.a,{children:Object(x.jsx)(it,{currentColor:s,onColorChange:function(e){return l(e)}})}),Object(x.jsx)(v.a,{children:Object(x.jsx)(Gt,{username:"Houn Salade",avatarUrl:Ee[n],children:"Combien sont ces six saucissons-ci ?"})}),Object(x.jsx)(_t,{username:"Jean-Philippes-Pascal",src:Jt}),Object(x.jsx)(zt.a,{control:Object(x.jsx)(Rt.a,{checked:b,onChange:function(e){return j(e.target.checked)}}),label:"Is mobile canvas"}),Object(x.jsx)(zt.a,{control:Object(x.jsx)(Rt.a,{checked:m,onChange:function(e){return p(e.target.checked)}}),label:"Is canvas disabled"}),Object(x.jsx)(v.a,{display:"flex",width:"100%",maxWidth:1e3,flexDirection:"column",children:Object(x.jsxs)(cn,{color:s,disabled:m,lineSize:w,children:[Object(x.jsxs)(v.a,{display:"flex",width:"100%",flexWrap:"wrap",children:[Object(x.jsx)(v.a,{width:"100%",children:Object(x.jsx)(Nt,{disabled:m})}),Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(x.jsx)(bn,{children:Object(x.jsx)(At.a,{children:Object(x.jsx)(vn.a,{})})}),Object(x.jsx)(jn,{children:Object(x.jsx)(At.a,{children:Object(x.jsx)(pn.a,{})})}),Object(x.jsx)(hn,{children:Object(x.jsx)(At.a,{children:Object(x.jsx)(gn.a,{})})})]}),Object(x.jsx)(it,{currentColor:s,onColorChange:function(e){return l(e)}}),Object(x.jsx)(ot,{currentSize:w,onSizeChange:function(e){return y(e)},flexDirection:"column"})]}),Object(x.jsx)(fn,{onSave:function(e){if(e){var t=window.open();null===t||void 0===t||t.document.write('<iframe width="1200px" height="700px" src='+e+"></iframe>")}},children:Object(x.jsx)(se,{size:"large",children:"Submit"})})]})}),Object(x.jsx)(Be,{finishAt:new Date("2021-03-30T08:31:00"),timeDuration:120}),Object(x.jsx)(Ct,{loading:!1,identifier:void 0,onClick:function(){}}),Object(x.jsx)(Je,{image:Ee[n],onShuffle:T}),Object(x.jsx)(xe,{onChange:function(){},value:"didier",startIcon:Object(x.jsx)(Pt.a,{})}),Object(x.jsx)(bt,{identifier:"LH4AH3"}),Object(x.jsx)(Ie,{id:1,name:"John Doe",avatar:Ee[n],isOwner:!0,isKickable:!1,onKick:function(e){}}),Object(x.jsx)(se,{size:"large",onClick:T,children:"Test"}),Object(x.jsx)(Wt,{player:Dt[1],onStart:function(){}}),Object(x.jsx)(De,{players:Dt,playerId:3,isKickable:!0,onKick:function(e){}}),Object(x.jsx)(Ke,{sentence:"Salzt",directive:"bonsoir"}),Object(x.jsx)(ce,{}),Object(x.jsx)(ue,{count:8,max:12}),Object(x.jsx)(De,{players:Dt,isKickable:!0,onKick:function(e){}}),Object(x.jsx)(vt,{players:Dt,playerId:2}),Object(x.jsx)(Ut.a,{defaultValue:L,onChange:function(e,t){P(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:7}),Object(x.jsx)(kn,{size:S,onSizeChange:function(e){return E(e)}}),Object(x.jsx)(v.a,{bgcolor:"#C6C6C6",borderRadius:"50%",height:S,width:S}),Object(x.jsx)(Kt,{stepActual:L,stepMax:7})]})})}function Dn(){return Object(x.jsxs)(v.a,{p:3,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(x.jsx)("h1",{children:"You're in DevNav"}),Object(x.jsx)(Ln,{to:"/",children:"Dev nav"}),Object(x.jsx)(Ln,{to:"/r/start",children:"Go Room Start"}),Object(x.jsx)(Ln,{to:"/r/write",children:"Go Room Write"}),Object(x.jsx)(Ln,{to:"/r/draw",children:"Go Room Draw"}),Object(x.jsx)(Ln,{to:"/r/lobby",children:"Go Room Lobby"}),Object(x.jsx)(Ln,{to:"/r",children:"Go Room"}),Object(x.jsx)(Ln,{to:"/home",children:"Go home"}),Object(x.jsx)(Ln,{to:"/t",children:"Go to TESTS pages"})]})}function Ln(e){var t=e.to,n=e.children;return Object(x.jsx)(v.a,{p:1,bgcolor:"background.default",m:1,borderRadius:2,border:1,borderColor:"primary.main",children:Object(x.jsx)(k.b,{to:t,style:{color:"white"},children:n})})}var Pn=["God","Mushu the Dragon","Bob Razowski","Macco","Woody Woodpecker","Mr Potato","Nemo","Shrek","Staline","Krokette","Little Otter","Bob the bob","SavageWolf","Padawan","BigBear","BigFather","Terminator","Stitch"];var zn=Object(f.a)((function(e){return{marginButton:{marginLeft:e.spacing(2)}}}));function Rn(e){var t,n,r=e.identifier,a=i.a.useState(""),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState((t=0,n=Ee.length-1,Math.floor(Math.random()*(n+1-t))+t)),u=Object(I.a)(l,2),d=u[0],b=u[1],j=i.a.useState(!1),h=Object(I.a)(j,2),f=h[0],m=h[1],p=Object(E.b)().enqueueSnackbar,O=Object(C.f)(),g=i.a.useRef(Ve(Pn)).current,w=zn(),y=be();function k(e,t){p(t,{variant:"success"}),T(e),null===O||void 0===O||O.push("/r/lobby")}return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsx)(Je,{image:Ee[d],"data-testid":"player-avatar-index-".concat(d),onShuffle:function(){b((function(e){return e>=Ee.length-1?0:e+1}))},size:y?192:256})}),Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsxs)(v.a,{display:"flex",flexDirection:y?"row":"column",px:1,height:y?72:void 0,maxWidth:y?void 0:356,children:[Object(x.jsx)(xe,{value:c,fullWidth:!0,onChange:function(e){return s(e.target.value)},placeholder:g}),Object(x.jsxs)(v.a,{display:"flex",mt:y?0:2,ml:y?1:0,children:[(!y||r)&&Object(x.jsx)(Ct,{identifier:r,onClick:function(e){var t=e.startsWith("http")?e.split("/").pop():e;m(!0),z("room/join/".concat(t),{data:{username:c||g,avatarUrl:String(d)},method:"PATCH"}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&k(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"You've joined the room!")}),(function(){return p("Sorry, an error occured \ud83d\ude15 [Room-PATCH]",{variant:"error"})})).finally((function(){return m(!1)}))},loading:f}),!r&&Object(x.jsx)(se,{fullWidth:!y,className:y?void 0:w.marginButton,color:"primary",startIcon:Object(x.jsx)(pt.a,{style:{fontSize:32}}),onClick:function(){m(!0),z("room",{data:{username:c||g,avatarUrl:String(d)}}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&k(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"Room successfully created \ud83d\ude4c")}),(function(){return p("Sorry, an error occured \ud83d\ude15 [Room-POST]",{variant:"error"})})).finally((function(){return m(!1)}))},loading:f,children:"Create"})]})]})})]})}function An(e){var t=e.match.params.identifier;return Object(x.jsxs)(Ne.a,{container:!0,direction:"column",alignItems:"center",className:"full-height",justify:"space-between",children:[Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsx)(fe,{width:32})}),Object(x.jsx)(Rn,{identifier:t})]})}var Fn=i.a.createContext({players:[]});function Tn(e){var t=e.children,n=i.a.useState({}),r=Object(I.a)(n,2),a=r[0],o=r[1],c=i.a.useState([]),s=Object(I.a)(c,2),l=s[0],u=s[1],d=Y().websocket;i.a.useEffect((function(){if(d)return d.addEventListener("message",e),function(){return d.removeEventListener("message",e)};function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.NewAlbumElement:if(!t.album)break;var n=t.album;o((function(e){if(!n.initiatorId)return e;var t=Object(S.a)({},e);return t[n.initiatorId]?t[n.initiatorId].push(n):t[n.initiatorId]=[n],t}))}}}),[d]),i.a.useEffect((function(){z("session/players",{token:F()}).then(u).catch()}),[]),i.a.useEffect((function(){z("session/album/recovery",{token:F()}).then((function(e){if(0!==e.length){var t=e.reduce((function(e,t){if(!t.initiatorId)return e;var n=t.initiatorId;return e[n]?e[n].push(t):e[n]=[t],e}),{});o(t)}})).catch()}),[]);var b={albums:a,players:l};return Object(x.jsx)(Fn.Provider,{value:b,children:t})}function Wn(){var e=i.a.useContext(Fn);if(!e)throw new Error("useAlbumContext should be used within a AlbumContextProvider");return e}var Bn=n(202);function Mn(e){var t,n=e.album;return n&&0!==n.length?Object(x.jsxs)(v.a,{display:"flex",border:2,borderColor:"custom.main",borderRadius:32,flexDirection:"column",width:"100%",height:"100%",p:{xs:1,sm:2},minHeight:400,alignItems:"center",children:[Object(x.jsxs)(le.a,{variant:"h4",children:[null===(t=n[0].creator)||void 0===t?void 0:t.username,"'s album"]}),n.map((function(e){var t,n,r,i=e.type===tn.Sentence;return Object(x.jsx)(v.a,{display:"flex",mt:1,width:"100%",flexDirection:i?"row":"row-reverse",children:i?Object(x.jsx)(Gt,{username:null===(t=e.creator)||void 0===t?void 0:t.username,avatarUrl:Ee[Number(null===(n=e.creator)||void 0===n?void 0:n.avatarUrl)],children:e.text},e.id):Object(x.jsx)(_t,{username:null===(r=e.creator)||void 0===r?void 0:r.username,src:e.drawImage},e.id)},e.id)}))]}):null}function Kn(){return Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",width:"100%",p:2,alignItems:"center",children:[Object(x.jsx)(Bn.a,{height:40,width:"100%"}),Object(x.jsx)(v.a,{display:"flex",mt:1,width:"100%",children:Object(x.jsx)(Bn.a,{height:64,width:"100%"})})]})}function Un(){var e=Object(E.b)().enqueueSnackbar,t=_().player,n=dn().session,i=Object(r.useState)(!1),a=Object(I.a)(i,2),o=a[0],c=a[1],s=(null===n||void 0===n?void 0:n.bookState)===rn.FINISHED,l=s?"Back to Lobby":(null===n||void 0===n?void 0:n.albumInitiatorId)?"Next":"Start";return Object(x.jsx)(Wt,{onStart:function(){c(!0),s?z("room/restart",{method:"PATCH",token:F()}).finally((function(){return c(!1)})):z("session/album/next",{method:"POST",token:F()}).then((function(){return e("Album successfully started, wait 3 seconds before starting \ud83d\udcaa",{variant:"success"})}),(function(){return e("Sorry, an error occured \ud83d\ude15 [Session-POST]",{variant:"error"})})).finally((function(){return c(!1)}))},isLoading:o,startName:"book",player:t,label:l})}function Hn(){var e=dn().session,t=Wn().albums,n=(null===e||void 0===e?void 0:e.albumInitiatorId)?null===t||void 0===t?void 0:t[null===e||void 0===e?void 0:e.albumInitiatorId]:void 0,r=(null===n||void 0===n?void 0:n.length)===(null===e||void 0===e?void 0:e.totalPlayers);return Object(x.jsxs)(x.Fragment,{children:[n?Object(x.jsx)(Ne.a,{item:!0,className:"full-width",children:Object(x.jsx)(Mn,{album:n})}):(null===e||void 0===e?void 0:e.albumInitiatorId)?Object(x.jsx)(Kn,{}):null,Object(x.jsx)(Ne.a,{item:!0,children:(r||!(n||(null===e||void 0===e?void 0:e.albumInitiatorId)))&&Object(x.jsx)(Un,{})})]})}function Gn(){return Object(x.jsx)(Tn,{children:Object(x.jsx)(m.a,{maxWidth:"sm",className:"full-height",children:Object(x.jsxs)(Ne.a,{container:!0,spacing:2,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"space-between",children:[Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsxs)(v.a,{mt:1,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(x.jsx)(le.a,{variant:"h4",children:"Albums"}),Object(x.jsx)(v.a,{mt:1,children:Object(x.jsx)(Jn,{})})]})}),Object(x.jsx)(Hn,{})]})})})}var Jn=function(){var e=Wn().players,t=dn().session;return Object(x.jsx)(vt,{playerId:null===t||void 0===t?void 0:t.albumInitiatorId,players:e})},Yn=Object(f.a)((function(){return{root:{top:function(e){return e.open?Math.sin(e.pi)*e.width*e.spacing:0},right:function(e){return e.open?Math.cos(e.pi)*e.width*e.spacing:0},visibility:function(e){return e.open?"visible":"hidden"},transition:"all .2s ease-in-out"}}}));function qn(e){var t=e.count,n=e.max,r=e.open,a=e.onClick,o=e.children,c=e.width,s=e.spacing,l=2*Math.PI/n*t,u=Yn({count:t,max:n,pi:l,open:r,width:c,spacing:s});return Object(x.jsx)(v.a,{zIndex:1,width:c,height:c,className:u.root,position:"absolute",children:a&&o?i.a.cloneElement(o,{onClick:$e(a,o.props.onClick)}):o})}var Xn=Object(f.a)((function(e){return{action:{position:"absolute",width:function(e){return e.width},height:function(e){return e.width},top:0,right:0,zIndex:2},circlebg:{transform:"translate(-50%, -50%)",top:"50%",left:"50%",opacity:function(e){return e.open?"1":"0"},transition:"all .2s ease-in-out",backgroundColor:function(t){return"fill"===t.circleBg?e.palette.background.paper:void 0},border:function(t){return"border"===t.circleBg?"2px solid ".concat(e.palette.background.paper):void 0}}}}));function _n(e){var t=e.action,n=e.children,r=e.width,a=void 0===r?48:r,o=e.circleBg,c=void 0===o?"border":o,s=e.spacing,l=void 0===s?1.2:s,u=i.a.useState(!1),d=Object(I.a)(u,2),b=d[0],j=d[1],h=Xn({count:4,width:a,open:b,circleBg:c}),f=t(b);return Object(x.jsx)(et.a,{onClickAway:function(){return j(!1)},children:Object(x.jsxs)(v.a,{position:"relative",width:a,height:a,className:h.root,children:[i.a.cloneElement(f,{onClick:function(){return j((function(e){return!e}))},className:Object(re.a)(h.action)}),Object(x.jsx)(v.a,{position:"absolute",className:h.circlebg,borderRadius:"50%",width:a*(2*l),height:a*(2*l)}),n.map((function(e,t){return Object(x.jsx)(qn,{open:b,spacing:l,width:a,count:t+1,onClick:function(){return j(!1)},max:n.length,children:e},t)}))]})})}var $n=n(85),Vn=n.n($n),Zn=n(77),Qn=n.n(Zn),er=n(52),tr=n.n(er),nr=n(110),rr=n.n(nr);function ir(e){var t=e.onSave,n=e.isFinish;return Object(x.jsxs)(v.a,{mt:2,minHeight:80,display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"space-between",children:[Object(x.jsx)(cr,{disabled:n}),Object(x.jsxs)(v.a,{display:"flex",alignItems:"center",children:[Object(x.jsx)(bn,{children:Object(x.jsx)(or,{disabled:n,title:"hotkey: C",children:Object(x.jsx)(vn.a,{})})}),Object(x.jsx)(jn,{children:Object(x.jsx)(or,{disabled:n,title:"CMD + Z",children:Object(x.jsx)(pn.a,{})})}),Object(x.jsx)(hn,{children:Object(x.jsx)(or,{disabled:n,title:"CMD + SHIFT + Z",children:Object(x.jsx)(gn.a,{})})}),Object(x.jsx)(fn,{onSave:t,children:Object(x.jsx)(or,{color:"primary",title:n?"Edit":"Finish",children:n?Object(x.jsx)(tr.a,{}):Object(x.jsx)(rr.a,{})})})]})]})}var ar=Object(f.a)((function(e){return{root:{backgroundColor:function(t){return"primary"===t.color?e.palette.primary.main:e.palette.custom.main},marginLeft:function(t){return e.spacing(t.ml)},"&:hover":{backgroundColor:function(t){return"primary"===t.color?e.palette.primary.dark:void 0}}},label:{color:e.palette.common.white},icon:{color:function(t){return t.disabled?e.palette.text.secondary:e.palette.text.primary}}}}));function or(e){var t=e.children,n=e.title,r=e.color,a=void 0===r?"default":r,o=e.ml,c=void 0===o?1:o,s=e.className,l=e.disabled,u=e.onClick,d=ar({color:a,ml:c,disabled:l});return Object(x.jsx)(At.a,{color:a,onClick:u,disabled:l,className:s,classes:{root:d.root,label:d.label},children:Object(x.jsx)(jt.a,{title:n,children:i.a.cloneElement(t,{className:d.icon})})})}function cr(e){var t=e.disabled,n=It(),r=n.lineType,a=n.setLineType,o=function(e){switch(e){case qt.FILL:return Vn.a;case qt.LINE:return Qn.a}return Qn.a}(r);return i.a.useEffect((function(){function e(e){switch(e.key){case"b":a(qt.LINE);break;case"f":a(qt.FILL)}}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[a]),Object(x.jsxs)(_n,{circleBg:"border",spacing:1,action:function(e){return Object(x.jsx)(or,{disabled:t,ml:0,title:e?"Close":"Open",children:e?Object(x.jsx)(Ce.a,{}):Object(x.jsx)(o,{})})},children:[Object(x.jsx)(At.a,{onClick:function(){return a(qt.LINE)},children:Object(x.jsx)(jt.a,{title:"hotkey: B",children:Object(x.jsx)(Qn.a,{})})}),Object(x.jsx)(At.a,{onClick:function(){return a(qt.FILL)},children:Object(x.jsx)(jt.a,{title:"hotkey: F",children:Object(x.jsx)(Vn.a,{})})})]})}function sr(){var e=i.a.useRef(document.createElement("style"));i.a.useEffect((function(){var t=e.current;return t.innerHTML="body { overflow: hidden; }",document.getElementsByTagName("head")[0].appendChild(t),function(){document.getElementsByTagName("head")[0].removeChild(t)}}),[])}function lr(){var e,t=i.a.useState(Ye[5]),n=Object(I.a)(t,2),r=n[0],a=n[1],o=i.a.useState(8),c=Object(I.a)(o,2),s=c[0],l=c[1],u=dn().onSave,d=dn().currentElement;sr();var b=Boolean(null===d||void 0===d?void 0:d.finishAt);return Object(x.jsxs)(v.a,{display:"flex",justifyContent:"center",width:"100%",alignItems:"center",children:[Object(x.jsx)(it,{disabled:b,currentColor:r,onColorChange:a}),Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",mx:2,children:[Object(x.jsx)(v.a,{mb:2,children:Object(x.jsx)(Ke,{directive:"Time to Draw",sentence:(null===d||void 0===d||null===(e=d.parent)||void 0===e?void 0:e.text)||"Default sentence text"})}),Object(x.jsxs)(cn,{color:r,lineSize:s,disabled:b,children:[Object(x.jsx)(v.a,{width:768,children:Object(x.jsx)(Nt,{disabled:b})}),Object(x.jsx)(ir,{onSave:function(e){e&&u(e)},isFinish:b})]})]}),Object(x.jsx)(v.a,{children:Object(x.jsx)(kn,{size:s,onSizeChange:l})})]})}function ur(e){var t=e.onFinish,n=dn().session;return Object(x.jsxs)(v.a,{display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"center",p:1,px:{xs:2,sm:4},justifyContent:"space-between",width:"100%",children:[Object(x.jsx)(v.a,{width:{xs:32,sm:64},children:Object(x.jsx)(ue,{count:(null===n||void 0===n?void 0:n.playerFinished)||0,max:(null===n||void 0===n?void 0:n.totalPlayers)||0})}),Object(x.jsx)(v.a,{width:{xs:32,sm:64},children:Object(x.jsx)(Be,{finishAt:new Date((null===n||void 0===n?void 0:n.stepFinishAt)||""),timeDuration:(null===n||void 0===n?void 0:n.timeDuration)||60,onFinish:t})})]})}function dr(e){var t=e.maxWidth,n=void 0===t?"sm":t,r=e.children;return Object(x.jsxs)(v.a,{height:"100vh",display:"flex",flexDirection:"column",children:[Object(x.jsx)(ur,{}),Object(x.jsx)(m.a,{maxWidth:n,className:"full-height",children:r}),Object(x.jsx)(br,{})]})}var br=function(){var e=dn().session;return Object(x.jsx)(Kt,{stepActual:null===e||void 0===e?void 0:e.actualStep,stepMax:null===e||void 0===e?void 0:e.totalPlayers})};function jr(){return Object(x.jsx)(dr,{maxWidth:"lg",children:Object(x.jsx)(v.a,{display:"flex",height:"100%",alignItems:"center",children:Object(x.jsx)(lr,{})})})}function hr(){return Object(x.jsx)("div",{children:"horizontal mode"})}var fr=n(75),mr=n.n(fr);function vr(e){var t=e.size,n=e.color,i=(Object(Ae.a)(h.breakpoints.up("sm")),dn()),a=i.currentElement,o=i.onSave,c=Boolean(null===a||void 0===a?void 0:a.finishAt),s=Object(r.useState)(!1),l=Object(I.a)(s,2),u=l[0],d=l[1];return Object(x.jsx)(cn,{color:n,disabled:c,lineSize:t,children:Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",gridGap:8,alignItems:"center",children:[Object(x.jsx)(v.a,{maxWidth:512,width:"100%",children:Object(x.jsx)(Nt,{disabled:c})}),Object(x.jsxs)(v.a,{display:"flex",flexDirection:"row",gridGap:8,alignItems:"center",justifyContent:"space-between",width:"100%",children:[Object(x.jsx)(ir,{onSave:function(){}}),Object(x.jsx)(cr,{}),Object(x.jsx)(fn,{onSave:function(e){e&&(d(!0),o(e).then((function(){return d(!1)})))},children:Object(x.jsx)(se,{loading:u,startIcon:c?Object(x.jsx)(tr.a,{style:{fontSize:32}}):Object(x.jsx)(mr.a,{style:{fontSize:32}}),color:"primary",size:"medium",children:c?"Edit":"Save"})})]})]})})}function xr(){var e=Object(r.useState)(Ye[5]),t=Object(I.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(8),o=Object(I.a)(a,2),c=o[0],s=o[1],l=Object(Ae.a)(h.breakpoints.up("sm"));return sr(),Object(x.jsx)(dr,{maxWidth:"md",children:Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",gridGap:16,children:[Object(x.jsx)(v.a,{width:"100%",maxWidth:682,children:Object(x.jsx)(pr,{})}),Object(x.jsxs)(v.a,{display:"flex",width:"100%",justifyContent:{xs:"center",sm:"auto"},flexDirection:{xs:"column",sm:"row"},gridGap:16,children:[Object(x.jsx)(v.a,{order:{xs:1,sm:0},children:Object(x.jsx)(it,{currentColor:n,onColorChange:function(e){return i(e)}})}),Object(x.jsx)(vr,{size:c,color:n}),Object(x.jsx)(v.a,{order:{xs:2,sm:0},children:Object(x.jsx)(ot,{currentSize:c,onSizeChange:function(e){return s(e)},flexDirection:l?"column":"row"})})]})]})})}function pr(){var e,t=dn().currentElement;return Object(x.jsx)(Ke,{directive:"Time to Draw",sentence:null===t||void 0===t||null===(e=t.parent)||void 0===e?void 0:e.text})}function Or(){var e=Object(Ae.a)(h.breakpoints.up("md"));return sr(),e?Object(x.jsx)(jr,{}):Object(x.jsx)(gr,{})}function gr(){return be()?Object(x.jsx)(hr,{}):Object(x.jsx)(xr,{})}function wr(){var e=_().player,t=Object(E.b)().enqueueSnackbar,n=Object(r.useState)(!1),i=Object(I.a)(n,2),a=i[0],o=i[1];return Object(x.jsx)(Wt,{onStart:function(){o(!0),z("session",{method:"POST",token:F()}).then((function(){return t("Game successfully started \ud83d\udcaa",{variant:"success"})}),(function(){return t("Sorry, an error occured \ud83d\ude15 [Session-POST]",{variant:"error"})})).finally((function(){return o(!1)}))},isLoading:a,player:e})}function yr(e){var t=e.open,n=e.username,r=e.onKick,i=e.onClose;return Object(x.jsxs)(Ot.a,{fullWidth:!0,maxWidth:"xs",open:t,onClose:function(){return i()},children:[Object(x.jsxs)(gt.a,{children:["Do you really want to kick ",n," ?"]}),Object(x.jsxs)(kt.a,{children:[Object(x.jsx)(ne.a,{onClick:function(){return i()},color:"secondary",children:"Cancel \ud83d\udc4b"}),Object(x.jsx)(ne.a,{onClick:function(){return r()},color:"secondary",children:"Kick \ud83e\udd2b"})]})]})}function kr(){var e=Object(Re.a)(),t=Object(Ae.a)(e.breakpoints.up("sm")),n=ee().players,r=_().player,a=Object(E.b)().enqueueSnackbar,o=i.a.useState(null),c=Object(I.a)(o,2),s=c[0],l=c[1];function u(e,t){l({id:e,name:t})}return Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[(null===n||void 0===n?void 0:n.length)>0?t?Object(x.jsx)(De,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onKick:function(e,t){return u(e,t)}}):Object(x.jsx)(vt,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onClick:function(e,t){return u(e,t)}}):Object(x.jsx)(B,{}),Object(x.jsx)(yr,{open:Boolean(s),username:null===s||void 0===s?void 0:s.name,onKick:function(){s&&(!function(e){var t,n,i="player/players/".concat(e,"/kick");z(i,{token:null===r||void 0===r||null===(t=r.token)||void 0===t?void 0:t.tokenKey,method:"PATCH"}).then((function(){return a("Player kicked \ud83d\ude0e",{variant:"success"})}),(function(){return a("Sorry, an error occured \ud83d\ude15 [kick-PATCH]",{variant:"error"})})),z(i,{token:null===r||void 0===r||null===(n=r.token)||void 0===n?void 0:n.tokenKey,method:"PATCH"}).then((function(){return a("Player kicked \ud83d\ude0e",{variant:"success"})})).catch((function(){return a("Sorry, an error occured \ud83d\ude15 [kick-PATCH]",{variant:"error"})}))}(null===s||void 0===s?void 0:s.id),l(null))},onClose:function(){return l(null)}})]})}function Cr(){var e=ee().players;return Object(x.jsx)(v.a,{pr:{xs:1,md:2},children:Object(x.jsx)(ue,{count:(null===e||void 0===e?void 0:e.length)||0,max:12})})}function Sr(){var e=ee(),t=e.room,n=e.wsState,r=_().player;return Object(x.jsxs)(v.a,{borderRadius:"0 4px 4px 0",minWidth:328,pl:2,height:"auto",display:"flex",flexDirection:"column",alignItems:{xs:"center",sm:"flex-start"},gridGap:24,children:[Object(x.jsx)(bt,{identifier:null===t||void 0===t?void 0:t.identifier,player:r}),Object(x.jsxs)(le.a,{variant:"body1",children:["Debug: ",n]})]})}var Ir=Object(f.a)((function(e){return{playersContainer:Object(de.a)({alignItems:"center",flexDirection:"column",gap:64},e.breakpoints.up("sm"),{alignItems:"flex-start",flexDirection:"row"})}}));function Er(){var e=Ir();return Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",height:"100vh",alignItems:"center",justifyContent:"space-between",width:"100%",pb:2,children:[Object(x.jsx)(v.a,{mb:2,width:"100%",display:"flex",justifyContent:"center",children:Object(x.jsx)(fe,{width:20})}),Object(x.jsxs)(v.a,{display:"flex",flexDirection:"column",bgcolor:"background.paper",maxWidth:656,borderRadius:16,py:1,px:2,alignItems:"flex-end",width:"100%",children:[Object(x.jsx)(Cr,{}),Object(x.jsxs)(v.a,{display:"flex",justifyContent:"space-around",width:"100%",className:e.playersContainer,children:[Object(x.jsx)(Sr,{}),Object(x.jsx)(kr,{})]})]}),Object(x.jsx)(wr,{})]})}var Nr=["A samurai eating a kebab with samoura\xef sauce","A man walking on the ceiling","A gas station on fire","A T-Rex playing chess with monkeys","Someone watching himself on TV","Pinocchio but he's made of iron","A nice shark without teeth","A knight far too tall","A man chained by circus animals","A shipwreck on a chocolate island","An invasion of multicolored aliens","Spongebob becoming HandBob","New colony on Mars leaded by Musk","Sad jedi because the force is not with him","Godzilla VS King Kong","Woman pissed of by noisy neighbors","A world where sofas and humans are interchanged","Stitch meeting The Rock at Shrek's birthday"];var Dr=Object(f.a)((function(e){return{button:Object(de.a)({marginLeft:e.spacing(1),fontSize:28},e.breakpoints.down("xs"),{width:"100%",marginLeft:e.spacing(0),marginTop:e.spacing(1)})}}));function Lr(){var e=dn(),t=e.session,n=e.currentElement,r=e.onSave,a=i.a.useState((null===n||void 0===n?void 0:n.text)||""),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState(!1),u=Object(I.a)(l,2),d=u[0],b=u[1],j=Boolean(!(null===n||void 0===n?void 0:n.finishAt)),h=i.a.useRef(Ve(Nr)).current,f=Dr();return Fe({finishAt:new Date((null===t||void 0===t?void 0:t.stepFinishAt)||""),timeDuration:(null===t||void 0===t?void 0:t.timeDuration)||60,onFinish:function(){z("element/auto/".concat(null===n||void 0===n?void 0:n.id),{token:F(),method:"PATCH",data:{text:c||h}})},onFinishPercentage:98}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ne.a,{item:!0,className:"full-width",children:Object(x.jsxs)(v.a,{display:"flex",width:"100%",flexDirection:{xs:"column",sm:"row"},children:[Object(x.jsx)(xe,{fullWidth:!0,disabled:!j,placeholder:(null===t||void 0===t?void 0:t.stepType)===nn.Start?h:"Your description here",value:c,onChange:function(e){return s(e.target.value)}}),Object(x.jsx)(se,{className:f.button,color:"primary",loading:d,disabled:0===c.length,onClick:function(){b(!0),r(c).then((function(){return b(!1)}))},startIcon:j?Object(x.jsx)(mr.a,{style:{fontSize:28}}):Object(x.jsx)(tr.a,{style:{fontSize:28}}),children:j?"Save":"Edit"})]})})})}function Pr(){return Object(x.jsx)(dr,{maxWidth:"sm",children:Object(x.jsxs)(Ne.a,{container:!0,spacing:3,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"center",children:[Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsx)("img",{src:Jt,alt:"",width:256})}),Object(x.jsx)(Ne.a,{item:!0,children:Object(x.jsx)(le.a,{variant:"h4",children:"Start a story"})}),Object(x.jsx)(Lr,{})]})})}var zr=Object(f.a)((function(e){return{width:Object(de.a)({width:552,height:"auto",minHeight:320},e.breakpoints.down("xs"),{width:"100%",minHeight:0})}}));function Rr(){var e=zr();return Object(x.jsx)(dr,{children:Object(x.jsx)(v.a,{maxWidth:600,alignItems:"center",height:"100%",children:Object(x.jsxs)(Ne.a,{container:!0,spacing:3,direction:"column",alignItems:"center",className:"full-height",justify:"center",children:[Object(x.jsx)(Ne.a,{item:!0,className:"full-width",children:Object(x.jsx)(Ke,{directive:"Describe this scene"})}),Object(x.jsx)(Ne.a,{item:!0,className:"full-width",children:Object(x.jsx)(Ar,{className:e.width})}),Object(x.jsx)(Fr,{})]})})})}function Ar(e){var t=e.className,n=dn().currentElement;return Object(x.jsx)(Yt,{src:null===n||void 0===n?void 0:n.parent.drawImage,className:t})}function Fr(){return dn().currentElement?Object(x.jsx)(Lr,{}):null}var Tr=k.a;function Wr(){return Object(x.jsx)(O,{children:Object(x.jsx)(Tr,{children:Object(x.jsxs)(C.c,{children:[Object(x.jsx)(C.a,{path:"/join/:identifier",component:An}),Object(x.jsx)(C.a,{path:"/start",component:Pr}),Object(x.jsx)(C.a,{path:"/r",component:Br}),Object(x.jsx)(C.a,{path:"/draw",component:Or}),Object(x.jsx)(C.a,{path:"/t",component:Nn}),Object(x.jsx)(C.a,{path:"/home",component:An}),Object(x.jsx)(C.a,{path:"/",component:Dn})]})})})}function Br(){return Object(x.jsx)(J,{children:Object(x.jsx)(X,{children:Object(x.jsx)(Q,{children:Object(x.jsxs)(C.c,{children:[Object(x.jsx)(C.a,{path:"/r/lobby",component:Er}),Object(x.jsx)(C.a,{path:"/r",component:Mr})]})})})})}function Mr(){return Object(x.jsx)(un,{children:Object(x.jsxs)(C.c,{children:[Object(x.jsx)(C.a,{path:"/r/start",component:Pr}),Object(x.jsx)(C.a,{path:"/r/draw",component:Or}),Object(x.jsx)(C.a,{path:"/r/write",component:Rr}),Object(x.jsx)(C.a,{path:"/r/book",component:Gn}),Object(x.jsx)(C.a,{path:"/r/lobby",component:Er})]})})}var Kr=function(){return Object(x.jsx)(E.a,{anchorOrigin:{vertical:"top",horizontal:"right"},preventDuplicate:!0,maxSnack:3,children:Object(x.jsxs)(c.a,{theme:h,children:[Object(x.jsx)(s.a,{}),Object(x.jsx)(Wr,{})]})})};n(155);o.a.render(Object(x.jsx)(Kr,{}),document.getElementById("root"))},59:function(e){e.exports=JSON.parse('[{"id":1,"username":"jeanmich","avatarUrl":"0","isOwner":true,"isPlaying":true,"createdAt":"","roomId":1},{"id":2,"username":"Xx_plao","avatarUrl":"1","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":3,"username":"AAAAAAHHHH","avatarUrl":"2","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":4,"username":"Melvyn","avatarUrl":"3","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":5,"username":"Ana","avatarUrl":"4","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":6,"username":"Alex","avatarUrl":"5","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":7,"username":"Luca","avatarUrl":"6","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1}]')}},[[156,1,2]]]);
//# sourceMappingURL=main.b79164f6.chunk.js.map