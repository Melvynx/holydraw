{"version":3,"sources":["theme.ts","components/AppLayout.tsx","types/websocket.types.ts","api/client.tsx","api/player-provider.tsx","images/spinner.svg","components/Loading.tsx","utils/json.ts","hooks/useSafeMounted.ts","hooks/useWebsocket.tsx","hooks/WebsocketProvider.tsx","hooks/PlayerProvider.tsx","hooks/useRoomStates.tsx","hooks/RoomProvider.tsx","components/SpinnerIcon.tsx","components/BigButton.tsx","components/room/PlayerCount.tsx","images/holydraw-logo.svg","components/HolyDrawLogo.tsx","components/BigInput.tsx","styles/colors.ts","components/room/lobby/PlayerCard.tsx","images/profiles/pp-1.png","images/profiles/profiles-pictures.ts","images/profiles/pp-2.png","images/profiles/pp-3.png","images/profiles/pp-4.png","images/profiles/pp-5.png","images/profiles/pp-6.png","images/profiles/pp-7.png","images/profiles/pp-8.png","components/room/lobby/PlayerCardList.tsx","hooks/useTimerInterval.ts","components/room/StepTimer.tsx","components/room/DirectiveLabel.tsx","components/home/PlayerAvatar.tsx","utils/app-constant.ts","components/room/draw/DrawColorPicker.tsx","components/room/draw/SizePicker.tsx","components/room/lobby/ShareRoomButton.tsx","utils/clipboard.ts","components/room/book/BookPlayerAvatar.tsx","components/room/book/BookPlayerList.tsx","components/home/ButtonModalJoin.tsx","components/canvas/DrawingCanvasContext.tsx","components/canvas/DrawingCanvas.tsx","components/room/lobby/StartButton.tsx","components/room/StepProgress.tsx","components/room/book/BookSentenceElement.tsx","images/gym-guy.svg","components/room/CurrentDrawImage.tsx","components/room/book/BookDrawingElement.tsx","types/canvas.types.ts","utils/canvas.utils.ts","components/canvas/useCanvasPaint.tsx","types/HolyElement.type.ts","types/Session.type.ts","components/canvas/DrawingCanvasProvider.tsx","components/canvas/useCanvasEventListener.tsx","hooks/useSessionStates.tsx","hooks/SessionProvider.tsx","utils/utils.ts","components/canvas/DrawingCanvasActions.tsx","components/circle-button/CircleButton.tsx","components/circle-button/CircleButtons.tsx","components/room/draw/SizePickerV2.tsx","pages/ComponentTest.tsx","pages/DevNav.tsx","hooks/useRandomUsername.tsx","components/home/PlayerForm.tsx","pages/Home.tsx","components/GameBar.tsx","components/room/GameLayout.tsx","components/room/book/BookStartAction.tsx","components/room/book/Album.tsx","components/room/book/BookMock.tsx","hooks/AlbumProvider.tsx","pages/room/Book.tsx","components/room/draw/CanvasActionButtons.tsx","components/room/draw/GameCanvas.tsx","pages/room/Draw.tsx","components/room/draw/useDisableBodyOverflow.tsx","components/room/lobby/LobbyStartAction.tsx","components/room/lobby/KickModal.tsx","components/room/lobby/Players.tsx","components/room/lobby/SettingsMenu.tsx","pages/room/Lobby.tsx","hooks/useRandomSentence.tsx","components/room/start/SentenceForm.tsx","pages/room/Start.tsx","pages/room/Write.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["palette","theme","createPalette","type","primary","main","secondary","background","default","paper","custom","createMuiTheme","typography","h1","fontSize","fontFamily","h4","fontWeight","h5","subtitle1","subtitle2","body1","body2","join","spacing","overrides","MuiButton","label","textOverflow","whiteSpace","root","textTransform","borderRadius","contained","height","minWidth","color","common","white","padding","backgroundColor","position","action","hover","containedSizeLarge","iconSizeLarge","marginLeft","responsiveFontSizes","useStyles","makeStyles","container","maxWidth","breakpoints","values","lg","AppLayout","children","classes","Container","className","Box","display","margin","width","WsStates","WebsocketEvent","SendMessageType","apiURL","process","client","endpoint","a","data","method","token","customHeaders","headers","customConfig","config","body","JSON","stringify","Authorization","Accept","window","fetch","then","response","status","Promise","reject","message","json","ok","playerTokenKey","getToken","localStorage","getItem","setToken","setItem","Loading","justifyContent","alignItems","src","Spinner","alt","parseJson","text","init","parse","e","useSafeMounted","dispatch","mounted","React","useRef","useLayoutEffect","current","useCallback","url","exec","WebsocketContext","createContext","wsState","IDLE","WebsocketProvider","useState","websocket","setWebsocket","setWsState","enqueueSnackbar","useSnackbar","onCloseCallback","isSocketOpened","CLOSED","variant","undefined","safeOnClose","connect","socket","WebSocket","CONNECTING","onopen","send","Authentication","playerToken","CONNECTED","onclose","useEffect","close","useWebsocket","Provider","value","useWebsocketContext","context","useContext","Error","PlayerContext","PlayerContextProvider","player","setPlayer","history","useHistory","onMessage","event","websocketMessage","websocketEvent","NewOwnerPlayer","id","prev","isOwner","addEventListener","removeEventListener","deleted","push","usePlayerContext","useRoomStates","room","setRoom","players","setPlayers","updateRoom","roomId","updatePlayer","removePlayer","playerId","removeItem","prevPlayers","playerIndex","findIndex","p","playersCopy","splice","addPlayer","find","RoomContext","RoomContextProvider","Invalid","error","PlayerJoin","PlayerLeft","SessionStart","PlayerKicked","playingPlayers","filter","isPlaying","location","pathname","length","useRoomContext","spin","animation","transform","SpinnerIcon","props","style","aria-label","clsx","BigButton","loading","startIcon","Button","size","PlayerCount","count","max","py","Typography","logo","textAlign","down","HolyDrawLogo","HolyDrawImage","input","border","cursor","inputMedium","up","inputLarge","disabled","fade","transition","boxShadow","focus","shadows","iconMedium","marginRight","iconLarge","BigInput","fullWidth","inputRef","setFocus","onClick","cloneElement","ref","onFocus","onBlur","avatar","dark","overflow","badge","bottom","left","zIndex","icon","badgeIcon","username","kickButton","PlayerCard","name","isKickable","isCurrentPlayer","onKick","bgcolor","data-testid","Avatar","component","profilesPictures","PlayerCardList","Grid","map","isPlayerSelected","item","xs","Number","avatarUrl","useTimerEvent","finishAt","timeDuration","onFinish","onFinishPercentage","intervalRef","interval","setInterval","getProgressPercentage","clearInterval","progress","Math","round","getTime","Date","CustomCircularProgress","withStyles","createStyles","circle","strokeLinecap","CircularProgress","StepTimer","setProgress","timerInterval","setTimerInterval","useTimerInterval","useTheme","matches","useMediaQuery","thickness","sentence","DirectiveLabel","directive","flexDirection","button","outline","imgBox","img","PlayerAvatar","image","onShuffle","borderColor","colors","DrawColorPicker","currentColor","onColorChange","flexWrap","isSelected","m","buttonSizes","SizePicker","currentSize","onSizeChange","gridGap","i","isCurrentSize","SizePickerPoint","ShareRoomButton","identifier","tempInput","document","createElement","appendChild","select","execCommand","removeChild","copyToClipboard","origin","useAvatarStyles","BookPlayerAvatar","overflowX","BookPlayerList","isDeviceSM","Tooltip","title","placement","sm","ButtonModalJoin","urlIdentifier","open","setOpen","setIdentifier","Dialog","onClose","DialogTitle","DialogContent","TextField","autoFocus","onChange","target","DialogActions","DrawingCanvasContext","useCanvasContext","canvas","canvasBox","DrawingCanvas","canvasRef","StartButton","startName","isLoading","onStart","mt","CustomLinearProgress","colorPrimary","bar","LinearProgress","StepProgress","stepActual","stepMax","percentage","stepPercentage","top","box","BookSentenceElement","ml","mr","alignSelf","CurrentDrawImage","LineType","BookDrawingElement","clearDraw","getContext","clearRect","drawCanvasLine","ctx","line","beginPosition","controlPosition","endPosition","strokeStyle","fillStyle","lineJoin","lineCap","lineWidth","beginPath","LINE","moveTo","x","y","quadraticCurveTo","stroke","CIRCLE","arc","PI","fill","closePath","getQuadraticCurveCoordinates","positions","slice","lastPoint","prevPoint","controlPoint","endPoint","getCoordinates","canvasScale","pageX","offsetLeft","pageY","offsetTop","fillCanvas","coordinate","colorLayer","getImageData","startColor","startCoordinate","r","g","b","getStartColor","endColor","hex","result","parseInt","hexToRgb","pixelPos","matchStartColor","tempColor","pixelStack","colorCanvasWidth","newCoordinate","pop","currentPosition","reachLeft","reachRight","putImageData","useCanvasPaint","ElementType","SessionStepType","scale","lineType","mouseCoordinate","lines","deletedLines","getLastLine","addLastLine","points","paint","newMousePosition","lastLine","create","isNewLine","FILL","refresh","forEach","positionCopy","rerenderDraw","undo","deletedLine","redo","redoLine","clear","confirm","onKeyDown","key","ctrlKey","metaKey","shiftKey","canvasWidth","DrawingCanvasProvider","lineSize","setCurrentSize","setLineType","isPainting","setIsPainting","onResize","newWidth","parentElement","getBoundingClientRect","newHeight","onMouseDown","coordinates","onMouseUp","onMouseEnter","onMouseMove","touchMove","mouseEvent","MouseEvent","clientX","touches","clientY","touchStart","useCanvasEventListener","useMemo","useSessionStates","session","setSession","newPathname","stepType","Start","Write","Draw","Book","SessionContext","onSave","resolve","SessionContextProvider","currentElement","setCurrentElement","SessionUpdate","actualStep","content","elementId","elementContent","Drawing","drawimage","element","catch","finally","useSessionContext","callAll","fns","args","fn","getRandomValueFromArray","possibilities","floor","random","OnClearAction","OnUndoAction","OnRedoAction","OnSaveAction","stepFinishAt","draw","toDataURL","sin","pi","right","cos","visibility","CircleButton","circlebg","opacity","circleBg","CircleButtons","actionComponent","ClickAwayListener","onClickAway","index","SizeSlider","thumb","marginTop","track","rail","vertical","Slider","ValueLabelComponent","enterTouchDelay","SizePickerV2","orientation","isVertical","mb","step","min","aria-labelledby","ComponentTest","ppIndex","setPpIndex","setColor","mobileCanvas","setMobileCanvas","setDisabled","setSize","size2","setSize2","nextPp","IconButton","GymGuy","FormControlLabel","control","Switch","checked","canvasImage","win","write","testPlayerList","defaultValue","newValue","valueLabelDisplay","DevNav","NavLink","to","usernames","marginButton","PlayerForm","setUsername","setLoading","defaultUsername","onConnect","px","placeholder","catchedIdentifier","startsWith","split","String","tokenKey","Home","match","params","direction","justify","GameBar","playerFinished","totalPlayers","GameLayout","StepProgressWithContext","BookStartAction","setIsLoading","Album","album","creator","isSentence","Sentence","drawImage","BookMock","setAlbum","elements","sortedElements","reduce","accumulator","initiatorId","flatArray","Object","keys","alert","gap","AlbumContext","AlbumContextProvider","albums","setAlbums","NewAlbumElement","prevAlbums","prevAlbumsCopy","wrap","CanvasActionButtons","CanvasLineTypeButton","Icon","FormatColorFillIcon","BrushIcon","getCurrentIcon","GameCanvas","isEditing","Boolean","styleElement","currentStyle","innerHTML","getElementsByTagName","useDisableBodyOverflow","CurrentDirectiveLabel","order","parent","LobbyStartAction","KickModal","Players","playerToKick","setPlayerToKick","kickPlayer","PlayerCountBox","pr","md","SettingsMenu","pl","playersContainer","Lobby","sentences","StartForm","setSentence","defaultSentence","minHeight","CurrentDrawImageWithContext","Router","HashRouter","Routes","path","RoomRoutes","SessionRoutes","App","anchorOrigin","horizontal","preventDuplicate","maxSnack","ThemeProvider","CssBaseline","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d9aa103e.chunk.js","sourcesContent":["import { responsiveFontSizes, createMuiTheme } from '@material-ui/core';\nimport createPalette, { Palette } from '@material-ui/core/styles/createPalette';\n\nexport const PRIMARY = '#880061';\nexport const SECONDARY = '#9c27b0';\n\nfunction createBaseTheme(palette: Palette) {\n  return createMuiTheme({\n    palette: palette,\n    typography: {\n      h1: {\n        fontSize: 64,\n        fontFamily: 'Modak',\n      },\n      h4: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 32,\n      },\n      h5: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        fontFamily: 'Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI',\n      },\n      subtitle1: {\n        fontFamily: 'Work Sans',\n        fontWeight: 'bold',\n        fontSize: 16,\n      },\n      subtitle2: {\n        fontSize: 12,\n      },\n      body1: {\n        fontSize: 16,\n      },\n      body2: {\n        fontSize: 14,\n      },\n      fontFamily: [\n        '-apple-system',\n        'BlinkMacSystemFont',\n        'Segoe UI',\n        'Roboto',\n        'Oxygen',\n        'Ubuntu',\n        'Cantarell',\n        'Open Sans',\n        'Helvetica Neue',\n        'sans-serif',\n      ].join(','),\n    },\n    spacing: 8,\n    overrides: {\n      MuiButton: {\n        label: {\n          textOverflow: 'ellipsis',\n          whiteSpace: 'nowrap',\n        },\n        root: {\n          textTransform: 'none',\n          borderRadius: 8,\n        },\n        contained: {\n          height: 68,\n          minWidth: 128,\n          fontSize: 24,\n          color: palette.common.white,\n          padding: '18px 24px',\n          borderRadius: 34,\n          fontFamily: 'Work Sans',\n          backgroundColor: palette.custom.main,\n          position: 'relative',\n          '& .$MuiButton-label': {\n            height: 20,\n          },\n          '@media (min-width: 600px)': {\n            fontSize: 28,\n            height: 72,\n          },\n          '&:hover': {\n            backgroundColor: palette.action.hover,\n          },\n        },\n        containedSizeLarge: {\n          fontSize: 32,\n          height: 78,\n          borderRadius: 38,\n          '@media (min-width: 600px)': {\n            fontSize: 36,\n            height: 82,\n            borderRadius: 40,\n          },\n        },\n\n        iconSizeLarge: {\n          marginLeft: 0,\n        },\n      },\n    },\n  });\n}\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface Palette {\n    custom: {\n      main: string;\n    };\n  }\n\n  interface PaletteOptions {\n    custom: {\n      main: string;\n    };\n  }\n}\n\nlet theme = createBaseTheme(\n  createPalette({\n    type: 'dark',\n    primary: {\n      main: PRIMARY,\n    },\n    secondary: {\n      main: SECONDARY,\n    },\n    background: {\n      default: '#0f131a',\n      paper: '#1a1d24',\n    },\n    custom: {\n      main: '#272B31',\n    },\n  }),\n);\n\ntheme = responsiveFontSizes(theme);\n\nexport default theme;\n","import { Box, Container, makeStyles } from '@material-ui/core';\nimport React from 'react';\n\ntype AppLayoutProps = {\n  children?: React.ReactElement | React.ReactElement[];\n};\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    padding: 0,\n    height: '100%',\n    maxWidth: `calc(${theme.breakpoints.values.lg}px - 128px)`,\n  },\n}));\n\nexport default function AppLayout({ children }: AppLayoutProps) {\n  const classes = useStyles();\n  return (\n    <Container className={classes.container} maxWidth=\"lg\">\n      <Box\n        display=\"block\"\n        margin=\"auto\"\n        height=\"100%\"\n        width=\"100%\"\n        minWidth={320}>\n        {children}\n      </Box>\n    </Container>\n  );\n}\n","import { SessionState } from 'node:http2';\nimport Player from 'types/Player.type';\nimport { HolyElement } from './HolyElement.type';\n\nexport enum WsStates {\n  IDLE = 'Loading...',\n  CONNECTING = 'You will be connected',\n  CONNECTED = 'You are connected',\n  CLOSED = \"You're disconnected\",\n}\n\nexport enum WebsocketEvent {\n  Invalid = -1,\n  PlayerJoin = 1,\n  PlayerLeft = 2,\n  PlayerFinished = 3,\n  NewOwnerPlayer = 4,\n  PlayerKicked = 5,\n  SessionStart = 11,\n  SessionUpdate = 12,\n  NextStep = 13, // on a step is finish\n  NewAlbumElement = 14,\n}\n\nexport enum SendMessageType {\n  Authentication = 1,\n}\n\nexport type WebsocketMessage = {\n  websocketEvent: WebsocketEvent;\n  player?: Player;\n  playerId?: number;\n  album?: HolyElement;\n  session?: Partial<SessionState>;\n  error?: string;\n};\n","function getApiUrl() {\n  switch (process.env.NODE_ENV) {\n    case 'development':\n      return process.env.REACT_APP_API_URL;\n    case 'production':\n      return process.env.REACT_APP_PROD_API_URL;\n    case 'test':\n      return 'http://test-api-url.com/api';\n  }\n}\n\nexport const apiURL: string = getApiUrl() || 'http://default-url.com/api';\n\ntype config = {\n  data?: any;\n  token?: string | null;\n  method?: 'GET' | 'POST' | 'PUT' | 'DELETE' | 'OPTIONS' | 'PATCH';\n  headers?: HeadersInit;\n  // if you want all possibility of `fetch`\n  customConfig?: RequestInit;\n};\n\n/*\n  To call the api.\n\n  To `get` an item\n  client(\"item\") OR client(\"item\", {method: \"GET\"}).then(resultJson => ...)\n  But it's \"GET\" by default if no data.\n\n  If you want `POST` an item, you need to provide data.\n  If Data was provided, default method is `POST`\n  client(\"item\", {data: myObject}).then(resultJson => ...).catch(error => ...)\n\n  To `patch` an item\n  client(\"item/1\", {method: \"PATCH\"}).then(resultJson => ...).catch(error => ...)\n  \n  To provide a Token :\n  client(\"item/1\", {method: \"PATCH\", token: \"MYTOKEN\"}).then(resultJson => ..., error => ...)\n\n  Same for post etc...\n\n  You can see exemple in `client.test.tsx`\n*/\nasync function client<T>(\n  endpoint: string,\n  { data, method, token, headers: customHeaders, customConfig }: config = {},\n): Promise<T> {\n  const config: RequestInit = {\n    method: method || (data ? 'POST' : 'GET'),\n    body: data ? JSON.stringify(data) : null,\n    headers: {\n      Authorization: token ? `Bearer ${token}` : '',\n      'Content-Type': data ? 'application/json' : '',\n      Accept: 'application/json',\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n\n  return window.fetch(`${apiURL}/${endpoint}`, config).then(async response => {\n    // statusCode \"401\" is for unauthenticated request\n    if (response.status === 401) {\n      return Promise.reject({ message: 'Please re-authenticate.' });\n    }\n\n    const data = await response.json();\n    if (response.ok) {\n      return data;\n    } else {\n      return Promise.reject(data);\n    }\n  });\n}\n\nexport { client };\n","const playerTokenKey = '__player_provider_token__';\n\nfunction getToken() {\n  // TODO: check the token exist in the API\n  return window.localStorage.getItem(playerTokenKey);\n}\n\nfunction destroy() {\n  window.localStorage.removeItem(playerTokenKey);\n  // TODO: invalidate the token in API\n}\n\nfunction setToken(token: string) {\n  window.localStorage.setItem(playerTokenKey, token);\n  // TODO: invalidate the token in API\n}\n\nexport { getToken, destroy, setToken };\n","export default __webpack_public_path__ + \"static/media/spinner.efdf2d72.svg\";","import { Box } from '@material-ui/core';\nimport Spinner from '../images/spinner.svg';\n\nexport default function Loading() {\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n      <img src={Spinner} alt=\"loading\" />\n    </Box>\n  );\n}\n","export function parseJson<T>(text: string, init?: T): T | undefined {\n  let json: T;\n\n  try {\n    json = JSON.parse(text);\n  } catch (e) {\n    return init;\n  }\n\n  return json ? json : init;\n}\n","import React from 'react';\n\n/*\n * return function will be only called if component is currently mounted\n */\nfunction useSafeMounted(dispatch: (...args: any[]) => any) {\n  const mounted = React.useRef(false);\n\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n\n  return React.useCallback(\n    (...args: unknown[]) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch],\n  );\n}\n\nexport default useSafeMounted;\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { getToken } from '../api/player-provider';\nimport useSafeMounted from 'hooks/useSafeMounted';\nimport { SendMessageType, WsStates } from 'types/websocket.types';\nimport { apiURL } from 'api/client';\n\nconst protocol = process.env.NODE_ENV === 'development' ? 'ws' : 'wss';\n\nconst domainRegExp = /\\b(?:(?:https?|ftp):\\/\\/)?([^/\\n]+)\\/?/;\nconst url = `${protocol}://${domainRegExp.exec(apiURL)?.[1]}/api/stream`;\n\nexport function useWebsocket() {\n  const [websocket, setWebsocket] = React.useState<WebSocket>();\n  const [wsState, setWsState] = React.useState<WsStates>(WsStates.IDLE);\n  const { enqueueSnackbar } = useSnackbar();\n\n  const onCloseCallback = React.useCallback(\n    (isSocketOpened: boolean) => {\n      setWsState(WsStates.CLOSED);\n      if (isSocketOpened) {\n        enqueueSnackbar('Connexion lost ⚡️ [ws]', { variant: 'error' });\n        setWebsocket(undefined);\n      }\n    },\n    [enqueueSnackbar],\n  );\n  const safeOnClose = useSafeMounted(onCloseCallback);\n\n  const connect = React.useCallback(() => {\n    const socket = new WebSocket(url);\n    let isSocketOpened = false;\n    setWsState(WsStates.CONNECTING);\n    setWebsocket(socket);\n\n    socket.onopen = function () {\n      isSocketOpened = true;\n      // identifie the request\n      socket.send(\n        JSON.stringify({\n          type: SendMessageType.Authentication,\n          playerToken: getToken(),\n        }),\n      );\n      setWsState(WsStates.CONNECTED);\n    };\n\n    socket.onclose = function () {\n      safeOnClose(isSocketOpened);\n    };\n  }, [safeOnClose]);\n\n  React.useEffect(() => {\n    if (websocket) {\n      return () => websocket.close();\n    }\n    connect();\n  }, [connect, websocket]);\n\n  return { wsState, websocket };\n}\n","import React from 'react';\nimport { WsStates } from 'types/websocket.types';\nimport { useWebsocket } from './useWebsocket';\n\ntype WebsocketContextProps = {\n  wsState: WsStates;\n  websocket?: WebSocket;\n};\n\nconst WebsocketContext = React.createContext<WebsocketContextProps>({\n  wsState: WsStates.IDLE,\n});\n\ntype WebsocketContextProviderProps = { children: React.ReactElement };\n\nexport function WebsocketProvider({ children }: WebsocketContextProviderProps) {\n  const { wsState, websocket } = useWebsocket();\n\n  const values = { wsState, websocket };\n\n  return (\n    <WebsocketContext.Provider value={values}>\n      {children}\n    </WebsocketContext.Provider>\n  );\n}\n\nexport function useWebsocketContext() {\n  const context = React.useContext(WebsocketContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Loading from '../components/Loading';\nimport Player from '../types/Player.type';\nimport { parseJson } from '../utils/json';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype PlayerContextProps = {\n  player?: Player;\n};\n\nconst PlayerContext = React.createContext<PlayerContextProps>({});\n\ntype PlayerContextProviderProps = { children: React.ReactElement };\n\nexport function PlayerContextProvider({\n  children,\n}: PlayerContextProviderProps) {\n  const [player, setPlayer] = React.useState<Player>();\n  const { enqueueSnackbar } = useSnackbar();\n  const { websocket } = useWebsocketContext();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewOwnerPlayer:\n          if (websocketMessage?.player?.id === player?.id) {\n            setPlayer(prev => (prev ? { ...prev, isOwner: true } : prev));\n          }\n          break;\n      }\n    }\n    if (websocket && player) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [player, websocket]);\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Player>('player/me', { token: getToken() }).then(\n      player => !deleted && setPlayer(player),\n      () => {\n        enqueueSnackbar(\"You haven't joined a game yet.\", { variant: 'error' });\n        history.push('/home');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  const values = { player };\n\n  return (\n    <PlayerContext.Provider value={values}>\n      {player ? children : <Loading />}\n    </PlayerContext.Provider>\n  );\n}\n\nexport function usePlayerContext() {\n  const context = React.useContext(PlayerContext);\n  if (!context)\n    throw new Error(\n      'usePlayerContext should be used within a PlayerContextProvider',\n    );\n  return context;\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from '../api/client';\nimport { destroy, getToken } from '../api/player-provider';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { usePlayerContext } from './PlayerProvider';\n\nexport function useRoomStates() {\n  const [room, setRoom] = React.useState<Room>();\n  const [players, setPlayers] = React.useState<Player[]>([]);\n  const { player } = usePlayerContext();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const updateRoom = React.useCallback(() => {\n    client<Room>(`room/${player?.roomId}`, { token: getToken() }).then(setRoom);\n  }, [player?.roomId]);\n\n  const updatePlayer = React.useCallback(() => {\n    client<Player[]>(`room/${player?.roomId}/players`, {\n      token: getToken(),\n    }).then(setPlayers);\n  }, [player?.roomId]);\n\n  const removePlayer = React.useCallback(\n    (playerId?: number) => {\n      if (!playerId) return;\n      if (playerId === player?.id) {\n        history.push('/home');\n        destroy();\n        enqueueSnackbar(\"Seems like you've been kicked from the room 😅\", {\n          variant: 'info',\n        });\n      }\n      setPlayers(prevPlayers => {\n        const playerIndex = prevPlayers?.findIndex(p => p.id === playerId);\n        if (playerIndex !== -1) {\n          const playersCopy = [...prevPlayers];\n          playersCopy.splice(playerIndex, 1);\n          return playersCopy;\n        }\n        return prevPlayers;\n      });\n    },\n    [enqueueSnackbar, history, player?.id],\n  );\n\n  const addPlayer = React.useCallback((player?: Player) => {\n    if (!player) return;\n\n    setPlayers(prevPlayers => {\n      if (prevPlayers.find(p => p.id === player.id)) return prevPlayers;\n      return [...prevPlayers, player];\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (!player?.roomId) {\n      history.push('/home');\n      return;\n    }\n    updateRoom();\n    updatePlayer();\n  }, [history, player?.roomId, updatePlayer, updateRoom]);\n\n  return { updatePlayer, updateRoom, removePlayer, addPlayer, room, players };\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Player from '../types/Player.type';\nimport Room from '../types/Room.type';\nimport { parseJson } from '../utils/json';\nimport { useRoomStates } from './useRoomStates';\nimport {\n  WebsocketMessage,\n  WebsocketEvent,\n  WsStates,\n} from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype RoomSocketContextProps = {\n  room?: Room;\n  wsState: WsStates;\n  players: Player[];\n};\n\nconst RoomContext = React.createContext<RoomSocketContextProps>({\n  wsState: WsStates.IDLE,\n  players: [],\n});\n\ntype RoomSocketContextProviderProps = { children: React.ReactElement };\n\nexport function RoomContextProvider({\n  children,\n}: RoomSocketContextProviderProps) {\n  const {\n    room,\n    players,\n    updatePlayer,\n    removePlayer,\n    addPlayer,\n  } = useRoomStates();\n  const history = useHistory();\n  const { wsState, websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const message = event.data;\n      const websocketMessage = parseJson<WebsocketMessage>(message);\n      if (!websocketMessage) return;\n\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.Invalid:\n          enqueueSnackbar(websocketMessage.error, { variant: 'error' });\n          history.push('/home');\n          break;\n        case WebsocketEvent.PlayerJoin:\n          addPlayer(websocketMessage.player);\n          break;\n        case WebsocketEvent.PlayerLeft:\n          removePlayer(websocketMessage.playerId);\n          break;\n        case WebsocketEvent.NewOwnerPlayer:\n          updatePlayer();\n          break;\n        case WebsocketEvent.SessionStart:\n          history?.push('/r/start');\n          break;\n        case WebsocketEvent.PlayerKicked:\n          removePlayer(websocketMessage.playerId);\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [\n    addPlayer,\n    enqueueSnackbar,\n    history,\n    removePlayer,\n    updatePlayer,\n    websocket,\n  ]);\n\n  React.useEffect(() => {\n    const playingPlayers = players.filter(player => player.isPlaying);\n    if (history.location.pathname === '/r/lobby' && playingPlayers.length > 0) {\n      history?.push('/r/start');\n    }\n  }, [players, history]);\n\n  const values = { room, wsState, players };\n\n  return <RoomContext.Provider value={values}>{children}</RoomContext.Provider>;\n}\n\nexport function useRoomContext() {\n  const context = React.useContext(RoomContext);\n  if (!context)\n    throw new Error(\n      'useRoomContext should be used within a RoomSocketContextProvider',\n    );\n  return context;\n}\n","import { makeStyles } from '@material-ui/core';\nimport clsx from 'clsx';\nimport LoopIcon from '@material-ui/icons/Loop';\n\nconst useStyles = makeStyles(() => ({\n  spin: {\n    animation: `spinnerIconEffect 1s linear infinite`,\n  },\n  '@global': {\n    '@keyframes spinnerIconEffect': {\n      '0%': { transform: 'rotate(0deg)' },\n      '100%': { transform: 'rotate(-360deg)' },\n    },\n  },\n}));\n\nexport default function SpinnerIcon(props: {\n  className?: string;\n  style?: any;\n}) {\n  const classes = useStyles();\n  return (\n    <LoopIcon\n      style={props.style}\n      aria-label=\"spinner icon\"\n      className={clsx(props.className, classes.spin)}\n    />\n  );\n}\n","import { Button, ButtonProps } from '@material-ui/core';\nimport SpinnerIcon from './SpinnerIcon';\n\ntype BigButtonProps = ButtonProps & {\n  children?: React.ReactNode;\n  loading?: boolean;\n  onClick?: () => void;\n};\n\n/*\n  BigButton is an abstraction of `Button` from `Material-ui` using the theme.\n\n  <BigButton>Label</BigButton>: Will create button with black background.\n  <BigButton color=\"primary\">Label</BigButton>: Will create button with the primary background.\n  <BigButton size=\"large\">Label</BigButton>: Only large and medium using on this button\n*/\nexport default function BigButton({\n  children,\n  loading,\n  color = 'default',\n  startIcon,\n  ...props\n}: BigButtonProps) {\n  return (\n    <Button\n      variant=\"contained\"\n      color={color}\n      startIcon={loading ? undefined : startIcon}\n      {...props}>\n      {loading ? (\n        <SpinnerIcon style={{ fontSize: props.size === 'medium' ? 32 : 40 }} />\n      ) : (\n        children\n      )}\n    </Button>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\n\ntype PlayerCountProps = {\n  count: number;\n  max: number;\n};\n\nexport default function PlayerCount({ count, max }: PlayerCountProps) {\n  return (\n    <Box py={1}>\n      <Typography variant=\"subtitle1\">\n        {count}/{max}\n      </Typography>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/holydraw-logo.78893378.svg\";","import { makeStyles, Theme } from '@material-ui/core';\nimport HolyDrawImage from 'images/holydraw-logo.svg';\n\nconst useStyles = makeStyles<Theme, { width: number }>(theme => ({\n  logo: {\n    textAlign: 'center',\n    width: props => props.width * 8,\n    height: 'auto',\n    [theme.breakpoints.down('xs')]: {\n      width: props => ((props.width * 8) / 3) * 2,\n    },\n  },\n}));\n\nexport default function HolyDrawLogo({ width = 24 }: { width?: number }) {\n  const classes = useStyles({ width });\n  return (\n    <img src={HolyDrawImage} className={classes.logo} alt=\"holy draw logo\" />\n  );\n}\n","import React, { InputHTMLAttributes } from 'react';\nimport { fade, makeStyles, Theme } from '@material-ui/core';\nimport clsx from 'clsx';\n\ntype Variant = 'medium' | 'large';\n\ntype StylesProps = {\n  focus: boolean;\n  disabled?: boolean;\n  variant: Variant;\n};\n\nconst useStyles = makeStyles<Theme, StylesProps>(theme => ({\n  input: {\n    backgroundColor: 'inherit',\n    border: 'none',\n    width: '100%',\n    fontFamily: 'Work Sans',\n    color: theme.palette.text.primary,\n    cursor: 'inherit',\n  },\n  inputMedium: {\n    fontSize: 24,\n    height: 32,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 28,\n      height: 32,\n    },\n  },\n  inputLarge: {\n    fontSize: 32,\n    height: 38,\n    [theme.breakpoints.up('sm')]: {\n      fontSize: 36,\n      height: 40,\n    },\n  },\n  container: {\n    display: 'flex',\n    padding: props => (props.variant === 'medium' ? '18px 20px' : '20px 20px'),\n    backgroundColor: props =>\n      props.disabled ? '#15181F' : theme.palette.background.paper,\n    cursor: props => (props.disabled ? 'not-allowed' : 'text'),\n    border: props =>\n      props.disabled\n        ? `2px solid ${fade(theme.palette.primary.main, 0.6)}`\n        : `2px solid ${theme.palette.primary.main}`,\n    borderRadius: props => (props.variant === 'medium' ? 34 : 38),\n    alignItems: 'center',\n    transition: 'box-shadow ease-in .2s',\n    boxShadow: props =>\n      props.focus\n        ? `0 0 2px 0.2rem ${fade(theme.palette.primary.main, 0.4)}`\n        : theme.shadows[2],\n  },\n  iconMedium: {\n    width: 28,\n    height: 28,\n    marginRight: theme.spacing(1.5),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n      height: 32,\n      width: 32,\n    },\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n  iconLarge: {\n    width: 38,\n    height: 38,\n    marginRight: theme.spacing(1.5),\n    [theme.breakpoints.up('sm')]: {\n      marginRight: theme.spacing(2),\n      height: 40,\n      width: 40,\n    },\n    color: props =>\n      props.disabled ? theme.palette.text.disabled : theme.palette.text.primary,\n  },\n}));\n\ntype BigInputProps = {\n  startIcon?: React.ReactElement;\n  variant?: Variant;\n  fullWidth?: boolean;\n} & InputHTMLAttributes<HTMLInputElement>;\n\nexport default function BigInput({\n  disabled,\n  variant = 'medium',\n  startIcon,\n  fullWidth,\n  ...props\n}: BigInputProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n  const [focus, setFocus] = React.useState(false);\n  const classes = useStyles({ disabled, focus, variant });\n\n  return (\n    <div\n      className={clsx(classes.container, { 'full-width': fullWidth })}\n      onClick={() => inputRef.current?.focus()}>\n      {startIcon &&\n        React.cloneElement(startIcon, {\n          className:\n            variant === 'medium' ? classes.iconMedium : classes.iconLarge,\n          'data-testid': 'biginput-icon',\n        })}\n      <input\n        ref={inputRef}\n        className={clsx(\n          classes.input,\n          variant === 'medium' ? classes.inputMedium : classes.inputLarge,\n          'big-input-safari',\n        )}\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n        disabled={disabled}\n        {...props}\n      />\n    </div>\n  );\n}\n","export const baseColor = '#880061';\nexport const bgColor = '#0F131A';\nexport const paperColor = '#1A1D24';\nexport const disabledText = '#BDBDBD';\nexport const secondaryText = '#E0E0E0';\nexport const primaryText = '#F2F2F2';\n\nexport const primaryFade = (fade: number) => `rgba(136, 0, 97, ${fade})`;\nexport const bgFade = (fade: number) => `rgba(15, 19, 26, ${fade})`;\n","import { baseColor } from 'styles/colors';\nimport { Avatar, Box, makeStyles, Typography } from '@material-ui/core';\nimport PersonIcon from '@material-ui/icons/Person';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport clsx from 'clsx';\n\ntype PlayerCardProps = {\n  id: number;\n  name: string;\n  avatar: string;\n  isOwner?: boolean;\n  isKickable?: boolean;\n  isCurrentPlayer?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 48,\n    height: 48,\n    backgroundColor: `${theme.palette.primary.dark}`,\n    boxShadow: theme.shadows[5],\n    overflow: 'visible',\n    '&> img': {\n      height: 48,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: baseColor,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  icon: {\n    color: '#ffffff',\n  },\n  badgeIcon: {\n    width: 16,\n    height: 16,\n  },\n  username: {\n    fontFamily: 'Work Sans',\n    fontSize: 20,\n    fontWeight: 'bold',\n    overflow: 'hidden',\n    maxWidth: 128,\n    whiteSpace: 'nowrap',\n  },\n  kickButton: {\n    cursor: 'pointer',\n  },\n}));\n\nexport default function PlayerCard({\n  id,\n  name,\n  avatar,\n  isOwner,\n  isKickable,\n  isCurrentPlayer,\n  onKick,\n}: PlayerCardProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      width={256}\n      height={64}\n      borderRadius={40}\n      padding={1}\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"space-between\"\n      bgcolor=\"background.default\">\n      <Box position=\"relative\">\n        {isCurrentPlayer && (\n          <div className={classes.badge}>\n            <PersonIcon\n              className={clsx(classes.icon, classes.badgeIcon)}\n              data-testid=\"user-icon\"\n            />\n          </div>\n        )}\n        <Avatar src={avatar} className={classes.avatar} />\n      </Box>\n\n      <Typography color=\"textPrimary\" className={classes.username}>\n        {name}\n      </Typography>\n      <Box display=\"flex\" alignItems=\"center\">\n        {isOwner ? (\n          <StarIcon className={classes.icon} data-testid=\"star-icon\" />\n        ) : (\n          isKickable && (\n            <Box\n              component=\"button\"\n              padding={0}\n              border={0}\n              className={classes.kickButton}\n              height={24}\n              onClick={() => onKick?.(id, name)}\n              bgcolor=\"transparent\">\n              <CloseIcon className={classes.icon} />\n            </Box>\n          )\n        )}\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/pp-1.acb77223.png\";","import Pp1 from './pp-1.png';\nimport Pp2 from './pp-2.png';\nimport Pp3 from './pp-3.png';\nimport Pp4 from './pp-4.png';\nimport Pp5 from './pp-5.png';\nimport Pp6 from './pp-6.png';\nimport Pp7 from './pp-7.png';\nimport Pp8 from './pp-8.png';\n\nconst profilesPictures = [Pp1, Pp2, Pp3, Pp4, Pp5, Pp6, Pp7, Pp8];\n\nexport default profilesPictures;\n","export default __webpack_public_path__ + \"static/media/pp-2.c82c2211.png\";","export default __webpack_public_path__ + \"static/media/pp-3.9c11a583.png\";","export default __webpack_public_path__ + \"static/media/pp-4.5ae6cc4a.png\";","export default __webpack_public_path__ + \"static/media/pp-5.d5627fd6.png\";","export default __webpack_public_path__ + \"static/media/pp-6.228ed3be.png\";","export default __webpack_public_path__ + \"static/media/pp-7.762b4b0e.png\";","export default __webpack_public_path__ + \"static/media/pp-8.7bfd9d10.png\";","import PlayerCard from './PlayerCard';\nimport Player from 'types/Player.type';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport { Box, Grid } from '@material-ui/core';\n\ntype PlayerCardListProps = {\n  players?: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onKick?: (id: number, name: string) => void;\n};\n\nexport default function PlayerCardList({\n  players,\n  playerId,\n  isKickable,\n  onKick,\n}: PlayerCardListProps) {\n  return (\n    <Box height={384} width={256 + 8 + 8} overflow=\"hidden scroll\">\n      <Grid container spacing={2} alignItems=\"flex-end\">\n        {players &&\n          players.map(player => {\n            const isPlayerSelected = playerId === player.id;\n            return (\n              <Grid item xs={12} key={player.id}>\n                <PlayerCard\n                  id={player.id}\n                  name={player.username}\n                  avatar={profilesPictures[Number(player.avatarUrl)]}\n                  isOwner={player.isOwner}\n                  isKickable={isKickable}\n                  isCurrentPlayer={isPlayerSelected}\n                  onKick={onKick}\n                />\n              </Grid>\n            );\n          })}\n      </Grid>\n    </Box>\n  );\n}\n","import React from 'react';\n\nexport type UseTimerIntervalProps = {\n  finishAt: Date;\n  timeDuration: number;\n  onFinish?: () => void;\n  onFinishPercentage?: number;\n};\n\nexport default function useTimerInterval({\n  finishAt,\n  timeDuration,\n  onFinish,\n}: UseTimerIntervalProps) {\n  const [progress, setProgress] = React.useState(0);\n  const [timerInterval, setTimerInterval] = React.useState<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    setProgress(getProgressPercentage(finishAt, timeDuration));\n    const interval = setInterval(\n      () => setProgress(getProgressPercentage(finishAt, timeDuration)),\n      1000,\n    );\n    setTimerInterval(interval);\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration]);\n\n  React.useEffect(() => {\n    if (progress >= 100) {\n      onFinish?.();\n      timerInterval && clearInterval(timerInterval);\n    }\n  }, [progress, onFinish, timerInterval]);\n\n  return { progress };\n}\n\nexport function useTimerEvent({\n  finishAt,\n  timeDuration,\n  onFinish,\n  onFinishPercentage = 100,\n}: UseTimerIntervalProps) {\n  const intervalRef = React.useRef<NodeJS.Timeout>();\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      if (getProgressPercentage(finishAt, timeDuration) >= onFinishPercentage) {\n        onFinish?.();\n        intervalRef.current && clearInterval(intervalRef.current);\n      }\n    }, 1000);\n\n    intervalRef.current = interval;\n    return () => clearInterval(interval);\n  }, [finishAt, timeDuration, onFinishPercentage, onFinish]);\n}\n\nfunction getProgressPercentage(finishAt: Date, timeDuration: number): number {\n  const diff = Math.round((finishAt.getTime() - new Date().getTime()) / 1000);\n  const progress = 100 - (diff * 100) / timeDuration;\n  return progress > 100 ? 100 : progress;\n}\n","import {\n  CircularProgress,\n  createStyles,\n  useMediaQuery,\n  useTheme,\n  withStyles,\n} from '@material-ui/core';\nimport useTimerInterval, {\n  UseTimerIntervalProps,\n} from 'hooks/useTimerInterval';\n\nconst CustomCircularProgress = withStyles(theme =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    circle: {\n      backgroundColor: 'blue',\n      strokeLinecap: 'round',\n    },\n  }),\n)(CircularProgress);\n\nexport default function StepTimer(props: UseTimerIntervalProps) {\n  const { progress } = useTimerInterval(props);\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.up('sm'));\n\n  return (\n    <CustomCircularProgress\n      size={matches ? 64 : 32}\n      thickness={4}\n      variant=\"determinate\"\n      value={progress}\n    />\n  );\n}\n","import { Box, fade, makeStyles, Typography } from '@material-ui/core';\n\ntype DirectiveLabelProps = {\n  directive: string;\n  sentence?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  sentence: {\n    textAlign: 'center',\n  },\n  container: {\n    backgroundColor: fade(theme.palette.primary.main, 0.8),\n    boxShadow: theme.shadows[2],\n  },\n}));\n\nexport default function DirectiveLabel({\n  directive,\n  sentence,\n}: DirectiveLabelProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      width=\"100%\"\n      display=\"flex\"\n      padding={1}\n      borderRadius={32}\n      alignItems=\"center\"\n      flexDirection=\"column\"\n      className={classes.container}>\n      <Typography variant=\"subtitle1\" color=\"textSecondary\">\n        {directive}\n      </Typography>\n      {sentence && (\n        <Typography\n          variant=\"h4\"\n          color=\"textPrimary\"\n          className={classes.sentence}>\n          {sentence}\n        </Typography>\n      )}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles } from '@material-ui/core';\nimport ShuffleRoundedIcon from '@material-ui/icons/ShuffleRounded';\n\ntype PlayerAvatarProps = {\n  image: string;\n  onShuffle?: () => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    backgroundColor: theme.palette.primary.main,\n    outline: 'none',\n    borderRadius: '50%',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    cursor: 'pointer',\n    border: 'none',\n    width: 64,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: 64,\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n    '&:active': {\n      bottom: -4,\n      boxShadow: 'none',\n    },\n  },\n  imgBox: {\n    boxShadow: `0px 4px 1px ${fade(theme.palette.background.default, 0.8)}`,\n  },\n  img: {\n    height: 256,\n    width: 'auto',\n    margin: 'auto',\n  },\n  root: {\n    animation: 'float 4s infinite ease-in-out',\n  },\n  '@global': {\n    '@keyframes float': {\n      '0%': { transform: 'translateY(-10px)' },\n      '50%': { transform: 'translateY(10px)' },\n      '100%': { transform: 'translateY(-10px)' },\n    },\n  },\n}));\n\nexport default function PlayerAvatar({ image, onShuffle }: PlayerAvatarProps) {\n  const classes = useStyles();\n  return (\n    <Box\n      alignItems=\"center\"\n      width={256}\n      position=\"relative\"\n      height={256}\n      className={classes.root}>\n      <button className={classes.button} onClick={onShuffle}>\n        <ShuffleRoundedIcon style={{ color: '#FFFFFF', fontSize: 32 }} />\n      </button>\n      <Box\n        border={2}\n        display=\"flex\"\n        borderColor=\"primary.main\"\n        borderRadius=\"50%\"\n        width={256}\n        height={256}\n        bgcolor=\"background.default\"\n        className={classes.imgBox}>\n        <img src={image} className={classes.img} alt=\"Avatar\" />\n      </Box>\n    </Box>\n  );\n}\n","export const colors = [\n  '#7f8c8d',\n  '#000001',\n  '#ecf0f1',\n  '#bdc3c7',\n  '#00a8ff',\n  '#1e3799',\n  '#2ecc71',\n  '#009432',\n  '#ff3f34',\n  '#C0392B',\n  '#FA00FF',\n  '#8E44AD',\n  '#F1C40F', // #FFC312\n  '#E67E22',\n  '#FEAFA8',\n  '#f3a683',\n];\n","import { Box } from '@material-ui/core';\nimport { colors } from 'utils/app-constant';\n\ntype DrawColorPickerProps = {\n  flexDirection?: 'row' | 'column';\n  currentColor: string;\n  onColorChange?: (color: string) => void;\n};\n\nexport default function DrawColorPicker({\n  currentColor,\n  onColorChange,\n}: DrawColorPickerProps) {\n  return (\n    <Box\n      display=\"flex\"\n      flexWrap=\"wrap\"\n      borderRadius={30}\n      // to use adventage of flexWrap\n      maxWidth={116}\n      justifyContent=\"center\"\n      bgcolor=\"#272B31\"\n      padding={1}>\n      {colors.map(color => {\n        const isSelected = color === currentColor;\n        return (\n          <Box\n            component=\"button\"\n            key={color}\n            onClick={() => onColorChange?.(color)}\n            border={2}\n            m={0.5}\n            p={0}\n            bgcolor={color}\n            boxShadow={isSelected ? 4 : 0}\n            borderColor={isSelected ? '#ffffff' : color}\n            width={42}\n            height={42}\n            borderRadius=\"50%\"\n            className=\"cursor-pointer\"\n          />\n        );\n      })}\n    </Box>\n  );\n}\n","import { Box, fade, makeStyles, Theme, useTheme } from '@material-ui/core';\n\ntype SizePickerProps = {\n  currentSize: number;\n  onSizeChange: (size: number) => void;\n  flexDirection?: 'row' | 'column';\n};\n\nconst buttonSizes = [4, 8, 16, 20, 24, 30];\n\nexport default function SizePicker({\n  currentSize,\n  onSizeChange,\n  flexDirection = 'row',\n}: SizePickerProps) {\n  const theme = useTheme();\n  return (\n    <Box\n      padding={1}\n      gridGap={8}\n      bgcolor={fade(theme.palette.primary.main, 0.2)}\n      display=\"flex\"\n      borderRadius={4}\n      border={1}\n      flexDirection={flexDirection}\n      borderColor=\"common.black\"\n      alignItems=\"center\"\n      boxShadow={2}>\n      {buttonSizes.map((size, i) => {\n        const isCurrentSize = currentSize === size;\n        return (\n          <SizePickerPoint\n            key={size}\n            onSizeChange={onSizeChange}\n            size={size}\n            isCurrentSize={isCurrentSize}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nconst useStyles = makeStyles<Theme, { isCurrentSize: boolean }>(theme => ({\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    border: '2px solid #000000',\n    borderRadius: '50%',\n    width: 40,\n    height: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    cursor: 'pointer',\n    boxShadow: props =>\n      props.isCurrentSize\n        ? `0 0 .2px 2px ${fade(theme.palette.primary.main, 0.8)}`\n        : 'none',\n  },\n}));\n\nfunction SizePickerPoint({\n  onSizeChange,\n  size,\n  isCurrentSize,\n}: {\n  onSizeChange: (size: number) => void;\n  size: number;\n  isCurrentSize: boolean;\n}) {\n  const classes = useStyles({ isCurrentSize });\n  return (\n    <button onClick={() => onSizeChange(size)} className={classes.button}>\n      <Box\n        borderRadius=\"50%\"\n        border=\"1px solid #000000\"\n        bgcolor=\"#000000\"\n        width={size}\n        height={size}\n      />\n    </button>\n  );\n}\n","import { copyToClipboard } from 'utils/clipboard';\nimport { Button } from '@material-ui/core';\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\nimport { useSnackbar } from 'notistack';\n\ntype ShareRoomButtonProps = {\n  identifier?: string;\n};\n\nexport default function ShareRoomButton({ identifier }: ShareRoomButtonProps) {\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onShared() {\n    if (identifier) {\n      copyToClipboard(`${window.location.origin}/join/${identifier}`);\n      enqueueSnackbar('URL successfully copied 😎', { variant: 'success' });\n    }\n  }\n  return (\n    <Button\n      startIcon={<VpnKeyIcon style={{ fontSize: 32 }} />}\n      onClick={onShared}\n      size=\"large\"\n      variant=\"contained\">\n      {identifier || 'loading...'}\n    </Button>\n  );\n}\n","export function copyToClipboard(value: string) {\n  const tempInput = document.createElement('input');\n  tempInput.value = value;\n  document.body.appendChild(tempInput);\n  tempInput.select();\n  document.execCommand('copy');\n  document.body.removeChild(tempInput);\n}\n","import { Avatar, fade, makeStyles, Theme } from '@material-ui/core';\nimport profilesPictures from 'images/profiles/profiles-pictures';\n\nconst useAvatarStyles = makeStyles<Theme, { isSelected: boolean }>(theme => ({\n  avatar: {\n    height: 64,\n    width: 64,\n    overflow: 'visible',\n    backgroundColor: props =>\n      props.isSelected\n        ? fade(theme.palette.primary.main, 0.6)\n        : fade(theme.palette.primary.main, 0.2),\n    [theme.breakpoints.up('sm')]: {\n      height: 40,\n      width: 40,\n    },\n    '&> img': {\n      height: 64,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n      [theme.breakpoints.up('sm')]: {\n        height: 40,\n      },\n    },\n  },\n}));\n\nexport default function BookPlayerAvatar({\n  avatarUrl,\n  isSelected,\n}: {\n  avatarUrl: string;\n  isSelected: boolean;\n}) {\n  const classes = useAvatarStyles({ isSelected });\n  return (\n    <Avatar\n      className={classes.avatar}\n      src={profilesPictures[Number(avatarUrl)]}\n    />\n  );\n}\n","import Player from 'types/Player.type';\nimport {\n  Box,\n  makeStyles,\n  Tooltip,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from '@material-ui/core';\nimport StarIcon from '@material-ui/icons/Star';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BookPlayerAvatar from './BookPlayerAvatar';\n\ntype BookPlayerListProps = {\n  players: Player[];\n  playerId?: number;\n  isKickable?: boolean;\n  onClick?: (id: number, username: string) => void;\n};\n\nconst useStyles = makeStyles(theme => ({\n  badge: {\n    width: 20,\n    height: 20,\n    borderRadius: '50%',\n    backgroundColor: theme.palette.primary.main,\n    alignItems: 'center',\n    justifyContent: 'center',\n    display: 'flex',\n    border: 0,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    zIndex: 2,\n  },\n  container: {\n    overflowX: 'scroll',\n  },\n  username: {\n    overflow: 'hidden',\n    textAlign: 'center',\n    maxWidth: 64,\n    whiteSpace: 'nowrap',\n  },\n  button: {\n    backgroundColor: 'transparent',\n    outline: 'none',\n    padding: 0,\n  },\n  icon: {\n    fontSize: 16,\n    color: theme.palette.common.white,\n  },\n}));\n\nexport default function BookPlayerList({\n  players,\n  playerId,\n  onClick,\n  isKickable,\n}: BookPlayerListProps) {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const classes = useStyles();\n\n  return (\n    <Box\n      display=\"flex\"\n      gridGap={8}\n      maxWidth={isDeviceSM ? 200 : 285}\n      className={classes.container}\n      alignItems=\"center\"\n      flexDirection=\"row\">\n      {players.map((player, i) => {\n        const isPlayerSelected = playerId === player.id;\n        return (\n          <Tooltip key={player.id} title={player.username} placement=\"top\">\n            <Box flexDirection=\"column\" alignItems=\"center\" zIndex={4}>\n              <Box position={{ xs: 'relative', sm: 'initial' }}>\n                {!isDeviceSM &&\n                  (player.isOwner ? (\n                    <div className={classes.badge}>\n                      <StarIcon\n                        data-testid=\"star-icon\"\n                        className={classes.icon}\n                      />\n                    </div>\n                  ) : (\n                    isKickable && (\n                      <button\n                        onClick={() =>\n                          !player.isOwner &&\n                          isKickable &&\n                          onClick?.(player.id, player.username)\n                        }\n                        className={classes.badge}>\n                        <CloseIcon\n                          data-testid=\"kick-icon\"\n                          className={classes.icon}\n                        />\n                      </button>\n                    )\n                  ))}\n                <BookPlayerAvatar\n                  isSelected={isPlayerSelected}\n                  avatarUrl={player.avatarUrl}\n                />\n              </Box>\n              {!isDeviceSM && (\n                <Typography\n                  className={classes.username}\n                  component=\"p\"\n                  variant=\"subtitle1\">\n                  {player.username}\n                </Typography>\n              )}\n            </Box>\n          </Tooltip>\n        );\n      })}\n    </Box>\n  );\n}\n","import React from 'react';\nimport BigButton from '../BigButton';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n  TextField,\n} from '@material-ui/core';\n\ntype ButtonModalJoinProps = {\n  identifier?: string;\n  onClick: (identifier: string) => void;\n  loading?: boolean;\n  className?: string;\n};\n\nexport default function ButtonModalJoin({\n  identifier: urlIdentifier,\n  loading,\n  onClick,\n  className,\n}: ButtonModalJoinProps) {\n  const [open, setOpen] = React.useState(false);\n  const [identifier, setIdentifier] = React.useState('');\n  return (\n    <>\n      <BigButton\n        startIcon={\n          urlIdentifier ? <PlayArrowIcon style={{ fontSize: 32 }} /> : undefined\n        }\n        fullWidth\n        loading={loading}\n        className={className}\n        size=\"medium\"\n        color={urlIdentifier ? 'primary' : 'default'}\n        onClick={() =>\n          urlIdentifier ? onClick(urlIdentifier) : setOpen(true)\n        }>\n        Join\n      </BigButton>\n\n      <Dialog\n        fullWidth\n        maxWidth=\"xs\"\n        open={open}\n        onClose={() => setOpen(false)}>\n        <DialogTitle>Join a game 👨‍🎨</DialogTitle>\n        <DialogContent>\n          <TextField\n            color=\"secondary\"\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Identifier\"\n            value={identifier}\n            onChange={event => setIdentifier(event.target.value)}\n            fullWidth\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"secondary\">\n            Cancel 👋\n          </Button>\n          <Button\n            onClick={() => {\n              onClick(identifier);\n              setOpen(false);\n            }}\n            color=\"secondary\">\n            Join 🥳\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React, { MutableRefObject } from 'react';\nimport { LineType } from 'types/canvas.types';\nimport { CanvasWidth } from './canvas.type';\n\ntype DrawingCanvasContextProps = {\n  clear: () => void;\n  undo: () => void;\n  redo: () => void;\n  canvasRef: MutableRefObject<HTMLCanvasElement | null>;\n  lineType: LineType;\n  setLineType: (lineType: LineType) => void;\n  size: CanvasWidth;\n};\n\nexport const DrawingCanvasContext = React.createContext<DrawingCanvasContextProps>(\n  {} as any,\n);\n\nexport function useCanvasContext() {\n  const context = React.useContext(DrawingCanvasContext);\n  if (!context)\n    throw new Error(\n      'useCanvasContext should be used within a DrawingCanvasContext',\n    );\n  return context;\n}\n","import { makeStyles, Theme } from '@material-ui/core';\nimport { CanvasWidth } from './canvas.type';\nimport { useCanvasContext } from './DrawingCanvasContext';\n\nconst useStyles = makeStyles<Theme, { size: CanvasWidth; disabled?: boolean }>(\n  theme => ({\n    canvas: {\n      backgroundColor: props => (props.disabled ? '#BBBBBB' : '#DDDDDD'),\n      width: props => props.size.width,\n      height: props => props.size.height,\n      cursor: props => (props.disabled ? 'not-allowed' : 'crosshair'),\n    },\n    canvasBox: {\n      width: props => props.size.width + props.size.border * 2,\n      height: props => props.size.height + props.size.border * 2,\n      border: props =>\n        `${props.size.border}px solid ${theme.palette.primary.main}`,\n      boxShadow: theme.shadows[1],\n    },\n  }),\n);\n\nexport default function DrawingCanvas({ disabled }: { disabled?: boolean }) {\n  const { canvasRef, size } = useCanvasContext();\n  const classes = useStyles({ size, disabled });\n\n  return (\n    <div className={classes.canvasBox}>\n      <canvas ref={canvasRef} className={classes.canvas} />\n    </div>\n  );\n}\n","import { Box, Typography, useTheme } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport Player from 'types/Player.type';\nimport PlayArrowRoundedIcon from '@material-ui/icons/PlayArrowRounded';\n\ntype StartButtonProps = {\n  player?: Player;\n  startName?: string;\n  onStart: () => void;\n  isLoading?: boolean;\n};\n\nexport default function StartButton({\n  player,\n  startName = 'game',\n  isLoading,\n  onStart,\n}: StartButtonProps) {\n  const theme = useTheme();\n  return (\n    <Box m={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <Box display=\"flex\" alignItems=\"center\">\n        {!player?.isOwner && (\n          <SpinnerIcon\n            style={{ color: theme.palette.text.secondary, marginRight: 4 }}\n          />\n        )}\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {player?.isOwner\n            ? `you're the owner, click here to start the ${startName}`\n            : `Waiting for the host to start the ${startName}`}\n        </Typography>\n      </Box>\n      {player?.isOwner && (\n        <Box mt={2}>\n          <BigButton\n            loading={isLoading}\n            onClick={onStart}\n            size=\"large\"\n            startIcon={<PlayArrowRoundedIcon style={{ fontSize: 48 }} />}>\n            Start\n          </BigButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import {\n  createStyles,\n  withStyles,\n  Theme,\n  Box,\n  LinearProgress,\n  Typography,\n} from '@material-ui/core';\n\ntype StepProgressProps = {\n  stepActual?: number;\n  stepMax?: number;\n};\n\nconst CustomLinearProgress = withStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: theme.spacing(3),\n    },\n    colorPrimary: {\n      backgroundColor: theme.palette.background.default,\n    },\n    bar: {\n      borderRadius: 8,\n      backgroundColor: theme.palette.primary.dark,\n    },\n  }),\n)(LinearProgress);\n\nexport default function StepProgress({\n  stepActual = 0,\n  stepMax = 0,\n}: StepProgressProps) {\n  const progress = stepPercentage(stepActual, stepMax);\n\n  return (\n    <Box overflow=\"hidden\" width=\"100%\" position=\"relative\" p={1}>\n      <Box\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        display=\"flex\"\n        position=\"absolute\"\n        zIndex={1}\n        top={4}\n        bottom={0}\n        left={16}>\n        <Typography variant=\"subtitle1\">\n          {stepActual}/{stepMax}\n        </Typography>\n      </Box>\n      <CustomLinearProgress variant=\"determinate\" value={progress} />\n    </Box>\n  );\n}\n\nfunction stepPercentage(current: number, max: number) {\n  const percentage = (current * 100) / max;\n  return percentage > 100 ? 100 : percentage;\n}\n","import { Box, makeStyles, Avatar, Typography } from '@material-ui/core';\n\ntype BookSentenceElementProps = {\n  username?: string;\n  children?: string;\n  avatarUrl?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    width: 32,\n    height: 32,\n    backgroundColor: theme.palette.primary.dark,\n    overflow: 'visible',\n    boxShadow: theme.shadows[2],\n    '&> img': {\n      height: 26,\n      width: 'auto',\n      margin: 'auto',\n      position: 'unset',\n    },\n  },\n  box: {\n    backgroundColor: theme.palette.custom.main,\n    borderRadius: 20,\n    border: 'none',\n  },\n}));\n\nexport default function BookSentenceElement({\n  username,\n  children,\n  avatarUrl,\n}: BookSentenceElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\">{username}</Typography>\n      <Box\n        display=\"flex\"\n        flexDirection=\"row\"\n        p={0.5}\n        width={320}\n        className={classes.box}>\n        <Avatar src={avatarUrl} className={classes.avatar} />\n        <Box ml={1} mr={1} alignSelf=\"center\">\n          <Typography variant=\"body1\">{children}</Typography>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/gym-guy.71a7fbf1.svg\";","import { Box } from '@material-ui/core';\n\ntype CurrentDrawImageProps = {\n  className?: string;\n  src?: string;\n};\n\nexport default function CurrentDrawImage({\n  className,\n  src,\n}: CurrentDrawImageProps) {\n  return (\n    <Box\n      bgcolor=\"common.white\"\n      borderColor=\"custom.main\"\n      borderRadius={32}\n      boxShadow={1}\n      border={4}\n      display=\"flex\">\n      <img src={src} alt=\"\" className={className} />\n    </Box>\n  );\n}\n","import { Box, makeStyles, Typography } from '@material-ui/core';\nimport CurrentDrawImage from '../CurrentDrawImage';\n\ntype BookDrawingElementProps = {\n  username?: string;\n  src?: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 256,\n    height: 160,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n    },\n  },\n\n  username: {\n    textAlign: 'right',\n    maxWidth: 256,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n}));\n\nexport default function BookDrawingElement({\n  username,\n  src,\n}: BookDrawingElementProps) {\n  const classes = useStyles();\n  return (\n    <Box display=\"flex\" flexDirection=\"column\">\n      <Typography variant=\"subtitle1\" className={classes.username}>\n        {username}\n      </Typography>\n      <CurrentDrawImage src={src} className={classes.width} />\n    </Box>\n  );\n}\n","export type Coordinate = {\n  x: number;\n  y: number;\n};\n\nexport type Line = {\n  id?: number;\n  type: LineType;\n  color: string;\n  size: number;\n  points: Coordinate[];\n};\n\nexport enum LineType {\n  LINE = 0,\n  CIRCLE = 1,\n  FILL = 2,\n}\n","import { Coordinate, Line, LineType } from 'types/canvas.types';\n\nexport const rerenderDraw = (canvas: HTMLCanvasElement, lines: Line[]) => {\n  const context = canvas.getContext('2d');\n  if (!context) return;\n\n  clearDraw(canvas);\n\n  lines &&\n    lines.forEach(line => {\n      let currentPosition: Coordinate = line.points[0];\n      const positionCopy: Coordinate[] = [];\n\n      switch (line.type) {\n        case LineType.LINE: {\n          drawCanvasLine(\n            context,\n            { ...line, type: LineType.CIRCLE },\n            { beginPosition: line.points[0] },\n          );\n          line.points.forEach(coordinate => {\n            positionCopy.push(coordinate);\n            if (positionCopy.length > 3) {\n              const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n                positionCopy,\n              );\n\n              drawCanvasLine(context, line, {\n                beginPosition: currentPosition,\n                controlPosition: controlPoint,\n                endPosition: endPoint,\n              });\n              currentPosition = endPoint;\n            }\n          });\n          break;\n        }\n        case LineType.FILL: {\n          fillCanvas(canvas, line.points[0], line.color);\n        }\n      }\n    });\n};\n\nexport const clearDraw = (canvas: HTMLCanvasElement) => {\n  canvas.getContext('2d')?.clearRect(0, 0, canvas.width, canvas.height);\n};\n\nexport const drawCanvasLine = (\n  ctx: CanvasRenderingContext2D,\n  line: Line,\n  {\n    beginPosition,\n    controlPosition,\n    endPosition,\n  }: {\n    beginPosition: Coordinate;\n    controlPosition?: Coordinate;\n    endPosition?: Coordinate;\n  },\n) => {\n  ctx.strokeStyle = line.color;\n  ctx.fillStyle = line.color;\n  ctx.lineJoin = 'round';\n  ctx.lineCap = 'round';\n  ctx.lineWidth = line.size;\n\n  ctx.beginPath();\n\n  switch (line.type) {\n    case LineType.LINE:\n      if (!controlPosition || !endPosition) return;\n      ctx.moveTo(beginPosition.x, beginPosition.y);\n      ctx.quadraticCurveTo(\n        controlPosition.x,\n        controlPosition.y,\n        endPosition.x,\n        endPosition.y,\n      );\n      ctx.stroke();\n      break;\n    case LineType.CIRCLE:\n      ctx.arc(beginPosition.x, beginPosition.y, line.size / 2, 0, 2 * Math.PI);\n      ctx.fill();\n      break;\n  }\n  ctx.closePath();\n};\n\nexport function getQuadraticCurveCoordinates(\n  positions: Coordinate[],\n): {\n  controlPoint: Coordinate;\n  endPoint: Coordinate;\n} {\n  const [lastPoint, prevPoint] = positions.slice(-2);\n  const controlPoint = lastPoint;\n  const endPoint = {\n    x: (lastPoint.x + prevPoint.x) / 2,\n    y: (lastPoint.y + prevPoint.y) / 2,\n  };\n\n  return { controlPoint, endPoint };\n}\n\nexport const getCoordinates = (\n  event: MouseEvent,\n  canvasScale: number,\n  canvas?: HTMLCanvasElement | null,\n): Coordinate | undefined => {\n  if (!canvas) return;\n  return {\n    x: (event.pageX - canvas.offsetLeft) * canvasScale,\n    y: (event.pageY - canvas.offsetTop) * canvasScale,\n  };\n};\n\ntype Color = {\n  r: number;\n  g: number;\n  b: number;\n};\n\nfunction hexToRgb(hex: string): Color | null {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n}\n\nconst getStartColor = (\n  coordinate: Coordinate,\n  width: number,\n  colorLayer: Uint8ClampedArray,\n): Color => {\n  const startCoordinate = (coordinate.y * width + coordinate.x) * 4;\n  return {\n    r: colorLayer[startCoordinate],\n    g: colorLayer[startCoordinate + 1],\n    b: colorLayer[startCoordinate + 2],\n  };\n};\n\n// inspired from http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/\nexport function fillCanvas(\n  canvas: HTMLCanvasElement,\n  coordinate: Coordinate,\n  color: string,\n) {\n  const context = canvas?.getContext('2d');\n  if (!context) return;\n\n  const colorLayer = context.getImageData(0, 0, canvas.width, canvas.height);\n  const startColor = getStartColor(coordinate, canvas.width, colorLayer.data);\n  const endColor = hexToRgb(color);\n\n  // can not possible to fill a point alredy with the endcolor\n  if (\n    !endColor ||\n    (endColor.r === startColor.r &&\n      endColor.g === startColor.g &&\n      endColor.b === startColor.b)\n  )\n    return;\n\n  const matchStartColor = (pixelPos: number) => {\n    const tempColor = {\n      r: colorLayer.data[pixelPos],\n      g: colorLayer.data[pixelPos + 1],\n      b: colorLayer.data[pixelPos + 2],\n    };\n\n    return (\n      tempColor.r === startColor.r &&\n      tempColor.g === startColor.g &&\n      tempColor.b === startColor.b\n    );\n  };\n\n  const colorPixel = (pixelPos: number) => {\n    colorLayer.data[pixelPos] = endColor.r;\n    colorLayer.data[pixelPos + 1] = endColor.g;\n    colorLayer.data[pixelPos + 2] = endColor.b;\n    colorLayer.data[pixelPos + 3] = 255;\n  };\n\n  // stack of coordinate to test\n  // the test will detect all pixels with different color on top and bottom\n  // and add the pixel on the right or left in pixelStack if it's not the same color\n  const pixelStack = [coordinate];\n\n  const colorCanvasWidth = canvas.width * 4;\n  while (pixelStack.length) {\n    const newCoordinate = pixelStack.pop();\n    if (!newCoordinate) return;\n\n    // this calcule is for have a number of the position\n    // ooooo - width is 4\n    // oooxo - `x` coordinate is 3, 1\n    // ooooo - so 1 * 4 + 3 = 8, is the place of `x`\n    let currentPosition =\n      (newCoordinate.y * canvas.width + newCoordinate.x) * 4;\n    let y = newCoordinate.y;\n\n    // find the toppest position with the same color\n    while (y-- >= 0 && matchStartColor(currentPosition)) {\n      currentPosition -= colorCanvasWidth;\n    }\n\n    // get the after coordinate\n    currentPosition += colorCanvasWidth;\n    y++;\n    // variables to know if we alredy reach corner, to avoid bug\n    let reachLeft = false;\n    let reachRight = false;\n\n    while (y++ < canvas.height - 1 && matchStartColor(currentPosition)) {\n      colorPixel(currentPosition);\n\n      // check on the left, if matchStartColor add into\n      if (newCoordinate.x > 0) {\n        if (matchStartColor(currentPosition - 4)) {\n          if (!reachLeft) {\n            pixelStack.push({ x: newCoordinate.x - 1, y: y });\n\n            reachLeft = true;\n          } else if (reachLeft) {\n            reachLeft = false;\n          }\n        }\n      }\n      if (newCoordinate.x < canvas.width - 1) {\n        if (matchStartColor(currentPosition + 4)) {\n          if (!reachRight) {\n            pixelStack.push({ x: newCoordinate.x + 1, y: y });\n\n            reachRight = true;\n          } else if (reachRight) {\n            reachRight = false;\n          }\n        }\n      }\n      // set currentPosition to bottom pixel\n      currentPosition += colorCanvasWidth;\n    }\n  }\n\n  context.putImageData(colorLayer, 0, 0);\n}\n","import React from 'react';\nimport { Coordinate, Line, LineType } from 'types/canvas.types';\nimport {\n  clearDraw,\n  drawCanvasLine,\n  fillCanvas,\n  getQuadraticCurveCoordinates,\n  rerenderDraw,\n} from 'utils/canvas.utils';\n\ntype useCanvasMouseProps = {\n  color: string;\n  size: number;\n  canvasRef: React.MutableRefObject<HTMLCanvasElement | null>;\n  scale: number;\n  lineType: LineType;\n};\n\nfunction useCanvasPaint({\n  color,\n  size,\n  canvasRef,\n  scale,\n  lineType,\n}: useCanvasMouseProps) {\n  const mouseCoordinate = React.useRef<Coordinate>({ x: 0, y: 0 });\n  const lines = React.useRef<Line[]>([]);\n  const deletedLines = React.useRef<Line[]>([]);\n\n  const getLastLine = () => lines.current[lines.current.length - 1];\n\n  const addLastLine = React.useCallback((coordinate?: Coordinate) => {\n    if (!coordinate) return;\n    getLastLine().points.push(coordinate);\n    mouseCoordinate.current = coordinate;\n  }, []);\n\n  const paint = React.useCallback(\n    (newMousePosition?: Coordinate) => {\n      if (!newMousePosition || !mouseCoordinate || !canvasRef.current) return;\n\n      const lastLine = getLastLine();\n      lastLine.points.push(newMousePosition);\n\n      const context = canvasRef.current.getContext('2d');\n      if (!context || lastLine.points.length <= 2) return;\n\n      const { controlPoint, endPoint } = getQuadraticCurveCoordinates(\n        lastLine.points,\n      );\n\n      drawCanvasLine(context, lastLine, {\n        beginPosition: mouseCoordinate.current,\n        controlPosition: controlPoint,\n        endPosition: endPoint,\n      });\n      mouseCoordinate.current = endPoint;\n    },\n    [canvasRef],\n  );\n\n  const fill = React.useCallback(\n    (coordinate: Coordinate) => {\n      if (!canvasRef.current) return;\n      fillCanvas(canvasRef.current, coordinate, color);\n    },\n    [canvasRef, color],\n  );\n\n  const create = React.useCallback(\n    (coordinate: Coordinate, isNewLine?: boolean) => {\n      mouseCoordinate.current = coordinate;\n      deletedLines.current = [];\n      if (isNewLine) {\n        lines.current.push({\n          type: lineType,\n          color,\n          size: size * scale,\n          points: [coordinate],\n        });\n        switch (lineType) {\n          case LineType.LINE:\n            const context = canvasRef?.current?.getContext('2d');\n            if (!context) return;\n            drawCanvasLine(\n              context,\n              { ...getLastLine(), type: LineType.CIRCLE },\n              { beginPosition: coordinate },\n            );\n            break;\n          case LineType.FILL:\n            fill(coordinate);\n            break;\n        }\n      } else paint(coordinate);\n    },\n    [canvasRef, color, fill, lineType, paint, scale, size],\n  );\n\n  const refresh = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    rerenderDraw(canvasRef.current, lines.current);\n  }, [canvasRef]);\n\n  const undo = React.useCallback(() => {\n    const deletedLine = lines.current.pop();\n    deletedLine && deletedLines.current.push(deletedLine);\n    refresh();\n  }, [refresh]);\n\n  const redo = React.useCallback(() => {\n    const redoLine = deletedLines.current.pop();\n    redoLine && lines.current.push(redoLine);\n    refresh();\n  }, [refresh]);\n\n  const clear = React.useCallback(() => {\n    if (!canvasRef.current) return;\n    if (\n      !window.confirm(\n        'This action is definitive. Are you sure you want to clear all ?',\n      )\n    )\n      return;\n    lines.current = [];\n    deletedLines.current = [];\n    clearDraw(canvasRef.current);\n  }, [canvasRef]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const onKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'z' && (event.ctrlKey || event.metaKey)) {\n        event.shiftKey ? redo() : undo();\n      }\n      if (event.key === 'c') clear();\n    };\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [canvasRef, clear, redo, undo]);\n\n  return {\n    paint,\n    create,\n    addLastLine,\n    undo,\n    lines,\n    mouseCoordinate,\n    clear,\n    redo,\n    refresh,\n    fill,\n  };\n}\n\nexport default useCanvasPaint;\n","import Player from './Player.type';\n\nexport type HolyElement = {\n  id: number;\n  step: number;\n  type: 0 | 1;\n  text: string;\n  finishAt: string;\n  createdAt: string;\n  drawImage: string;\n  initiatorId?: number;\n  creator?: Player;\n};\n\nexport enum ElementType {\n  Sentence = 0,\n  Drawing = 1,\n}\n\ntype StepElement = HolyElement & {\n  parent: HolyElement;\n};\n\nexport default StepElement;\n","import Room from './Room.type';\n\ntype Session = {\n  id: number;\n  finishAt?: string;\n  stepFinishAt?: string;\n  createdAt: string;\n  actualStep: number;\n  timeDuration: number;\n  roomId: number;\n  currentAlbumId?: number;\n  room?: Room;\n  stepType: SessionStepType;\n  totalPlayers: number;\n  playerFinished: number;\n};\n\nexport enum SessionStepType {\n  Start = 0,\n  Draw = 1,\n  Write = 2,\n  Book = 3,\n}\n\nexport default Session;\n","import React from 'react';\nimport { LineType } from 'types/canvas.types';\nimport { getCoordinates } from 'utils/canvas.utils';\nimport { DrawingCanvasProviderProps } from './canvas.type';\nimport { DrawingCanvasContext } from './DrawingCanvasContext';\nimport useCanvasEventListener from './useCanvasEventListener';\nimport useCanvasPaint from './useCanvasPaint';\n\nconst canvasWidth = {\n  width: 512,\n  height: 320,\n  border: 4,\n  scale: 2,\n};\n\nconst ratio = 1.6;\n\nexport function DrawingCanvasProvider({\n  color = '#900050',\n  lineSize = 4,\n  disabled = false,\n  children,\n}: DrawingCanvasProviderProps) {\n  const [currentSize, setCurrentSize] = React.useState(canvasWidth);\n  const [lineType, setLineType] = React.useState<LineType>(LineType.LINE);\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const [isPainting, setIsPainting] = React.useState(false);\n\n  const onResize = React.useCallback(() => {\n    const newWidth = canvasRef.current?.parentElement?.parentElement?.getBoundingClientRect()\n      .width;\n    if (!newWidth || newWidth < 64) return;\n\n    const scale = 1024 / newWidth;\n    const newHeight = newWidth / ratio;\n    const border = newWidth < 400 ? 2 : 4;\n    const noUpdateRange = 1;\n\n    if (\n      newWidth - noUpdateRange > currentSize.width ||\n      newWidth + noUpdateRange < currentSize.width\n    ) {\n      setCurrentSize({\n        width: newWidth - border * 2,\n        height: newHeight - border * 2,\n        border,\n        scale,\n      });\n    }\n  }, [currentSize.width]);\n\n  const {\n    paint,\n    create,\n    addLastLine,\n    clear,\n    undo,\n    refresh,\n    redo,\n  } = useCanvasPaint({\n    color,\n    size: lineSize,\n    canvasRef,\n    scale: currentSize.scale,\n    lineType,\n  });\n\n  const onMouseDown = React.useCallback(\n    (event: MouseEvent, isNewLine: boolean = true) => {\n      const coordinates = getCoordinates(\n        event,\n        currentSize.scale,\n        canvasRef.current,\n      );\n      if (!coordinates) return;\n\n      if (lineType !== LineType.FILL) {\n        setIsPainting(true);\n      }\n\n      create(coordinates, isNewLine);\n    },\n    [create, currentSize.scale, lineType],\n  );\n\n  const onMouseUp = React.useCallback(\n    (event: MouseEvent) => {\n      setIsPainting(false);\n      const coordinate = getCoordinates(event, currentSize.scale);\n      addLastLine(coordinate);\n    },\n    [addLastLine, currentSize.scale],\n  );\n\n  const onMouseEnter = React.useCallback(\n    (event: MouseEvent) => {\n      if (isPainting) onMouseDown(event, false);\n    },\n    [isPainting, onMouseDown],\n  );\n\n  const onMouseMove = React.useCallback(\n    (event: MouseEvent) => {\n      if (!isPainting || !canvasRef.current) return;\n      const newMousePosition = getCoordinates(\n        event,\n        currentSize.scale,\n        canvasRef.current,\n      );\n      paint(newMousePosition);\n    },\n    [currentSize.scale, isPainting, paint],\n  );\n\n  useCanvasEventListener({\n    canvasRef,\n    onMouseDown,\n    onMouseUp,\n    onMouseEnter,\n    onMouseMove,\n    isPainting,\n    onResize,\n    disabled,\n  });\n\n  React.useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.width = currentSize.width * currentSize.scale;\n    canvas.height = currentSize.height * currentSize.scale;\n    refresh();\n  }, [canvasRef, refresh, currentSize]);\n\n  const values = React.useMemo(\n    () => ({\n      clear,\n      undo,\n      canvasRef,\n      redo,\n      size: currentSize,\n      setLineType,\n      lineType,\n    }),\n    [clear, undo, redo, currentSize, lineType],\n  );\n\n  return (\n    <DrawingCanvasContext.Provider value={values}>\n      {children}\n    </DrawingCanvasContext.Provider>\n  );\n}\n","import React from 'react';\n\ntype UseCanvasEventListenerProps = {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  isPainting?: boolean;\n  onMouseUp: (event: MouseEvent) => void;\n  onMouseEnter: (event: MouseEvent) => void;\n  onMouseMove: (event: MouseEvent) => void;\n  onMouseDown: (event: MouseEvent) => void;\n  onResize: (event: UIEvent) => void;\n  disabled?: boolean;\n};\n\nexport default function useCanvasEventListener({\n  canvasRef,\n  isPainting,\n  onMouseMove,\n  onMouseEnter,\n  onMouseDown,\n  onMouseUp,\n  disabled,\n  onResize,\n}: UseCanvasEventListenerProps) {\n  React.useEffect(() => {\n    if (!isPainting || disabled) return;\n\n    function touchMove(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseMove(mouseEvent);\n    }\n\n    window.document.addEventListener('mousemove', onMouseMove);\n    window.document.addEventListener('touchmove', touchMove);\n    return () => {\n      window.document.removeEventListener('mousemove', onMouseMove);\n      window.document.removeEventListener('touchmove', touchMove);\n    };\n  }, [disabled, isPainting, onMouseMove]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    canvas.addEventListener('mouseenter', onMouseEnter);\n    return () => {\n      canvas.removeEventListener('mouseenter', onMouseEnter);\n    };\n  }, [canvasRef, disabled, onMouseEnter]);\n\n  React.useEffect(() => {\n    if (!canvasRef.current || disabled) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n\n    function touchStart(event: TouchEvent) {\n      const mouseEvent = new MouseEvent('mousedown', {\n        clientX: event.touches[0].clientX,\n        clientY: event.touches[0].clientY,\n      });\n      onMouseDown(mouseEvent);\n    }\n\n    canvas.addEventListener('mousedown', onMouseDown);\n    canvas.addEventListener('touchstart', touchStart);\n    window.document.addEventListener('mouseup', onMouseUp);\n    return () => {\n      canvas.removeEventListener('mousedown', onMouseDown);\n      canvas.removeEventListener('touchstart', touchStart);\n      window.document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [canvasRef, disabled, onMouseDown, onMouseUp]);\n\n  React.useEffect(() => {\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, [onResize]);\n}\n","import { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport { useHistory } from 'react-router';\nimport Session, { SessionStepType } from 'types/Session.type';\n\nfunction useSessionStates() {\n  const [session, setSession] = React.useState<Session>();\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n\n  React.useEffect(() => {\n    let deleted = false;\n    client<Session>('session/current', { token: getToken() }).then(\n      session => !deleted && setSession(session),\n      () => {\n        enqueueSnackbar('Sorry, an error occured 😕 [Session-GET]', {\n          variant: 'error',\n        });\n        history.push('/r/lobby');\n      },\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, history]);\n\n  // handling page with the Session\n  React.useEffect(() => {\n    const pathname = history.location.pathname;\n    let newPathname = '';\n    switch (session?.stepType) {\n      case SessionStepType.Start:\n        newPathname = '/r/start';\n        break;\n      case SessionStepType.Write:\n        newPathname = '/r/write';\n        break;\n      case SessionStepType.Draw:\n        newPathname = '/r/draw';\n        break;\n      case SessionStepType.Book:\n        newPathname = '/r/book';\n        break;\n    }\n    // change only if pathname is different than before\n    if (newPathname && pathname !== newPathname) history.push(newPathname);\n  }, [session?.stepType, history]);\n\n  return { session, setSession };\n}\n\nexport default useSessionStates;\n","import Loading from 'components/Loading';\nimport { useSnackbar } from 'notistack';\nimport React from 'react';\nimport StepElement, { ElementType } from 'types/HolyElement.type';\nimport HolyElement from 'types/HolyElement.type';\nimport { client } from '../api/client';\nimport { getToken } from '../api/player-provider';\nimport Session from '../types/Session.type';\nimport { parseJson } from '../utils/json';\nimport useSessionStates from './useSessionStates';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype SessionContextProps = {\n  session?: Session;\n  currentElement?: HolyElement;\n  onSave: (content: string) => Promise<void>;\n};\n\nconst SessionContext = React.createContext<SessionContextProps>({\n  onSave: () => Promise.resolve(),\n});\n\ntype SessionContextProviderProps = { children: React.ReactElement };\n\nexport function SessionContextProvider({\n  children,\n}: SessionContextProviderProps) {\n  const { session, setSession } = useSessionStates();\n  const [currentElement, setCurrentElement] = React.useState<StepElement>();\n  const { websocket } = useWebsocketContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  function onSave(content: string): Promise<void> {\n    const elementId = currentElement?.id;\n\n    const elementContent =\n      currentElement?.type === ElementType.Drawing\n        ? { drawimage: content }\n        : { text: content };\n\n    return new Promise(resolve => {\n      client<HolyElement>(`element/${elementId}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: elementContent,\n      })\n        .then(element => {\n          enqueueSnackbar('Element Saved 😎', { variant: 'success' });\n          setCurrentElement(e => ({ ...e, ...element }));\n        })\n        .catch(() =>\n          enqueueSnackbar('Sorry, an error occured while saving 😕', {\n            variant: 'error',\n          }),\n        )\n        .finally(() => resolve());\n    });\n  }\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.SessionUpdate:\n          const session = websocketMessage.session;\n          setSession(prev => prev && { ...prev, ...session });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [session, setSession, websocket]);\n\n  React.useEffect(() => {\n    if (!session?.actualStep) return;\n\n    let deleted = false;\n    client<HolyElement>('element/current', { token: getToken() }).then(\n      session => !deleted && setCurrentElement(session),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [Element-GET]', {\n          variant: 'error',\n        }),\n    );\n\n    return () => {\n      deleted = true;\n    };\n  }, [enqueueSnackbar, session?.actualStep]);\n\n  const values = { session, currentElement, onSave };\n\n  return (\n    <SessionContext.Provider value={values}>\n      {session ? children : <Loading />}\n    </SessionContext.Provider>\n  );\n}\n\nexport function useSessionContext() {\n  const context = React.useContext(SessionContext);\n  if (!context)\n    throw new Error(\n      'useSessionContext should be used within a SessionContextProvider',\n    );\n  return context;\n}\n","export const callAll = (...fns: (any | undefined)[]) => (...args: any) =>\n  fns.forEach((fn: any) => fn && fn(...args));\n\nexport function getRandomValueFromArray<T>(possibilities: T[]): T {\n  return possibilities[Math.floor(Math.random() * possibilities.length)];\n}\n","import { useSessionContext } from 'hooks/SessionProvider';\nimport { useTimerEvent } from 'hooks/useTimerInterval';\nimport React from 'react';\nimport { callAll } from 'utils/utils';\nimport { useCanvasContext } from './DrawingCanvasContext';\nimport { client } from 'api/client';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { getToken } from 'api/player-provider';\n\n/*\n * All this component will injected on click event on the children.\n * Those event will match with the name of component.\n * They be only used inside a <DrawingCanvasContext>\n */\n\n// clear all line on the canvas\nexport function OnClearAction({ children }: { children: React.ReactElement }) {\n  const { clear } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(clear, children.props.onClick),\n  });\n}\n\n// undo last line on the canvas\nexport function OnUndoAction({ children }: { children: React.ReactElement }) {\n  const { undo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(undo, children.props.onClick),\n  });\n}\n\n// redo last line \"undo\" if exist on the canvas\nexport function OnRedoAction({ children }: { children: React.ReactElement }) {\n  const { redo } = useCanvasContext();\n  return React.cloneElement(children, {\n    onClick: callAll(redo, children.props.onClick),\n  });\n}\n\n// this component will not injected onClick but call the onSave on click on children\n// the onSave will contain the big data url of canvas\nexport function OnSaveAction({\n  children,\n  onSave,\n}: {\n  children: React.ReactElement;\n  onSave: (drawImage?: string) => void;\n}) {\n  const { currentElement, session } = useSessionContext();\n  const { canvasRef } = useCanvasContext();\n\n  useTimerEvent({\n    finishAt: new Date(session?.stepFinishAt || ''),\n    timeDuration: session?.timeDuration || 60,\n    onFinish: () => {\n      client<HolyElement>(`element/auto/${currentElement?.id}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: { draw: canvasRef?.current?.toDataURL() },\n      });\n    },\n    onFinishPercentage: 99,\n  });\n\n  return React.cloneElement(children, {\n    onClick: () => {\n      onSave(canvasRef.current?.toDataURL());\n      children.props.onClick?.();\n    },\n  });\n}\n","import React from 'react';\nimport { Box, makeStyles, Theme } from '@material-ui/core';\nimport { callAll } from 'utils/utils';\n\ntype CircleButtonProps = {\n  count: number;\n  max: number;\n  open: boolean;\n  onClick?: () => void;\n  children?: React.ReactElement;\n  width: number;\n  spacing: number;\n};\n\ntype StylesProps = {\n  pi: number;\n  count: number;\n  spacing: number;\n  max: number;\n  open: boolean;\n  width: number;\n};\n\nconst useStyles = makeStyles<Theme, StylesProps>(() => ({\n  root: {\n    top: props =>\n      props.open ? Math.sin(props.pi) * props.width * props.spacing : 0,\n    right: props =>\n      props.open ? Math.cos(props.pi) * props.width * props.spacing : 0,\n    visibility: props => (props.open ? 'visible' : 'hidden'),\n    transition: 'all .2s ease-in-out',\n  },\n}));\n\nexport default function CircleButton({\n  count,\n  max,\n  open,\n  onClick,\n  children,\n  width,\n  spacing,\n}: CircleButtonProps) {\n  const pi = ((Math.PI * 2) / max) * count;\n  const classes = useStyles({ count, max, pi, open, width, spacing });\n\n  return (\n    <Box\n      zIndex={1}\n      width={width}\n      height={width}\n      className={classes.root}\n      position=\"absolute\">\n      {onClick && children\n        ? React.cloneElement(children, {\n            onClick: callAll(onClick, children.props.onClick),\n          })\n        : children}\n    </Box>\n  );\n}\n","import { Box, ClickAwayListener } from '@material-ui/core';\nimport React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core';\nimport clsx from 'clsx';\nimport CircleButton from './CircleButton';\n\ntype CircleBg = 'fill' | 'border' | 'none';\n\ntype CircleStylesProps = {\n  count: number;\n  width: number;\n  open: boolean;\n  circleBg: CircleBg;\n};\n\nconst useStyles = makeStyles<Theme, CircleStylesProps>(theme => ({\n  root: {},\n  action: {\n    position: 'absolute',\n    width: props => props.width,\n    height: props => props.width,\n    top: 0,\n    right: 0,\n    zIndex: 2,\n  },\n  circlebg: {\n    transform: 'translate(-50%, -50%)',\n    top: '50%',\n    left: '50%',\n    opacity: props => (props.open ? '1' : '0'),\n    transition: 'all .2s ease-in-out',\n    backgroundColor: props =>\n      props.circleBg === 'fill' ? theme.palette.background.paper : undefined,\n    border: props =>\n      props.circleBg === 'border'\n        ? `2px solid ${theme.palette.background.paper}`\n        : undefined,\n  },\n}));\n\ntype CircleButtonsProps = {\n  action: (open: boolean) => React.ReactElement;\n  children: React.ReactElement[];\n  width?: number;\n  circleBg?: CircleBg;\n  spacing?: number;\n};\n\nexport default function CircleButtons({\n  action,\n  children,\n  width = 48,\n  circleBg = 'border',\n  spacing = 1.2,\n}: CircleButtonsProps) {\n  const [open, setOpen] = React.useState(false);\n  const classes = useStyles({ count: 4, width, open, circleBg });\n  const actionComponent = action(open);\n  return (\n    <ClickAwayListener onClickAway={() => setOpen(false)}>\n      <Box\n        position=\"relative\"\n        width={width}\n        height={width}\n        className={classes.root}>\n        {React.cloneElement(actionComponent, {\n          onClick: () => setOpen(!open),\n          className: clsx(actionComponent.props.className, classes.action),\n        })}\n        <Box\n          position=\"absolute\"\n          className={classes.circlebg}\n          borderRadius=\"50%\"\n          width={width * (spacing * 2)}\n          height={width * (spacing * 2)}\n        />\n        {children.map((button, index) => (\n          <CircleButton\n            open={open}\n            spacing={spacing}\n            width={width}\n            count={index + 1}\n            onClick={() => setOpen(false)}\n            max={children.length}>\n            {button}\n          </CircleButton>\n        ))}\n      </Box>\n    </ClickAwayListener>\n  );\n}\n","import { Box, Slider, Tooltip } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\n\ntype SizePickerV2Props = {\n  size: number;\n  onSizeChange?: (event: any, newValue: any) => void;\n  orientation?: 'vertical' | 'horizontal';\n};\n\nconst SizeSlider = withStyles({\n  root: {\n    color: '#C6C6C6',\n    borderRadius: 4,\n    height: 8,\n    width: 300,\n  },\n  thumb: {\n    height: 16,\n    width: 16,\n    backgroundColor: '#C6C6C6',\n    marginTop: -4,\n    marginLeft: -8,\n    '&:focus, &:hover, &$active': {\n      boxShadow: 'inherit',\n    },\n  },\n  track: {\n    height: 8,\n    borderRadius: 4,\n  },\n  rail: {\n    height: 8,\n    borderRadius: 4,\n  },\n  vertical: {\n    // important because width is overide by default vertical class\n    width: '8px !important',\n    '& .$MuiSlider-rail': {\n      width: 8,\n    },\n    '& .$MuiSlider-track': {\n      width: 8,\n    },\n    '& .$MuiSlider-thumb': {\n      marginLeft: '-4.15px',\n    },\n  },\n})(Slider);\n\ninterface Props {\n  children: React.ReactElement;\n  open: boolean;\n  value: number;\n}\n\nfunction ValueLabelComponent(props: Props) {\n  const { children, open, value } = props;\n\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n}\n\nexport default function SizePickerV2({\n  size,\n  onSizeChange,\n  orientation = 'vertical',\n}: SizePickerV2Props) {\n  const isVertical = orientation === 'vertical';\n  return (\n    <Box\n      p={2}\n      bgcolor=\"#272B31\"\n      borderRadius={40}\n      display=\"flex\"\n      flexDirection={isVertical ? 'column' : 'row'}\n      justifyContent={isVertical ? 'center' : 'space-around'}\n      alignItems=\"center\">\n      <Box\n        bgcolor=\"#C6C6C6\"\n        mr={isVertical ? 0 : 2}\n        mb={isVertical ? 2 : 0}\n        borderRadius=\"50%\"\n        height={8}\n        width={8}\n      />\n      <SizeSlider\n        step={2}\n        min={2}\n        style={isVertical ? { height: 300 } : { width: 300 }}\n        max={60}\n        aria-labelledby=\"size-picker-slider\"\n        orientation={orientation}\n        value={size}\n        onChange={onSizeChange}\n        ValueLabelComponent={ValueLabelComponent}\n      />\n      <Box\n        bgcolor=\"#C6C6C6\"\n        ml={isVertical ? 0 : 2}\n        mt={isVertical ? 2 : 0}\n        borderRadius=\"50%\"\n        height={24}\n        width={24}\n      />\n    </Box>\n  );\n}\n","import React, { useState } from 'react';\nimport BigButton from '../components/BigButton';\nimport PlayerCount from '../components/room/PlayerCount';\nimport HolyDrawLogo from '../components/HolyDrawLogo';\nimport BigInput from '../components/BigInput';\nimport PlayerCard from '../components/room/lobby/PlayerCard';\nimport PlayerCardList from '../components/room/lobby/PlayerCardList';\nimport StepTimer from '../components/room/StepTimer';\nimport profilesPictures from '../images/profiles/profiles-pictures';\nimport DirectiveLabel from '../components/room/DirectiveLabel';\nimport PlayerAvatar from '../components/home/PlayerAvatar';\nimport DrawColorPicker from '../components/room/draw/DrawColorPicker';\nimport SizePicker from '../components/room/draw/SizePicker';\nimport ShareRoomButton from '../components/room/lobby/ShareRoomButton';\nimport BookPlayerList from '../components/room/book/BookPlayerList';\nimport ButtonModalJoin from '../components/home/ButtonModalJoin';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport testPlayerList from '__tests__/json/players.json';\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew';\nimport { Box, FormControlLabel, IconButton, Switch } from '@material-ui/core';\nimport SpinnerIcon from 'components/SpinnerIcon';\nimport StartButton from 'components/room/lobby/StartButton';\nimport StepProgress from 'components/room/StepProgress';\nimport { Slider } from '@material-ui/core';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport GymGuy from 'images/gym-guy.svg';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport {\n  OnClearAction,\n  OnUndoAction,\n  OnSaveAction,\n  OnRedoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\nimport CircleButtons from '../components/circle-button/CircleButtons';\nimport FormatColorFillIcon from '@material-ui/icons/FormatColorFill';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BrushIcon from '@material-ui/icons/Brush';\nimport { colors } from 'utils/app-constant';\nimport SizePickerV2 from 'components/room/draw/SizePickerV2';\n\nexport default function ComponentTest() {\n  const [ppIndex, setPpIndex] = useState(0);\n  const [color, setColor] = useState(colors[5]);\n  const [mobileCanvas, setMobileCanvas] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [size, setSize] = useState(8);\n  const [size2, setSize2] = useState<number>(10);\n  const [progress, setProgress] = React.useState<number>(1);\n\n  const handleChange = (event: any, newValue: any) => {\n    setProgress(newValue);\n  };\n\n  const nextPp = () => {\n    setPpIndex(p => (p > profilesPictures.length - 2 ? 0 : p + 1));\n  };\n\n  return (\n    <Box>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        width=\"100%\"\n        gridGap={32}>\n        <Box>\n          <CircleButtons\n            circleBg=\"border\"\n            spacing={1.2}\n            action={open => (\n              <IconButton>{open ? <CloseIcon /> : <BrushIcon />}</IconButton>\n            )}>\n            <IconButton>\n              <AccessibilityNewIcon />\n            </IconButton>\n            <IconButton>\n              <FormatColorFillIcon />\n            </IconButton>\n          </CircleButtons>\n        </Box>\n        <HolyDrawLogo />\n        <Box>\n          <DrawColorPicker\n            currentColor={color}\n            onColorChange={color => setColor(color)}\n          />\n        </Box>\n\n        <Box>\n          <BookSentenceElement\n            username=\"Houn Salade\"\n            avatarUrl={profilesPictures[ppIndex]}>\n            Combien sont ces six saucissons-ci ?\n          </BookSentenceElement>\n        </Box>\n\n        <BookDrawingElement username=\"Jean-Philippes-Pascal\" src={GymGuy} />\n\n        <FormControlLabel\n          control={\n            <Switch\n              checked={mobileCanvas}\n              onChange={e => setMobileCanvas(e.target.checked)}\n            />\n          }\n          label=\"Is mobile canvas\"\n        />\n        <FormControlLabel\n          control={\n            <Switch\n              checked={disabled}\n              onChange={e => setDisabled(e.target.checked)}\n            />\n          }\n          label=\"Is canvas disabled\"\n        />\n        <Box display=\"flex\" width=\"100%\" maxWidth={1000} flexDirection=\"column\">\n          <DrawingCanvasProvider\n            color={color}\n            disabled={disabled}\n            lineSize={size}>\n            <Box display=\"flex\" width=\"100%\" flexWrap=\"wrap\">\n              <Box width=\"100%\">\n                <DrawingCanvas disabled={disabled} />\n              </Box>\n              <Box display=\"flex\" flexDirection=\"column\">\n                <OnClearAction>\n                  <IconButton>\n                    <DeleteIcon />\n                  </IconButton>\n                </OnClearAction>\n                <OnUndoAction>\n                  <IconButton>\n                    <UndoIcon />\n                  </IconButton>\n                </OnUndoAction>\n                <OnRedoAction>\n                  <IconButton>\n                    <RedoIcon />\n                  </IconButton>\n                </OnRedoAction>\n              </Box>\n\n              <DrawColorPicker\n                currentColor={color}\n                onColorChange={color => setColor(color)}\n              />\n              <SizePicker\n                currentSize={size}\n                onSizeChange={size => setSize(size)}\n                flexDirection=\"column\"\n              />\n            </Box>\n\n            <OnSaveAction\n              onSave={canvasImage => {\n                if (!canvasImage) return;\n                const win = window.open();\n                win?.document.write(\n                  '<iframe width=\"1200px\" height=\"700px\" src=' +\n                    canvasImage +\n                    '></iframe>',\n                );\n              }}>\n              <BigButton size=\"large\">Submit</BigButton>\n            </OnSaveAction>\n          </DrawingCanvasProvider>\n        </Box>\n\n        <StepTimer\n          finishAt={new Date('2021-03-30T08:31:00')}\n          timeDuration={120}\n        />\n        <ButtonModalJoin\n          loading={false}\n          identifier={undefined}\n          onClick={() => void 0}></ButtonModalJoin>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n        <BigInput\n          onChange={() => void 0}\n          value={'didier'}\n          startIcon={<AccessibilityNewIcon />}\n        />\n        <ShareRoomButton identifier=\"LH4AH3\" />\n        <PlayerCard\n          id={1}\n          name=\"John Doe\"\n          avatar={profilesPictures[ppIndex]}\n          isOwner={true}\n          isKickable={false}\n          onKick={id => void 0}\n        />\n\n        <BigButton size=\"large\" onClick={nextPp}>\n          Test\n        </BigButton>\n\n        <StartButton player={testPlayerList[1]} onStart={() => void 0} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          playerId={3}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n        <DirectiveLabel sentence=\"Salzt\" directive=\"bonsoir\" />\n\n        <SpinnerIcon />\n\n        <PlayerCount count={8} max={12} />\n\n        <PlayerCardList\n          players={testPlayerList}\n          isKickable={true}\n          onKick={id => void 0}\n        />\n\n        <BookPlayerList players={testPlayerList} playerId={2} />\n\n        <Slider\n          defaultValue={progress}\n          onChange={handleChange}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={1}\n          min={1}\n          max={7}\n        />\n\n        <SizePickerV2\n          size={size2}\n          onSizeChange={(e, value) => setSize2(value)}\n        />\n\n        <Box\n          bgcolor=\"#C6C6C6\"\n          borderRadius=\"50%\"\n          height={size2}\n          width={size2}\n        />\n\n        <StepProgress stepActual={progress} stepMax={7} />\n      </Box>\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\nexport default function DevNav() {\n  return (\n    <Box p={3} display=\"flex\" flexDirection=\"column\" alignItems=\"center\">\n      <h1>You're in DevNav</h1>\n      {/* With react-router-dom it's not a good practive do don't use\n          <Link /> but Rsuits alredy render a link */}\n      <NavLink to=\"/\">Dev nav</NavLink>\n      <NavLink to=\"/r/start\">Go Room Start</NavLink>\n      <NavLink to=\"/r/write\">Go Room Write</NavLink>\n      <NavLink to=\"/r/draw\">Go Room Draw</NavLink>\n      <NavLink to=\"/r/lobby\">Go Room Lobby</NavLink>\n      <NavLink to=\"/r\">Go Room</NavLink>\n      <NavLink to=\"/home\">Go home</NavLink>\n      <NavLink to=\"/t\">Go to TESTS pages</NavLink>\n    </Box>\n  );\n}\n\nfunction NavLink({ to, children }: any) {\n  return (\n    <Box\n      p={1}\n      bgcolor=\"background.default\"\n      m={1}\n      borderRadius={2}\n      border={1}\n      borderColor=\"primary.main\">\n      <Link to={to} style={{ color: 'white' }}>\n        {children}\n      </Link>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst usernames = [\n  'God',\n  'Mushu the Dragon',\n  'Bob Razowski',\n  'Macco',\n  'Woody Woodpecker',\n  'Mr Potato',\n  'Nemo',\n  'Shrek',\n  'Staline',\n  'Krokette',\n  'Little Otter',\n  'Bob the bob',\n  'SavageWolf',\n  'Padawan',\n  'BigBear',\n  'BigFather',\n  'Terminator',\n  'Stitch',\n];\n\nexport function useRandomUsername() {\n  const usernameRef = React.useRef(getRandomValueFromArray(usernames));\n\n  return usernameRef.current;\n}\n","import { useRandomUsername } from 'hooks/useRandomUsername';\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { client } from 'api/client';\nimport { setToken } from 'api/player-provider';\nimport profilesPictures from 'images/profiles/profiles-pictures';\nimport Player from 'types/Player.type';\nimport BigButton from '../BigButton';\nimport BigInput from '../BigInput';\nimport ButtonModalJoin from './ButtonModalJoin';\nimport PlayerAvatar from './PlayerAvatar';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport { Box, Grid, makeStyles } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\n\nconst useStyles = makeStyles(theme => ({\n  marginButton: {\n    marginLeft: theme.spacing(2),\n  },\n}));\n\nexport default function PlayerForm({ identifier }: { identifier?: string }) {\n  const [username, setUsername] = React.useState('');\n  const [ppIndex, setPpIndex] = React.useState(0);\n  const [loading, setLoading] = React.useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n  const history = useHistory();\n  const defaultUsername = useRandomUsername();\n  const classes = useStyles();\n\n  const nextPp = () => {\n    setPpIndex((p: number) => (p >= profilesPictures.length - 1 ? 0 : p + 1));\n  };\n\n  function onConnect(token: string, text: string, isSuccess: boolean = true) {\n    enqueueSnackbar(text, { variant: 'success' });\n    setToken(token);\n    history?.push('/r/lobby');\n  }\n\n  function onCreate() {\n    setLoading(true);\n    client<Player>('room', {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, 'Room successfully created 🙌');\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  function onJoin(identifier: string) {\n    const catchedIdentifier = identifier.startsWith('http')\n      ? identifier.split('/').pop()\n      : identifier;\n    setLoading(true);\n    client<Player>(`room/join/${catchedIdentifier}`, {\n      data: {\n        username: username || defaultUsername,\n        avatarUrl: String(ppIndex),\n      },\n      method: 'PATCH',\n    })\n      .then(\n        player => {\n          if (player.token?.tokenKey)\n            onConnect(player.token?.tokenKey, \"You've joined the room!\");\n        },\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Room-PATCH]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setLoading(false));\n  }\n\n  return (\n    <>\n      <Grid item>\n        <PlayerAvatar image={profilesPictures[ppIndex]} onShuffle={nextPp} />\n      </Grid>\n\n      <Grid item>\n        <Box display=\"flex\" flexDirection=\"column\" mb={1} px={1} maxWidth={356}>\n          <BigInput\n            value={username}\n            fullWidth\n            onChange={e => setUsername(e.target.value)}\n            placeholder={defaultUsername}\n          />\n\n          <Box display=\"flex\" mt={2}>\n            <ButtonModalJoin\n              identifier={identifier}\n              onClick={onJoin}\n              loading={loading}\n            />\n\n            {!identifier && (\n              <BigButton\n                fullWidth\n                className={classes.marginButton}\n                color=\"primary\"\n                startIcon={<PlayArrowIcon style={{ fontSize: 32 }} />}\n                onClick={onCreate}\n                loading={loading}>\n                Create\n              </BigButton>\n            )}\n          </Box>\n        </Box>\n      </Grid>\n    </>\n  );\n}\n","import { RouteComponentProps } from 'react-router-dom';\nimport HolyDrawLogo from 'components/HolyDrawLogo';\nimport PlayerForm from 'components/home/PlayerForm';\nimport { Grid } from '@material-ui/core';\n\nexport default function Home(\n  props: RouteComponentProps<{ identifier?: string }>,\n) {\n  const identifier = props.match.params.identifier;\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className=\"full-height\"\n      justify=\"space-between\">\n      <Grid item>\n        <HolyDrawLogo width={32} />\n      </Grid>\n      <PlayerForm identifier={identifier} />\n    </Grid>\n  );\n}\n","import PlayerCount from './room/PlayerCount';\nimport StepTimer from './room/StepTimer';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { Box } from '@material-ui/core';\n\ntype GameBarProps = {\n  onFinish?: () => void;\n};\n\nexport default function GameBar({ onFinish }: GameBarProps) {\n  const { session } = useSessionContext();\n  return (\n    <Box\n      display=\"flex\"\n      flexWrap=\"wrap\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      p={1}\n      px={{ xs: 2, sm: 4 }}\n      justifyContent=\"space-between\"\n      width=\"100%\">\n      <Box width={{ xs: 32, sm: 64 }}>\n        <PlayerCount\n          count={session?.playerFinished || 0}\n          max={session?.totalPlayers || 0}\n        />\n      </Box>\n\n      <Box width={{ xs: 32, sm: 64 }}>\n        <StepTimer\n          finishAt={new Date(session?.stepFinishAt || '')}\n          timeDuration={session?.timeDuration || 60}\n          onFinish={onFinish}\n        />\n      </Box>\n    </Box>\n  );\n}\n","import { Box, Container } from '@material-ui/core';\nimport { Breakpoint } from '@material-ui/core/styles/createBreakpoints';\nimport GameBar from 'components/GameBar';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport React from 'react';\nimport StepProgress from './StepProgress';\n\ntype GameLayoutProps = {\n  maxWidth?: Breakpoint;\n  children: React.ReactElement | React.ReactElement[];\n};\n\nexport default function GameLayout({\n  maxWidth = 'sm',\n  children,\n}: GameLayoutProps) {\n  return (\n    <Box height=\"100vh\" display=\"flex\" flexDirection=\"column\">\n      <GameBar />\n      <Container maxWidth={maxWidth} className=\"full-height\">\n        {children}\n      </Container>\n      {<StepProgressWithContext />}\n    </Box>\n  );\n}\n\nconst StepProgressWithContext = () => {\n  const { session } = useSessionContext();\n\n  // mettre background rose\n  return (\n    <StepProgress\n      stepActual={session?.actualStep}\n      stepMax={session?.totalPlayers}\n    />\n  );\n};\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport StartButton from '../lobby/StartButton';\nimport { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport { useState } from 'react';\n\nexport default function BookStartAction() {\n  const { enqueueSnackbar } = useSnackbar();\n  const { player } = usePlayerContext();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function onStart() {\n    setIsLoading(true)\n    client<null>('session/album/next', {\n      method: 'POST',\n      token: getToken(),\n    })\n      .then(\n        () =>\n          enqueueSnackbar(\n            'Album successfully started, wait 3 seconds before starting 💪',\n            { variant: 'success' },\n          ),\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Session-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setIsLoading(false));\n  }\n\n  return <StartButton onStart={onStart} isLoading={isLoading} startName=\"book\" player={player} />;\n}\n","import { Box, Typography } from '@material-ui/core';\nimport BookDrawingElement from 'components/room/book/BookDrawingElement';\nimport BookSentenceElement from 'components/room/book/BookSentenceElement';\nimport profilesPictures from 'images/profiles/profiles-pictures';\n\nimport { ElementType, HolyElement } from 'types/HolyElement.type';\n\ntype AlbumProps = { album: Array<HolyElement> };\n\nexport default function Album({ album }: AlbumProps) {\n  if (!album || album.length === 0) {\n    return null;\n  }\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" width={300}>\n      <Typography variant=\"h4\">{album[0].creator?.username}'s album</Typography>\n      {album.map(element => {\n        const isSentence = element.type === ElementType.Sentence;\n        return (\n          <Box\n            display=\"flex\"\n            flexDirection={isSentence ? 'row' : 'row-reverse'}>\n            {isSentence ? (\n              <BookSentenceElement\n                key={element.id}\n                username={element.creator?.username}\n                avatarUrl={\n                  profilesPictures[Number(element.creator?.avatarUrl)]\n                }>\n                {element.text}\n              </BookSentenceElement>\n            ) : (\n              <BookDrawingElement\n                key={element.id}\n                username={element.creator?.username}\n                src={element.drawImage}\n              />\n            )}\n          </Box>\n        );\n      })}\n    </Box>\n  );\n}\n","import { Box } from '@material-ui/core';\nimport { client } from 'api/client';\nimport { getToken } from 'api/player-provider';\nimport Loading from 'components/Loading';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport React from 'react';\n\nimport { HolyElement } from 'types/HolyElement.type';\nimport Album from './Album';\n\nexport default function BookMock() {\n  const { session } = useSessionContext();\n  const [album, setAlbum] = React.useState<HolyElement[][]>([]);\n\n  React.useEffect(() => {\n    client<HolyElement[]>(`album/${session?.id || 1}`, { token: getToken() })\n      .then(elements => {\n        const sortedElements = elements.reduce(\n          (accumulator: Record<number, HolyElement[]>, value: HolyElement) => {\n            if (!value.initiatorId) return accumulator;\n            if (accumulator[value.initiatorId]) {\n              accumulator[value.initiatorId].push(value);\n              return accumulator;\n            }\n            accumulator[value.initiatorId] = [value];\n            return accumulator;\n          },\n          {},\n        );\n        const flatArray: HolyElement[][] = [];\n        Object.keys(sortedElements).forEach((key: any) =>\n          flatArray.push(sortedElements[key]),\n        );\n        setAlbum(flatArray);\n      })\n      .catch(alert);\n  }, [session?.id]);\n\n  return album.length >= 1 ? (\n    <Box display=\"flex\" flexDirection=\"column\" style={{ gap: '40px' }}>\n      <Album album={album[0]} />\n    </Box>\n  ) : (\n    <Box>\n      <Loading />\n    </Box>\n  );\n}\n","import React from 'react';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { parseJson } from '../utils/json';\nimport { WebsocketEvent, WebsocketMessage } from 'types/websocket.types';\nimport { useWebsocketContext } from './WebsocketProvider';\n\ntype AlbumContextProps = {\n  albums?: Record<number, HolyElement[]>;\n};\n\nconst AlbumContext = React.createContext<AlbumContextProps>({});\n\ntype AlbumContextProviderProps = { children: React.ReactElement };\n\n/*\n  AlbumContextProvider return `albums` than contain objects like this :\n\n  44: [               <- is the id of the initiator \n    { id: 3, ... },   <- element with the same initiator id, the first element creator is equal to the initiator\n    { id: 4, ... },\n  ],\n  45: [\n    ...\n  ]\n*/\nexport function AlbumContextProvider({ children }: AlbumContextProviderProps) {\n  const [albums, setAlbums] = React.useState<Record<number, HolyElement[]>>({});\n  const { websocket } = useWebsocketContext();\n\n  React.useEffect(() => {\n    function onMessage(event: { data: string }) {\n      const websocketMessage = parseJson<WebsocketMessage>(event.data);\n      if (!websocketMessage) return;\n      switch (websocketMessage.websocketEvent) {\n        case WebsocketEvent.NewAlbumElement:\n          if (!websocketMessage.album) break;\n\n          const album = websocketMessage.album;\n          setAlbums(prevAlbums => {\n            if (!album.initiatorId) return prevAlbums;\n            const prevAlbumsCopy = { ...prevAlbums };\n\n            if (prevAlbumsCopy[album.initiatorId]) {\n              prevAlbumsCopy[album.initiatorId].push(album);\n            } else {\n              prevAlbumsCopy[album.initiatorId] = [album];\n            }\n\n            return prevAlbumsCopy;\n          });\n          break;\n      }\n    }\n    if (websocket) {\n      websocket.addEventListener('message', onMessage);\n      return () => websocket.removeEventListener('message', onMessage);\n    }\n  }, [websocket]);\n\n  const values = { albums };\n\n  return (\n    <AlbumContext.Provider value={values}>{children}</AlbumContext.Provider>\n  );\n}\n\nexport function useAlbumContext() {\n  const context = React.useContext(AlbumContext);\n  if (!context)\n    throw new Error(\n      'useAlbumContext should be used within a AlbumContextProvider',\n    );\n  return context;\n}\n","import BookPlayerList from 'components/room/book/BookPlayerList';\nimport React from 'react';\nimport GameLayout from 'components/room/GameLayout';\nimport { Grid } from '@material-ui/core';\nimport BookStartAction from 'components/room/book/BookStartAction';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport BookMock from 'components/room/book/BookMock';\nimport { AlbumContextProvider } from 'hooks/AlbumProvider';\n\nexport default function Book() {\n  const { players } = useRoomContext();\n  return (\n    <AlbumContextProvider>\n      <GameLayout maxWidth=\"sm\">\n        <BookMock />\n        <Grid\n          container\n          spacing={2}\n          direction=\"column\"\n          alignItems=\"center\"\n          className=\"full-height\"\n          wrap=\"nowrap\"\n          justify=\"space-between\">\n          <Grid item>\n            <BookPlayerList players={players} />\n          </Grid>\n          <BookMock />\n          <Grid item>\n            <BookStartAction />\n          </Grid>\n        </Grid>\n      </GameLayout>\n    </AlbumContextProvider>\n  );\n}\n","import React from 'react';\nimport { Box, IconButton, Tooltip } from '@material-ui/core';\nimport {\n  OnClearAction,\n  OnRedoAction,\n  OnUndoAction,\n} from 'components/canvas/DrawingCanvasActions';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport RedoIcon from '@material-ui/icons/Redo';\nimport CircleButtons from 'components/circle-button/CircleButtons';\nimport FormatColorFillIcon from '@material-ui/icons/FormatColorFill';\nimport CloseIcon from '@material-ui/icons/Close';\nimport BrushIcon from '@material-ui/icons/Brush';\nimport { useCanvasContext } from 'components/canvas/DrawingCanvasContext';\nimport { LineType } from 'types/canvas.types';\n\nexport default function CanvasActionButtons() {\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <OnClearAction>\n        <IconButton>\n          <Tooltip title=\"hotkey: C\">\n            <DeleteIcon />\n          </Tooltip>\n        </IconButton>\n      </OnClearAction>\n      <OnUndoAction>\n        <IconButton>\n          <Tooltip title=\"CMD + Z\">\n            <UndoIcon />\n          </Tooltip>\n        </IconButton>\n      </OnUndoAction>\n      <OnRedoAction>\n        <IconButton>\n          <Tooltip title=\"CMD + SHIFT + Z\">\n            <RedoIcon />\n          </Tooltip>\n        </IconButton>\n      </OnRedoAction>\n    </Box>\n  );\n}\n\nfunction getCurrentIcon(lineType: LineType) {\n  switch (lineType) {\n    case LineType.FILL:\n      return FormatColorFillIcon;\n    case LineType.LINE:\n      return BrushIcon;\n  }\n  return BrushIcon;\n}\n\nexport function CanvasLineTypeButton() {\n  const { lineType, setLineType } = useCanvasContext();\n  const Icon = getCurrentIcon(lineType);\n\n  React.useEffect(() => {\n    function onKeyDown(event: KeyboardEvent) {\n      switch (event.key) {\n        case 'b':\n          setLineType(LineType.LINE);\n          break;\n        case 'f':\n          setLineType(LineType.FILL);\n          break;\n      }\n    }\n\n    document.addEventListener('keydown', onKeyDown);\n    return () => document.removeEventListener('keydown', onKeyDown);\n  }, [setLineType]);\n\n  return (\n    <CircleButtons\n      circleBg=\"none\"\n      spacing={1}\n      action={open => (\n        <IconButton>\n          {open ? (\n            <CloseIcon />\n          ) : (\n            <Tooltip title=\"Click to open\">\n              <Icon />\n            </Tooltip>\n          )}\n        </IconButton>\n      )}>\n      <IconButton onClick={() => setLineType(LineType.LINE)}>\n        <Tooltip title=\"hotkey: B\">\n          <BrushIcon />\n        </Tooltip>\n      </IconButton>\n      <IconButton onClick={() => setLineType(LineType.FILL)}>\n        <Tooltip title=\"hotkey: F\">\n          <FormatColorFillIcon />\n        </Tooltip>\n      </IconButton>\n    </CircleButtons>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport DrawingCanvas from 'components/canvas/DrawingCanvas';\nimport { OnSaveAction } from 'components/canvas/DrawingCanvasActions';\nimport { DrawingCanvasProvider } from 'components/canvas/DrawingCanvasProvider';\nimport CanvasActionButtons, {\n  CanvasLineTypeButton,\n} from 'components/room/draw/CanvasActionButtons';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport theme from 'theme';\nimport { useState } from 'react';\n\ntype GameCanvasProps = {\n  size: number;\n  color: string;\n};\n\nexport default function GameCanvas({ size, color }: GameCanvasProps) {\n  // will be used when we will implement the GameCanvasV2\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { currentElement, onSave } = useSessionContext();\n  const isEditing = Boolean(!currentElement?.finishAt);\n  const [loading, setLoading] = useState(false);\n\n  return (\n    <DrawingCanvasProvider color={color} disabled={!isEditing} lineSize={size}>\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        gridGap={8}\n        alignItems=\"center\">\n        <Box maxWidth={512} width=\"100%\">\n          <DrawingCanvas disabled={!isEditing} />\n        </Box>\n        <Box\n          display=\"flex\"\n          flexDirection=\"row\"\n          gridGap={8}\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n          width=\"100%\">\n          <CanvasActionButtons />\n          <CanvasLineTypeButton />\n          <OnSaveAction\n            onSave={canvasImage => {\n              if (!canvasImage) return;\n              setLoading(true);\n              onSave(canvasImage).then(() => setLoading(false));\n            }}>\n            <BigButton\n              loading={loading}\n              startIcon={\n                isEditing ? (\n                  <SaveIcon style={{ fontSize: 32 }} />\n                ) : (\n                  <EditIcon style={{ fontSize: 32 }} />\n                )\n              }\n              color=\"primary\"\n              size=\"medium\">\n              {isEditing ? 'Save' : 'Edit'}\n            </BigButton>\n          </OnSaveAction>\n        </Box>\n      </Box>\n    </DrawingCanvasProvider>\n  );\n}\n","import { Box, useMediaQuery } from '@material-ui/core';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport DrawColorPicker from 'components/room/draw/DrawColorPicker';\nimport SizePicker from 'components/room/draw/SizePicker';\nimport GameLayout from 'components/room/GameLayout';\nimport GameCanvas from 'components/room/draw/GameCanvas';\nimport { useState } from 'react';\nimport theme from 'theme';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport { useDisableBodyOverflow } from 'components/room/draw/useDisableBodyOverflow';\nimport { colors } from 'utils/app-constant';\n\nexport default function Draw() {\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const [color, setColor] = useState(colors[5]);\n  const [size, setSize] = useState(8);\n  useDisableBodyOverflow();\n  return (\n    <GameLayout maxWidth=\"md\">\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        alignItems=\"center\"\n        gridGap={16}>\n        <Box width=\"100%\" maxWidth={682}>\n          <CurrentDirectiveLabel />\n        </Box>\n\n        <Box\n          display=\"flex\"\n          width=\"100%\"\n          justifyContent={{ xs: 'center', sm: 'auto' }}\n          flexDirection={{ xs: 'column', sm: 'row' }}\n          gridGap={16}>\n          <Box order={{ xs: 1, sm: 0 }}>\n            <DrawColorPicker\n              currentColor={color}\n              onColorChange={color => setColor(color)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n\n          <GameCanvas size={size} color={color} />\n          <Box order={{ xs: 2, sm: 0 }}>\n            <SizePicker\n              currentSize={size}\n              onSizeChange={size => setSize(size)}\n              flexDirection={isDeviceSM ? 'column' : 'row'}\n            />\n          </Box>\n        </Box>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDirectiveLabel() {\n  const { currentElement } = useSessionContext();\n  return (\n    <DirectiveLabel\n      directive=\"Time to Draw\"\n      sentence={currentElement?.parent?.text}\n    />\n  );\n}\n","import React from 'react';\n\n/*\n  This hook will add style with `overflow: hidden` and remove it on cleanup\n*/\nexport function useDisableBodyOverflow() {\n  const styleElement = React.useRef(document.createElement('style'));\n\n  React.useEffect(() => {\n    const currentStyle = styleElement.current;\n\n    currentStyle.innerHTML = 'body { overflow: hidden; }';\n\n    document.getElementsByTagName('head')[0].appendChild(currentStyle);\n    return () => {\n      document.getElementsByTagName('head')[0].removeChild(currentStyle);\n    };\n  }, []);\n}\n","import { usePlayerContext } from 'hooks/PlayerProvider';\nimport { client } from 'api/client';\nimport Session from 'types/Session.type';\nimport StartButton from './StartButton';\nimport { getToken } from 'api/player-provider';\nimport { useSnackbar } from 'notistack';\nimport { useState } from 'react';\n\nexport default function LobbyStartAction() {\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function onStart() {\n    setIsLoading(true);\n    client<Session>('session', { method: 'POST', token: getToken() })\n      .then(\n        () =>\n          enqueueSnackbar('Game successfully started 💪', {\n            variant: 'success',\n          }),\n        () =>\n          enqueueSnackbar('Sorry, an error occured 😕 [Session-POST]', {\n            variant: 'error',\n          }),\n      )\n      .finally(() => setIsLoading(false));\n  }\n\n  return (\n    <StartButton onStart={onStart} isLoading={isLoading} player={player} />\n  );\n}\n","import React from 'react';\nimport { Button, Dialog, DialogActions, DialogTitle } from '@material-ui/core';\n\ntype KickModalProps = {\n  open: boolean;\n  username?: string;\n  onKick: () => void;\n  onClose: () => void;\n};\n\nexport function KickModal({ open, username, onKick, onClose }: KickModalProps) {\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" open={open} onClose={() => onClose()}>\n      <DialogTitle>Do you really want to kick {username} ?</DialogTitle>\n      <DialogActions>\n        <Button onClick={() => onClose()} color=\"secondary\">\n          Cancel 👋\n        </Button>\n        <Button onClick={() => onKick()} color=\"secondary\">\n          Kick 🤫\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React from 'react';\nimport { client } from 'api/client';\nimport { usePlayerContext } from 'hooks/PlayerProvider';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport Loading from '../../Loading';\nimport PlayerCount from '../../room/PlayerCount';\nimport BookPlayerList from '../book/BookPlayerList';\nimport PlayerCardList from './PlayerCardList';\nimport { Box, useMediaQuery, useTheme } from '@material-ui/core';\nimport { useSnackbar } from 'notistack';\nimport { KickModal } from './KickModal';\n\nexport function Players() {\n  const theme = useTheme();\n  const isDeviceSM = useMediaQuery(theme.breakpoints.up('sm'));\n  const { players } = useRoomContext();\n  const { player } = usePlayerContext();\n  const { enqueueSnackbar } = useSnackbar();\n  const [playerToKick, setPlayerToKick] = React.useState<{\n    id: number;\n    name: string;\n  } | null>(null);\n\n  function onKick(id: number, name: string) {\n    setPlayerToKick({ id, name });\n  }\n\n  function kickPlayer(id: number) {\n    const url = `player/players/${id}/kick`;\n    client(url, {\n      token: player?.token?.tokenKey,\n      method: 'PATCH',\n    }).then(\n      () => enqueueSnackbar('Player kicked 😎', { variant: 'success' }),\n      () =>\n        enqueueSnackbar('Sorry, an error occured 😕 [kick-PATCH]', {\n          variant: 'error',\n        }),\n    );\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-end\">\n      {players?.length > 0 ? (\n        isDeviceSM ? (\n          <PlayerCardList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onKick={(id, name) => onKick(id, name)}\n          />\n        ) : (\n          <BookPlayerList\n            players={players}\n            playerId={player?.id}\n            isKickable={player?.isOwner}\n            onClick={(id, name) => onKick(id, name)}\n          />\n        )\n      ) : (\n        <Loading />\n      )}\n      <KickModal\n        open={Boolean(playerToKick)}\n        username={playerToKick?.name}\n        onKick={() => {\n          if (!playerToKick) return;\n          kickPlayer(playerToKick?.id);\n          setPlayerToKick(null);\n        }}\n        onClose={() => setPlayerToKick(null)}\n      />\n    </Box>\n  );\n}\n\nexport function PlayerCountBox() {\n  const { players } = useRoomContext();\n\n  return (\n    <Box pr={{ xs: 1, md: 2 }}>\n      <PlayerCount count={players?.length || 0} max={12} />\n    </Box>\n  );\n}\n","import { Box, Typography } from '@material-ui/core';\nimport { useRoomContext } from 'hooks/RoomProvider';\nimport ShareRoomButton from './ShareRoomButton';\n\nexport default function SettingsMenu() {\n  const { room, wsState } = useRoomContext();\n  return (\n    <Box\n      borderRadius=\"0 4px 4px 0\"\n      minWidth={328}\n      pl={2}\n      height=\"auto\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      alignItems={{ xs: 'center', sm: 'flex-start' }}\n      gridGap={24}>\n      <Typography variant=\"h5\">{wsState}</Typography>\n      <ShareRoomButton identifier={room?.identifier} />\n    </Box>\n  );\n}\n","import HolyDrawLogo from 'components/HolyDrawLogo';\nimport LobbyStartButton from 'components/room/lobby/LobbyStartAction';\nimport { Players, PlayerCountBox } from 'components/room/lobby/Players';\nimport SettingsMenu from 'components/room/lobby/SettingsMenu';\nimport { Box, fade, makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  playersContainer: {\n    alignItems: 'center',\n    flexDirection: 'column',\n    gap: 64,\n    [theme.breakpoints.up('sm')]: {\n      alignItems: 'flex-start',\n      flexDirection: 'row',\n    },\n  },\n  container: {\n    backgroundColor: fade(theme.palette.background.default, 0.8),\n  },\n}));\n\nexport default function Lobby() {\n  const classes = useStyles();\n  return (\n    <Box\n      display=\"flex\"\n      flexDirection=\"column\"\n      height=\"100vh\"\n      alignItems=\"center\"\n      width=\"100%\">\n      <Box mb={3} width=\"100%\" display=\"flex\" justifyContent=\"center\">\n        <HolyDrawLogo width={32} />\n      </Box>\n      <Box\n        display=\"flex\"\n        justifyContent=\"space-between\"\n        width=\"100%\"\n        m={3}\n        height=\"100vh\"\n        alignItems=\"center\"\n        flexDirection=\"column\">\n        <Box\n          display=\"flex\"\n          className={classes.container}\n          flexDirection=\"column\"\n          alignItems=\"flex-end\"\n          width=\"100%\">\n          <PlayerCountBox />\n          <Box\n            display=\"flex\"\n            justifyContent=\"space-between\"\n            width=\"100%\"\n            className={classes.playersContainer}>\n            <SettingsMenu />\n            <Players />\n          </Box>\n        </Box>\n        <LobbyStartButton />\n      </Box>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { getRandomValueFromArray } from 'utils/utils';\n\nconst sentences = [\n  'A samurai eating a kebab with samouraï sauce',\n  'A man walking on the ceiling',\n  'A gas station on fire',\n  'A T-Rex playing chess with monkeys',\n  'Someone watching himself on TV',\n  \"Pinocchio but he's made of iron\",\n  'A nice shark without teeth',\n  'A knight far too tall',\n  'A man chained by circus animals',\n  'A shipwreck on a chocolate island',\n  'An invasion of multicolored aliens',\n  'Spongebob becoming HandBob',\n  'New colony on Mars leaded by Musk',\n  'Sad jedi because the force is not with him',\n  'Godzilla VS King Kong',\n  'Woman pissed of by noisy neighbors',\n  'A world where sofas and humans are interchanged',\n  \"Stitch meeting The Rock at Shrek's birthday\",\n];\n\nexport function useRandomSentence() {\n  const sentenceRef = React.useRef(getRandomValueFromArray(sentences));\n\n  return sentenceRef.current;\n}\n","import React from 'react';\nimport { Box, Grid, makeStyles } from '@material-ui/core';\nimport BigButton from 'components/BigButton';\nimport BigInput from 'components/BigInput';\nimport { useSessionContext } from 'hooks/SessionProvider';\nimport EditIcon from '@material-ui/icons/Edit';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { useRandomSentence } from 'hooks/useRandomSentence';\nimport { useTimerEvent } from 'hooks/useTimerInterval';\nimport { client } from 'api/client';\nimport { HolyElement } from 'types/HolyElement.type';\nimport { getToken } from 'api/player-provider';\nimport { SessionStepType } from 'types/Session.type';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    marginLeft: theme.spacing(1),\n    fontSize: 28,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      marginLeft: theme.spacing(0),\n      marginTop: theme.spacing(1),\n    },\n  },\n}));\n\nexport default function StartForm() {\n  const { session, currentElement, onSave } = useSessionContext();\n  const [sentence, setSentence] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n  const isEditing = Boolean(!currentElement?.finishAt);\n  const defaultSentence = useRandomSentence();\n  const classes = useStyles();\n\n  useTimerEvent({\n    finishAt: new Date(session?.stepFinishAt || ''),\n    timeDuration: session?.timeDuration || 60,\n    onFinish: () => {\n      client<HolyElement>(`element/auto/${currentElement?.id}`, {\n        token: getToken(),\n        method: 'PATCH',\n        data: { text: sentence || defaultSentence },\n      });\n    },\n    onFinishPercentage: 98,\n  });\n\n  return (\n    <>\n      <Grid item className=\"full-width\">\n        <Box\n          display=\"flex\"\n          width=\"100%\"\n          flexDirection={{ xs: 'column', sm: 'row' }}>\n          <BigInput\n            fullWidth\n            disabled={!isEditing}\n            placeholder={\n              session?.stepType === SessionStepType.Start\n                ? defaultSentence\n                : 'Your description here'\n            }\n            value={sentence}\n            onChange={e => setSentence(e.target.value)}\n          />\n\n          <BigButton\n            className={classes.button}\n            color=\"primary\"\n            loading={loading}\n            disabled={sentence.length === 0}\n            onClick={() => {\n              setLoading(true);\n              onSave(sentence).then(() => setLoading(false));\n            }}\n            startIcon={\n              isEditing ? (\n                <SaveIcon style={{ fontSize: 28 }} />\n              ) : (\n                <EditIcon style={{ fontSize: 28 }} />\n              )\n            }>\n            {isEditing ? 'Save' : 'Edit'}\n          </BigButton>\n        </Box>\n      </Grid>\n    </>\n  );\n}\n","import GymGuy from 'images/gym-guy.svg';\nimport { Grid, Typography } from '@material-ui/core';\nimport SentenceForm from 'components/room/start/SentenceForm';\nimport GameLayout from 'components/room/GameLayout';\n\nexport default function Start() {\n  return (\n    <GameLayout maxWidth=\"sm\">\n      <Grid\n        container\n        spacing={3}\n        direction=\"column\"\n        alignItems=\"center\"\n        className=\"full-height\"\n        wrap=\"nowrap\"\n        justify=\"center\">\n        <Grid item>\n          <img src={GymGuy} alt=\"\" width={256} />\n        </Grid>\n        <Grid item>\n          <Typography variant=\"h4\">Start a story</Typography>\n        </Grid>\n        <SentenceForm />\n      </Grid>\n    </GameLayout>\n  );\n}\n","import { Box, Grid, makeStyles } from '@material-ui/core';\nimport StartForm from 'components/room/start/SentenceForm';\nimport DirectiveLabel from 'components/room/DirectiveLabel';\nimport GameLayout from 'components/room/GameLayout';\nimport CurrentDrawImage from 'components/room/CurrentDrawImage';\nimport { useSessionContext } from 'hooks/SessionProvider';\n\nconst useStyles = makeStyles(theme => ({\n  width: {\n    width: 552,\n    height: 'auto',\n    minHeight: 320,\n    [theme.breakpoints.down('xs')]: {\n      width: '100%',\n      minHeight: 0,\n    },\n  },\n}));\n\nexport default function Write() {\n  const classes = useStyles();\n  return (\n    <GameLayout>\n      <Box maxWidth={600} alignItems=\"center\" height=\"100%\">\n        <Grid\n          container\n          spacing={3}\n          direction=\"column\"\n          alignItems=\"center\"\n          className=\"full-height\"\n          justify=\"center\">\n          <Grid item className=\"full-width\">\n            <DirectiveLabel directive=\"Describe this scene\" />\n          </Grid>\n          <Grid item className=\"full-width\">\n            <CurrentDrawImageWithContext className={classes.width} />\n          </Grid>\n          <StartForm />\n        </Grid>\n      </Box>\n    </GameLayout>\n  );\n}\n\nfunction CurrentDrawImageWithContext({ className }: { className: string }) {\n  const { currentElement } = useSessionContext();\n  return (\n    <CurrentDrawImage\n      src={currentElement?.parent.drawImage}\n      className={className}\n    />\n  );\n}\n","import AppLayout from 'components/AppLayout';\nimport { BrowserRouter, HashRouter, Switch, Route } from 'react-router-dom';\nimport { PlayerContextProvider } from 'hooks/PlayerProvider';\nimport { RoomContextProvider } from 'hooks/RoomProvider';\nimport ComponentTest from 'pages/ComponentTest';\nimport DevNav from 'pages/DevNav';\nimport Home from 'pages/Home';\nimport Book from 'pages/room/Book';\nimport Draw from 'pages/room/Draw';\nimport Lobby from 'pages/room/Lobby';\nimport Start from 'pages/room/Start';\nimport Write from 'pages/room/Write';\nimport { WebsocketProvider } from 'hooks/WebsocketProvider';\nimport { SessionContextProvider } from 'hooks/SessionProvider';\n\nconst Router: any =\n  process.env.NODE_ENV === 'production' ? HashRouter : BrowserRouter;\n\nexport default function Routes() {\n  return (\n    <AppLayout>\n      <Router>\n        <Switch>\n          <Route path=\"/join/:identifier\" component={Home} />\n          <Route path=\"/start\" component={Start} />\n          <Route path=\"/r\" component={RoomRoutes} />\n          <Route path=\"/draw\" component={Draw} />\n          <Route path=\"/t\" component={ComponentTest} />\n          <Route path=\"/home\" component={Home} />\n          {/* For test, I add a special Nav\n          TODO: replace it by `Home` */}\n          <Route path=\"/\" component={DevNav} />\n        </Switch>\n      </Router>\n    </AppLayout>\n  );\n}\n\nfunction RoomRoutes() {\n  return (\n    <WebsocketProvider>\n      <PlayerContextProvider>\n        <RoomContextProvider>\n          <Switch>\n            <Route path=\"/r/lobby\" component={Lobby} />\n            <Route path=\"/r\" component={SessionRoutes} />\n          </Switch>\n        </RoomContextProvider>\n      </PlayerContextProvider>\n    </WebsocketProvider>\n  );\n}\n\nfunction SessionRoutes() {\n  return (\n    <SessionContextProvider>\n      <Switch>\n        <Route path=\"/r/start\" component={Start} />\n        <Route path=\"/r/draw\" component={Draw} />\n        <Route path=\"/r/write\" component={Write} />\n        <Route path=\"/r/book\" component={Book} />\n        <Route path=\"/r/lobby\" component={Lobby} />\n      </Switch>\n    </SessionContextProvider>\n  );\n}\n","import { CssBaseline, ThemeProvider } from '@material-ui/core';\nimport theme from 'theme';\nimport Routes from 'Routes';\nimport { SnackbarProvider } from 'notistack';\n\n/*\n * Entry point for our App\n * Do not add Logic here\n */\nfunction App() {\n  return (\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      preventDuplicate\n      maxSnack={3}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Routes />\n      </ThemeProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}