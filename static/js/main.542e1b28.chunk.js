(this["webpackJsonpthyrel-web"]=this["webpackJsonpthyrel-web"]||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),o=n.n(i),c=n(189),s=n(190),l=n(104),u=n(13),d=n(195),b=n(92);var j,h=(j=n.n(b)()({type:"dark",primary:{main:"#9c27b0"},secondary:{main:"#880061"},background:{default:"#0f131a",paper:"#1a1d24"}}),Object(l.a)({palette:j,typography:{h1:{fontSize:64,fontFamily:"Modak"},h4:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:32},h5:{fontSize:20,fontWeight:"bold",fontFamily:"Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI"},subtitle1:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:16},subtitle2:{fontSize:12},body1:{fontSize:16},body2:{fontSize:14},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Open Sans","Helvetica Neue","sans-serif"].join(",")},spacing:8,overrides:{MuiButton:{label:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},root:{textTransform:"none",padding:"4px 8px",borderRadius:6},contained:{height:42,fontSize:16,color:j.common.white,fontFamily:"Work Sans",backgroundColor:j.divider,boxShadow:"0px 8px 1px ".concat(Object(u.c)("#000000",.8)),position:"relative","&:hover":{backgroundColor:j.action.hover,boxShadow:"0px 8px 1px ".concat(Object(u.c)("#000000",.8))},"&:focus":{boxShadow:"0px 8px 1px ".concat(Object(u.c)("#000000",.8))},"&:active":{top:8,boxShadow:"none"}},iconSizeLarge:{marginLeft:0},containedSizeLarge:{height:58,padding:"8px 16px",fontSize:32}}}})),f=h=Object(d.a)(h),x=n(173),m=n(175),v=n(192),p=n(1),O=Object(x.a)((function(e){return{gameBox:{borderLeft:"1px solid ".concat(e.palette.secondary.main),borderRight:"1px solid ".concat(e.palette.secondary.main)},container:{padding:0,minHeight:"100vh",maxWidth:"calc(".concat(e.breakpoints.values.lg,"px - 128px)")}}}));function g(e){var t=e.children,n=O();return Object(p.jsx)(m.a,{className:n.container,maxWidth:"lg",children:Object(p.jsx)(v.a,{bgcolor:"background.paper",display:"block",margin:"auto",height:"100%",minHeight:"100vh",width:"100%",minWidth:320,className:n.gameBox,children:t})})}var y,w,k,S=n(46),C=n(16),I=n(26),E=n(11),D=n(18);!function(e){e.IDLE="Loading...",e.CONNECTING="You will be connected",e.CONNECTED="You are connected",e.CLOSED="You're disconnected"}(y||(y={})),function(e){e[e.Invalid=-1]="Invalid",e[e.PlayerJoin=1]="PlayerJoin",e[e.PlayerLeft=2]="PlayerLeft",e[e.PlayerFinished=3]="PlayerFinished",e[e.NewOwnerPlayer=4]="NewOwnerPlayer",e[e.PlayerKicked=5]="PlayerKicked",e[e.SessionStart=11]="SessionStart",e[e.SessionUpdate=12]="SessionUpdate",e[e.NextStep=13]="NextStep"}(w||(w={})),function(e){e[e.Authentication=1]="Authentication"}(k||(k={}));var N=n(57),z=n.n(N),P=n(79),A="https://localhost:5001/api";function F(e){return R.apply(this,arguments)}function R(){return(R=Object(P.a)(z.a.mark((function e(t){var n,r,a,i,o,c,s,l=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.data,a=n.method,i=n.token,o=n.headers,c=n.customConfig,s=Object(I.a)({method:a||(r?"POST":"GET"),body:r?JSON.stringify(r):null,headers:Object(I.a)({Authorization:i?"Bearer ".concat(i):"","Content-Type":r?"application/json":"",Accept:"application/json"},o)},c),e.abrupt("return",window.fetch("".concat(A,"/").concat(t),s).then(function(){var e=Object(P.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=2;break}return e.abrupt("return",Promise.reject({message:"Please re-authenticate."}));case 2:return e.next=4,t.json();case 4:if(n=e.sent,!t.ok){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",Promise.reject(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L="__player_provider_token__";function W(){return window.localStorage.getItem(L)}function T(e){window.localStorage.setItem(L,e)}var B=n.p+"static/media/spinner.efdf2d72.svg";function M(){return Object(p.jsx)(v.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(p.jsx)("img",{src:B,alt:"loading"})})}function K(e,t){var n;try{n=JSON.parse(e)}catch(r){return t}return n||t}var U,G=function(e){var t=a.a.useRef(!1);return a.a.useLayoutEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),a.a.useCallback((function(){return t.current?e.apply(void 0,arguments):void 0}),[e])},H="wss://".concat(null===(U=/\b(?:(?:https?|ftp):\/\/)?([^/\n]+)\/?/.exec("https://localhost:5001/api"))||void 0===U?void 0:U[1],"/api/stream");var J=a.a.createContext({wsState:y.IDLE});function q(e){var t=e.children,n=function(){var e=a.a.useState(),t=Object(E.a)(e,2),n=t[0],r=t[1],i=a.a.useState(y.IDLE),o=Object(E.a)(i,2),c=o[0],s=o[1],l=Object(D.b)().enqueueSnackbar,u=a.a.useCallback((function(e){s(y.CLOSED),e&&(l("Connexion lost \u26a1\ufe0f [ws]",{variant:"error"}),r(void 0))}),[l]),d=G(u),b=a.a.useCallback((function(){var e=new WebSocket(H),t=!1;s(y.CONNECTING),r(e),e.onopen=function(){t=!0,e.send(JSON.stringify({type:k.Authentication,playerToken:W()})),s(y.CONNECTED)},e.onclose=function(){d(t)}}),[d]);return a.a.useEffect((function(){if(n)return function(){return n.close()};b()}),[b,n]),{wsState:c,websocket:n}}(),r={wsState:n.wsState,websocket:n.websocket};return Object(p.jsx)(J.Provider,{value:r,children:t})}function Y(){var e=a.a.useContext(J);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var _=a.a.createContext({});function X(e){var t=e.children,n=a.a.useState(),r=Object(E.a)(n,2),i=r[0],o=r[1],c=Object(D.b)().enqueueSnackbar,s=Y().websocket,l=Object(C.f)();a.a.useEffect((function(){function e(e){var t,n=K(e.data);if(n)switch(n.websocketEvent){case w.NewOwnerPlayer:(null===n||void 0===n||null===(t=n.player)||void 0===t?void 0:t.id)===(null===i||void 0===i?void 0:i.id)&&o((function(e){return e?Object(I.a)(Object(I.a)({},e),{},{isOwner:!0}):e}))}}if(s&&i)return s.addEventListener("message",e),function(){return s.removeEventListener("message",e)}}),[i,s]),a.a.useEffect((function(){var e=!1;return F("player/me",{token:W()}).then((function(t){return!e&&o(t)}),(function(){c("You haven't joined a game yet.",{variant:"error"}),l.push("/home")})),function(){e=!0}}),[c,l]);var u={player:i};return Object(p.jsx)(_.Provider,{value:u,children:i?t:Object(p.jsx)(M,{})})}function V(){var e=a.a.useContext(_);if(!e)throw new Error("usePlayerContext should be used within a PlayerContextProvider");return e}var Q=n(82);function Z(){var e=a.a.useState(),t=Object(E.a)(e,2),n=t[0],r=t[1],i=a.a.useState([]),o=Object(E.a)(i,2),c=o[0],s=o[1],l=V().player,u=Object(C.f)(),d=Object(D.b)().enqueueSnackbar,b=a.a.useCallback((function(){F("room/".concat(null===l||void 0===l?void 0:l.roomId),{token:W()}).then(r)}),[null===l||void 0===l?void 0:l.roomId]),j=a.a.useCallback((function(){F("room/".concat(null===l||void 0===l?void 0:l.roomId,"/players"),{token:W()}).then(s)}),[null===l||void 0===l?void 0:l.roomId]),h=a.a.useCallback((function(e){e&&(e===(null===l||void 0===l?void 0:l.id)&&(u.push("/home"),window.localStorage.removeItem(L),d("Seems like you've been kicked from the room \ud83d\ude05",{variant:"info"})),s((function(t){var n=null===t||void 0===t?void 0:t.findIndex((function(t){return t.id===e}));if(-1!==n){var r=Object(Q.a)(t);return r.splice(n,1),r}return t})))}),[d,u,null===l||void 0===l?void 0:l.id]),f=a.a.useCallback((function(e){e&&s((function(t){return t.find((function(t){return t.id===e.id}))?t:[].concat(Object(Q.a)(t),[e])}))}),[]);return a.a.useEffect((function(){(null===l||void 0===l?void 0:l.roomId)?(b(),j()):u.push("/home")}),[u,null===l||void 0===l?void 0:l.roomId,j,b]),{updatePlayer:j,updateRoom:b,removePlayer:h,addPlayer:f,room:n,players:c}}var $=a.a.createContext({wsState:y.IDLE,players:[]});function ee(e){var t=e.children,n=Z(),r=n.room,i=n.players,o=n.updatePlayer,c=n.removePlayer,s=n.addPlayer,l=Object(C.f)(),u=Y(),d=u.wsState,b=u.websocket,j=Object(D.b)().enqueueSnackbar;a.a.useEffect((function(){function e(e){var t=K(e.data);if(t)switch(t.websocketEvent){case w.Invalid:j(t.error,{variant:"error"}),l.push("/home");break;case w.PlayerJoin:s(t.player);break;case w.PlayerLeft:c(t.playerId);break;case w.NewOwnerPlayer:o();break;case w.SessionStart:null===l||void 0===l||l.push("/r/start");break;case w.PlayerKicked:c(t.playerId)}}if(b)return b.addEventListener("message",e),function(){return b.removeEventListener("message",e)}}),[s,j,l,c,o,b]);var h={room:r,wsState:d,players:i};return Object(p.jsx)($.Provider,{value:h,children:t})}function te(){var e=a.a.useContext($);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var ne=n(75),re=n(176),ae=n(3),ie=n(94),oe=n.n(ie),ce=Object(x.a)((function(){return{spin:{animation:"spinnerIconEffect 1s linear infinite"},"@global":{"@keyframes spinnerIconEffect":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}}}}}));function se(e){var t=ce();return Object(p.jsx)(oe.a,{style:e.style,"aria-label":"spinner icon",className:Object(ae.a)(e.className,t.spin)})}function le(e){var t=e.children,n=e.loading,r=e.onClick,a=Object(ne.a)(e,["children","loading","onClick"]);return Object(p.jsx)(re.a,Object(I.a)(Object(I.a)({onClick:r,variant:"contained",color:"secondary"},a),{},{children:n?Object(p.jsx)(se,{}):t}))}var ue=n(106);function de(e){var t=e.count,n=e.max;return Object(p.jsx)(v.a,{py:1,children:Object(p.jsxs)(ue.a,{variant:"subtitle1",children:[t,"/",n]})})}var be=n(19),je=n.p+"static/media/holydraw-logo.78893378.svg",he=Object(x.a)((function(e){return{logo:Object(be.a)({textAlign:"center",width:function(e){return 8*e.width},height:"auto"},e.breakpoints.down("xs"),{width:function(e){return 8*e.width/3*2}})}}));function fe(e){var t=e.width,n=he({width:void 0===t?24:t});return Object(p.jsx)("img",{src:je,className:n.logo,alt:"holy draw logo"})}var xe=Object(x.a)((function(e){var t,n,r;return{input:(t={backgroundColor:"inherit",border:"none",width:"100%",fontSize:24,height:34,fontFamily:"Work Sans",color:e.palette.text.primary},Object(be.a)(t,e.breakpoints.up("sm"),{fontSize:32,height:36}),Object(be.a)(t,"&:disabled",{color:e.palette.text.disabled}),t),container:(n={display:"flex",backgroundColor:function(t){return t.disabled?Object(u.c)(e.palette.background.default,.4):e.palette.background.default},cursor:function(e){return e.disabled?"not-allowed":"pointer"},border:function(t){return t.disabled?"1px solid ".concat(Object(u.c)(e.palette.secondary.main,.6)):"1px solid ".concat(e.palette.secondary.main)},borderRadius:4,alignItems:"center",transition:"box-shadow ease-in .2s",padding:"4px 0 4px 8px"},Object(be.a)(n,e.breakpoints.up("sm"),{padding:"8px 4px 8px 16px"}),Object(be.a)(n,"boxShadow",(function(t){return t.focus?"0 0 2px 0.2rem ".concat(Object(u.c)(e.palette.secondary.main,.4)):e.shadows[2]})),n),icon:(r={width:32,height:32,marginRight:e.spacing(1.5)},Object(be.a)(r,e.breakpoints.up("sm"),{marginRight:e.spacing(2)}),Object(be.a)(r,"color",(function(t){return t.disabled?e.palette.text.disabled:e.palette.text.primary})),r)}}));function me(e){var t=e.disabled,n=e.startIcon,r=Object(ne.a)(e,["disabled","startIcon"]),i=a.a.useState(!1),o=Object(E.a)(i,2),c=o[0],s=o[1],l=xe({disabled:t,focus:c});return Object(p.jsxs)("div",{className:l.container,children:[n&&a.a.cloneElement(n,{className:l.icon,"data-testid":"biginput-icon"}),Object(p.jsx)("input",Object(I.a)({className:l.input,onFocus:function(){return s(!0)},onBlur:function(){return s(!1)},disabled:t},r))]})}var ve=n(197),pe=n(95),Oe=n.n(pe),ge=n(68),ye=n.n(ge),we=n(69),ke=n.n(we),Se=Object(x.a)((function(e){return{avatar:{width:48,height:48,backgroundColor:"transparent",border:"1px solid ".concat(e.palette.secondary.main),overflow:"visible","&> img":{height:48,width:"auto",margin:"auto",position:"unset"}},badge:{width:20,height:20,borderRadius:"50%",backgroundColor:"#880061",alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",bottom:0,left:0,zIndex:1},icon:{color:"#ffffff"},badgeIcon:{width:16,height:16},username:{fontFamily:"Work Sans",fontSize:20,fontWeight:"bold",overflow:"hidden",maxWidth:128,whiteSpace:"nowrap"},kickButton:{cursor:"pointer"}}}));function Ce(e){var t=e.id,n=e.name,r=e.avatar,a=e.isOwner,i=e.isKickable,o=e.isCurrentPlayer,c=e.onKick,s=Se();return Object(p.jsxs)(v.a,{border:1,width:256,height:64,borderRadius:4,padding:1,display:"flex",alignItems:"center",borderColor:"secondary.main",justifyContent:"space-between",bgcolor:"#0F131A",children:[Object(p.jsxs)(v.a,{position:"relative",children:[o&&Object(p.jsx)("div",{className:s.badge,children:Object(p.jsx)(Oe.a,{className:Object(ae.a)(s.icon,s.badgeIcon),"data-testid":"user-icon"})}),Object(p.jsx)(ve.a,{src:r,className:s.avatar})]}),Object(p.jsx)(ue.a,{color:"textPrimary",className:s.username,children:n}),Object(p.jsx)(v.a,{display:"flex",alignItems:"center",children:a?Object(p.jsx)(ye.a,{className:s.icon,"data-testid":"star-icon"}):i&&Object(p.jsx)(v.a,{component:"button",padding:0,border:0,className:s.kickButton,height:24,onClick:function(){return null===c||void 0===c?void 0:c(t,n)},bgcolor:"transparent",children:Object(p.jsx)(ke.a,{className:s.icon})})})]})}var Ie=[n.p+"static/media/pp-1.acb77223.png",n.p+"static/media/pp-2.c82c2211.png",n.p+"static/media/pp-3.9c11a583.png",n.p+"static/media/pp-4.5ae6cc4a.png",n.p+"static/media/pp-5.d5627fd6.png",n.p+"static/media/pp-6.228ed3be.png",n.p+"static/media/pp-7.762b4b0e.png",n.p+"static/media/pp-8.7bfd9d10.png"],Ee=n(177);function De(e){var t=e.players,n=e.playerId,r=e.isKickable,a=e.onKick;return Object(p.jsx)(v.a,{height:384,width:272,overflow:"hidden scroll",children:Object(p.jsx)(Ee.a,{container:!0,spacing:2,alignItems:"flex-end",children:t&&t.map((function(e){var t=n===e.id;return Object(p.jsx)(Ee.a,{item:!0,xs:12,children:Object(p.jsx)(Ce,{id:e.id,name:e.username,avatar:Ie[Number(e.avatarUrl)],isOwner:e.isOwner,isKickable:r,isCurrentPlayer:t,onKick:a})},e.id)}))})})}var Ne=n(21),ze=n(178),Pe=n(179);function Ae(e,t){var n=100-100*Math.round((e.getTime()-(new Date).getTime())/1e3)/t;return n>100?100:n}function Fe(e){var t=function(e){var t=e.finishAt,n=e.timeDuration,r=e.onFinish,i=a.a.useState(0),o=Object(E.a)(i,2),c=o[0],s=o[1],l=a.a.useState(),u=Object(E.a)(l,2),d=u[0],b=u[1];return a.a.useEffect((function(){s(Ae(t,n));var e=setInterval((function(){return s(Ae(t,n))}),1e3);return b(e),function(){return clearInterval(e)}}),[t,n]),a.a.useEffect((function(){c>=100&&(null===r||void 0===r||r(),d&&clearInterval(d))}),[c,r,d]),{progress:c}}(e).progress,n=Object(Ne.a)(),r=Object(ze.a)(n.breakpoints.up("sm"));return Object(p.jsx)(Pe.a,{size:r?64:32,thickness:4,variant:"determinate",value:t})}var Re=Object(x.a)((function(e){return{sentence:{textAlign:"center"},container:{backgroundColor:Object(u.c)(e.palette.secondary.main,.8),boxShadow:e.shadows[2]}}}));function Le(e){var t=e.directive,n=e.sentence,r=Re();return Object(p.jsxs)(v.a,{width:"100%",display:"flex",padding:1,borderRadius:4,alignItems:"center",flexDirection:"column",className:r.container,children:[Object(p.jsx)(ue.a,{variant:"subtitle1",color:"textSecondary",children:t}),n&&Object(p.jsx)(ue.a,{variant:"h4",color:"textPrimary",className:r.sentence,children:n})]})}var We=n(96),Te=n.n(We),Be=Object(x.a)((function(e){return{button:{backgroundColor:e.palette.secondary.main,outline:"none",borderRadius:"50%",position:"absolute",left:0,bottom:0,cursor:"pointer",border:"none",width:48,display:"flex",justifyContent:"center",alignItems:"center",height:48,boxShadow:"0px 4px 1px ".concat(Object(u.c)(e.palette.background.default,.8)),"&:active":{bottom:-4,boxShadow:"none"}},imgBox:{boxShadow:"0px 4px 1px ".concat(Object(u.c)(e.palette.background.default,.8))},img:{height:256,width:"auto",margin:"auto"}}}));function Me(e){var t=e.image,n=e.onShuffle,r=Be();return Object(p.jsxs)(v.a,{alignItems:"center",width:256,position:"relative",height:256,children:[Object(p.jsx)("button",{className:r.button,onClick:n,children:Object(p.jsx)(Te.a,{style:{color:"#FFFFFF"}})}),Object(p.jsx)(v.a,{border:2,display:"flex",borderColor:"secondary.main",borderRadius:"50%",width:256,height:256,bgcolor:"background.default",className:r.imgBox,children:Object(p.jsx)("img",{src:t,className:r.img,alt:"Avatar"})})]})}function Ke(e){var t,n=e.colors,r=e.currentColor,i=e.onColorChange,o=e.flexDirection,c=void 0===o?"column":o,s=a.a.useMemo((function(){return function(e){return e.reduce((function(e,t){var n=e.result[e.index];switch(null===n||void 0===n?void 0:n.length){case void 0:e.result[e.index]=[t];break;case 1:e.result[e.index].push(t);break;default:e.index++,e.result[e.index]=[t]}return e}),{index:0,result:[]}).result}(n)}),[n]);return Object(p.jsx)(v.a,{display:"flex",flexDirection:c,padding:"8px",borderRadius:4,gridGap:8,border:1,borderColor:"#000000",justifyContent:"center",bgcolor:(t=.2,"rgba(136, 0, 97, ".concat(t,")")),children:s.map((function(e,t){return Object(p.jsx)(v.a,{display:"flex",flexDirection:"column"===c?"row":"column",justifyContent:"space-between",top:248,children:e.map((function(e,t){var n=e===r;return Object(p.jsx)(v.a,{component:"button",onClick:function(){return null===i||void 0===i?void 0:i(e)},border:n?2:1,bgcolor:e,borderColor:n?"#FFFFFF":"#000000",width:32,height:32,borderRadius:4,className:"cursor-pointer"},t)}))},t)}))})}var Ue=[4,8,16,20,24,30];function Ge(e){var t=e.currentSize,n=e.onSizeChange,r=e.flexDirection,a=void 0===r?"row":r,i=Object(Ne.a)();return Object(p.jsx)(v.a,{padding:1,gridGap:8,bgcolor:Object(u.c)(i.palette.secondary.main,.2),display:"flex",borderRadius:4,border:1,flexDirection:a,borderColor:"common.black",alignItems:"center",boxShadow:2,children:Ue.map((function(e,r){var a=t===e;return Object(p.jsx)(Je,{onSizeChange:n,size:e,isCurrentSize:a},e)}))})}var He=Object(x.a)((function(e){return{button:{backgroundColor:"transparent",outline:"none",border:"2px solid #000000",borderRadius:"50%",width:40,height:40,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",cursor:"pointer",boxShadow:function(t){return t.isCurrentSize?"0 0 .2px 2px ".concat(Object(u.c)(e.palette.secondary.main,.8)):"none"}}}}));function Je(e){var t=e.onSizeChange,n=e.size,r=e.isCurrentSize,a=He({isCurrentSize:r});return Object(p.jsx)("button",{onClick:function(){return t(n)},className:a.button,children:Object(p.jsx)(v.a,{borderRadius:"50%",border:"1px solid #000000",bgcolor:"#000000",width:n,height:n})})}var qe=n(97),Ye=n.n(qe);function _e(e){var t=e.identifier,n=Object(D.b)().enqueueSnackbar;return Object(p.jsx)(re.a,{startIcon:Object(p.jsx)(Ye.a,{style:{fontSize:32}}),onClick:function(){t&&(!function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}("".concat(window.location.origin,"/join/").concat(t)),n("URL successfully copied \ud83d\ude0e",{variant:"success"}))},size:"large",variant:"contained",children:t||"loading..."})}var Xe=n(198),Ve=Object(x.a)((function(e){var t;return{avatar:(t={height:64,width:64,overflow:"visible",backgroundColor:function(t){return t.isSelected?Object(u.c)(e.palette.secondary.main,.6):Object(u.c)(e.palette.secondary.main,.2)}},Object(be.a)(t,e.breakpoints.up("sm"),{height:40,width:40}),Object(be.a)(t,"&> img",Object(be.a)({height:64,width:"auto",margin:"auto",position:"unset"},e.breakpoints.up("sm"),{height:40})),t)}}));function Qe(e){var t=e.avatarUrl,n=e.isSelected,r=Ve({isSelected:n});return Object(p.jsx)(ve.a,{className:r.avatar,src:Ie[Number(t)]})}var Ze=Object(x.a)((function(e){return{badge:{width:20,height:20,borderRadius:"50%",backgroundColor:e.palette.secondary.main,alignItems:"center",justifyContent:"center",display:"flex",border:0,position:"absolute",bottom:0,left:0,zIndex:2},container:{overflowX:"scroll"},username:{overflow:"hidden",textAlign:"center",maxWidth:64,whiteSpace:"nowrap"},button:{backgroundColor:"transparent",outline:"none",padding:0},icon:{fontSize:16,color:e.palette.common.white}}}));function $e(e){var t=e.players,n=e.playerId,r=e.onClick,a=e.isKickable,i=Object(Ne.a)(),o=Object(ze.a)(i.breakpoints.up("sm")),c=Ze();return Object(p.jsx)(v.a,{display:"flex",gridGap:8,maxWidth:o?200:285,className:c.container,alignItems:"center",flexDirection:"row",children:t.map((function(e,t){var i=n===e.id;return Object(p.jsx)(Xe.a,{title:e.username,placement:"top",children:Object(p.jsxs)(v.a,{flexDirection:"column",alignItems:"center",zIndex:4,children:[Object(p.jsxs)(v.a,{position:{xs:"relative",sm:"initial"},children:[!o&&(e.isOwner?Object(p.jsx)("div",{className:c.badge,children:Object(p.jsx)(ye.a,{"data-testid":"star-icon",className:c.icon})}):a&&Object(p.jsx)("button",{onClick:function(){return!e.isOwner&&a&&(null===r||void 0===r?void 0:r(e.id,e.username))},className:c.badge,children:Object(p.jsx)(ke.a,{"data-testid":"kick-icon",className:c.icon})})),Object(p.jsx)(Qe,{isSelected:i,avatarUrl:e.avatarUrl})]}),!o&&Object(p.jsx)(ue.a,{className:c.username,component:"p",variant:"subtitle1",children:e.username})]})},e.id)}))})}var et=n(99),tt=n.n(et),nt=n(194),rt=n(183),at=n(184),it=n(191),ot=n(185);function ct(e){var t=e.identifier,n=e.loading,r=e.onClick,i=e.className,o=a.a.useState(!1),c=Object(E.a)(o,2),s=c[0],l=c[1],u=a.a.useState(""),d=Object(E.a)(u,2),b=d[0],j=d[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(le,{startIcon:Object(p.jsx)(tt.a,{style:{fontSize:32}}),loading:n,className:i,size:"large",onClick:function(){return t?r(t):l(!0)},children:"Join"}),Object(p.jsxs)(nt.a,{fullWidth:!0,maxWidth:"xs",open:s,onClose:function(){return l(!1)},children:[Object(p.jsx)(rt.a,{children:"Join a game \ud83d\udc68\u200d\ud83c\udfa8"}),Object(p.jsx)(at.a,{children:Object(p.jsx)(it.a,{autoFocus:!0,margin:"dense",id:"name",label:"Identifier",type:"email",value:b,onChange:function(e){return j(e.target.value)},fullWidth:!0})}),Object(p.jsxs)(ot.a,{children:[Object(p.jsx)(re.a,{onClick:function(){return l(!1)},color:"primary",children:"Cancel \ud83d\udc4b"}),Object(p.jsx)(re.a,{onClick:function(){r(b),l(!1)},color:"primary",children:"Join \ud83e\udd73"})]})]})]})}var st=a.a.createContext({});function lt(){var e=a.a.useContext(st);if(!e)throw new Error("useCanvasContext should be used within a DrawingCanvasContext");return e}var ut=Object(x.a)((function(e){return{canvas:{backgroundColor:function(e){return e.disabled?"#BBBBBB":"#DDDDDD"},width:function(e){return e.size.width},height:function(e){return e.size.height},cursor:function(e){return e.disabled?"not-allowed":"crosshair"}},canvasBox:{width:function(e){return e.size.width+2*e.size.border},height:function(e){return e.size.height+2*e.size.border},border:function(t){return"".concat(t.size.border,"px solid ").concat(e.palette.secondary.main)},boxShadow:e.shadows[1]}}}));function dt(e){var t=e.disabled,n=lt(),r=n.canvasRef,a=n.size,i=ut({size:a,disabled:t});return Object(p.jsx)("div",{className:i.canvasBox,children:Object(p.jsx)("canvas",{ref:r,className:i.canvas})})}var bt=n(58),jt=n(101),ht=n.n(jt),ft=n(187),xt=n(199),mt=n(188),vt=n(100),pt=n.n(vt);function Ot(e){var t=e.player,n=e.onStart,r=Object(Ne.a)();return Object(p.jsxs)(v.a,{m:3,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(p.jsxs)(v.a,{display:"flex",alignItems:"center",children:[!(null===t||void 0===t?void 0:t.isOwner)&&Object(p.jsx)(se,{style:{color:r.palette.text.secondary,marginRight:4}}),Object(p.jsx)(ue.a,{variant:"body2",color:"textSecondary",children:(null===t||void 0===t?void 0:t.isOwner)?"you're the owner, click here to start the game":"Waiting for the host to start the game."})]}),(null===t||void 0===t?void 0:t.isOwner)&&Object(p.jsx)(v.a,{mt:2,children:Object(p.jsx)(le,{onClick:n,size:"large",startIcon:Object(p.jsx)(pt.a,{style:{fontSize:48}}),children:"Start"})})]})}var gt=n(5),yt=n(196),wt=n(186),kt=Object(gt.a)((function(e){return Object(yt.a)({root:{height:e.spacing(3)},colorPrimary:{backgroundColor:e.palette.background.default},bar:{backgroundColor:e.palette.secondary.main}})}))(wt.a);function St(e){var t=e.stepActual,n=void 0===t?0:t,r=e.stepMax,a=void 0===r?0:r,i=function(e,t){var n=100*e/t;return n>100?100:n}(n,a);return Object(p.jsxs)(v.a,{overflow:"hidden",width:"100%",position:"relative",borderTop:1,borderColor:"secondary.main",children:[Object(p.jsx)(v.a,{alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",zIndex:1,top:0,bottom:0,left:5,children:Object(p.jsxs)(ue.a,{variant:"subtitle1",children:[n,"/",a]})}),Object(p.jsx)(kt,{variant:"determinate",value:i})]})}var Ct=n(200),It=Object(x.a)((function(e){return{avatar:{width:32,height:32,backgroundColor:e.palette.secondary.dark,border:"1px solid ".concat(e.palette.secondary.dark),overflow:"visible","&> img":{height:32,width:"auto",margin:"auto",position:"unset"}}}}));function Et(e){var t=e.username,n=e.sentence,r=e.avatarUrl,a=It();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(ue.a,{variant:"subtitle1",children:t}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",alignItems:"center",p:1,border:1,borderColor:"secondary.main",borderRadius:4,maxWidth:336,children:[Object(p.jsx)(ve.a,{src:r,className:a.avatar}),Object(p.jsx)(v.a,{ml:1,mr:1,children:Object(p.jsx)(ue.a,{variant:"body1",children:n})})]})]})}var Dt=n.p+"static/media/gym-guy.71a7fbf1.svg";function Nt(e){var t=e.className,n=e.src;return Object(p.jsx)(v.a,{bgcolor:"common.white",border:4,borderColor:"secondary.main",boxShadow:1,display:"flex",children:Object(p.jsx)("img",{src:n,alt:"",className:t})})}var zt,Pt=Object(x.a)((function(e){return{width:Object(be.a)({width:256,height:"auto",minHeight:160},e.breakpoints.down("xs"),{width:"100%"}),username:{textAlign:"right",maxWidth:256,whiteSpace:"nowrap",overflow:"hidden"}}}));function At(e){var t=e.username,n=e.src,r=Pt();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(ue.a,{variant:"subtitle1",className:r.username,children:t}),Object(p.jsx)(Nt,{src:n,className:r.width})]})}!function(e){e[e.LINE=0]="LINE"}(zt||(zt={}));var Ft=function(e){var t;null===(t=e.getContext("2d"))||void 0===t||t.clearRect(0,0,e.width,e.height)},Rt=function(e,t,n,r,a){switch(e.strokeStyle=a.color,e.lineJoin="round",e.lineCap="round",e.lineWidth=a.size,e.beginPath(),a.type){case zt.LINE:e.moveTo(t.x,t.y),e.quadraticCurveTo(n.x,n.y,r.x,r.y),e.stroke()}e.closePath()};function Lt(e){var t=e.slice(-2),n=Object(E.a)(t,2),r=n[0],a=n[1];return{controlPoint:r,endPoint:{x:(r.x+a.x)/2,y:(r.y+a.y)/2}}}var Wt=function(e,t,n){if(n)return{x:(e.pageX-n.offsetLeft)*t,y:(e.pageY-n.offsetTop)*t}};var Tt=function(e){var t=e.color,n=e.size,r=e.canvasRef,i=e.scale,o=a.a.useRef({x:0,y:0}),c=a.a.useRef([]),s=a.a.useRef([]),l=function(){return c.current[c.current.length-1]},u=a.a.useCallback((function(e){e&&(l().points.push(e),o.current=e)}),[]),d=a.a.useCallback((function(e){if(e&&o&&r.current){var t=l();t.points.push(e);var n=r.current.getContext("2d");if(n&&!(t.points.length<=2)){var a=Lt(t.points),i=a.controlPoint,c=a.endPoint;Rt(n,o.current,i,c,t),o.current=c}}}),[r]),b=a.a.useCallback((function(e,r){o.current=e,s.current=[],r?c.current.push({type:zt.LINE,color:t,size:n*i,points:[e]}):d(e)}),[t,d,i,n]),j=a.a.useCallback((function(){r.current&&function(e,t){var n=e.getContext("2d");n&&(Ft(e),t&&t.forEach((function(e){var t=e.points[0],r=[];e.points.forEach((function(a){if(r.push(a),r.length>3){var i=Lt(r),o=i.controlPoint,c=i.endPoint;Rt(n,t,o,c,e),t=c}}))})))}(r.current,c.current)}),[r]),h=a.a.useCallback((function(){var e=c.current.pop();e&&s.current.push(e),j()}),[j]),f=a.a.useCallback((function(){var e=s.current.pop();e&&c.current.push(e),j()}),[j]),x=a.a.useCallback((function(){r.current&&window.confirm("This action is definitive. Are you sure you want to clear all ?")&&(c.current=[],s.current=[],Ft(r.current))}),[r]);return a.a.useEffect((function(){if(r.current){var e=function(e){90===e.keyCode&&(e.ctrlKey||e.metaKey)&&h()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[r,h]),{paint:d,create:b,addLastLine:u,undo:h,lines:c,mouseCoordinate:o,clear:x,redo:f,refresh:j}},Bt={width:512,height:320,border:4,scale:2,lineScale:2};function Mt(e){var t=e.color,n=void 0===t?"#900050":t,r=e.lineSize,i=void 0===r?4:r,o=e.disabled,c=void 0!==o&&o,s=e.canvasSize,l=void 0===s?Bt:s,u=e.children,d=a.a.useRef(null),b=a.a.useState(!1),j=Object(E.a)(b,2),h=j[0],f=j[1],x=Tt({color:n,size:i,canvasRef:d,scale:l.lineScale}),m=x.paint,v=x.create,O=x.addLastLine,g=x.clear,y=x.undo,w=x.refresh,k=x.redo,S=a.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Wt(e,l.scale,d.current);n&&(f(!0),v(n,t))}),[d,v,l.scale]),C=a.a.useCallback((function(e){f(!1);var t=Wt(e,l.scale);O(t)}),[O,l.scale]),I=a.a.useCallback((function(e){h&&S(e,!1)}),[h,S]),D=a.a.useCallback((function(e){if(h&&d.current){var t=Wt(e,l.scale,d.current);m(t)}}),[d,h,m,l.scale]);!function(e){var t=e.canvasRef,n=e.isPainting,r=e.onMouseMove,i=e.onMouseEnter,o=e.onMouseDown,c=e.onMouseUp,s=e.disabled;a.a.useEffect((function(){if(n&&!s)return window.document.addEventListener("mousemove",r),window.document.addEventListener("touchmove",e),function(){window.document.removeEventListener("mousemove",r),window.document.removeEventListener("touchmove",e)};function e(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});r(t)}}),[s,n,r]),a.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mouseenter",i),function(){e.removeEventListener("mouseenter",i)}}}),[t,s,i]),a.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mousedown",o),e.addEventListener("touchstart",n),window.document.addEventListener("mouseup",c),function(){e.removeEventListener("mousedown",o),e.removeEventListener("touchstart",n),window.document.removeEventListener("mouseup",c)}}function n(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});o(t)}}),[t,s,o,c])}({canvasRef:d,onMouseDown:S,onMouseUp:C,onMouseEnter:I,onMouseMove:D,isPainting:h,disabled:c}),a.a.useEffect((function(){if(d.current){var e=d.current;e.width=l.width*l.scale,e.height=l.height*l.scale,w()}}),[d,w,l]);var N=a.a.useMemo((function(){return{clear:g,undo:y,canvasRef:d,redo:k,size:l}}),[g,l,k,y]);return Object(p.jsx)(st.Provider,{value:N,children:u})}var Kt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e&&e.apply(void 0,n)}))}};function Ut(e){return e[Math.floor(Math.random()*e.length)]}function Gt(e){var t=e.children,n=lt().clear;return a.a.cloneElement(t,{onClick:Kt(n,t.props.onClick)})}function Ht(e){var t=e.children,n=lt().undo;return a.a.cloneElement(t,{onClick:Kt(n,t.props.onClick)})}function Jt(e){var t=e.children,n=lt().redo;return a.a.cloneElement(t,{onClick:Kt(n,t.props.onClick)})}function qt(e){var t=e.children,n=e.onSave,r=lt().canvasRef;return a.a.cloneElement(t,{onClick:function(){var e,a,i;n(null===(e=r.current)||void 0===e?void 0:e.toDataURL()),null===(a=(i=t.props).onClick)||void 0===a||a.call(i)}})}var Yt=n(71),_t=n.n(Yt),Xt=n(72),Vt=n.n(Xt),Qt=n(73),Zt=n.n(Qt),$t=["#000000","#7f8c8d","#bdc3c7","#ecf0f1","#00a8ff","#1e3799","#2ecc71","#009432","#e74c3c","#c0392b","#FA00FF","#FDA7DF","#FEAFA8","#CB5A57","#FFC312","#F79F1F"],en={md:{width:512,height:320,border:4,scale:2,lineScale:2},xs:{width:256,height:160,border:2,scale:4,lineScale:2}};function tn(){var e=Object(r.useState)(0),t=Object(E.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)($t[5]),c=Object(E.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)(!1),d=Object(E.a)(u,2),b=d[0],j=d[1],h=Object(r.useState)(!1),f=Object(E.a)(h,2),x=f[0],m=f[1],O=Object(r.useState)(8),g=Object(E.a)(O,2),y=g[0],w=g[1],k=a.a.useState(1),S=Object(E.a)(k,2),C=S[0],I=S[1],D=function(){i((function(e){return e>Ie.length-2?0:e+1}))};return Object(p.jsx)(v.a,{children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",gridGap:32,children:[Object(p.jsx)(fe,{}),Object(p.jsx)(v.a,{children:Object(p.jsx)(Et,{username:"Luca thb",avatarUrl:Ie[n],sentence:"Hey banane poil vert"})}),Object(p.jsx)(ft.a,{control:Object(p.jsx)(xt.a,{checked:b,onChange:function(e){return j(e.target.checked)}}),label:"Is mobile canvas"}),Object(p.jsx)(ft.a,{control:Object(p.jsx)(xt.a,{checked:x,onChange:function(e){return m(e.target.checked)}}),label:"Is canvas disabled"}),Object(p.jsx)(v.a,{display:"flex",flexDirection:"column",children:Object(p.jsxs)(Mt,{color:s,disabled:x,lineSize:y,canvasSize:b?en.xs:en.md,children:[Object(p.jsxs)(v.a,{display:"flex",children:[Object(p.jsx)(Ke,{colors:$t,currentColor:s,onColorChange:function(e){return l(e)}}),Object(p.jsx)(Ge,{currentSize:y,onSizeChange:function(e){return w(e)},flexDirection:"column"}),Object(p.jsx)(dt,{disabled:x}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(Gt,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(_t.a,{})})}),Object(p.jsx)(Ht,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(Vt.a,{})})}),Object(p.jsx)(Jt,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(Zt.a,{})})})]})]}),Object(p.jsx)(qt,{onSave:function(e){if(e){var t=window.open();null===t||void 0===t||t.document.write('<iframe width="1200px" height="700px" src='+e+"></iframe>")}},children:Object(p.jsx)(le,{size:"large",children:"Submit"})})]})}),Object(p.jsx)(Fe,{finishAt:new Date("2021-03-30T08:31:00"),timeDuration:120}),Object(p.jsx)(At,{username:"Jean-Philippes-Pascal",src:Dt}),Object(p.jsx)(ct,{loading:!1,identifier:void 0,onClick:function(){}}),Object(p.jsx)(Me,{image:Ie[n],onShuffle:D}),Object(p.jsx)(me,{onChange:function(){},value:"didier",startIcon:Object(p.jsx)(ht.a,{})}),Object(p.jsx)(_e,{identifier:"LH4AH3"}),Object(p.jsx)(Ce,{id:1,name:"John Doe",avatar:Ie[n],isOwner:!0,isKickable:!1,onKick:function(e){}}),Object(p.jsx)(le,{size:"large",onClick:D,children:"Test"}),Object(p.jsx)(Ot,{player:bt[1],onStart:function(){}}),Object(p.jsx)(De,{players:bt,playerId:3,isKickable:!0,onKick:function(e){}}),Object(p.jsx)(Le,{sentence:"Salzt",directive:"bonsoir"}),Object(p.jsx)(se,{}),Object(p.jsx)(de,{count:8,max:12}),Object(p.jsx)(De,{players:bt,isKickable:!0,onKick:function(e){}}),Object(p.jsx)($e,{players:bt,playerId:2}),Object(p.jsx)(Ct.a,{defaultValue:C,onChange:function(e,t){I(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:7}),Object(p.jsx)(St,{stepActual:C,stepMax:7})]})})}function nn(){return Object(p.jsxs)(v.a,{p:2,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(p.jsx)("h1",{children:"You're in DevNav"}),Object(p.jsx)(rn,{to:"/",children:"Dev nav"}),Object(p.jsx)(rn,{to:"/r/start",children:"Go Room Start"}),Object(p.jsx)(rn,{to:"/r/write",children:"Go Room Write"}),Object(p.jsx)(rn,{to:"/r/draw",children:"Go Room Draw"}),Object(p.jsx)(rn,{to:"/r/lobby",children:"Go Room Lobby"}),Object(p.jsx)(rn,{to:"/r",children:"Go Room"}),Object(p.jsx)(rn,{to:"/home",children:"Go home"}),Object(p.jsx)(rn,{to:"/t",children:"Go to TESTS pages"})]})}function rn(e){var t=e.to,n=e.children;return Object(p.jsx)(v.a,{p:1,bgcolor:"background.default",m:1,borderRadius:2,border:1,borderColor:"secondary.main",children:Object(p.jsx)(S.b,{to:t,style:{color:"white"},children:n})})}var an=["God","Mushu the Dragon","Bob Razowski","Macco","Woody Woodpecker","Mr Potato","Nemo","Shrek","Staline","Krokette","Little Otter","Bob the bob","SavageWolf","Padawan","BigBear","BigFather","Terminator","Stitch"];var on,cn,sn=n(103),ln=n.n(sn),un=n(102),dn=n.n(un),bn=Object(x.a)((function(e){return{container:{"&>*":{marginBottom:e.spacing(4)}},buttonContainer:{"&>*":{marginBottom:e.spacing(2)}}}}));function jn(e){var t=e.identifier,n=a.a.useState(""),r=Object(E.a)(n,2),i=r[0],o=r[1],c=a.a.useState(0),s=Object(E.a)(c,2),l=s[0],u=s[1],d=a.a.useState(!1),b=Object(E.a)(d,2),j=b[0],h=b[1],f=Object(D.b)().enqueueSnackbar,x=Object(C.f)(),m=a.a.useRef(Ut(an)).current,O=bn();function g(e,t){f(t,{variant:"success"}),T(e),null===x||void 0===x||x.push("/r/lobby")}return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",className:O.container,children:[Object(p.jsx)(Me,{image:Ie[l],onShuffle:function(){u((function(e){return e>=Ie.length-1?0:e+1}))}}),Object(p.jsx)(me,{startIcon:Object(p.jsx)(dn.a,{}),value:i,onChange:function(e){return o(e.target.value)},placeholder:m}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",className:O.buttonContainer,children:[Object(p.jsx)(ct,{identifier:t,onClick:function(e){h(!0),F("room/join/".concat(e),{data:{username:i||m,avatarUrl:String(l)},method:"PATCH"}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&g(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"You've joined the room!")}),(function(){return f("Sorry, an error occured \ud83d\ude15 [Room-PATCH]",{variant:"error"})})).finally((function(){return h(!1)}))},loading:j}),!t&&Object(p.jsx)(le,{size:"large",startIcon:Object(p.jsx)(ln.a,{style:{fontSize:32}}),onClick:function(){h(!0),F("room",{data:{username:i||m,avatarUrl:String(l)}}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&g(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"Room successfully created \ud83d\ude4c")}),(function(){return f("Sorry, an error occured \ud83d\ude15 [Room-POST]",{variant:"error"})})).finally((function(){return h(!1)}))},loading:j,children:"Start"})]})]})}function hn(e){var t=e.match.params.identifier;return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",children:[Object(p.jsx)(fe,{width:32}),Object(p.jsx)(v.a,{mt:{xs:1,sm:2},children:Object(p.jsx)(jn,{identifier:t})})]})}function fn(){var e=a.a.useState([]),t=Object(E.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){F("get_own_album",{token:W()}).then(r).catch(alert)}),[]),n.length>=1?Object(p.jsx)(v.a,{display:"flex",flexDirection:"column",maxWidth:300,children:n.map((function(e){var t,n,r;return e.type===on.Sentence?Object(p.jsx)(Et,{username:null===(t=e.creator)||void 0===t?void 0:t.username,avatarUrl:Ie[Number(null===(n=e.creator)||void 0===n?void 0:n.avatarUrl)],sentence:e.text},e.id):Object(p.jsx)(At,{username:null===(r=e.creator)||void 0===r?void 0:r.username,src:e.drawImage},e.id)}))}):Object(p.jsx)(v.a,{children:Object(p.jsx)(M,{})})}!function(e){e[e.Sentence=0]="Sentence",e[e.Drawing=1]="Drawing"}(on||(on={})),function(e){e[e.Start=0]="Start",e[e.Draw=1]="Draw",e[e.Write=2]="Write",e[e.Book=3]="Book"}(cn||(cn={}));var xn=function(){var e=a.a.useState(),t=Object(E.a)(e,2),n=t[0],r=t[1],i=Object(D.b)().enqueueSnackbar,o=Object(C.f)();return a.a.useEffect((function(){var e=!1;return F("session/current",{token:W()}).then((function(t){return!e&&r(t)}),(function(){i("Sorry, an error occured \ud83d\ude15 [Session-GET]",{variant:"error"}),o.push("/r/lobby")})),function(){e=!0}}),[i,o]),a.a.useEffect((function(){var e=o.location.pathname,t="";switch(null===n||void 0===n?void 0:n.stepType){case cn.Start:t="/r/start";break;case cn.Write:t="/r/write";break;case cn.Draw:t="/r/draw";break;case cn.Book:t="/r/book"}t&&e!==t&&o.push(t)}),[null===n||void 0===n?void 0:n.stepType,o]),{session:n,setSession:r}},mn=a.a.createContext({onSave:function(){}});function vn(e){var t=e.children,n=xn(),r=n.session,i=n.setSession,o=a.a.useState(),c=Object(E.a)(o,2),s=c[0],l=c[1],u=Y().websocket,d=Object(D.b)().enqueueSnackbar;a.a.useEffect((function(){function e(e){var t=K(e.data);if(t)switch(t.websocketEvent){case w.SessionUpdate:var n=t.session;i((function(e){return e&&Object(I.a)(Object(I.a)({},e),n)}))}}if(u)return u.addEventListener("message",e),function(){return u.removeEventListener("message",e)}}),[r,i,u]),a.a.useEffect((function(){if(null===r||void 0===r?void 0:r.actualStep){var e=!1;return F("element/current",{token:W()}).then((function(t){return!e&&l(t)}),(function(){return d("Sorry, an error occured \ud83d\ude15 [Element-GET]",{variant:"error"})})),function(){e=!0}}}),[d,null===r||void 0===r?void 0:r.actualStep]);var b={session:r,currentElement:s,onSave:function(e){var t=null===s||void 0===s?void 0:s.id,n=(null===s||void 0===s?void 0:s.type)===on.Drawing?{drawimage:e}:{text:e};F("element/".concat(t),{token:W(),method:"PATCH",data:n}).then((function(e){d("Element Saved \ud83d\ude0e",{variant:"success"}),l((function(t){return Object(I.a)(Object(I.a)({},t),e)}))})).catch((function(){return d("Sorry, an error occured while saving \ud83d\ude15",{variant:"error"})}))}};return Object(p.jsx)(mn.Provider,{value:b,children:r?t:Object(p.jsx)(M,{})})}function pn(){var e=a.a.useContext(mn);if(!e)throw new Error("useSessionContext should be used within a SessionContextProvider");return e}function On(e){var t=e.onFinish,n=pn().session;return Object(p.jsxs)(v.a,{display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"center",px:{xs:2,sm:4},justifyContent:"space-between",width:"100%",children:[Object(p.jsx)(v.a,{width:{xs:32,sm:64},children:Object(p.jsx)(de,{count:(null===n||void 0===n?void 0:n.playerFinished)||0,max:(null===n||void 0===n?void 0:n.totalPlayers)||0})}),Object(p.jsx)(fe,{}),Object(p.jsx)(v.a,{width:{xs:32,sm:64},children:Object(p.jsx)(Fe,{finishAt:new Date((null===n||void 0===n?void 0:n.stepFinishAt)||""),timeDuration:(null===n||void 0===n?void 0:n.timeDuration)||60,onFinish:t})})]})}function gn(e){var t=e.maxWidth,n=void 0===t?"sm":t,r=e.children;return Object(p.jsxs)(v.a,{height:"100vh",display:"flex",flexDirection:"column",children:[Object(p.jsx)(On,{}),Object(p.jsx)(m.a,{maxWidth:n,className:"full-height",children:r}),Object(p.jsx)(yn,{})]})}var yn=function(){var e=pn().session;return Object(p.jsx)(St,{stepActual:null===e||void 0===e?void 0:e.actualStep,stepMax:null===e||void 0===e?void 0:e.totalPlayers})};function wn(){return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",children:[Object(p.jsx)(Gt,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(_t.a,{})})}),Object(p.jsx)(Ht,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(Vt.a,{})})}),Object(p.jsx)(Jt,{children:Object(p.jsx)(mt.a,{children:Object(p.jsx)(Zt.a,{})})})]})}var kn=n(56),Sn=n.n(kn),Cn=n(74),In=n.n(Cn),En={md:{width:512,height:320,border:4,scale:2,lineScale:2},xs:{width:332.8,height:208,border:2,scale:4,lineScale:2}};function Dn(e){var t=e.size,n=e.color,r=Object(ze.a)(f.breakpoints.up("sm")),a=pn(),i=a.currentElement,o=a.onSave,c=Boolean(!(null===i||void 0===i?void 0:i.finishAt));return Object(p.jsx)(Mt,{color:n,disabled:!c,lineSize:t,canvasSize:r?En.md:En.xs,children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",gridGap:8,alignItems:"center",children:[Object(p.jsx)(dt,{disabled:!c}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",gridGap:8,alignItems:"center",justifyContent:"space-between",width:"100%",children:[Object(p.jsx)(wn,{}),Object(p.jsx)(qt,{onSave:function(e){return e&&o(e)},children:Object(p.jsx)(le,{startIcon:c?Object(p.jsx)(In.a,{style:{fontSize:32}}):Object(p.jsx)(Sn.a,{style:{fontSize:32}}),size:"large",children:c?"Save":"Edit"})})]})]})})}var Nn=["#000000","#7f8c8d","#bdc3c7","#ecf0f1","#00a8ff","#1e3799","#2ecc71","#009432","#e74c3c","#c0392b","#FA00FF","#FDA7DF","#FEAFA8","#CB5A57","#FFC312","#F79F1F"];function zn(){var e=Object(ze.a)(f.breakpoints.up("sm")),t=Object(r.useState)(Nn[5]),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(8),c=Object(E.a)(o,2),s=c[0],l=c[1];return Object(p.jsx)(gn,{maxWidth:"md",children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",gridGap:16,children:[Object(p.jsx)(v.a,{width:"100%",maxWidth:682,children:Object(p.jsx)(Pn,{})}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:{xs:"column",sm:"row"},gridGap:16,children:[Object(p.jsx)(v.a,{order:{xs:1,sm:0},children:Object(p.jsx)(Ke,{colors:Nn,currentColor:a,onColorChange:function(e){return i(e)},flexDirection:e?"column":"row"})}),Object(p.jsx)(Dn,{size:s,color:a}),Object(p.jsx)(v.a,{order:{xs:2,sm:0},children:Object(p.jsx)(Ge,{currentSize:s,onSizeChange:function(e){return l(e)},flexDirection:e?"column":"row"})})]})]})})}function Pn(){var e,t=pn().currentElement;return Object(p.jsx)(Le,{directive:"Time to Draw",sentence:null===t||void 0===t||null===(e=t.parent)||void 0===e?void 0:e.text})}function An(){var e=V().player,t=Object(D.b)().enqueueSnackbar;return Object(p.jsx)(Ot,{onStart:function(){F("session",{method:"POST",token:W()}).then((function(){return t("Game successfully started \ud83d\udcaa",{variant:"success"})}),(function(){return t("Sorry, an error occured \ud83d\ude15 [Session-POST]",{variant:"error"})}))},player:e})}function Fn(){var e=Object(Ne.a)(),t=Object(ze.a)(e.breakpoints.up("sm")),n=te().players,r=V().player,a=Object(D.b)().enqueueSnackbar;function i(e,t){window.confirm("Do you really want to kick ".concat(t," ?"))&&function(e){var t;F("player/players/".concat(e,"/kick"),{token:null===r||void 0===r||null===(t=r.token)||void 0===t?void 0:t.tokenKey,method:"PATCH"}).then((function(){return a("Player kicked \ud83d\ude0e",{variant:"success"})}),(function(){return a("Sorry, an error occured \ud83d\ude15 [kick-PATCH]",{variant:"error"})}))}(e)}return Object(p.jsx)(v.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:(null===n||void 0===n?void 0:n.length)>0?t?Object(p.jsx)(De,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onKick:function(e,t){return i(e,t)}}):Object(p.jsx)($e,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onClick:function(e,t){return i(e,t)}}):Object(p.jsx)(M,{})})}function Rn(){var e=te().players;return Object(p.jsx)(v.a,{pr:{xs:1,md:2},children:Object(p.jsx)(de,{count:(null===e||void 0===e?void 0:e.length)||0,max:12})})}function Ln(){var e=te(),t=e.room,n=e.wsState;return Object(p.jsxs)(v.a,{borderRadius:"0 4px 4px 0",minWidth:328,pl:2,height:"auto",display:"flex",flexDirection:"column",alignItems:{xs:"center",sm:"flex-start"},gridGap:24,children:[Object(p.jsx)(ue.a,{variant:"h5",children:n}),Object(p.jsx)(_e,{identifier:null===t||void 0===t?void 0:t.identifier})]})}var Wn=Object(x.a)((function(e){return{playersContainer:Object(be.a)({alignItems:"center",flexDirection:"column",gap:64},e.breakpoints.up("sm"),{alignItems:"flex-start",flexDirection:"row"}),container:{backgroundColor:Object(u.c)(e.palette.background.default,.8)}}}));function Tn(){var e=Wn();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",height:"100vh",alignItems:"center",width:"100%",children:[Object(p.jsx)(v.a,{mb:3,width:"100%",display:"flex",justifyContent:"center",children:Object(p.jsx)(fe,{width:32})}),Object(p.jsxs)(v.a,{display:"flex",justifyContent:"space-between",width:"100%",m:3,height:"100vh",alignItems:"center",flexDirection:"column",children:[Object(p.jsxs)(v.a,{display:"flex",className:e.container,flexDirection:"column",alignItems:"flex-end",width:"100%",children:[Object(p.jsx)(Rn,{}),Object(p.jsxs)(v.a,{display:"flex",justifyContent:"space-between",width:"100%",className:e.playersContainer,children:[Object(p.jsx)(Ln,{}),Object(p.jsx)(Fn,{})]})]}),Object(p.jsx)(An,{})]})]})}var Bn=["A samurai eating a kebab with samoura\xef sauce","A man walking on the ceiling","A gas station on fire","A T-Rex playing chess with monkeys","Someone watching himself on TV","Pinocchio but he's made of iron","A nice shark without teeth","A knight far too tall","A man chained by circus animals","A shipwreck on a chocolate island","An invasion of multicolored aliens","Spongebob becoming HandBob","New colony on Mars leaded by Musk","Sad jedi because the force is not with him","Godzilla VS King Kong","Woman pissed of by noisy neighbors","A world where sofas and humans are interchanged","Stitch meeting The Rock at Shrek's birthday"];function Mn(){var e=pn(),t=e.currentElement,n=e.onSave,r=a.a.useState(""),i=Object(E.a)(r,2),o=i[0],c=i[1],s=Boolean(!(null===t||void 0===t?void 0:t.finishAt)),l=a.a.useRef(Ut(Bn)).current;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ee.a,{item:!0,className:"full-width",children:Object(p.jsx)(me,{disabled:!s,placeholder:l,startIcon:Object(p.jsx)(Sn.a,{}),value:o,onChange:function(e){return c(e.target.value)}})}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(le,{disabled:0===o.length,onClick:function(){return n(o)},startIcon:s?Object(p.jsx)(In.a,{style:{fontSize:32}}):Object(p.jsx)(Sn.a,{style:{fontSize:32}}),size:"large",children:s?"Save":"Edit"})})]})}function Kn(){return Object(p.jsx)(gn,{maxWidth:"sm",children:Object(p.jsxs)(Ee.a,{container:!0,spacing:2,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"center",children:[Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)("img",{src:Dt,alt:"",width:384})}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(ue.a,{variant:"h4",children:"Start a story"})}),Object(p.jsx)(Mn,{})]})})}var Un=Object(x.a)((function(e){return{width:Object(be.a)({width:512,height:"auto",minHeight:320},e.breakpoints.down("xs"),{width:"100%",minHeight:0})}}));function Gn(){var e=Un();return Object(p.jsx)(gn,{children:Object(p.jsx)(v.a,{maxWidth:520,children:Object(p.jsxs)(Ee.a,{container:!0,spacing:2,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"center",children:[Object(p.jsx)(Ee.a,{item:!0,className:"full-width",children:Object(p.jsx)(Le,{directive:"Describe this scene"})}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(Hn,{className:e.width})}),Object(p.jsx)(Mn,{})]})})})}function Hn(e){var t=e.className,n=pn().currentElement;return Object(p.jsx)(Nt,{src:null===n||void 0===n?void 0:n.parent.drawImage,className:t})}var Jn=S.a;function qn(){return Object(p.jsx)(g,{children:Object(p.jsx)(Jn,{children:Object(p.jsxs)(C.c,{children:[Object(p.jsx)(C.a,{path:"/join/:identifier",component:hn}),Object(p.jsx)(C.a,{path:"/r",component:Yn}),Object(p.jsx)(C.a,{path:"/t",component:tn}),Object(p.jsx)(C.a,{path:"/home",component:hn}),Object(p.jsx)(C.a,{path:"/",component:nn})]})})})}function Yn(){return Object(p.jsx)(q,{children:Object(p.jsx)(X,{children:Object(p.jsx)(ee,{children:Object(p.jsxs)(C.c,{children:[Object(p.jsx)(C.a,{path:"/r/lobby",component:Tn}),Object(p.jsx)(C.a,{path:"/r",component:_n})]})})})})}function _n(){return Object(p.jsx)(vn,{children:Object(p.jsxs)(C.c,{children:[Object(p.jsx)(C.a,{path:"/r/start",component:Kn}),Object(p.jsx)(C.a,{path:"/r/draw",component:zn}),Object(p.jsx)(C.a,{path:"/r/write",component:Gn}),Object(p.jsx)(C.a,{path:"/r/book",component:fn}),Object(p.jsx)(C.a,{path:"/r/lobby",component:Tn})]})})}var Xn=function(){return Object(p.jsx)(D.a,{anchorOrigin:{vertical:"top",horizontal:"right"},preventDuplicate:!0,maxSnack:3,children:Object(p.jsxs)(c.a,{theme:f,children:[Object(p.jsx)(s.a,{}),Object(p.jsx)(qn,{})]})})};n(145);o.a.render(Object(p.jsx)(Xn,{}),document.getElementById("root"))},58:function(e){e.exports=JSON.parse('[{"id":1,"username":"jeanmich","avatarUrl":"0","isOwner":true,"isPlaying":true,"createdAt":"","roomId":1},{"id":2,"username":"Xx_plao","avatarUrl":"1","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":3,"username":"AAAAAAHHHH","avatarUrl":"2","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":4,"username":"Melvyn","avatarUrl":"3","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":5,"username":"Ana","avatarUrl":"4","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":6,"username":"Alex","avatarUrl":"5","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":7,"username":"Luca","avatarUrl":"6","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1}]')}},[[146,1,2]]]);
//# sourceMappingURL=main.542e1b28.chunk.js.map