(this["webpackJsonpthyrel-web"]=this["webpackJsonpthyrel-web"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(14),o=n.n(a),c=n(194),s=n(195),l=n(106),u=n(200),d=n(98);var b,j=(b=n.n(d)()({type:"dark",primary:{main:"#880061"},secondary:{main:"#9c27b0"},background:{default:"#0f131a",paper:"#1a1d24"},custom:{main:"#272B31"}}),Object(l.a)({palette:b,typography:{h1:{fontSize:64,fontFamily:"Modak"},h4:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:32},h5:{fontSize:20,fontWeight:"bold",fontFamily:"Work Sans, -apple-system, BlinkMacSystemFont, Segoe UI"},subtitle1:{fontFamily:"Work Sans",fontWeight:"bold",fontSize:16},subtitle2:{fontSize:12},body1:{fontSize:16},body2:{fontSize:14},fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Open Sans","Helvetica Neue","sans-serif"].join(",")},spacing:8,overrides:{MuiButton:{label:{textOverflow:"ellipsis",whiteSpace:"nowrap"},root:{textTransform:"none",borderRadius:8},contained:{height:68,minWidth:128,fontSize:24,color:b.common.white,padding:"18px 24px",borderRadius:34,fontFamily:"Work Sans",backgroundColor:b.custom.main,position:"relative","& .$MuiButton-label":{height:20},"@media (min-width: 600px)":{fontSize:28,height:72},"&:hover":{backgroundColor:b.action.hover}},containedSizeLarge:{fontSize:32,height:78,borderRadius:38,"@media (min-width: 600px)":{fontSize:36,height:82,borderRadius:40}},iconSizeLarge:{marginLeft:0}}}})),h=j=Object(u.a)(j),f=n(177),m=n(179),v=n(197),p=n(1),x=Object(f.a)((function(e){return{container:{padding:0,height:"100%",maxWidth:"calc(".concat(e.breakpoints.values.lg,"px - 128px)")}}}));function O(e){var t=e.children,n=x();return Object(p.jsx)(m.a,{className:n.container,maxWidth:"lg",children:Object(p.jsx)(v.a,{display:"block",margin:"auto",height:"100%",width:"100%",minWidth:320,children:t})})}var g,w,y,k=n(46),S=n(16),C=n(18),I=n(7),E=n(17);!function(e){e.IDLE="Loading...",e.CONNECTING="You will be connected",e.CONNECTED="You are connected",e.CLOSED="You're disconnected"}(g||(g={})),function(e){e[e.Invalid=-1]="Invalid",e[e.PlayerJoin=1]="PlayerJoin",e[e.PlayerLeft=2]="PlayerLeft",e[e.PlayerFinished=3]="PlayerFinished",e[e.NewOwnerPlayer=4]="NewOwnerPlayer",e[e.PlayerKicked=5]="PlayerKicked",e[e.SessionStart=11]="SessionStart",e[e.SessionUpdate=12]="SessionUpdate",e[e.NextStep=13]="NextStep",e[e.NewAlbumElement=14]="NewAlbumElement"}(w||(w={})),function(e){e[e.Authentication=1]="Authentication"}(y||(y={}));var N=n(58),L=n.n(N),P=n(83);var z="https://holydraw.games/api";function D(e){return R.apply(this,arguments)}function R(){return(R=Object(P.a)(L.a.mark((function e(t){var n,r,i,a,o,c,s,l=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.data,i=n.method,a=n.token,o=n.headers,c=n.customConfig,s=Object(C.a)({method:i||(r?"POST":"GET"),body:r?JSON.stringify(r):null,headers:Object(C.a)({Authorization:a?"Bearer ".concat(a):"","Content-Type":r?"application/json":"",Accept:"application/json"},o)},c),e.abrupt("return",window.fetch("".concat(z,"/").concat(t),s).then(function(){var e=Object(P.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=2;break}return e.abrupt("return",Promise.reject({message:"Please re-authenticate."}));case 2:return e.next=4,t.json();case 4:if(n=e.sent,!t.ok){e.next=9;break}return e.abrupt("return",n);case 9:return e.abrupt("return",Promise.reject(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A="__player_provider_token__";function W(){return window.localStorage.getItem(A)}function F(e){window.localStorage.setItem(A,e)}var T=n.p+"static/media/spinner.efdf2d72.svg";function B(){return Object(p.jsx)(v.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(p.jsx)("img",{src:T,alt:"loading"})})}function M(e,t){var n;try{n=JSON.parse(e)}catch(r){return t}return n||t}var K,U=function(e){var t=i.a.useRef(!1);return i.a.useLayoutEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),i.a.useCallback((function(){return t.current?e.apply(void 0,arguments):void 0}),[e])},G="".concat("wss","://").concat(null===(K=/\b(?:(?:https?|ftp):\/\/)?([^/\n]+)\/?/.exec(z))||void 0===K?void 0:K[1],"/api/stream");var H=i.a.createContext({wsState:g.IDLE});function J(e){var t=e.children,n=function(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=i.a.useState(g.IDLE),o=Object(I.a)(a,2),c=o[0],s=o[1],l=Object(E.b)().enqueueSnackbar,u=i.a.useCallback((function(e){s(g.CLOSED),e&&(l("Connexion lost \u26a1\ufe0f [ws]",{variant:"error"}),r(void 0))}),[l]),d=U(u),b=i.a.useCallback((function(){var e=new WebSocket(G),t=!1;s(g.CONNECTING),r(e),e.onopen=function(){t=!0,e.send(JSON.stringify({type:y.Authentication,playerToken:W()})),s(g.CONNECTED)},e.onclose=function(){d(t)}}),[d]);return i.a.useEffect((function(){if(n)return function(){return n.close()};b()}),[b,n]),{wsState:c,websocket:n}}(),r={wsState:n.wsState,websocket:n.websocket};return Object(p.jsx)(H.Provider,{value:r,children:t})}function Y(){var e=i.a.useContext(H);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var q=i.a.createContext({});function X(e){var t=e.children,n=i.a.useState(),r=Object(I.a)(n,2),a=r[0],o=r[1],c=Object(E.b)().enqueueSnackbar,s=Y().websocket,l=Object(S.f)();i.a.useEffect((function(){function e(e){var t,n=M(e.data);if(n)switch(n.websocketEvent){case w.NewOwnerPlayer:(null===n||void 0===n||null===(t=n.player)||void 0===t?void 0:t.id)===(null===a||void 0===a?void 0:a.id)&&o((function(e){return e?Object(C.a)(Object(C.a)({},e),{},{isOwner:!0}):e}))}}if(s&&a)return s.addEventListener("message",e),function(){return s.removeEventListener("message",e)}}),[a,s]),i.a.useEffect((function(){var e=!1;return D("player/me",{token:W()}).then((function(t){return!e&&o(t)}),(function(){c("You haven't joined a game yet.",{variant:"error"}),l.push("/home")})),function(){e=!0}}),[c,l]);var u={player:a};return Object(p.jsx)(q.Provider,{value:u,children:a?t:Object(p.jsx)(B,{})})}function _(){var e=i.a.useContext(q);if(!e)throw new Error("usePlayerContext should be used within a PlayerContextProvider");return e}var $=n(87);function V(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=i.a.useState([]),o=Object(I.a)(a,2),c=o[0],s=o[1],l=_().player,u=Object(S.f)(),d=Object(E.b)().enqueueSnackbar,b=i.a.useCallback((function(){D("room/".concat(null===l||void 0===l?void 0:l.roomId),{token:W()}).then(r)}),[null===l||void 0===l?void 0:l.roomId]),j=i.a.useCallback((function(){D("room/".concat(null===l||void 0===l?void 0:l.roomId,"/players"),{token:W()}).then(s)}),[null===l||void 0===l?void 0:l.roomId]),h=i.a.useCallback((function(e){e&&(e===(null===l||void 0===l?void 0:l.id)&&(u.push("/home"),window.localStorage.removeItem(A),d("Seems like you've been kicked from the room \ud83d\ude05",{variant:"info"})),s((function(t){var n=null===t||void 0===t?void 0:t.findIndex((function(t){return t.id===e}));if(-1!==n){var r=Object($.a)(t);return r.splice(n,1),r}return t})))}),[d,u,null===l||void 0===l?void 0:l.id]),f=i.a.useCallback((function(e){e&&s((function(t){return t.find((function(t){return t.id===e.id}))?t:[].concat(Object($.a)(t),[e])}))}),[]);return i.a.useEffect((function(){(null===l||void 0===l?void 0:l.roomId)?(b(),j()):u.push("/home")}),[u,null===l||void 0===l?void 0:l.roomId,j,b]),{updatePlayer:j,updateRoom:b,removePlayer:h,addPlayer:f,room:n,players:c}}var Z=i.a.createContext({wsState:g.IDLE,players:[]});function Q(e){var t=e.children,n=V(),r=n.room,a=n.players,o=n.updatePlayer,c=n.removePlayer,s=n.addPlayer,l=Object(S.f)(),u=Y(),d=u.wsState,b=u.websocket,j=Object(E.b)().enqueueSnackbar;i.a.useEffect((function(){function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.Invalid:j(t.error,{variant:"error"}),l.push("/home");break;case w.PlayerJoin:s(t.player);break;case w.PlayerLeft:c(t.playerId);break;case w.NewOwnerPlayer:o();break;case w.SessionStart:null===l||void 0===l||l.push("/r/start");break;case w.PlayerKicked:c(t.playerId)}}if(b)return b.addEventListener("message",e),function(){return b.removeEventListener("message",e)}}),[s,j,l,c,o,b]),i.a.useEffect((function(){var e=a.filter((function(e){return e.isPlaying}));"/r/lobby"===l.location.pathname&&e.length>0&&(null===l||void 0===l||l.push("/r/start"))}),[a,l]);var h={room:r,wsState:d,players:a};return Object(p.jsx)(Z.Provider,{value:h,children:t})}function ee(){var e=i.a.useContext(Z);if(!e)throw new Error("useRoomContext should be used within a RoomSocketContextProvider");return e}var te=n(77),ne=n(181),re=n(3),ie=n(100),ae=n.n(ie),oe=Object(f.a)((function(){return{spin:{animation:"spinnerIconEffect 1s linear infinite"},"@global":{"@keyframes spinnerIconEffect":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}}}}}));function ce(e){var t=oe();return Object(p.jsx)(ae.a,{style:e.style,"aria-label":"spinner icon",className:Object(re.a)(e.className,t.spin)})}function se(e){var t=e.children,n=e.loading,r=e.color,i=void 0===r?"default":r,a=e.startIcon,o=Object(te.a)(e,["children","loading","color","startIcon"]);return Object(p.jsx)(ne.a,Object(C.a)(Object(C.a)({variant:"contained",color:i,startIcon:n?void 0:a},o),{},{children:n?Object(p.jsx)(ce,{style:{fontSize:"medium"===o.size?32:40}}):t}))}var le=n(108);function ue(e){var t=e.count,n=e.max;return Object(p.jsx)(v.a,{py:1,children:Object(p.jsxs)(le.a,{variant:"subtitle1",children:[t,"/",n]})})}var de=n(20),be=n.p+"static/media/holydraw-logo.78893378.svg",je=Object(f.a)((function(e){return{logo:Object(de.a)({textAlign:"center",width:function(e){return 8*e.width},height:"auto"},e.breakpoints.down("xs"),{width:function(e){return 8*e.width/3*2}})}}));function he(e){var t=e.width,n=je({width:void 0===t?24:t});return Object(p.jsx)("img",{src:be,className:n.logo,alt:"holy draw logo"})}var fe=n(13),me=Object(f.a)((function(e){var t,n;return{input:{backgroundColor:"inherit",border:"none",width:"100%",fontFamily:"Work Sans",color:e.palette.text.primary,cursor:"inherit"},inputMedium:Object(de.a)({fontSize:24,height:32},e.breakpoints.up("sm"),{fontSize:28,height:32}),inputLarge:Object(de.a)({fontSize:32,height:38},e.breakpoints.up("sm"),{fontSize:36,height:40}),container:{display:"flex",padding:function(e){return"medium"===e.variant?"18px 20px":"20px 20px"},backgroundColor:function(t){return t.disabled?"#15181F":e.palette.background.paper},cursor:function(e){return e.disabled?"not-allowed":"text"},border:function(t){return t.disabled?"2px solid ".concat(Object(fe.c)(e.palette.primary.main,.6)):"2px solid ".concat(e.palette.primary.main)},borderRadius:function(e){return"medium"===e.variant?34:38},alignItems:"center",transition:"box-shadow ease-in .2s",boxShadow:function(t){return t.focus?"0 0 2px 0.2rem ".concat(Object(fe.c)(e.palette.primary.main,.4)):e.shadows[2]}},iconMedium:(t={width:28,height:28,marginRight:e.spacing(1.5)},Object(de.a)(t,e.breakpoints.up("sm"),{marginRight:e.spacing(2),height:32,width:32}),Object(de.a)(t,"color",(function(t){return t.disabled?e.palette.text.disabled:e.palette.text.primary})),t),iconLarge:(n={width:38,height:38,marginRight:e.spacing(1.5)},Object(de.a)(n,e.breakpoints.up("sm"),{marginRight:e.spacing(2),height:40,width:40}),Object(de.a)(n,"color",(function(t){return t.disabled?e.palette.text.disabled:e.palette.text.primary})),n)}}));function ve(e){var t=e.disabled,n=e.variant,r=void 0===n?"medium":n,a=e.startIcon,o=e.fullWidth,c=Object(te.a)(e,["disabled","variant","startIcon","fullWidth"]),s=i.a.useRef(null),l=i.a.useState(!1),u=Object(I.a)(l,2),d=u[0],b=u[1],j=me({disabled:t,focus:d,variant:r});return Object(p.jsxs)("div",{className:Object(re.a)(j.container,{"full-width":o}),onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},children:[a&&i.a.cloneElement(a,{className:"medium"===r?j.iconMedium:j.iconLarge,"data-testid":"biginput-icon"}),Object(p.jsx)("input",Object(C.a)({ref:s,className:Object(re.a)(j.input,"medium"===r?j.inputMedium:j.inputLarge,"big-input-safari"),onFocus:function(){return b(!0)},onBlur:function(){return b(!1)},disabled:t},c))]})}var pe=n(202),xe=n(101),Oe=n.n(xe),ge=n(69),we=n.n(ge),ye=n(45),ke=n.n(ye),Se=Object(f.a)((function(e){return{avatar:{width:48,height:48,backgroundColor:"".concat(e.palette.primary.dark),boxShadow:e.shadows[5],overflow:"visible","&> img":{height:48,width:"auto",margin:"auto",position:"unset"}},badge:{width:20,height:20,borderRadius:"50%",backgroundColor:"#880061",alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",bottom:0,left:0,zIndex:1},icon:{color:"#ffffff"},badgeIcon:{width:16,height:16},username:{fontFamily:"Work Sans",fontSize:20,fontWeight:"bold",overflow:"hidden",maxWidth:128,whiteSpace:"nowrap"},kickButton:{cursor:"pointer"}}}));function Ce(e){var t=e.id,n=e.name,r=e.avatar,i=e.isOwner,a=e.isKickable,o=e.isCurrentPlayer,c=e.onKick,s=Se();return Object(p.jsxs)(v.a,{width:256,height:64,borderRadius:40,padding:1,display:"flex",alignItems:"center",justifyContent:"space-between",bgcolor:"background.default",children:[Object(p.jsxs)(v.a,{position:"relative",children:[o&&Object(p.jsx)("div",{className:s.badge,children:Object(p.jsx)(Oe.a,{className:Object(re.a)(s.icon,s.badgeIcon),"data-testid":"user-icon"})}),Object(p.jsx)(pe.a,{src:r,className:s.avatar})]}),Object(p.jsx)(le.a,{color:"textPrimary",className:s.username,children:n}),Object(p.jsx)(v.a,{display:"flex",alignItems:"center",children:i?Object(p.jsx)(we.a,{className:s.icon,"data-testid":"star-icon"}):a&&Object(p.jsx)(v.a,{component:"button",padding:0,border:0,className:s.kickButton,height:24,onClick:function(){return null===c||void 0===c?void 0:c(t,n)},bgcolor:"transparent",children:Object(p.jsx)(ke.a,{className:s.icon})})})]})}var Ie=[n.p+"static/media/pp-1.acb77223.png",n.p+"static/media/pp-2.c82c2211.png",n.p+"static/media/pp-3.9c11a583.png",n.p+"static/media/pp-4.5ae6cc4a.png",n.p+"static/media/pp-5.d5627fd6.png",n.p+"static/media/pp-6.228ed3be.png",n.p+"static/media/pp-7.762b4b0e.png",n.p+"static/media/pp-8.7bfd9d10.png"],Ee=n(182);function Ne(e){var t=e.players,n=e.playerId,r=e.isKickable,i=e.onKick;return Object(p.jsx)(v.a,{height:384,width:272,overflow:"hidden scroll",children:Object(p.jsx)(Ee.a,{container:!0,spacing:2,alignItems:"flex-end",children:t&&t.map((function(e){var t=n===e.id;return Object(p.jsx)(Ee.a,{item:!0,xs:12,children:Object(p.jsx)(Ce,{id:e.id,name:e.username,avatar:Ie[Number(e.avatarUrl)],isOwner:e.isOwner,isKickable:r,isCurrentPlayer:t,onKick:i})},e.id)}))})})}var Le=n(5),Pe=n(201),ze=n(183),De=n(22),Re=n(184);function Ae(e){var t=e.finishAt,n=e.timeDuration,r=e.onFinish,a=e.onFinishPercentage,o=void 0===a?100:a,c=i.a.useRef();i.a.useEffect((function(){var e=setInterval((function(){We(t,n)>=o&&(null===r||void 0===r||r(),c.current&&clearInterval(c.current))}),1e3);return c.current=e,function(){return clearInterval(e)}}),[t,n,o,r])}function We(e,t){var n=100-100*Math.round((e.getTime()-(new Date).getTime())/1e3)/t;return n>100?100:n}var Fe=Object(Le.a)((function(e){return Object(Pe.a)({root:{height:e.spacing(3)},circle:{backgroundColor:"blue",strokeLinecap:"round"}})}))(ze.a);function Te(e){var t=function(e){var t=e.finishAt,n=e.timeDuration,r=e.onFinish,a=i.a.useState(0),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState(),u=Object(I.a)(l,2),d=u[0],b=u[1];return i.a.useEffect((function(){s(We(t,n));var e=setInterval((function(){return s(We(t,n))}),1e3);return b(e),function(){return clearInterval(e)}}),[t,n]),i.a.useEffect((function(){c>=100&&(null===r||void 0===r||r(),d&&clearInterval(d))}),[c,r,d]),{progress:c}}(e).progress,n=Object(De.a)(),r=Object(Re.a)(n.breakpoints.up("sm"));return Object(p.jsx)(Fe,{size:r?64:32,thickness:4,variant:"determinate",value:t})}var Be=Object(f.a)((function(e){return{sentence:{textAlign:"center"},container:{backgroundColor:Object(fe.c)(e.palette.primary.main,.8),boxShadow:e.shadows[2]}}}));function Me(e){var t=e.directive,n=e.sentence,r=Be();return Object(p.jsxs)(v.a,{width:"100%",display:"flex",padding:1,borderRadius:32,alignItems:"center",flexDirection:"column",className:r.container,children:[Object(p.jsx)(le.a,{variant:"subtitle1",color:"textSecondary",children:t}),n&&Object(p.jsx)(le.a,{variant:"h4",color:"textPrimary",className:r.sentence,children:n})]})}var Ke=n(102),Ue=n.n(Ke),Ge=Object(f.a)((function(e){return{button:{backgroundColor:e.palette.primary.main,outline:"none",borderRadius:"50%",position:"absolute",left:0,bottom:0,cursor:"pointer",border:"none",width:64,display:"flex",justifyContent:"center",alignItems:"center",height:64,boxShadow:"0px 4px 1px ".concat(Object(fe.c)(e.palette.background.default,.8)),"&:active":{bottom:-4,boxShadow:"none"}},imgBox:{boxShadow:"0px 4px 1px ".concat(Object(fe.c)(e.palette.background.default,.8))},img:{height:256,width:"auto",margin:"auto"},root:{animation:"float 4s infinite ease-in-out"},"@global":{"@keyframes float":{"0%":{transform:"translateY(-10px)"},"50%":{transform:"translateY(10px)"},"100%":{transform:"translateY(-10px)"}}}}}));function He(e){var t=e.image,n=e.onShuffle,r=Ge();return Object(p.jsxs)(v.a,{alignItems:"center",width:256,position:"relative",height:256,className:r.root,children:[Object(p.jsx)("button",{className:r.button,onClick:n,children:Object(p.jsx)(Ue.a,{style:{color:"#FFFFFF",fontSize:32}})}),Object(p.jsx)(v.a,{border:2,display:"flex",borderColor:"primary.main",borderRadius:"50%",width:256,height:256,bgcolor:"background.default",className:r.imgBox,children:Object(p.jsx)("img",{src:t,className:r.img,alt:"Avatar"})})]})}var Je=["#7f8c8d","#000001","#ecf0f1","#bdc3c7","#00a8ff","#1e3799","#2ecc71","#009432","#ff3f34","#C0392B","#FA00FF","#8E44AD","#F1C40F","#E67E22","#FEAFA8","#f3a683"];function Ye(e){var t=e.currentColor,n=e.onColorChange;return Object(p.jsx)(v.a,{display:"flex",flexWrap:"wrap",borderRadius:30,maxWidth:116,justifyContent:"center",bgcolor:"#272B31",padding:1,children:Je.map((function(e){var r=e===t;return Object(p.jsx)(v.a,{component:"button",onClick:function(){return null===n||void 0===n?void 0:n(e)},border:2,m:.5,p:0,bgcolor:e,boxShadow:r?4:0,borderColor:r?"#ffffff":e,width:42,height:42,borderRadius:"50%",className:"cursor-pointer"},e)}))})}var qe=[4,8,16,20,24,30];function Xe(e){var t=e.currentSize,n=e.onSizeChange,r=e.flexDirection,i=void 0===r?"row":r,a=Object(De.a)();return Object(p.jsx)(v.a,{padding:1,gridGap:8,bgcolor:Object(fe.c)(a.palette.primary.main,.2),display:"flex",borderRadius:4,border:1,flexDirection:i,borderColor:"common.black",alignItems:"center",boxShadow:2,children:qe.map((function(e,r){var i=t===e;return Object(p.jsx)($e,{onSizeChange:n,size:e,isCurrentSize:i},e)}))})}var _e=Object(f.a)((function(e){return{button:{backgroundColor:"transparent",outline:"none",border:"2px solid #000000",borderRadius:"50%",width:40,height:40,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",cursor:"pointer",boxShadow:function(t){return t.isCurrentSize?"0 0 .2px 2px ".concat(Object(fe.c)(e.palette.primary.main,.8)):"none"}}}}));function $e(e){var t=e.onSizeChange,n=e.size,r=e.isCurrentSize,i=_e({isCurrentSize:r});return Object(p.jsx)("button",{onClick:function(){return t(n)},className:i.button,children:Object(p.jsx)(v.a,{borderRadius:"50%",border:"1px solid #000000",bgcolor:"#000000",width:n,height:n})})}var Ve=n(103),Ze=n.n(Ve);function Qe(e){var t=e.identifier,n=Object(E.b)().enqueueSnackbar;return Object(p.jsx)(ne.a,{startIcon:Object(p.jsx)(Ze.a,{style:{fontSize:32}}),onClick:function(){t&&(!function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}("".concat(window.location.origin,"/join/").concat(t)),n("URL successfully copied \ud83d\ude0e",{variant:"success"}))},size:"large",variant:"contained",children:t||"loading..."})}var et=n(203),tt=Object(f.a)((function(e){var t;return{avatar:(t={height:64,width:64,overflow:"visible",backgroundColor:function(t){return t.isSelected?Object(fe.c)(e.palette.primary.main,.6):Object(fe.c)(e.palette.primary.main,.2)}},Object(de.a)(t,e.breakpoints.up("sm"),{height:40,width:40}),Object(de.a)(t,"&> img",Object(de.a)({height:64,width:"auto",margin:"auto",position:"unset"},e.breakpoints.up("sm"),{height:40})),t)}}));function nt(e){var t=e.avatarUrl,n=e.isSelected,r=tt({isSelected:n});return Object(p.jsx)(pe.a,{className:r.avatar,src:Ie[Number(t)]})}var rt=Object(f.a)((function(e){return{badge:{width:20,height:20,borderRadius:"50%",backgroundColor:e.palette.primary.main,alignItems:"center",justifyContent:"center",display:"flex",border:0,position:"absolute",bottom:0,left:0,zIndex:2},container:{overflowX:"scroll"},username:{overflow:"hidden",textAlign:"center",maxWidth:64,whiteSpace:"nowrap"},button:{backgroundColor:"transparent",outline:"none",padding:0},icon:{fontSize:16,color:e.palette.common.white}}}));function it(e){var t=e.players,n=e.playerId,r=e.onClick,i=e.isKickable,a=Object(De.a)(),o=Object(Re.a)(a.breakpoints.up("sm")),c=rt();return Object(p.jsx)(v.a,{display:"flex",gridGap:8,maxWidth:o?200:285,className:c.container,alignItems:"center",flexDirection:"row",children:t.map((function(e,t){var a=n===e.id;return Object(p.jsx)(et.a,{title:e.username,placement:"top",children:Object(p.jsxs)(v.a,{flexDirection:"column",alignItems:"center",zIndex:4,children:[Object(p.jsxs)(v.a,{position:{xs:"relative",sm:"initial"},children:[!o&&(e.isOwner?Object(p.jsx)("div",{className:c.badge,children:Object(p.jsx)(we.a,{"data-testid":"star-icon",className:c.icon})}):i&&Object(p.jsx)("button",{onClick:function(){return!e.isOwner&&i&&(null===r||void 0===r?void 0:r(e.id,e.username))},className:c.badge,children:Object(p.jsx)(ke.a,{"data-testid":"kick-icon",className:c.icon})})),Object(p.jsx)(nt,{isSelected:a,avatarUrl:e.avatarUrl})]}),!o&&Object(p.jsx)(le.a,{className:c.username,component:"p",variant:"subtitle1",children:e.username})]})},e.id)}))})}var at=n(70),ot=n.n(at),ct=n(199),st=n(188),lt=n(189),ut=n(196),dt=n(190);function bt(e){var t=e.identifier,n=e.loading,r=e.onClick,a=e.className,o=i.a.useState(!1),c=Object(I.a)(o,2),s=c[0],l=c[1],u=i.a.useState(""),d=Object(I.a)(u,2),b=d[0],j=d[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(se,{startIcon:t?Object(p.jsx)(ot.a,{style:{fontSize:32}}):void 0,fullWidth:!0,loading:n,className:a,size:"medium",color:t?"primary":"default",onClick:function(){return t?r(t):l(!0)},children:"Join"}),Object(p.jsxs)(ct.a,{fullWidth:!0,maxWidth:"xs",open:s,onClose:function(){return l(!1)},children:[Object(p.jsx)(st.a,{children:"Join a game \ud83d\udc68\u200d\ud83c\udfa8"}),Object(p.jsx)(lt.a,{children:Object(p.jsx)(ut.a,{color:"secondary",autoFocus:!0,margin:"dense",id:"name",label:"Identifier",value:b,onChange:function(e){return j(e.target.value)},fullWidth:!0})}),Object(p.jsxs)(dt.a,{children:[Object(p.jsx)(ne.a,{onClick:function(){return l(!1)},color:"secondary",children:"Cancel \ud83d\udc4b"}),Object(p.jsx)(ne.a,{onClick:function(){r(b),l(!1)},color:"secondary",children:"Join \ud83e\udd73"})]})]})]})}var jt=i.a.createContext({});function ht(){var e=i.a.useContext(jt);if(!e)throw new Error("useCanvasContext should be used within a DrawingCanvasContext");return e}var ft=Object(f.a)((function(e){return{canvas:{backgroundColor:function(e){return e.disabled?"#BBBBBB":"#DDDDDD"},width:function(e){return e.size.width},height:function(e){return e.size.height},cursor:function(e){return e.disabled?"not-allowed":"crosshair"}},canvasBox:{width:function(e){return e.size.width+2*e.size.border},height:function(e){return e.size.height+2*e.size.border},border:function(t){return"".concat(t.size.border,"px solid ").concat(e.palette.primary.main)},boxShadow:e.shadows[1]}}}));function mt(e){var t=e.disabled,n=ht(),r=n.canvasRef,i=n.size,a=ft({size:i,disabled:t});return Object(p.jsx)("div",{className:a.canvasBox,children:Object(p.jsx)("canvas",{ref:r,className:a.canvas})})}var vt=n(59),pt=n(86),xt=n.n(pt),Ot=n(192),gt=n(193),wt=n(205),yt=n(105),kt=n.n(yt);function St(e){var t=e.player,n=e.startName,r=void 0===n?"game":n,i=e.isLoading,a=e.onStart,o=Object(De.a)();return Object(p.jsxs)(v.a,{m:3,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(p.jsxs)(v.a,{display:"flex",alignItems:"center",children:[!(null===t||void 0===t?void 0:t.isOwner)&&Object(p.jsx)(ce,{style:{color:o.palette.text.secondary,marginRight:4}}),Object(p.jsx)(le.a,{variant:"body2",color:"textSecondary",children:(null===t||void 0===t?void 0:t.isOwner)?"you're the owner, click here to start the ".concat(r):"Waiting for the host to start the ".concat(r)})]}),(null===t||void 0===t?void 0:t.isOwner)&&Object(p.jsx)(v.a,{mt:2,children:Object(p.jsx)(se,{loading:i,onClick:a,size:"large",startIcon:Object(p.jsx)(kt.a,{style:{fontSize:48}}),children:"Start"})})]})}var Ct=n(191),It=Object(Le.a)((function(e){return Object(Pe.a)({root:{height:e.spacing(3)},colorPrimary:{backgroundColor:e.palette.background.default},bar:{borderRadius:8,backgroundColor:e.palette.primary.dark}})}))(Ct.a);function Et(e){var t=e.stepActual,n=void 0===t?0:t,r=e.stepMax,i=void 0===r?0:r,a=function(e,t){var n=100*e/t;return n>100?100:n}(n,i);return Object(p.jsxs)(v.a,{overflow:"hidden",width:"100%",position:"relative",p:1,children:[Object(p.jsx)(v.a,{alignItems:"center",justifyContent:"center",display:"flex",position:"absolute",zIndex:1,top:4,bottom:0,left:16,children:Object(p.jsxs)(le.a,{variant:"subtitle1",children:[n,"/",i]})}),Object(p.jsx)(It,{variant:"determinate",value:a})]})}var Nt=n(204),Lt=Object(f.a)((function(e){return{avatar:{width:32,height:32,backgroundColor:e.palette.primary.dark,overflow:"visible",boxShadow:e.shadows[2],"&> img":{height:26,width:"auto",margin:"auto",position:"unset"}},box:{backgroundColor:e.palette.custom.main,borderRadius:20,border:"none"}}}));function Pt(e){var t=e.username,n=e.children,r=e.avatarUrl,i=Lt();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(le.a,{variant:"subtitle1",children:t}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",p:.5,width:320,className:i.box,children:[Object(p.jsx)(pe.a,{src:r,className:i.avatar}),Object(p.jsx)(v.a,{ml:1,mr:1,alignSelf:"center",children:Object(p.jsx)(le.a,{variant:"body1",children:n})})]})]})}var zt=n.p+"static/media/gym-guy.71a7fbf1.svg";function Dt(e){var t=e.className,n=e.src;return Object(p.jsx)(v.a,{bgcolor:"common.white",borderColor:"custom.main",borderRadius:32,boxShadow:1,border:4,display:"flex",children:Object(p.jsx)("img",{src:n,alt:"",className:t})})}var Rt,At=Object(f.a)((function(e){return{width:Object(de.a)({width:256,height:160},e.breakpoints.down("xs"),{width:"100%"}),username:{textAlign:"right",maxWidth:256,whiteSpace:"nowrap",overflow:"hidden"}}}));function Wt(e){var t=e.username,n=e.src,r=At();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(le.a,{variant:"subtitle1",className:r.username,children:t}),Object(p.jsx)(Dt,{src:n,className:r.width})]})}!function(e){e[e.LINE=0]="LINE",e[e.CIRCLE=1]="CIRCLE",e[e.FILL=2]="FILL"}(Rt||(Rt={}));var Ft=function(e){var t;null===(t=e.getContext("2d"))||void 0===t||t.clearRect(0,0,e.width,e.height)},Tt=function(e,t,n){var r=n.beginPosition,i=n.controlPosition,a=n.endPosition;switch(e.strokeStyle=t.color,e.fillStyle=t.color,e.lineJoin="round",e.lineCap="round",e.lineWidth=t.size,e.beginPath(),t.type){case Rt.LINE:if(!i||!a)return;e.moveTo(r.x,r.y),e.quadraticCurveTo(i.x,i.y,a.x,a.y),e.stroke();break;case Rt.CIRCLE:e.arc(r.x,r.y,t.size/2,0,2*Math.PI),e.fill()}e.closePath()};function Bt(e){var t=e.slice(-2),n=Object(I.a)(t,2),r=n[0],i=n[1];return{controlPoint:r,endPoint:{x:(r.x+i.x)/2,y:(r.y+i.y)/2}}}var Mt=function(e,t,n){if(n)return{x:(e.pageX-n.offsetLeft)*t,y:(e.pageY-n.offsetTop)*t}};function Kt(e,t,n){var r=null===e||void 0===e?void 0:e.getContext("2d");if(r){var i=r.getImageData(0,0,e.width,e.height),a=function(e,t,n){var r=4*(e.y*t+e.x);return{r:n[r],g:n[r+1],b:n[r+2]}}(t,e.width,i.data),o=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(n);if(o&&(o.r!==a.r||o.g!==a.g||o.b!==a.b)){for(var c,s=function(e){var t=i.data[e],n=i.data[e+1],r=i.data[e+2];return t===a.r&&n===a.g&&r===a.b},l=[t],u=4*e.width;l.length;){var d=l.pop();if(!d)return;for(var b=4*(d.y*e.width+d.x),j=d.y;j-- >=0&&s(b);)b-=u;b+=u,j++;for(var h=!1,f=!1;j++<e.height-1&&s(b);)c=b,i.data[c]=o.r,i.data[c+1]=o.g,i.data[c+2]=o.b,i.data[c+3]=255,d.x>0&&s(b-4)&&(h?h&&(h=!1):(l.push({x:d.x-1,y:j}),h=!0)),d.x<e.width-1&&s(b+4)&&(f?f&&(f=!1):(l.push({x:d.x+1,y:j}),f=!0)),b+=u}r.putImageData(i,0,0)}}}var Ut,Gt,Ht=function(e){var t=e.color,n=e.size,r=e.canvasRef,a=e.scale,o=e.lineType,c=i.a.useRef({x:0,y:0}),s=i.a.useRef([]),l=i.a.useRef([]),u=function(){return s.current[s.current.length-1]},d=i.a.useCallback((function(e){e&&(u().points.push(e),c.current=e)}),[]),b=i.a.useCallback((function(e){if(e&&c&&r.current){var t=u();t.points.push(e);var n=r.current.getContext("2d");if(n&&!(t.points.length<=2)){var i=Bt(t.points),a=i.controlPoint,o=i.endPoint;Tt(n,t,{beginPosition:c.current,controlPosition:a,endPosition:o}),c.current=o}}}),[r]),j=i.a.useCallback((function(e){r.current&&Kt(r.current,e,t)}),[r,t]),h=i.a.useCallback((function(e,i){var d;if(c.current=e,l.current=[],i)switch(s.current.push({type:o,color:t,size:n*a,points:[e]}),o){case Rt.LINE:var h=null===r||void 0===r||null===(d=r.current)||void 0===d?void 0:d.getContext("2d");if(!h)return;Tt(h,Object(C.a)(Object(C.a)({},u()),{},{type:Rt.CIRCLE}),{beginPosition:e});break;case Rt.FILL:j(e)}else b(e)}),[r,t,j,o,b,a,n]),f=i.a.useCallback((function(){r.current&&function(e,t){var n=e.getContext("2d");n&&(Ft(e),t&&t.forEach((function(t){var r=t.points[0],i=[];switch(t.type){case Rt.LINE:Tt(n,Object(C.a)(Object(C.a)({},t),{},{type:Rt.CIRCLE}),{beginPosition:t.points[0]}),t.points.forEach((function(e){if(i.push(e),i.length>3){var a=Bt(i),o=a.controlPoint,c=a.endPoint;Tt(n,t,{beginPosition:r,controlPosition:o,endPosition:c}),r=c}}));break;case Rt.FILL:Kt(e,t.points[0],t.color)}})))}(r.current,s.current)}),[r]),m=i.a.useCallback((function(){var e=s.current.pop();e&&l.current.push(e),f()}),[f]),v=i.a.useCallback((function(){var e=l.current.pop();e&&s.current.push(e),f()}),[f]),p=i.a.useCallback((function(){r.current&&window.confirm("This action is definitive. Are you sure you want to clear all ?")&&(s.current=[],l.current=[],Ft(r.current))}),[r]);return i.a.useEffect((function(){if(r.current){var e=function(e){"z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?v():m()),"c"===e.key&&p()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[r,p,v,m]),{paint:b,create:h,addLastLine:d,undo:m,lines:s,mouseCoordinate:c,clear:p,redo:v,refresh:f,fill:j}},Jt={width:512,height:320,border:4,scale:2};function Yt(e){var t=e.color,n=void 0===t?"#900050":t,r=e.lineSize,a=void 0===r?4:r,o=e.disabled,c=void 0!==o&&o,s=e.children,l=i.a.useState(Jt),u=Object(I.a)(l,2),d=u[0],b=u[1],j=i.a.useState(Rt.LINE),h=Object(I.a)(j,2),f=h[0],m=h[1],v=i.a.useRef(null),x=i.a.useState(!1),O=Object(I.a)(x,2),g=O[0],w=O[1],y=i.a.useCallback((function(){var e,t,n,r=null===(e=v.current)||void 0===e||null===(t=e.parentElement)||void 0===t||null===(n=t.parentElement)||void 0===n?void 0:n.getBoundingClientRect().width;if(r&&!(r<64)){var i=1024/r,a=r/1.6,o=r<400?2:4;(r-1>d.width||r+1<d.width)&&b({width:r-2*o,height:a-2*o,border:o,scale:i})}}),[d.width]),k=Ht({color:n,size:a,canvasRef:v,scale:d.scale,lineType:f}),S=k.paint,C=k.create,E=k.addLastLine,N=k.clear,L=k.undo,P=k.refresh,z=k.redo,D=i.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Mt(e,d.scale,v.current);n&&(f!==Rt.FILL&&w(!0),C(n,t))}),[C,d.scale,f]),R=i.a.useCallback((function(e){w(!1);var t=Mt(e,d.scale);E(t)}),[E,d.scale]),A=i.a.useCallback((function(e){g&&D(e,!1)}),[g,D]),W=i.a.useCallback((function(e){if(g&&v.current){var t=Mt(e,d.scale,v.current);S(t)}}),[d.scale,g,S]);!function(e){var t=e.canvasRef,n=e.isPainting,r=e.onMouseMove,a=e.onMouseEnter,o=e.onMouseDown,c=e.onMouseUp,s=e.disabled,l=e.onResize;i.a.useEffect((function(){if(n&&!s)return window.document.addEventListener("mousemove",r),window.document.addEventListener("touchmove",e),function(){window.document.removeEventListener("mousemove",r),window.document.removeEventListener("touchmove",e)};function e(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});r(t)}}),[s,n,r]),i.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mouseenter",a),function(){e.removeEventListener("mouseenter",a)}}}),[t,s,a]),i.a.useEffect((function(){if(t.current&&!s){var e=t.current;return e.addEventListener("mousedown",o),e.addEventListener("touchstart",n),window.document.addEventListener("mouseup",c),function(){e.removeEventListener("mousedown",o),e.removeEventListener("touchstart",n),window.document.removeEventListener("mouseup",c)}}function n(e){var t=new MouseEvent("mousedown",{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY});o(t)}}),[t,s,o,c]),i.a.useEffect((function(){return window.addEventListener("resize",l),function(){return window.removeEventListener("resize",l)}}),[l])}({canvasRef:v,onMouseDown:D,onMouseUp:R,onMouseEnter:A,onMouseMove:W,isPainting:g,onResize:y,disabled:c}),i.a.useEffect((function(){if(v.current){var e=v.current;e.width=d.width*d.scale,e.height=d.height*d.scale,P()}}),[v,P,d]);var F=i.a.useMemo((function(){return{clear:N,undo:L,canvasRef:v,redo:z,size:d,setLineType:m,lineType:f}}),[N,L,z,d,f]);return Object(p.jsx)(jt.Provider,{value:F,children:s})}!function(e){e[e.Sentence=0]="Sentence",e[e.Drawing=1]="Drawing"}(Ut||(Ut={})),function(e){e[e.Start=0]="Start",e[e.Draw=1]="Draw",e[e.Write=2]="Write",e[e.Book=3]="Book"}(Gt||(Gt={}));var qt=function(){var e=i.a.useState(),t=Object(I.a)(e,2),n=t[0],r=t[1],a=Object(E.b)().enqueueSnackbar,o=Object(S.f)();return i.a.useEffect((function(){var e=!1;return D("session/current",{token:W()}).then((function(t){return!e&&r(t)}),(function(){a("Sorry, an error occured \ud83d\ude15 [Session-GET]",{variant:"error"}),o.push("/r/lobby")})),function(){e=!0}}),[a,o]),i.a.useEffect((function(){var e=o.location.pathname,t="";switch(null===n||void 0===n?void 0:n.stepType){case Gt.Start:t="/r/start";break;case Gt.Write:t="/r/write";break;case Gt.Draw:t="/r/draw";break;case Gt.Book:t="/r/book"}t&&e!==t&&o.push(t)}),[null===n||void 0===n?void 0:n.stepType,o]),{session:n,setSession:r}},Xt=i.a.createContext({onSave:function(){return Promise.resolve()}});function _t(e){var t=e.children,n=qt(),r=n.session,a=n.setSession,o=i.a.useState(),c=Object(I.a)(o,2),s=c[0],l=c[1],u=Y().websocket,d=Object(E.b)().enqueueSnackbar;i.a.useEffect((function(){function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.SessionUpdate:var n=t.session;a((function(e){return e&&Object(C.a)(Object(C.a)({},e),n)}))}}if(u)return u.addEventListener("message",e),function(){return u.removeEventListener("message",e)}}),[r,a,u]),i.a.useEffect((function(){if(null===r||void 0===r?void 0:r.actualStep){var e=!1;return D("element/current",{token:W()}).then((function(t){return!e&&l(t)}),(function(){return d("Sorry, an error occured \ud83d\ude15 [Element-GET]",{variant:"error"})})),function(){e=!0}}}),[d,null===r||void 0===r?void 0:r.actualStep]);var b={session:r,currentElement:s,onSave:function(e){var t=null===s||void 0===s?void 0:s.id,n=(null===s||void 0===s?void 0:s.type)===Ut.Drawing?{drawimage:e}:{text:e};return new Promise((function(e){D("element/".concat(t),{token:W(),method:"PATCH",data:n}).then((function(e){d("Element Saved \ud83d\ude0e",{variant:"success"}),l((function(t){return Object(C.a)(Object(C.a)({},t),e)}))})).catch((function(){return d("Sorry, an error occured while saving \ud83d\ude15",{variant:"error"})})).finally((function(){return e()}))}))}};return Object(p.jsx)(Xt.Provider,{value:b,children:r?t:Object(p.jsx)(B,{})})}function $t(){var e=i.a.useContext(Xt);if(!e)throw new Error("useSessionContext should be used within a SessionContextProvider");return e}var Vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach((function(e){return e&&e.apply(void 0,n)}))}};function Zt(e){return e[Math.floor(Math.random()*e.length)]}function Qt(e){var t=e.children,n=ht().clear;return i.a.cloneElement(t,{onClick:Vt(n,t.props.onClick)})}function en(e){var t=e.children,n=ht().undo;return i.a.cloneElement(t,{onClick:Vt(n,t.props.onClick)})}function tn(e){var t=e.children,n=ht().redo;return i.a.cloneElement(t,{onClick:Vt(n,t.props.onClick)})}function nn(e){var t=e.children,n=e.onSave,r=$t(),a=r.currentElement,o=r.session,c=ht().canvasRef;return Ae({finishAt:new Date((null===o||void 0===o?void 0:o.stepFinishAt)||""),timeDuration:(null===o||void 0===o?void 0:o.timeDuration)||60,onFinish:function(){var e;D("element/auto/".concat(null===a||void 0===a?void 0:a.id),{token:W(),method:"PATCH",data:{draw:null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.toDataURL()}})},onFinishPercentage:99}),i.a.cloneElement(t,{onClick:function(){var e,r,i;n(null===(e=c.current)||void 0===e?void 0:e.toDataURL()),null===(r=(i=t.props).onClick)||void 0===r||r.call(i)}})}var rn=n(72),an=n.n(rn),on=n(73),cn=n.n(on),sn=n(74),ln=n.n(sn),un=n(180),dn=Object(f.a)((function(){return{root:{top:function(e){return e.open?Math.sin(e.pi)*e.width*e.spacing:0},right:function(e){return e.open?Math.cos(e.pi)*e.width*e.spacing:0},visibility:function(e){return e.open?"visible":"hidden"},transition:"all .2s ease-in-out"}}}));function bn(e){var t=e.count,n=e.max,r=e.open,a=e.onClick,o=e.children,c=e.width,s=e.spacing,l=2*Math.PI/n*t,u=dn({count:t,max:n,pi:l,open:r,width:c,spacing:s});return Object(p.jsx)(v.a,{zIndex:1,width:c,height:c,className:u.root,position:"absolute",children:a&&o?i.a.cloneElement(o,{onClick:Vt(a,o.props.onClick)}):o})}var jn=Object(f.a)((function(e){return{root:{},action:{position:"absolute",width:function(e){return e.width},height:function(e){return e.width},top:0,right:0,zIndex:2},circlebg:{transform:"translate(-50%, -50%)",top:"50%",left:"50%",opacity:function(e){return e.open?"1":"0"},transition:"all .2s ease-in-out",backgroundColor:function(t){return"fill"===t.circleBg?e.palette.background.paper:void 0},border:function(t){return"border"===t.circleBg?"2px solid ".concat(e.palette.background.paper):void 0}}}}));function hn(e){var t=e.action,n=e.children,r=e.width,a=void 0===r?48:r,o=e.circleBg,c=void 0===o?"border":o,s=e.spacing,l=void 0===s?1.2:s,u=i.a.useState(!1),d=Object(I.a)(u,2),b=d[0],j=d[1],h=jn({count:4,width:a,open:b,circleBg:c}),f=t(b);return Object(p.jsx)(un.a,{onClickAway:function(){return j(!1)},children:Object(p.jsxs)(v.a,{position:"relative",width:a,height:a,className:h.root,children:[i.a.cloneElement(f,{onClick:function(){return j(!b)},className:Object(re.a)(f.props.className,h.action)}),Object(p.jsx)(v.a,{position:"absolute",className:h.circlebg,borderRadius:"50%",width:a*(2*l),height:a*(2*l)}),n.map((function(e,t){return Object(p.jsx)(bn,{open:b,spacing:l,width:a,count:t+1,onClick:function(){return j(!1)},max:n.length,children:e})}))]})})}var fn=n(57),mn=n.n(fn),vn=n(53),pn=n.n(vn),xn=Object(Le.a)({root:{color:"#C6C6C6",borderRadius:4,height:8,width:300},thumb:{height:16,width:16,backgroundColor:"#C6C6C6",marginTop:-4,marginLeft:-8,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4},vertical:{width:"8px !important","& .$MuiSlider-rail":{width:8},"& .$MuiSlider-track":{width:8},"& .$MuiSlider-thumb":{marginLeft:"-4.15px"}}})(Nt.a);function On(e){var t=e.children,n=e.open,r=e.value;return Object(p.jsx)(et.a,{open:n,enterTouchDelay:0,placement:"top",title:r,children:t})}function gn(e){var t=e.size,n=e.onSizeChange,r=e.orientation,i=void 0===r?"vertical":r,a="vertical"===i;return Object(p.jsxs)(v.a,{p:2,bgcolor:"#272B31",borderRadius:40,display:"flex",flexDirection:a?"column":"row",justifyContent:a?"center":"space-around",alignItems:"center",children:[Object(p.jsx)(v.a,{bgcolor:"#C6C6C6",mr:a?0:2,mb:a?2:0,borderRadius:"50%",height:8,width:8}),Object(p.jsx)(xn,{step:2,min:2,style:a?{height:300}:{width:300},max:60,"aria-labelledby":"size-picker-slider",orientation:i,value:t,onChange:n,ValueLabelComponent:On}),Object(p.jsx)(v.a,{bgcolor:"#C6C6C6",ml:a?0:2,mt:a?2:0,borderRadius:"50%",height:24,width:24})]})}function wn(){var e=Object(r.useState)(0),t=Object(I.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(Je[5]),c=Object(I.a)(o,2),s=c[0],l=c[1],u=Object(r.useState)(!1),d=Object(I.a)(u,2),b=d[0],j=d[1],h=Object(r.useState)(!1),f=Object(I.a)(h,2),m=f[0],x=f[1],O=Object(r.useState)(8),g=Object(I.a)(O,2),w=g[0],y=g[1],k=Object(r.useState)(10),S=Object(I.a)(k,2),C=S[0],E=S[1],N=i.a.useState(1),L=Object(I.a)(N,2),P=L[0],z=L[1],D=function(){a((function(e){return e>Ie.length-2?0:e+1}))};return Object(p.jsx)(v.a,{children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",gridGap:32,children:[Object(p.jsx)(v.a,{children:Object(p.jsxs)(hn,{circleBg:"border",spacing:1.2,action:function(e){return Object(p.jsx)(Ot.a,{children:e?Object(p.jsx)(ke.a,{}):Object(p.jsx)(pn.a,{})})},children:[Object(p.jsx)(Ot.a,{children:Object(p.jsx)(xt.a,{})}),Object(p.jsx)(Ot.a,{children:Object(p.jsx)(mn.a,{})})]})}),Object(p.jsx)(he,{}),Object(p.jsx)(v.a,{children:Object(p.jsx)(Ye,{currentColor:s,onColorChange:function(e){return l(e)}})}),Object(p.jsx)(v.a,{children:Object(p.jsx)(Pt,{username:"Houn Salade",avatarUrl:Ie[n],children:"Combien sont ces six saucissons-ci ?"})}),Object(p.jsx)(Wt,{username:"Jean-Philippes-Pascal",src:zt}),Object(p.jsx)(gt.a,{control:Object(p.jsx)(wt.a,{checked:b,onChange:function(e){return j(e.target.checked)}}),label:"Is mobile canvas"}),Object(p.jsx)(gt.a,{control:Object(p.jsx)(wt.a,{checked:m,onChange:function(e){return x(e.target.checked)}}),label:"Is canvas disabled"}),Object(p.jsx)(v.a,{display:"flex",width:"100%",maxWidth:1e3,flexDirection:"column",children:Object(p.jsxs)(Yt,{color:s,disabled:m,lineSize:w,children:[Object(p.jsxs)(v.a,{display:"flex",width:"100%",flexWrap:"wrap",children:[Object(p.jsx)(v.a,{width:"100%",children:Object(p.jsx)(mt,{disabled:m})}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",children:[Object(p.jsx)(Qt,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(an.a,{})})}),Object(p.jsx)(en,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(cn.a,{})})}),Object(p.jsx)(tn,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(ln.a,{})})})]}),Object(p.jsx)(Ye,{currentColor:s,onColorChange:function(e){return l(e)}}),Object(p.jsx)(Xe,{currentSize:w,onSizeChange:function(e){return y(e)},flexDirection:"column"})]}),Object(p.jsx)(nn,{onSave:function(e){if(e){var t=window.open();null===t||void 0===t||t.document.write('<iframe width="1200px" height="700px" src='+e+"></iframe>")}},children:Object(p.jsx)(se,{size:"large",children:"Submit"})})]})}),Object(p.jsx)(Te,{finishAt:new Date("2021-03-30T08:31:00"),timeDuration:120}),Object(p.jsx)(bt,{loading:!1,identifier:void 0,onClick:function(){}}),Object(p.jsx)(He,{image:Ie[n],onShuffle:D}),Object(p.jsx)(ve,{onChange:function(){},value:"didier",startIcon:Object(p.jsx)(xt.a,{})}),Object(p.jsx)(Qe,{identifier:"LH4AH3"}),Object(p.jsx)(Ce,{id:1,name:"John Doe",avatar:Ie[n],isOwner:!0,isKickable:!1,onKick:function(e){}}),Object(p.jsx)(se,{size:"large",onClick:D,children:"Test"}),Object(p.jsx)(St,{player:vt[1],onStart:function(){}}),Object(p.jsx)(Ne,{players:vt,playerId:3,isKickable:!0,onKick:function(e){}}),Object(p.jsx)(Me,{sentence:"Salzt",directive:"bonsoir"}),Object(p.jsx)(ce,{}),Object(p.jsx)(ue,{count:8,max:12}),Object(p.jsx)(Ne,{players:vt,isKickable:!0,onKick:function(e){}}),Object(p.jsx)(it,{players:vt,playerId:2}),Object(p.jsx)(Nt.a,{defaultValue:P,onChange:function(e,t){z(t)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:1,max:7}),Object(p.jsx)(gn,{size:C,onSizeChange:function(e,t){return E(t)}}),Object(p.jsx)(v.a,{bgcolor:"#C6C6C6",borderRadius:"50%",height:C,width:C}),Object(p.jsx)(Et,{stepActual:P,stepMax:7})]})})}function yn(){return Object(p.jsxs)(v.a,{p:3,display:"flex",flexDirection:"column",alignItems:"center",children:[Object(p.jsx)("h1",{children:"You're in DevNav"}),Object(p.jsx)(kn,{to:"/",children:"Dev nav"}),Object(p.jsx)(kn,{to:"/r/start",children:"Go Room Start"}),Object(p.jsx)(kn,{to:"/r/write",children:"Go Room Write"}),Object(p.jsx)(kn,{to:"/r/draw",children:"Go Room Draw"}),Object(p.jsx)(kn,{to:"/r/lobby",children:"Go Room Lobby"}),Object(p.jsx)(kn,{to:"/r",children:"Go Room"}),Object(p.jsx)(kn,{to:"/home",children:"Go home"}),Object(p.jsx)(kn,{to:"/t",children:"Go to TESTS pages"})]})}function kn(e){var t=e.to,n=e.children;return Object(p.jsx)(v.a,{p:1,bgcolor:"background.default",m:1,borderRadius:2,border:1,borderColor:"primary.main",children:Object(p.jsx)(k.b,{to:t,style:{color:"white"},children:n})})}var Sn=["God","Mushu the Dragon","Bob Razowski","Macco","Woody Woodpecker","Mr Potato","Nemo","Shrek","Staline","Krokette","Little Otter","Bob the bob","SavageWolf","Padawan","BigBear","BigFather","Terminator","Stitch"];var Cn=Object(f.a)((function(e){return{marginButton:{marginLeft:e.spacing(2)}}}));function In(e){var t=e.identifier,n=i.a.useState(""),r=Object(I.a)(n,2),a=r[0],o=r[1],c=i.a.useState(0),s=Object(I.a)(c,2),l=s[0],u=s[1],d=i.a.useState(!1),b=Object(I.a)(d,2),j=b[0],h=b[1],f=Object(E.b)().enqueueSnackbar,m=Object(S.f)(),x=i.a.useRef(Zt(Sn)).current,O=Cn();function g(e,t){f(t,{variant:"success"}),F(e),null===m||void 0===m||m.push("/r/lobby")}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(He,{image:Ie[l],onShuffle:function(){u((function(e){return e>=Ie.length-1?0:e+1}))}})}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",mb:1,px:1,maxWidth:356,children:[Object(p.jsx)(ve,{value:a,fullWidth:!0,onChange:function(e){return o(e.target.value)},placeholder:x}),Object(p.jsxs)(v.a,{display:"flex",mt:2,children:[Object(p.jsx)(bt,{identifier:t,onClick:function(e){var t=e.startsWith("http")?e.split("/").pop():e;h(!0),D("room/join/".concat(t),{data:{username:a||x,avatarUrl:String(l)},method:"PATCH"}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&g(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"You've joined the room!")}),(function(){return f("Sorry, an error occured \ud83d\ude15 [Room-PATCH]",{variant:"error"})})).finally((function(){return h(!1)}))},loading:j}),!t&&Object(p.jsx)(se,{fullWidth:!0,className:O.marginButton,color:"primary",startIcon:Object(p.jsx)(ot.a,{style:{fontSize:32}}),onClick:function(){h(!0),D("room",{data:{username:a||x,avatarUrl:String(l)}}).then((function(e){var t,n;(null===(t=e.token)||void 0===t?void 0:t.tokenKey)&&g(null===(n=e.token)||void 0===n?void 0:n.tokenKey,"Room successfully created \ud83d\ude4c")}),(function(){return f("Sorry, an error occured \ud83d\ude15 [Room-POST]",{variant:"error"})})).finally((function(){return h(!1)}))},loading:j,children:"Create"})]})]})})]})}function En(e){var t=e.match.params.identifier;return Object(p.jsxs)(Ee.a,{container:!0,direction:"column",alignItems:"center",className:"full-height",justify:"space-between",children:[Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(he,{width:32})}),Object(p.jsx)(In,{identifier:t})]})}function Nn(e){var t=e.onFinish,n=$t().session;return Object(p.jsxs)(v.a,{display:"flex",flexWrap:"wrap",flexDirection:"row",alignItems:"center",p:1,px:{xs:2,sm:4},justifyContent:"space-between",width:"100%",children:[Object(p.jsx)(v.a,{width:{xs:32,sm:64},children:Object(p.jsx)(ue,{count:(null===n||void 0===n?void 0:n.playerFinished)||0,max:(null===n||void 0===n?void 0:n.totalPlayers)||0})}),Object(p.jsx)(v.a,{width:{xs:32,sm:64},children:Object(p.jsx)(Te,{finishAt:new Date((null===n||void 0===n?void 0:n.stepFinishAt)||""),timeDuration:(null===n||void 0===n?void 0:n.timeDuration)||60,onFinish:t})})]})}function Ln(e){var t=e.maxWidth,n=void 0===t?"sm":t,r=e.children;return Object(p.jsxs)(v.a,{height:"100vh",display:"flex",flexDirection:"column",children:[Object(p.jsx)(Nn,{}),Object(p.jsx)(m.a,{maxWidth:n,className:"full-height",children:r}),Object(p.jsx)(Pn,{})]})}var Pn=function(){var e=$t().session;return Object(p.jsx)(Et,{stepActual:null===e||void 0===e?void 0:e.actualStep,stepMax:null===e||void 0===e?void 0:e.totalPlayers})};function zn(){var e=Object(E.b)().enqueueSnackbar,t=_().player,n=Object(r.useState)(!1),i=Object(I.a)(n,2),a=i[0],o=i[1];return Object(p.jsx)(St,{onStart:function(){o(!0),D("session/album/next",{method:"POST",token:W()}).then((function(){return e("Album successfully started, wait 3 seconds before starting \ud83d\udcaa",{variant:"success"})}),(function(){return e("Sorry, an error occured \ud83d\ude15 [Session-POST]",{variant:"error"})})).finally((function(){return o(!1)}))},isLoading:a,startName:"book",player:t})}function Dn(e){var t,n=e.album;return n&&0!==n.length?Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",width:300,children:[Object(p.jsxs)(le.a,{variant:"h4",children:[null===(t=n[0].creator)||void 0===t?void 0:t.username,"'s album"]}),n.map((function(e){var t,n,r,i=e.type===Ut.Sentence;return Object(p.jsx)(v.a,{display:"flex",flexDirection:i?"row":"row-reverse",children:i?Object(p.jsx)(Pt,{username:null===(t=e.creator)||void 0===t?void 0:t.username,avatarUrl:Ie[Number(null===(n=e.creator)||void 0===n?void 0:n.avatarUrl)],children:e.text},e.id):Object(p.jsx)(Wt,{username:null===(r=e.creator)||void 0===r?void 0:r.username,src:e.drawImage},e.id)})}))]}):null}function Rn(){var e=$t().session,t=i.a.useState([]),n=Object(I.a)(t,2),r=n[0],a=n[1];return i.a.useEffect((function(){D("album/".concat((null===e||void 0===e?void 0:e.id)||1),{token:W()}).then((function(e){var t=e.reduce((function(e,t){return t.initiatorId?e[t.initiatorId]?(e[t.initiatorId].push(t),e):(e[t.initiatorId]=[t],e):e}),{}),n=[];Object.keys(t).forEach((function(e){return n.push(t[e])})),a(n)})).catch(alert)}),[null===e||void 0===e?void 0:e.id]),r.length>=1?Object(p.jsx)(v.a,{display:"flex",flexDirection:"column",style:{gap:"40px"},children:Object(p.jsx)(Dn,{album:r[0]})}):Object(p.jsx)(v.a,{children:Object(p.jsx)(B,{})})}var An=i.a.createContext({});function Wn(e){var t=e.children,n=i.a.useState({}),r=Object(I.a)(n,2),a=r[0],o=r[1],c=Y().websocket;i.a.useEffect((function(){function e(e){var t=M(e.data);if(t)switch(t.websocketEvent){case w.NewAlbumElement:if(!t.album)break;var n=t.album;o((function(e){if(!n.initiatorId)return e;var t=Object(C.a)({},e);return t[n.initiatorId]?t[n.initiatorId].push(n):t[n.initiatorId]=[n],t}))}}if(c)return c.addEventListener("message",e),function(){return c.removeEventListener("message",e)}}),[c]);var s={albums:a};return Object(p.jsx)(An.Provider,{value:s,children:t})}function Fn(){var e=ee().players;return Object(p.jsx)(Wn,{children:Object(p.jsxs)(Ln,{maxWidth:"sm",children:[Object(p.jsx)(Rn,{}),Object(p.jsxs)(Ee.a,{container:!0,spacing:2,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"space-between",children:[Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(it,{players:e})}),Object(p.jsx)(Rn,{}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(zn,{})})]})]})})}function Tn(){return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",children:[Object(p.jsx)(Qt,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(et.a,{title:"hotkey: C",children:Object(p.jsx)(an.a,{})})})}),Object(p.jsx)(en,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(et.a,{title:"CMD + Z",children:Object(p.jsx)(cn.a,{})})})}),Object(p.jsx)(tn,{children:Object(p.jsx)(Ot.a,{children:Object(p.jsx)(et.a,{title:"CMD + SHIFT + Z",children:Object(p.jsx)(ln.a,{})})})})]})}function Bn(){var e=ht(),t=e.lineType,n=e.setLineType,r=function(e){switch(e){case Rt.FILL:return mn.a;case Rt.LINE:return pn.a}return pn.a}(t);return i.a.useEffect((function(){function e(e){switch(e.key){case"b":n(Rt.LINE);break;case"f":n(Rt.FILL)}}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[n]),Object(p.jsxs)(hn,{circleBg:"none",spacing:1,action:function(e){return Object(p.jsx)(Ot.a,{children:e?Object(p.jsx)(ke.a,{}):Object(p.jsx)(et.a,{title:"Click to open",children:Object(p.jsx)(r,{})})})},children:[Object(p.jsx)(Ot.a,{onClick:function(){return n(Rt.LINE)},children:Object(p.jsx)(et.a,{title:"hotkey: B",children:Object(p.jsx)(pn.a,{})})}),Object(p.jsx)(Ot.a,{onClick:function(){return n(Rt.FILL)},children:Object(p.jsx)(et.a,{title:"hotkey: F",children:Object(p.jsx)(mn.a,{})})})]})}var Mn=n(76),Kn=n.n(Mn),Un=n(75),Gn=n.n(Un);function Hn(e){var t=e.size,n=e.color,i=(Object(Re.a)(h.breakpoints.up("sm")),$t()),a=i.currentElement,o=i.onSave,c=Boolean(!(null===a||void 0===a?void 0:a.finishAt)),s=Object(r.useState)(!1),l=Object(I.a)(s,2),u=l[0],d=l[1];return Object(p.jsx)(Yt,{color:n,disabled:!c,lineSize:t,children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",gridGap:8,alignItems:"center",children:[Object(p.jsx)(v.a,{maxWidth:512,width:"100%",children:Object(p.jsx)(mt,{disabled:!c})}),Object(p.jsxs)(v.a,{display:"flex",flexDirection:"row",gridGap:8,alignItems:"center",justifyContent:"space-between",width:"100%",children:[Object(p.jsx)(Tn,{}),Object(p.jsx)(Bn,{}),Object(p.jsx)(nn,{onSave:function(e){e&&(d(!0),o(e).then((function(){return d(!1)})))},children:Object(p.jsx)(se,{loading:u,startIcon:c?Object(p.jsx)(Gn.a,{style:{fontSize:32}}):Object(p.jsx)(Kn.a,{style:{fontSize:32}}),color:"primary",size:"medium",children:c?"Save":"Edit"})})]})]})})}function Jn(){var e=Object(Re.a)(h.breakpoints.up("sm")),t=Object(r.useState)(Je[5]),n=Object(I.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(8),s=Object(I.a)(c,2),l=s[0],u=s[1];return function(){var e=i.a.useRef(document.createElement("style"));i.a.useEffect((function(){var t=e.current;return t.innerHTML="body { overflow: hidden; }",document.getElementsByTagName("head")[0].appendChild(t),function(){document.getElementsByTagName("head")[0].removeChild(t)}}),[])}(),Object(p.jsx)(Ln,{maxWidth:"md",children:Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"center",gridGap:16,children:[Object(p.jsx)(v.a,{width:"100%",maxWidth:682,children:Object(p.jsx)(Yn,{})}),Object(p.jsxs)(v.a,{display:"flex",width:"100%",justifyContent:{xs:"center",sm:"auto"},flexDirection:{xs:"column",sm:"row"},gridGap:16,children:[Object(p.jsx)(v.a,{order:{xs:1,sm:0},children:Object(p.jsx)(Ye,{currentColor:a,onColorChange:function(e){return o(e)},flexDirection:e?"column":"row"})}),Object(p.jsx)(Hn,{size:l,color:a}),Object(p.jsx)(v.a,{order:{xs:2,sm:0},children:Object(p.jsx)(Xe,{currentSize:l,onSizeChange:function(e){return u(e)},flexDirection:e?"column":"row"})})]})]})})}function Yn(){var e,t=$t().currentElement;return Object(p.jsx)(Me,{directive:"Time to Draw",sentence:null===t||void 0===t||null===(e=t.parent)||void 0===e?void 0:e.text})}function qn(){var e=_().player,t=Object(E.b)().enqueueSnackbar,n=Object(r.useState)(!1),i=Object(I.a)(n,2),a=i[0],o=i[1];return Object(p.jsx)(St,{onStart:function(){o(!0),D("session",{method:"POST",token:W()}).then((function(){return t("Game successfully started \ud83d\udcaa",{variant:"success"})}),(function(){return t("Sorry, an error occured \ud83d\ude15 [Session-POST]",{variant:"error"})})).finally((function(){return o(!1)}))},isLoading:a,player:e})}function Xn(e){var t=e.open,n=e.username,r=e.onKick,i=e.onClose;return Object(p.jsxs)(ct.a,{fullWidth:!0,maxWidth:"xs",open:t,onClose:function(){return i()},children:[Object(p.jsxs)(st.a,{children:["Do you really want to kick ",n," ?"]}),Object(p.jsxs)(dt.a,{children:[Object(p.jsx)(ne.a,{onClick:function(){return i()},color:"secondary",children:"Cancel \ud83d\udc4b"}),Object(p.jsx)(ne.a,{onClick:function(){return r()},color:"secondary",children:"Kick \ud83e\udd2b"})]})]})}function _n(){var e=Object(De.a)(),t=Object(Re.a)(e.breakpoints.up("sm")),n=ee().players,r=_().player,a=Object(E.b)().enqueueSnackbar,o=i.a.useState(null),c=Object(I.a)(o,2),s=c[0],l=c[1];function u(e,t){l({id:e,name:t})}return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[(null===n||void 0===n?void 0:n.length)>0?t?Object(p.jsx)(Ne,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onKick:function(e,t){return u(e,t)}}):Object(p.jsx)(it,{players:n,playerId:null===r||void 0===r?void 0:r.id,isKickable:null===r||void 0===r?void 0:r.isOwner,onClick:function(e,t){return u(e,t)}}):Object(p.jsx)(B,{}),Object(p.jsx)(Xn,{open:Boolean(s),username:null===s||void 0===s?void 0:s.name,onKick:function(){s&&(!function(e){var t;D("player/players/".concat(e,"/kick"),{token:null===r||void 0===r||null===(t=r.token)||void 0===t?void 0:t.tokenKey,method:"PATCH"}).then((function(){return a("Player kicked \ud83d\ude0e",{variant:"success"})}),(function(){return a("Sorry, an error occured \ud83d\ude15 [kick-PATCH]",{variant:"error"})}))}(null===s||void 0===s?void 0:s.id),l(null))},onClose:function(){return l(null)}})]})}function $n(){var e=ee().players;return Object(p.jsx)(v.a,{pr:{xs:1,md:2},children:Object(p.jsx)(ue,{count:(null===e||void 0===e?void 0:e.length)||0,max:12})})}function Vn(){var e=ee(),t=e.room,n=e.wsState;return Object(p.jsxs)(v.a,{borderRadius:"0 4px 4px 0",minWidth:328,pl:2,height:"auto",display:"flex",flexDirection:"column",alignItems:{xs:"center",sm:"flex-start"},gridGap:24,children:[Object(p.jsx)(le.a,{variant:"h5",children:n}),Object(p.jsx)(Qe,{identifier:null===t||void 0===t?void 0:t.identifier})]})}var Zn=Object(f.a)((function(e){return{playersContainer:Object(de.a)({alignItems:"center",flexDirection:"column",gap:64},e.breakpoints.up("sm"),{alignItems:"flex-start",flexDirection:"row"}),container:{backgroundColor:Object(fe.c)(e.palette.background.default,.8)}}}));function Qn(){var e=Zn();return Object(p.jsxs)(v.a,{display:"flex",flexDirection:"column",height:"100vh",alignItems:"center",width:"100%",children:[Object(p.jsx)(v.a,{mb:3,width:"100%",display:"flex",justifyContent:"center",children:Object(p.jsx)(he,{width:32})}),Object(p.jsxs)(v.a,{display:"flex",justifyContent:"space-between",width:"100%",m:3,height:"100vh",alignItems:"center",flexDirection:"column",children:[Object(p.jsxs)(v.a,{display:"flex",className:e.container,flexDirection:"column",alignItems:"flex-end",width:"100%",children:[Object(p.jsx)($n,{}),Object(p.jsxs)(v.a,{display:"flex",justifyContent:"space-between",width:"100%",className:e.playersContainer,children:[Object(p.jsx)(Vn,{}),Object(p.jsx)(_n,{})]})]}),Object(p.jsx)(qn,{})]})]})}var er=["A samurai eating a kebab with samoura\xef sauce","A man walking on the ceiling","A gas station on fire","A T-Rex playing chess with monkeys","Someone watching himself on TV","Pinocchio but he's made of iron","A nice shark without teeth","A knight far too tall","A man chained by circus animals","A shipwreck on a chocolate island","An invasion of multicolored aliens","Spongebob becoming HandBob","New colony on Mars leaded by Musk","Sad jedi because the force is not with him","Godzilla VS King Kong","Woman pissed of by noisy neighbors","A world where sofas and humans are interchanged","Stitch meeting The Rock at Shrek's birthday"];var tr=Object(f.a)((function(e){return{button:Object(de.a)({marginLeft:e.spacing(1),fontSize:28},e.breakpoints.down("xs"),{width:"100%",marginLeft:e.spacing(0),marginTop:e.spacing(1)})}}));function nr(){var e=$t(),t=e.session,n=e.currentElement,r=e.onSave,a=i.a.useState(""),o=Object(I.a)(a,2),c=o[0],s=o[1],l=i.a.useState(!1),u=Object(I.a)(l,2),d=u[0],b=u[1],j=Boolean(!(null===n||void 0===n?void 0:n.finishAt)),h=i.a.useRef(Zt(er)).current,f=tr();return Ae({finishAt:new Date((null===t||void 0===t?void 0:t.stepFinishAt)||""),timeDuration:(null===t||void 0===t?void 0:t.timeDuration)||60,onFinish:function(){D("element/auto/".concat(null===n||void 0===n?void 0:n.id),{token:W(),method:"PATCH",data:{text:c||h}})},onFinishPercentage:98}),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ee.a,{item:!0,className:"full-width",children:Object(p.jsxs)(v.a,{display:"flex",width:"100%",flexDirection:{xs:"column",sm:"row"},children:[Object(p.jsx)(ve,{fullWidth:!0,disabled:!j,placeholder:(null===t||void 0===t?void 0:t.stepType)===Gt.Start?h:"Your description here",value:c,onChange:function(e){return s(e.target.value)}}),Object(p.jsx)(se,{className:f.button,color:"primary",loading:d,disabled:0===c.length,onClick:function(){b(!0),r(c).then((function(){return b(!1)}))},startIcon:j?Object(p.jsx)(Gn.a,{style:{fontSize:28}}):Object(p.jsx)(Kn.a,{style:{fontSize:28}}),children:j?"Save":"Edit"})]})})})}function rr(){return Object(p.jsx)(Ln,{maxWidth:"sm",children:Object(p.jsxs)(Ee.a,{container:!0,spacing:3,direction:"column",alignItems:"center",className:"full-height",wrap:"nowrap",justify:"center",children:[Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)("img",{src:zt,alt:"",width:256})}),Object(p.jsx)(Ee.a,{item:!0,children:Object(p.jsx)(le.a,{variant:"h4",children:"Start a story"})}),Object(p.jsx)(nr,{})]})})}var ir=Object(f.a)((function(e){return{width:Object(de.a)({width:552,height:"auto",minHeight:320},e.breakpoints.down("xs"),{width:"100%",minHeight:0})}}));function ar(){var e=ir();return Object(p.jsx)(Ln,{children:Object(p.jsx)(v.a,{maxWidth:600,alignItems:"center",height:"100%",children:Object(p.jsxs)(Ee.a,{container:!0,spacing:3,direction:"column",alignItems:"center",className:"full-height",justify:"center",children:[Object(p.jsx)(Ee.a,{item:!0,className:"full-width",children:Object(p.jsx)(Me,{directive:"Describe this scene"})}),Object(p.jsx)(Ee.a,{item:!0,className:"full-width",children:Object(p.jsx)(or,{className:e.width})}),Object(p.jsx)(nr,{})]})})})}function or(e){var t=e.className,n=$t().currentElement;return Object(p.jsx)(Dt,{src:null===n||void 0===n?void 0:n.parent.drawImage,className:t})}var cr=k.a;function sr(){return Object(p.jsx)(O,{children:Object(p.jsx)(cr,{children:Object(p.jsxs)(S.c,{children:[Object(p.jsx)(S.a,{path:"/join/:identifier",component:En}),Object(p.jsx)(S.a,{path:"/start",component:rr}),Object(p.jsx)(S.a,{path:"/r",component:lr}),Object(p.jsx)(S.a,{path:"/draw",component:Jn}),Object(p.jsx)(S.a,{path:"/t",component:wn}),Object(p.jsx)(S.a,{path:"/home",component:En}),Object(p.jsx)(S.a,{path:"/",component:yn})]})})})}function lr(){return Object(p.jsx)(J,{children:Object(p.jsx)(X,{children:Object(p.jsx)(Q,{children:Object(p.jsxs)(S.c,{children:[Object(p.jsx)(S.a,{path:"/r/lobby",component:Qn}),Object(p.jsx)(S.a,{path:"/r",component:ur})]})})})})}function ur(){return Object(p.jsx)(_t,{children:Object(p.jsxs)(S.c,{children:[Object(p.jsx)(S.a,{path:"/r/start",component:rr}),Object(p.jsx)(S.a,{path:"/r/draw",component:Jn}),Object(p.jsx)(S.a,{path:"/r/write",component:ar}),Object(p.jsx)(S.a,{path:"/r/book",component:Fn}),Object(p.jsx)(S.a,{path:"/r/lobby",component:Qn})]})})}var dr=function(){return Object(p.jsx)(E.a,{anchorOrigin:{vertical:"top",horizontal:"right"},preventDuplicate:!0,maxSnack:3,children:Object(p.jsxs)(c.a,{theme:h,children:[Object(p.jsx)(s.a,{}),Object(p.jsx)(sr,{})]})})};n(150);o.a.render(Object(p.jsx)(dr,{}),document.getElementById("root"))},59:function(e){e.exports=JSON.parse('[{"id":1,"username":"jeanmich","avatarUrl":"0","isOwner":true,"isPlaying":true,"createdAt":"","roomId":1},{"id":2,"username":"Xx_plao","avatarUrl":"1","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":3,"username":"AAAAAAHHHH","avatarUrl":"2","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":4,"username":"Melvyn","avatarUrl":"3","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":5,"username":"Ana","avatarUrl":"4","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":6,"username":"Alex","avatarUrl":"5","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1},{"id":7,"username":"Luca","avatarUrl":"6","isOwner":false,"isPlaying":true,"createdAt":"","roomId":1}]')}},[[151,1,2]]]);
//# sourceMappingURL=main.d9aa103e.chunk.js.map